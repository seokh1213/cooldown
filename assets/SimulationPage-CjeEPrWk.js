import{r as d,j as e}from"/cooldown/assets/react-vendor-D9kQI8Cv.js";import{c as L,u as $,p as O,e as B,t as U,i as V}from"/cooldown/assets/index-B5YepZjb.js";import{C as A}from"/cooldown/assets/card-b14su5Sc.js";import{I as P,T as _,a as z,b as k,c as w}from"/cooldown/assets/tabs-Cyl1d_AR.js";import"./lucide-icons-QKYEtl3H.js";const R=d.forwardRef(({className:i,children:a,...s},n)=>e.jsx("select",{className:L("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),ref:n,...s,children:a}));R.displayName="Select";function G(i,a){if(!i.stats)return null;const s=i.stats,n=Math.min(Math.max(a,1),18),l=n-1;return{level:n,health:(s.hp??0)+(s.hpperlevel??0)*l,mana:(s.mp??0)+(s.mpperlevel??0)*l,armor:(s.armor??0)+(s.armorperlevel??0)*l,magicResist:(s.spellblock??0)+(s.spellblockperlevel??0)*l,attackDamage:(s.attackdamage??0)+(s.attackdamageperlevel??0)*l,movespeed:s.movespeed??0}}function J(i,a){let s={...i};for(const n of a){const l=n.stats;if(l)for(const[f,r]of Object.entries(l))switch(f){case"FlatHPPoolMod":s.health+=r;break;case"FlatMPPoolMod":s.mana+=r;break;case"FlatPhysicalDamageMod":s.attackDamage+=r;break;case"FlatArmorMod":s.armor+=r;break;case"FlatSpellBlockMod":s.magicResist+=r;break;case"FlatMovementSpeedMod":s.movespeed+=r;break}}return s}function K(i){let a=0;for(const s of i){const n=s.stats;n&&typeof n.AbilityHaste=="number"&&(a+=n.AbilityHaste)}return a}function X(i,a,s){if(!i.spells)return[];const n=s>0?1+s/100:1;return i.spells.map(l=>{const f=l.cooldown??[],r=n>0?f.map(x=>typeof x=="number"?x/n:x):f.map(x=>x);return{id:l.id,name:l.name,maxrank:l.maxrank,cooldowns:f,cooldownsWithAbilityHaste:r}})}function ae({lang:i,version:a,championList:s}){var F;const{t:n}=$(),[l,f]=d.useState(""),[r,x]=d.useState(null),[g,E]=d.useState(18),[j,M]=d.useState([]),[v,W]=d.useState([]),[D,b]=d.useState(null),[N,Q]=d.useState("QWER"),q=d.useMemo(()=>s??[],[s]);d.useEffect(()=>{if(!a||!l){x(null),b(null);return}let t=!1;return O(a,i,l).then(m=>{t||x(m)}).catch(()=>{t||x(null)}),B(l,a).then(m=>{t||b(m.spellDataMap)}).catch(()=>{t||b(null)}),()=>{t=!0}},[a,i,l]),d.useEffect(()=>{if(!a)return;let t=!1;return U(a,i).then(m=>{if(!t){const u=m.filter(o=>{var T;return!(!o.maps||!o.maps[11]||!((T=o.tags)==null?void 0:T.includes("Trinket"))&&o.gold&&o.gold.purchasable===!1||o.inStore===!1||o.cdragon&&(o.cdragon.inStore===!1||o.cdragon.displayInItemSets===!1))});M(u)}}).catch(()=>{t||M([])}),()=>{t=!0}},[a,i]);const y=d.useMemo(()=>r?G(r,g):null,[r,g]),p=d.useMemo(()=>j.filter(t=>v.includes(t.id)),[j,v]),c=d.useMemo(()=>y?J(y,p):null,[y,p]),I=d.useMemo(()=>c?c.attackDamage*.7:null,[c]),h=d.useMemo(()=>{if(!c||!r)return null;const t=N.replace(/[^QWERqwer]/g,"").toUpperCase();if(!t)return null;const m=c.attackDamage*1.2,u=t.length,o=m*u;return{sequence:t,estimatedHits:u,estimatedDamage:o}},[c,r,N]),S=d.useMemo(()=>K(p),[p]),C=d.useMemo(()=>r?X(r,D,S):[],[r,D,S]);return a?e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 md:px-6 lg:px-8 py-8 md:py-10",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold tracking-tight",children:n.pages.simulation.title}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n.pages.simulation.description})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-[minmax(0,1.1fr)_minmax(0,1fr)]",children:[e.jsxs(A,{className:"p-4 space-y-4 bg-card/60 border-border/70",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"챔피언"}),e.jsxs(R,{value:l,onChange:t=>f(t.target.value),className:"h-9 text-sm",children:[e.jsx("option",{value:"",children:"선택하세요"}),q.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"레벨 (1~18)"}),e.jsx(P,{type:"number",min:1,max:18,value:g,onChange:t=>E(Number.isNaN(Number(t.target.value))?1:Number(t.target.value)),className:"h-9 w-24 text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"아이템 (최대 6개, 단순 스탯 합산)"}),e.jsx(V,{className:"h-56 rounded-md border bg-background/60",children:e.jsx("div",{className:"p-2 space-y-1",children:j.slice(0,200).map(t=>{const m=v.includes(t.id),u=!!t.gold&&t.gold.total>0&&t.gold.purchasable!==!1&&t.inStore!==!1;return e.jsxs("button",{type:"button",onClick:()=>{W(o=>m?o.filter(H=>H!==t.id):o.length>=6?o:[...o,t.id])},className:`w-full flex items-center gap-2 rounded px-2 py-1.5 text-left text-[11px] transition-colors ${m?"bg-primary/10 text-primary border border-primary/40":"hover:bg-muted/60 text-foreground/80"}`,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${a}/img/item/${t.id}.png`,alt:t.name,className:"w-6 h-6 rounded-sm border border-border/60 bg-black/40"}),e.jsx("span",{className:"flex-1 truncate",children:t.name}),u&&e.jsx("span",{className:"text-[10px] text-amber-600 dark:text-amber-400 font-semibold",children:t.gold.total.toLocaleString()})]},t.id)})})}),p.length>0&&e.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["선택된 아이템:"," ",p.map(t=>t.name).join(", ")]})]})]}),e.jsx(A,{className:"p-4 bg-card/60 border-border/70 min-h-[260px]",children:e.jsxs(_,{defaultValue:"stats",className:"w-full",children:[e.jsxs(z,{className:"inline-flex h-9 items-center justify-start rounded-lg bg-muted/60 p-1 mb-3 gap-1",children:[e.jsx(k,{value:"stats",className:"px-3 py-1.5 text-xs",children:"최종 스탯"}),e.jsx(k,{value:"dps",className:"px-3 py-1.5 text-xs",children:"간단 DPS"}),e.jsx(k,{value:"skills",className:"px-3 py-1.5 text-xs",children:"스킬 쿨타임"})]}),e.jsx(w,{value:"stats",className:"mt-0",children:c?e.jsxs("div",{className:"grid grid-cols-2 gap-y-1.5 gap-x-4 text-xs",children:[e.jsx("div",{className:"text-muted-foreground",children:"레벨"}),e.jsx("div",{className:"text-right",children:c.level}),e.jsx("div",{className:"text-muted-foreground",children:"체력"}),e.jsx("div",{className:"text-right",children:Math.round(c.health)}),e.jsx("div",{className:"text-muted-foreground",children:"마나"}),e.jsx("div",{className:"text-right",children:Math.round(c.mana)}),e.jsx("div",{className:"text-muted-foreground",children:"공격력"}),e.jsx("div",{className:"text-right",children:c.attackDamage.toFixed(1)}),e.jsx("div",{className:"text-muted-foreground",children:"방어력"}),e.jsx("div",{className:"text-right",children:c.armor.toFixed(1)}),e.jsx("div",{className:"text-muted-foreground",children:"마법 저항력"}),e.jsx("div",{className:"text-right",children:c.magicResist.toFixed(1)}),e.jsx("div",{className:"text-muted-foreground",children:"이동 속도"}),e.jsx("div",{className:"text-right",children:c.movespeed.toFixed(0)})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"챔피언과 레벨을 선택하면 최종 스탯이 표시됩니다."})}),e.jsx(w,{value:"dps",className:"mt-0",children:!c||I==null?e.jsx("div",{className:"text-sm text-muted-foreground",children:"챔피언과 레벨을 선택하면 평타 기준 간단 DPS를 볼 수 있습니다."}):e.jsxs("div",{className:"space-y-3 text-xs",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"평타 공격력"}),e.jsx("div",{children:c.attackDamage.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"가정 공격 속도"}),e.jsx("div",{children:"0.70 / s"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"근사 DPS (평타만)"}),e.jsx("div",{children:I.toFixed(1)})]})]}),e.jsxs("div",{className:"border-t border-border/60 pt-2 space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"스킬 콤보 (예: QWER, QQW)"}),e.jsx(P,{value:N,onChange:t=>Q(t.target.value),className:"h-7 w-28 text-[11px] px-2"})]}),h?e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"입력 콤보"}),e.jsx("div",{children:h.sequence})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"스킬 횟수"}),e.jsx("div",{children:h.estimatedHits})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"아주 단순한 콤보 피해 (평타기반 근사)"}),e.jsx("div",{children:(F=h.estimatedDamage)==null?void 0:F.toFixed(1)})]})]}):e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"QWER 문자로 콤보를 입력하면 아주 단순한 근사 콤보 피해를 보여줍니다."})]}),e.jsx("p",{className:"mt-1 text-[11px] text-muted-foreground",children:"※ 실제 인게임 공식과 공속/치명타/온히트 및 스킬 계수는 훨씬 복잡하므로, 여기서는 단순 참고용 수치만 제공합니다."})]})}),e.jsx(w,{value:"skills",className:"mt-0",children:r?C.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"스킬 정보가 없습니다."}):e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx("div",{className:"text-[11px] text-muted-foreground mb-1",children:"아이템에서 얻는 스킬 가속(Ability Haste)을 반영한 쿨타임입니다."}),e.jsx("div",{className:"grid grid-cols-1 gap-1",children:C.map((t,m)=>e.jsxs("div",{className:"flex flex-col rounded border border-border/60 bg-background/60 px-2 py-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground",children:["Q","W","E","R"][m]??""}),e.jsx("span",{className:"text-xs font-medium",children:t.name??t.id})]}),e.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["Haste: ",S]})]}),e.jsxs("div",{className:"mt-1.5 grid grid-cols-2 gap-x-2 gap-y-0.5",children:[e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"기본 쿨타임"}),e.jsx("div",{className:"text-[11px] text-right",children:t.cooldowns.join(" / ")}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"가속 적용"}),e.jsx("div",{className:"text-[11px] text-right",children:t.cooldownsWithAbilityHaste.map(u=>typeof u=="number"?u.toFixed(2):u).join(" / ")})]})]},t.id))})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"챔피언을 선택하면 스킬 쿨타임을 확인할 수 있습니다."})})]})})]})]}):e.jsx("div",{className:"w-full max-w-5xl mx-auto px-4 md:px-6 lg:px-8 py-8 md:py-10",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:n.championSelector.loading})})}export{ae as default};
