import{r as d,j as e}from"/cooldown/assets/react-vendor-CopeUkDP.js";import{m as q,w as p,u as W,s as z,p as G,j as X,D as K,c as Q,x as U,d as Y,e as J,B as Z,S as ee}from"/cooldown/assets/index-CAbGNOLH.js";import{C as E}from"/cooldown/assets/useDebouncedValue-CcVv3EGC.js";import{C as te}from"/cooldown/assets/ChampionSelector-vxOmNSXG.js";import"./lucide-icons-DTvcjo7T.js";const $=d.forwardRef(({className:c,children:o,...a},s)=>e.jsx("select",{className:q("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",c),ref:s,...a,children:o}));$.displayName="Select";function ae(c,o){if(!c.stats)return null;const a=c.stats,s=Math.min(Math.max(o,1),18),n=s-1;return{level:s,health:(a.hp??0)+(a.hpperlevel??0)*n,mana:(a.mp??0)+(a.mpperlevel??0)*n,armor:(a.armor??0)+(a.armorperlevel??0)*n,magicResist:(a.spellblock??0)+(a.spellblockperlevel??0)*n,attackDamage:(a.attackdamage??0)+(a.attackdamageperlevel??0)*n,movespeed:a.movespeed??0}}function se(c,o){let a={...c};for(const s of o){const n=s.stats;if(!(!n||n.length===0))for(const m of n){const{stat:r,value:l,valueType:b}=m;if(b==="percent")switch(r){case p.MAX_HEALTH:a.health*=1+l/100;break;case p.MAX_MANA:a.mana*=1+l/100;break;case p.ARMOR:a.armor*=1+l/100;break;case p.MAGIC_RESIST:a.magicResist*=1+l/100;break;case p.MOVE_SPEED:a.movespeed*=1+l/100;break;case p.ATTACK_DAMAGE:a.attackDamage*=1+l/100;break}else switch(r){case p.MAX_HEALTH:a.health+=l;break;case p.MAX_MANA:a.mana+=l;break;case p.ARMOR:a.armor+=l;break;case p.MAGIC_RESIST:a.magicResist+=l;break;case p.ATTACK_DAMAGE:a.attackDamage+=l;break;case p.MOVE_SPEED:a.movespeed+=l;break}}}return a}function le(c){let o=0;for(const a of c){const s=a.stats;if(s)for(const n of s)n.stat===p.ABILITY_HASTE&&n.valueType==="flat"&&(o+=n.value)}return o}function re(c,o,a){if(!c.spells)return[];const s=a>0?1+a/100:1;return c.spells.map(n=>{const m=n.cooldown??[],r=s>0?m.map(l=>typeof l=="number"?l/s:l):m.map(l=>l);return{id:n.id,name:n.name,maxrank:n.maxrank,cooldowns:m,cooldownsWithAbilityHaste:r}})}function ne(c,o,a,s){if(!c)return{baseDamage:null,ratio:null,totalDamage:null};const n=String(o),m=c[n];if(!m||!m.DataValues)return{baseDamage:null,ratio:null,totalDamage:null};const r=m.DataValues,l=Array.isArray(r.BaseDamage)?r.BaseDamage:null,b=Math.max(0,Math.min(a-1,l?l.length-1:a-1));let k=null;l&&typeof l[b]=="number"&&(k=l[b]);let f=null;const h=m.mSpellCalculations,S=(h==null?void 0:h.TotalDamage)||(h==null?void 0:h.SingleFireDamage)||Object.values(h??{})[0];if(S&&Array.isArray(S.mFormulaParts)){for(const j of S.mFormulaParts)if(j.__type==="StatByCoefficientCalculationPart"&&typeof j.mCoefficient=="number")f=(f??0)+j.mCoefficient;else if(j.__type==="StatByNamedDataValueCalculationPart"&&typeof j.mDataValue=="string"){const D=r[j.mDataValue];Array.isArray(D)&&typeof D[b]=="number"&&(f=(f??0)+D[b])}}const M=f!=null?f*s.attackDamage:null,y=k!=null||M!=null?(k??0)+(M??0):null;return{baseDamage:k,ratio:f,totalDamage:y}}function oe(c,o,a,s){if(!c||!o)return null;const n=a.replace(/[^QWERqwer]/g,"").toUpperCase();if(!n)return null;const m=o.attackDamage*1.2,r=n.length,l=m*r;return{sequence:n,estimatedHits:r,estimatedDamage:l}}function C({label:c,value:o,base:a,precision:s=0}){const n=l=>s>0?l.toFixed(s):Math.round(l).toString(),m=o-a,r=Math.abs(m)>.01;return e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-[11px] text-muted-foreground",children:c}),e.jsxs("span",{className:"text-[11px] font-medium",children:[n(o),r&&e.jsxs("span",{className:`ml-1 ${m>=0?"text-emerald-400":"text-rose-400"}`,children:["(",m>=0?"+":"",n(m),")"]})]})]})}function be({lang:c,version:o,championList:a}){const{t:s}=W(),[n,m]=d.useState(""),[r,l]=d.useState(null),[b,k]=d.useState(18),[f,h]=d.useState([]),[S,M]=d.useState(()=>Array(6).fill(null)),[y,j]=d.useState(null),[D,ie]=d.useState("QWER"),[L,R]=d.useState(!1),[ce,de]=d.useState(0),[B,I]=d.useState(!1),[A,T]=d.useState(null),F=d.useMemo(()=>a??[],[a]);d.useEffect(()=>{if(!o||!n){l(null),j(null);return}let t=!1;return z(o,c,n).then(i=>{t||l(i)}).catch(()=>{t||l(null)}),G(n,o).then(i=>{t||j(i.spellDataMap)}).catch(()=>{t||j(null)}),()=>{t=!0}},[o,c,n]),d.useEffect(()=>{if(!o)return;let t=!1;return X(o,c).then(i=>{if(!t){const u=i.filter(g=>{const N=g.tags||[],_=g.priceTotal??0;return!(!(N.includes("Trinket")||N.includes("Consumable"))&&_<=0||g.purchasable===!1||g.inStore===!1||g.displayInItemSets===!1)});h(u)}}).catch(()=>{t||h([])}),()=>{t=!0}},[o,c]);const v=d.useMemo(()=>r?ae(r,b):null,[r,b]),P=d.useMemo(()=>S.map(t=>t?f.find(i=>i.id===t)??null:null),[f,S]),w=d.useMemo(()=>P.filter(t=>t!==null),[P]),x=d.useMemo(()=>v?se(v,w):null,[v,w]),O=d.useMemo(()=>x?x.attackDamage*.7:null,[x]);d.useMemo(()=>oe(r,x,D),[r,x,D,y]);const H=d.useMemo(()=>le(w),[w]),V=d.useMemo(()=>r?re(r,y,H):[],[r,y,H]);return o?e.jsxs("div",{className:"w-full max-w-6xl mx-auto px-4 md:px-6 lg:px-8 py-8 md:py-10",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold tracking-tight",children:s.pages.simulation.title}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:s.pages.simulation.description})]}),e.jsx(E,{className:"p-4 md:p-6 bg-card/60 border-border/70 space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,1.2fr)_minmax(0,1.3fr)]",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4 md:gap-6",children:[e.jsx("button",{type:"button",onClick:()=>R(!0),className:"relative mx-auto md:mx-0 w-32 h-32 sm:w-36 sm:h-36 rounded-full border-4 border-border/80 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-700 flex items-center justify-center overflow-hidden shadow-lg",children:r?e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${o}/img/champion/${r.id}.png`,alt:r.name,className:"w-full h-full object-cover"}):e.jsxs("span",{className:"text-[11px] sm:text-xs font-semibold tracking-[0.08em] text-muted-foreground uppercase text-center px-4",children:["Champion",e.jsx("br",{}),"Placeholder"]})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-semibold tracking-[0.18em] text-muted-foreground uppercase",children:r?"Stats":"Champion Stats"}),r&&e.jsx("div",{className:"mt-1 text-sm font-semibold",children:r.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[11px] text-muted-foreground",children:s.common.level}),e.jsx($,{value:String(b),onChange:t=>{const i=Number(t.target.value);Number.isNaN(i)||k(Math.min(Math.max(i,1),18))},className:"h-8 w-18 text-xs px-2",children:Array.from({length:18}).map((t,i)=>e.jsx("option",{value:i+1,children:i+1},i+1))})]})]}),e.jsx("div",{className:"border-t border-border/60 pt-3",children:!x||!v?e.jsxs("div",{className:"space-y-1.5 text-[11px] text-muted-foreground",children:[e.jsx("div",{children:s.pages.simulation.statsPlaceholderLine1}),e.jsx("div",{children:s.pages.simulation.statsPlaceholderLine2})]}):e.jsxs("div",{className:"space-y-1.5 text-[11px]",children:[e.jsx(C,{label:s.stats.health,value:x.health,base:v.health}),e.jsx(C,{label:s.stats.attackDamage,value:x.attackDamage,base:v.attackDamage}),e.jsx(C,{label:s.stats.armor,value:x.armor,base:v.armor}),e.jsx(C,{label:s.stats.magicResist,value:x.magicResist,base:v.magicResist}),e.jsx(C,{label:s.stats.movespeed,value:x.movespeed,base:v.movespeed,precision:0}),O!=null&&e.jsx(C,{label:s.pages.simulation.aaDpsLabel,value:O,base:O,precision:1})]})})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-[11px] font-semibold tracking-[0.18em] text-muted-foreground uppercase",children:s.pages.simulation.itemsTitle}),e.jsxs("div",{className:"text-[10px] text-muted-foreground",children:[w.length," / 6"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:Array.from({length:6}).map((t,i)=>{const u=P[i];return e.jsx("div",{className:"flex flex-col items-center gap-2",children:e.jsx("button",{type:"button",className:"w-16 h-16 sm:w-18 sm:h-18 rounded-md border border-border/70 bg-background/40 flex items-center justify-center overflow-hidden shadow-sm",onClick:()=>{T(i),I(!0)},children:u?e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${o}/img/item/${u.id}.png`,alt:u.name,className:"w-full h-full object-cover"}):e.jsxs("span",{className:"text-[9px] text-muted-foreground text-center px-1",children:[s.pages.simulation.itemPlaceholderLine1,e.jsx("br",{}),s.pages.simulation.itemPlaceholderLine2]})})},i)})})]})]})}),e.jsxs(E,{className:"mt-6 bg-card/60 border-border/70",children:[e.jsx("div",{className:"border-b border-border/70 px-4 py-3",children:e.jsx("div",{className:"text-[11px] font-semibold tracking-[0.18em] text-muted-foreground uppercase",children:"Skills"})}),e.jsx("div",{className:"px-4 py-4 space-y-3",children:["Q","W","E","R"].map((t,i)=>{var _;const u=(_=r==null?void 0:r.spells)==null?void 0:_[i],g=V[i],N=r&&x?ne(y,i,(g==null?void 0:g.maxrank)??(u==null?void 0:u.maxrank)??1,x):null;return e.jsxs("div",{className:"flex items-start gap-3 border border-border/50 rounded-md px-3 py-2 bg-background/40",children:[e.jsx("div",{className:"w-8 h-8 rounded-sm border border-border/70 bg-slate-900 flex items-center justify-center text-xs font-bold text-amber-300",children:t}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("div",{className:"text-[11px] font-semibold",children:u?`${t}: ${u.name}`:`${t}: Skill Description Placeholder`}),e.jsx("div",{className:"text-[11px] text-muted-foreground leading-snug",children:u?u.description:"Skill Description Placeholder"}),N&&N.totalDamage!=null&&e.jsxs("div",{className:"text-[10px] text-emerald-400 mt-1",children:["예상 피해 (아이템/레벨 반영):"," ",N.totalDamage.toFixed(1)]})]})]},t)})})]}),e.jsxs("div",{className:"mt-6 grid gap-4 md:grid-cols-[minmax(0,1.1fr)_minmax(0,1.1fr)]",children:[e.jsxs(E,{className:"p-4 bg-card/60 border-border/70 space-y-3",children:[e.jsx("div",{className:"text-[11px] font-semibold tracking-[0.18em] text-muted-foreground uppercase",children:"Summoner Spells"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-md border border-border/70 bg-background/40"}),e.jsx("div",{className:"w-10 h-10 rounded-md border border-border/70 bg-background/40"})]}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"추후 소환사 주문 시뮬레이션을 여기에 추가할 수 있습니다."})]}),e.jsxs(E,{className:"p-4 bg-card/60 border-border/70 space-y-3",children:[e.jsx("div",{className:"text-[11px] font-semibold tracking-[0.18em] text-muted-foreground uppercase",children:"Runes"}),e.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:6}).map((t,i)=>e.jsx("div",{className:"w-8 h-8 rounded-full border border-border/70 bg-background/40"},i))}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"룬 시뮬레이션을 추가할 때 이 영역을 재사용할 수 있습니다."})]})]}),e.jsx(te,{championList:F,selectedChampions:r&&a?a.filter(t=>t.id===r.id):[],onSelect:t=>{m(t.id)},onClose:()=>R(!1),open:L,onOpenChange:R}),e.jsx(K,{open:B,onOpenChange:t=>{I(t),t||T(null)},children:e.jsxs(Q,{className:"max-w-xl",children:[e.jsxs(U,{children:[e.jsx(Y,{className:"text-base",children:s.pages.simulation.itemModalTitle}),e.jsx(J,{className:"text-xs",children:s.pages.simulation.itemModalDescription})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-[11px] text-muted-foreground",children:s.pages.simulation.itemModalHint}),e.jsx(Z,{type:"button",variant:"ghost",size:"sm",className:"h-7 px-2 text-[11px]",onClick:()=>{A!=null&&(M(t=>{const i=[...t];return i[A]=null,i}),I(!1),T(null))},children:s.pages.simulation.clearItemSlot})]}),e.jsx(ee,{className:"h-80 rounded-md border bg-background/60",children:e.jsx("div",{className:"p-2 space-y-1",children:f.slice(0,300).map(t=>{const i=A!=null&&S[A]===t.id,u=(t.priceTotal??0)>0;return e.jsxs("button",{type:"button",onClick:()=>{A!=null&&(M(g=>{const N=[...g];return N[A]=t.id,N}),I(!1),T(null))},className:`w-full flex items-center gap-2 rounded px-2 py-1.5 text-left text-[11px] transition-colors ${i?"bg-primary/10 text-primary border border-primary/40":"hover:bg-muted/60 text-foreground/80"}`,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${o}/img/item/${t.id}.png`,alt:t.name||t.id,className:"w-6 h-6 rounded-sm border border-border/60 bg-black/40"}),e.jsx("span",{className:"flex-1 truncate",children:t.name||t.id}),u&&e.jsx("span",{className:"text-[10px] text-amber-600 dark:text-amber-400 font-semibold",children:t.priceTotal.toLocaleString()})]},t.id)})})})]})]})})]}):e.jsx("div",{className:"w-full max-w-5xl mx-auto px-4 md:px-6 lg:px-8 py-8 md:py-10",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:s.championSelector.loading})})}export{be as default};
