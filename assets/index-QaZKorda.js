import{r as h,j as e,d as O,f as tr,O as rr,g as sr,z as lt,A as we,E as ot,K as it,F as ct,G as dt,I as ut,J as mt,L as ft,M as ye,N as Se,Q as Et,U as nr}from"/cooldown/assets/react-vendor-D9kQI8Cv.js";import{I as Me,C as xt,a as Lt,T as ar,b as lr,c as Re}from"/cooldown/assets/tabs-ZHWDPq3g.js";import{c as F,B as oe,u as Y,g as Je,C as se,D as Oe,V as Ke,a as He,b as Ue,d as je,l as K,e as or,f as Ee,P as ir,S as jt,h as pt,i as pe,T as rt,j as st,k as nt,m as Fe,r as ce,n as Ie,o as Be,p as vt,q as _e,s as cr,t as dr,v as ur,w as Ye}from"/cooldown/assets/index-BlMM4xVD.js";import{e as mr,f as $e,X as ke,S as De,g as Ge,h as We,T as Nt,R as fr}from"/cooldown/assets/lucide-icons-QKYEtl3H.js";const he=h.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:F("w-full caption-bottom text-sm",t),...r})}));he.displayName="Table";const ge=h.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:F("[&_tr]:border-b",t),...r}));ge.displayName="TableHeader";const be=h.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:F("[&_tr:last-child]:border-0",t),...r}));be.displayName="TableBody";const xr=h.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:F("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));xr.displayName="TableFooter";const J=h.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:F("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));J.displayName="TableRow";const G=h.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:F("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r}));G.displayName="TableHead";const z=h.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:F("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r}));z.displayName="TableCell";const pr=h.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:F("mt-4 text-sm text-muted-foreground",t),...r}));pr.displayName="TableCaption";function hr({className:t,...r}){return e.jsx("div",{className:F("animate-pulse rounded-md bg-muted",t),...r})}function gr({addChampion:t,data:r,name:s,thumbnailSrc:n,selected:a}){const[o,d]=h.useState(!1),[i,x]=h.useState(!1),[f,b]=h.useState(a);h.useEffect(()=>{b(a)},[a]);const w=h.useCallback(y=>{y.preventDefault(),y.stopPropagation(),b(j=>!j),t(r)},[t,r]),C=h.useCallback(()=>{d(!0)},[]),l=h.useCallback(()=>{x(!0)},[]);return e.jsxs("div",{className:"flex flex-col items-center justify-center m-1 h-fit",children:[e.jsxs(oe,{variant:"ghost",className:"cursor-pointer rounded-full shrink-0 p-0 h-auto w-auto hover:bg-transparent relative touch-manipulation",onClick:w,"aria-label":a?`Deselect ${s}`:`Select ${s}`,"aria-pressed":a,children:[e.jsxs("div",{className:"relative w-12 h-12 md:w-14 md:h-14 shrink-0 overflow-hidden rounded-full",children:[!o&&!i&&e.jsx(hr,{className:"absolute inset-0 rounded-full"}),!o&&!i&&e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-muted via-muted/80 to-muted/60 blur-sm"}),e.jsx("img",{className:F("absolute inset-0 w-full h-full rounded-full bg-black/5 border-0 box-border transition-all duration-200 ease-out object-cover",!a&&!f&&"hover:scale-105",o?"opacity-100":"opacity-0"),src:n,alt:s,loading:"lazy",decoding:"async",width:"56",height:"56",onLoad:C,onError:l}),(f||a)&&e.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{boxShadow:"inset 0 0 0 2px hsl(var(--primary)), 0 0 0 3px hsl(var(--primary) / 0.3)"}})]}),(f||a)&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 md:w-5 md:h-5 bg-primary rounded-full flex items-center justify-center pointer-events-none z-20 shadow-lg border-2 border-background",children:e.jsx(mr,{className:"w-2.5 h-2.5 md:w-3 md:h-3 text-primary-foreground stroke-[3]"})})]}),e.jsx("div",{className:"text-xs md:text-sm whitespace-nowrap mt-0.5",children:s})]})}const wt=O.memo(gr);function br(t,r){const{lang:s}=Y();return h.useMemo(()=>{if(!t)return[];if(!r)return t;const a=Je(r,s);return t.filter(o=>a.some(d=>{const i=d.toLowerCase();return!!(o.name.toLowerCase().includes(i)||o.hangul&&o.hangul.toLowerCase().includes(i)||o.id.toLowerCase().includes(i)||s==="ko_KR"&&(Je(o.name,s).some(f=>f.toLowerCase().includes(i))||o.hangul&&Je(o.hangul,s).some(b=>b.toLowerCase().includes(i))))}))},[t,r,s])}const yt="championSelectorScrollPosition";function jr(t,r,s){h.useEffect(()=>{if(!r||!s)return;const n=()=>{if(t.current){const a=sessionStorage.getItem(yt);if(a){const o=parseInt(a,10);t.current.scrollTop=o}}};n(),requestAnimationFrame(()=>{n()}),setTimeout(()=>{n()},200)},[r,s,t]),h.useEffect(()=>{const n=t.current;if(!n||!r||!s)return;let a;const o=()=>{clearTimeout(a),a=setTimeout(()=>{sessionStorage.setItem(yt,n.scrollTop.toString())},100)};return n.addEventListener("scroll",o,{passive:!0}),()=>{clearTimeout(a),n.removeEventListener("scroll",o)}},[r,s,t])}function vr({championList:t,selectedChampions:r,onSelect:s,onClose:n,slotIndex:a,open:o,onOpenChange:d,vsMode:i}){const{t:x}=Y(),[f,b]=h.useState(!1),w=o!==void 0,C=w?!!o:f,l=w?d||(()=>{}):b,[y,j]=h.useState(""),[c,u]=h.useState(-1),m=h.useRef(null),S=h.useRef(null),g=h.useRef(null),N=n!==void 0,v=n||(()=>{}),T=br(t,y),V=h.useMemo(()=>new Set(r.map(k=>k.id)),[r]),L=h.useMemo(()=>i&&(r.find(k=>k.id===i.currentChampionId)||(t==null?void 0:t.find(k=>k.id===i.currentChampionId)))||null,[i,r,t]),p=h.useMemo(()=>i?T.filter(k=>k.id!==i.currentChampionId):T,[T,i]),R=h.useCallback(k=>{const P=k.target;m.current&&!m.current.contains(P)&&(l(!1),j(""),u(-1))},[l]);h.useEffect(()=>{if(C&&!N)return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[C,R,N]);const E=h.useCallback(k=>{l(k),k||(j(""),u(-1),n&&n()),d&&d(k)},[n,d]),I=h.useCallback(k=>{s(k),N?u(-1):(l(!1),u(-1),document.body.style.overflow="",v())},[s,n,N]),B=h.useCallback(k=>{if(!(!C&&!N||!t))if(k.key==="ArrowDown")k.preventDefault(),u(P=>P<T.length-1?P+1:P);else if(k.key==="ArrowUp")k.preventDefault(),u(P=>P>0?P-1:-1);else if(k.key==="Enter"&&c>=0){k.preventDefault();const P=T[c];P&&I(P)}else k.key==="Escape"&&E(!1)},[C,N,t,T,c,I,E,V]);return h.useEffect(()=>{if(c>=0&&g.current){const k=g.current.querySelectorAll("[data-champion-item]");k[c]&&k[c].scrollIntoView({block:"nearest"})}},[c]),h.useEffect(()=>{w||l(!!N)},[N,w,l]),jr(g,N,C),h.useEffect(()=>{N&&C&&requestAnimationFrame(()=>{var k;(k=S.current)==null||k.focus()})},[N,C]),N?w&&!C?null:e.jsx(Oe,{open:C,onOpenChange:E,children:e.jsxs(tr,{children:[e.jsx(rr,{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm"}),e.jsxs(sr,{ref:m,className:"fixed inset-0 left-0 top-0 translate-x-0 translate-y-0 md:inset-auto md:left-[50%] md:top-[50%] md:translate-x-[-50%] md:translate-y-[-50%] w-full h-full md:w-[600px] md:h-[500px] lg:w-[800px] lg:h-[600px] p-0 flex flex-col overflow-hidden max-w-none md:max-w-[600px] lg:max-w-[800px] max-h-none md:max-h-[500px] lg:max-h-[600px] rounded-none md:rounded-xl z-50 border bg-background shadow-lg",onInteractOutside:()=>{E(!1)},onEscapeKeyDown:()=>{E(!1)},children:[e.jsxs(Ke,{children:[e.jsx(He,{children:i?x.championSelector.vsSelectOpponent:x.championSelector.selectChampion}),e.jsx(Ue,{children:i?x.championSelector.vsSelectOpponentDescription:x.championSelector.selectChampionDescription})]}),i&&L&&e.jsxs("div",{className:"p-4 border-b-2 border-destructive/30 bg-destructive/5 flex items-center gap-3 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:se(L.version||"",L.id),alt:L.name,className:"w-10 h-10 rounded-full border-2 border-destructive/50"}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-destructive rounded-full p-0.5",children:e.jsx(De,{className:"h-3 w-3 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-foreground",children:L.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:x.championSelector.currentChampion})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-destructive",children:[e.jsx(De,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"VS"})]})]}),e.jsxs("div",{className:F("p-4 border-b border-border flex items-center gap-2 shrink-0",i?"bg-muted/30":"bg-card"),children:[e.jsx($e,{className:F("h-5 w-5 shrink-0",i?"text-destructive":"text-muted-foreground")}),e.jsx(Me,{ref:S,type:"text",placeholder:i?x.championSelector.vsSearchPlaceholder:x.championSelector.searchPlaceholder,value:y,onChange:k=>{j(k.target.value),u(-1)},onKeyDown:B,className:"flex-1",autoFocus:!0}),e.jsx(oe,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>E(!1),children:e.jsx(ke,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:g,className:"overflow-y-auto overflow-x-hidden p-4 flex-1 min-h-0 md:flex-none md:w-[600px] md:h-[427px] lg:w-[800px] lg:h-[527px]",children:t?(i?p:T).length>0?e.jsxs(e.Fragment,{children:[i&&e.jsx("div",{className:"mb-3 pb-2 border-b border-destructive/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-semibold",children:x.championSelector.selectOpponentLabel})]})}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:(i?p:T).map((k,P)=>{const D=c===P,_=i?!1:V.has(k.id);return e.jsx("div",{"data-champion-item":!0,className:F(D&&"ring-2 ring-offset-1 rounded-md",i?"ring-destructive":"ring-primary"),children:e.jsx(wt,{addChampion:A=>I(A),data:k,name:k.name,selected:_,thumbnailSrc:se(k.version||"",k.id)})},k.id)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground min-h-[200px] space-y-2",children:[e.jsx($e,{className:"h-12 w-12 opacity-50"}),e.jsx("p",{className:"text-base font-medium",children:y?x.championSelector.noResults:x.championSelector.emptyList})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground min-h-[200px]",children:x.championSelector.loading})})]})]})}):e.jsxs("div",{ref:m,className:"w-full",children:[e.jsxs(oe,{onClick:()=>{l(!0),setTimeout(()=>{var k;return(k=S.current)==null?void 0:k.focus()},0)},variant:"ghost",className:F("w-full flex flex-col items-center justify-center space-y-2","text-muted-foreground hover:text-foreground","py-4 h-auto"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:e.jsx($e,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-medium",children:x.championSelector.selectChampion})]}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>{l(!1),j(""),document.body.style.overflow="",v()},"aria-hidden":"true"}),e.jsxs("div",{className:F("fixed inset-0 z-50 md:absolute md:inset-auto md:top-full md:left-0 md:right-0 md:mt-2 md:z-10 md:rounded-lg md:border md:border-border md:shadow-lg bg-card md:max-h-[60vh] flex flex-col",N&&"md:relative md:inset-0 md:mt-0 md:rounded-lg md:border md:shadow-lg"),children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-2 sticky top-0 bg-card z-10",children:[e.jsx($e,{className:"h-5 w-5 text-muted-foreground shrink-0"}),e.jsx(Me,{ref:S,type:"text",placeholder:x.championSelector.searchPlaceholder,value:y,onChange:k=>{j(k.target.value),u(-1)},onKeyDown:B,className:"flex-1",autoFocus:!0}),e.jsx(oe,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>{l(!1),j(""),document.body.style.overflow="",v()},children:e.jsx(ke,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:g,className:"flex-1 overflow-auto p-4",style:{maxHeight:"calc(100vh - 120px)"},children:t?e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:T.map((k,P)=>{const D=c===P,_=V.has(k.id);return e.jsx("div",{"data-champion-item":!0,className:F(D&&"ring-2 ring-primary ring-offset-1 rounded-md"),children:e.jsx(wt,{addChampion:A=>I(A),data:k,name:k.name,selected:_,thumbnailSrc:se(k.version||"",k.id)})},k.id)})}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:x.championSelector.loading})})]})]})]})}const qe=O.memo(vr);function Rt(t="ko_KR"){const r=je(t);return[{key:"hp",label:r.stats.health,format:s=>Math.round(s)},{key:"hpperlevel",label:r.stats.healthPerLevel,format:s=>s.toFixed(1)},{key:"mp",label:r.stats.mana,format:s=>Math.round(s)},{key:"mpperlevel",label:r.stats.manaPerLevel,format:s=>s.toFixed(1)},{key:"movespeed",label:r.stats.movespeed,format:s=>Math.round(s)},{key:"armor",label:r.stats.armor,format:s=>Math.round(s)},{key:"armorperlevel",label:r.stats.armorPerLevel,format:s=>s.toFixed(1)},{key:"spellblock",label:r.stats.spellblock,format:s=>Math.round(s)},{key:"spellblockperlevel",label:r.stats.spellblockPerLevel,format:s=>s.toFixed(1)},{key:"attackdamage",label:r.stats.attackdamage,format:s=>Math.round(s)},{key:"attackdamageperlevel",label:r.stats.attackdamagePerLevel,format:s=>s.toFixed(1)},{key:"attackspeed",label:r.stats.attackspeed,format:s=>s.toFixed(3)},{key:"attackspeedperlevel",label:r.stats.attackspeedPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"attackrange",label:r.stats.attackrange,format:s=>Math.round(s)},{key:"crit",label:r.stats.crit,format:s=>`${(s*100).toFixed(1)}%`},{key:"critperlevel",label:r.stats.critPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"hpregen",label:r.stats.hpregen,format:s=>s.toFixed(1)},{key:"hpregenperlevel",label:r.stats.hpregenPerLevel,format:s=>s.toFixed(1)},{key:"mpregen",label:r.stats.mpregen,format:s=>s.toFixed(1)},{key:"mpregenperlevel",label:r.stats.mpregenPerLevel,format:s=>s.toFixed(1)}]}const Ne=["Q","W","E","R"];function Nr({champions:t,version:r,championList:s,onAddChampion:n,onRemoveChampion:a,onReorderChampions:o}){const{t:d,lang:i}=Y(),[x,f]=h.useState(!1),b=Rt(i),w=lt(we(ct,{activationConstraint:{distance:8}}),we(it,{coordinateGetter:ot})),C=c=>{},l=c=>{const{active:u,over:m}=c;if(m&&u.id!==m.id&&o){const S=t.findIndex(N=>N.id===u.id),g=t.findIndex(N=>N.id===m.id);S!==-1&&g!==-1&&o(S,g)}},y=({champion:c,children:u,className:m})=>{const{setNodeRef:S,transform:g,transition:N,isDragging:v}=ye({id:c.id,disabled:!0}),V={transform:g?Se.Transform.toString(g):void 0,transition:v?N:void 0,opacity:v?.5:1};return e.jsx(z,{ref:S,style:V,className:m,children:u})},j=({champion:c,index:u})=>{const{attributes:m,listeners:S,setNodeRef:g,transform:N,transition:v,isDragging:T}=ye({id:c.id}),L={transform:N?Se.Transform.toString(N):void 0,transition:T?v:void 0,opacity:T?.5:1};return e.jsx(G,{ref:g,style:L,className:F("text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] select-none",u<t.length-1&&"border-r border-border/30",T&&"z-50"),children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1.5 relative",children:[o&&e.jsx("button",{...m,...S,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity absolute -left-2 top-1/2 -translate-y-1/2","aria-label":"Drag to reorder",children:e.jsx(We,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:se(r,c.id),alt:c.name,className:"w-8 h-8 rounded-full"}),a&&e.jsx(oe,{variant:"ghost",size:"icon",className:F("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:p=>{p.stopPropagation(),a(c.id)},"aria-label":`Remove ${c.name}`,children:e.jsx(ke,{className:"h-2.5 w-2.5"})})]}),e.jsx("div",{className:"text-[10px] font-semibold leading-tight text-center break-words text-foreground",children:c.name})]})})};return e.jsxs("div",{className:"relative",children:[e.jsx(dt,{sensors:w,collisionDetection:ut,onDragStart:C,onDragEnd:l,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(he,{className:"border-collapse table-fixed w-auto",children:[e.jsx(ge,{children:e.jsxs(J,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[90px] min-w-[90px] border-r border-border/30 select-none",style:{left:0},children:d.stats.label}),e.jsx(mt,{items:t.map(c=>c.id),strategy:ft,children:t.map((c,u)=>e.jsx(j,{champion:c,index:u},c.id))}),n&&e.jsx(G,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] border-l border-border/30 select-none",children:e.jsxs(oe,{onClick:()=>f(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Ge,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsx(be,{children:b.map(c=>{const u=t.map(g=>{var N;return((N=g.stats)==null?void 0:N[c.key])??0}),m=Math.max(...u),S=Math.min(...u);return e.jsxs(J,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(z,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:c.label}),t.map((g,N)=>{var L;const v=((L=g.stats)==null?void 0:L[c.key])??0,T=v===m&&m!==S,V=v===S&&m!==S;return e.jsx(y,{champion:g,className:F("p-1.5 text-[11px] text-center",N<t.length-1&&"border-r border-border/30",T&&"text-primary font-semibold",V&&"text-muted-foreground"),children:c.format(v)},g.id)}),n&&e.jsx(z,{className:"p-1.5 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[24px]"})})]},c.key)})})]})})}),x&&n&&s&&e.jsx(qe,{championList:s,selectedChampions:t,onSelect:c=>{n(c)},onClose:()=>f(!1)})]})}function wr({champions:t,version:r,vsMode:s}){const{t:n,lang:a}=Y(),o=Rt(a);if(s&&t.length===2){const d=s.championA,i=s.championB;return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(he,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(ge,{children:e.jsxs(J,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:n.stats.label}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:se(r,d.id),alt:d.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:d.name})]})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:se(r,i.id),alt:i.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:i.name})]})})]})}),e.jsx(be,{children:o.map(x=>{var l,y;const f=((l=d.stats)==null?void 0:l[x.key])??0,b=((y=i.stats)==null?void 0:y[x.key])??0,w=Math.max(f,b),C=Math.min(f,b);return e.jsxs(J,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(z,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:x.label}),e.jsx(z,{className:F("p-1.5 text-[10px] text-center border-r border-border/30",f===w&&w!==C&&"text-primary font-semibold",f===C&&w!==C&&"text-muted-foreground"),children:x.format(f)}),e.jsx(z,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(z,{className:F("p-1.5 text-[10px] text-center",b===w&&w!==C&&"text-primary font-semibold",b===C&&w!==C&&"text-muted-foreground"),children:x.format(b)})]},x.key)})})]})})})})})}return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(he,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(ge,{children:e.jsxs(J,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[70px] min-w-[70px] border-r border-border/30 select-none",style:{left:0},children:n.stats.label}),t.map(d=>e.jsx(G,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:se(r,d.id),alt:d.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:d.name})]})},d.id))]})}),e.jsx(be,{children:o.map(d=>{const i=t.map(b=>{var w;return((w=b.stats)==null?void 0:w[d.key])??0}),x=Math.max(...i),f=Math.min(...i);return e.jsxs(J,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(z,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:d.label}),t.map(b=>{var y;const w=((y=b.stats)==null?void 0:y[d.key])??0,C=w===x&&x!==f,l=w===f&&x!==f;return e.jsx(z,{className:F("p-1.5 text-[11px] text-center",C&&"text-primary font-semibold",l&&"text-muted-foreground"),children:d.format(w)},b.id)})]},d.key)})})]})})})})})}async function yr(t,r,s){let n={},a=null;try{a=await or(t,s),n=a.spellDataMap}catch(o){K.warn(`Failed to load Community Dragon data for ${t}:`,o)}return r.map((o,d)=>{let i={};if(n[d.toString()])i=n[d.toString()];else{const x=o.id.replace(t,"");for(const f of Object.keys(n))if(f.toLowerCase().includes(x.toLowerCase())||f.toLowerCase().includes(o.id.toLowerCase())){i=n[f];break}}return{spell:o,communityDragonData:i,spellIndex:d,ddragonVersion:(a==null?void 0:a.ddragonVersion)??s,cdragonVersion:(a==null?void 0:a.cdragonVersion)??null}})}async function At(t,r){const s={},n=t.map(async a=>{if(!a.spells||a.spells.length===0){s[a.id]=[];return}try{s[a.id]=await yr(a.id,a.spells,r)}catch(o){K.warn(`Failed to get integrated spell data for ${a.id}:`,o),s[a.id]=a.spells.map((d,i)=>({spell:d,communityDragonData:{},spellIndex:i}))}});return await Promise.all(n),s}const Xe={physicalDamage:{tag:"span",className:"text-red-600 dark:text-red-500 font-semibold"},magicDamage:{tag:"span",className:"text-blue-600 dark:text-blue-500 font-semibold"},trueDamage:{tag:"span",className:"text-yellow-600 dark:text-yellow-500 font-semibold"},status:{tag:"span",className:"text-purple-600 dark:text-purple-500"},lifeSteal:{tag:"span",className:"text-green-600 dark:text-green-500"},scaleAD:{tag:"span",className:"text-orange-600 dark:text-orange-500"},scaleAP:{tag:"span",className:"text-blue-600 dark:text-blue-400"},scaleArmor:{tag:"span",className:"text-orange-600 dark:text-orange-400"},scaleLevel:{tag:"span",className:"text-gray-600 dark:text-gray-400"},healing:{tag:"span",className:"text-green-600 dark:text-green-400"},speed:{tag:"span",className:"text-cyan-600 dark:text-cyan-500"},keywordMajor:{tag:"span",className:"text-yellow-600 dark:text-yellow-400 font-semibold"},keywordStealth:{tag:"span",className:"text-purple-600 dark:text-purple-400 font-semibold"},spellPassive:{tag:"span",className:"text-gray-600 dark:text-gray-500 italic"},spellActive:{tag:"span",className:"text-gray-900 dark:text-white font-semibold"},recast:{tag:"span",className:"text-yellow-600 dark:text-yellow-300"},damage:{tag:"span",className:"text-red-600 dark:text-red-400"},shield:{tag:"span",className:"text-blue-600 dark:text-blue-300"},mana:{tag:"span",className:"text-blue-600 dark:text-blue-400"},energy:{tag:"span",className:"text-yellow-600 dark:text-yellow-400"},health:{tag:"span",className:"text-red-600 dark:text-red-400"},cooldown:{tag:"span",className:"text-gray-600 dark:text-gray-300"},range:{tag:"span",className:"text-cyan-600 dark:text-cyan-400"},radius:{tag:"span",className:"text-purple-600 dark:text-purple-400"},width:{tag:"span",className:"text-indigo-600 dark:text-indigo-400"},length:{tag:"span",className:"text-pink-600 dark:text-pink-400"},rules:{tag:"span",className:"text-gray-600 dark:text-gray-400 italic"}};function Sr(t){let r=t;r=r.replace(/<font\s+color=['"]([^'"]+)['"]\s*>/gi,'<span style="color: $1">'),r=r.replace(/<\/font>/gi,"</span>"),Object.entries(Xe).forEach(([n,{tag:a,className:o}])=>{const d=new RegExp(`</${n}>`,"gi");r=r.replace(d,`</${a}>`);const i=new RegExp(`<${n}>`,"gi");r=r.replace(i,`<${a}${o?` class="${o}"`:""}>`)});const s=["keywordMajor","keywordStealth","rules","recast"];return s.forEach(n=>{r=r.replace(new RegExp(`</${n}>`,"gi"),"</span>"),n==="rules"?r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-gray-600 dark:text-gray-400 italic">'):n==="keywordStealth"?r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-purple-600 dark:text-purple-400 font-semibold">'):r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-yellow-600 dark:text-yellow-400 font-semibold">')}),r=r.replace(/<(\w+)(?![\\w])>/gi,(n,a)=>Xe[a]||s.includes(a)||a==="font"||a==="br"?n:"<span>"),r=r.replace(/<\/(\w+)(?![\\w])>/gi,(n,a)=>Xe[a]||s.includes(a)||a==="font"||a==="br"?n:"</span>"),r}function It(t){const r=t.trim(),s=/^([a-zA-Z_][a-zA-Z0-9_]*)\s*([*+\/-])\s*(-?\d+(?:\.\d+)?)$/,n=r.match(s);if(n){const a=n[2];return{type:"formula",variable:n[1],operator:a,operand:parseFloat(n[3])}}return{type:"variable",variable:r}}function Bt(t,r,s){if(!r||typeof r!="string")return null;const n=Object.entries(t).find(([x])=>x!=null&&x.toLowerCase()===r.toLowerCase());if(!n)return null;const[,a]=n,o=a.slice(1,s+1);if(o.length===0)return null;const d=o[0];return o.every(x=>x===d)?d:o}function _t(t,r){if(r.type!=="formula"||!r.operator||r.operand==null)return t;const{operator:s,operand:n}=r;return s==="*"?Array.isArray(t)?t.map(a=>a*n):t*n:s==="+"?Array.isArray(t)?t.map(a=>a+n):t+n:s==="-"?Array.isArray(t)?t.map(a=>a-n):t-n:s==="/"?Array.isArray(t)?t.map(a=>a/n):t/n:t}function me(t){if(t==null||t==="")return"";const r=typeof t=="number"?t:parseFloat(String(t));return isNaN(r)?String(t):r%1===0?r.toString():parseFloat(r.toFixed(3)).toString()}function St(t,r,s=!1){if(!t||t.length===0)return"";const n=s&&t.length>1?1:0,o=t.slice(n).filter(b=>b!=null&&b!==""&&b!=="0");if(o.length===0)return"";const d=r?o.slice(0,r):o;if(d.length===0)return"";const i=d.map(b=>me(b)),x=i[0];return i.every(b=>b===x)?x:i.join("/")}function kr(t){let r=t;return r=r.replace(/<br\s*\/?>/gi,"<br />"),r=r.replace(/[^\S\r\n]+/g," "),r}function ee(t){return Array.isArray(t)}function kt(t,r){return Array.isArray(t)?t:Array.from({length:r},()=>t)}function Dt(t,r,s){if(!ee(t)&&!ee(r))return s(t,r);const n=ee(t)?t:kt(t,ee(r)?r.length:1),a=ee(r)?r:kt(r,n.length);if(n.length!==a.length)throw new Error(`Vector length mismatch: ${n.length} vs ${a.length}`);return n.map((o,d)=>s(o,a[d]))}function Ve(t,r){return Dt(t,r,(s,n)=>s+n)}function Pe(t,r){return Dt(t,r,(s,n)=>s*n)}function ze(t){return ee(t)?t.every(s=>s===t[0])?me(t[0]):t.map(s=>me(s)).join("/"):me(t)}function Qe(t){return ee(t)?t.map(r=>r*100):t*100}function Ct(t,r,s="ko_KR"){const n=je(s),a=t!=null,o=r!=null;if(!a&&!o)return n.stats.abilityPower;const d=t??r;return d===2?t===2&&r===2?n.stats.bonusAttackDamage:n.stats.attackDamage:d===12?t===12&&r===2?n.stats.bonusHealth:n.stats.health:d===1?t===1&&r===2?n.stats.bonusArmor:n.stats.armor:d===6?t===6&&r===2?n.stats.bonusMagicResist:n.stats.magicResist:d===18?t===18&&r===2?n.stats.bonusLifesteal:n.stats.lifesteal:""}function at(t,r="ko_KR"){let n=je(r).common.mana;if(t.costType){const a=t.costType.trim();return a&&!a.includes("{{")?a:t.resource&&!t.resource.includes("{{")?t.resource:n}return t.resource&&!t.resource.includes("{{")?t.resource:n}function Mt(t,r,s){const n=s==null?void 0:s.DataValues;if(!n)return null;const a=Bt(n,t.variable,r.maxrank);if(a==null)return null;const o=_t(a,t);return ze(o)}function Tt(t,r){const s=n=>Number.isFinite(n)?n.toFixed(r).replace(/\.?0+$/,""):String(n);if(ee(t)){const n=t.map(d=>s(d)),a=n[0];return n.every(d=>d===a)?a:n.join("/")}return s(t)}function Cr(t,r,s,n="ko_KR"){const a=s==null?void 0:s.mSpellCalculations,o=s==null?void 0:s.DataValues;if(!a)return null;const d=Object.entries(a).find(([g])=>g!=null&&g.toLowerCase()===t.variable.toLowerCase());if(!d)return null;const[i]=d;function x(g){if(!g||typeof g!="string")return K.debug(`DataValue name is invalid: ${g}`),null;if(!o)return K.debug("dataValues is undefined"),null;const N=Bt(o,g,r.maxrank);return N??(K.debug(`DataValue "${g}" missing`),null)}function f(g,N=new Set){var T;if(!a)throw new Error("spellCalcs is undefined");const v=a[g];if(!v)throw new Error(`SpellCalculation "${g}" not found`);if(N.has(g))throw new Error(`Circular reference in mSpellCalculations: ${g}`);if(N.add(g),v.__type==="GameCalculationModified"){const V=v;if(!V.mModifiedGameCalculation)throw new Error("mModifiedGameCalculation is missing");const L=f(V.mModifiedGameCalculation,N);if(!V.mMultiplier)return L;let p=null;if(V.mMultiplier.mDataValue){if(p=x(V.mMultiplier.mDataValue),p==null)return L}else V.mMultiplier.mNumber!=null&&(p=V.mMultiplier.mNumber);if(p==null)return L;const R=Pe(L.base,p),E=L.statParts.map(I=>({name:I.name,ratio:Pe(I.ratio,p)}));return{base:R,statParts:E,isPercent:L.isPercent,precision:L.precision}}if(v.__type==="GameCalculation"){const V=v,L=V.mFormulaParts??[];let p=0;const R=[],E=!!V.mDisplayAsPercent;if(L.length===1&&L[0].__type==="ByCharLevelBreakpointsCalculationPart"&&V.mSimpleTooltipCalculationDisplay===6){const P=L[0],D=P.mLevel1Value??0;let _=D;for(const U of P.mBreakpoints??[])typeof U.mAdditionalBonusAtThisLevel=="number"&&(_+=U.mAdditionalBonusAtThisLevel);return{base:[D,_],statParts:[],isPercent:E,isBreakpointRange:!0,precision:void 0}}if(L.length===1&&L[0].__type==="ByCharLevelBreakpointsCalculationPart"&&E){const P=L[0],D=P.mLevel1Value??0,_=P.mInitialBonusPerLevel??0,A=(P.mBreakpoints??[])[0];if(_!==0&&(A!=null&&A.mLevel)){const M=A.mLevel-1,U=Math.max(M-1,0),H=D+U*_;return{base:[D,H],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}}if(L.length===1&&L[0].__type==="ByCharLevelInterpolationCalculationPart"&&E){const P=L[0],D=P.mStartValue??0,_=P.mEndValue??D;return{base:[D,_],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}for(const P of L){const D=P.__type;if(D==="NamedDataValueCalculationPart"){const _=P;if(!_.mDataValue){K.debug("NamedDataValueCalculationPart missing mDataValue",P);continue}const A=x(_.mDataValue);if(A==null)continue;p=Ve(p,A)}else if(D==="EffectValueCalculationPart"){const A=P.mEffectIndex??0,M=((T=r.effectBurn)==null?void 0:T[A])??null;if(!M)K.debug(`EffectValueCalculationPart: effectBurn[${A}] is missing`,{spellId:r.id});else{const U=M.split("/").map(H=>parseFloat(H)).filter(H=>!Number.isNaN(H));if(U.length>0){const H=U.length>r.maxrank?U.slice(0,r.maxrank):U;p=Ve(p,H)}}}else if(D==="StatByNamedDataValueCalculationPart"){const _=P;if(!_.mDataValue){K.debug("StatByNamedDataValueCalculationPart missing mDataValue",P);continue}const A=x(_.mDataValue);if(A==null)continue;const M=Ct(_.mStat,_.mStatFormula,n);R.push({name:M,ratio:A})}else if(D==="StatByCoefficientCalculationPart"){const _=P;if(_.mCoefficient==null){K.debug("StatByCoefficientCalculationPart missing mCoefficient",P);continue}const A=Ct(_.mStat,_.mStatFormula,n),M=_.mCoefficient;R.push({name:A,ratio:M,isCoefficient:!0})}else if(D==="AbilityResourceByCoefficientCalculationPart"){const _=P;if(_.mCoefficient==null){K.debug("AbilityResourceByCoefficientCalculationPart missing mCoefficient",P);continue}const A=at(r,n),M=je(n),H=_.mStatFormula===2?`${M.common.bonus} ${A}`:A,q=_.mCoefficient;R.push({name:H,ratio:q,isCoefficient:!0})}else if(D==="NumberCalculationPart"){const A=P.mNumber??0;p=Ve(p,A)}else if(D==="ByCharLevelBreakpointsCalculationPart"){const _=P;let A=_.mLevel1Value||0;for(const M of _.mBreakpoints??[])M.mAdditionalBonusAtThisLevel!=null&&(A+=M.mAdditionalBonusAtThisLevel);p=Ve(p,A)}else if(D==="ProductOfSubPartsCalculationPart"){const _=P,A=q=>{var ne;if(!q||!q.__type)return 0;const te=q.__type;if(te==="NamedDataValueCalculationPart"){const le=q;if(!le.mDataValue)return K.debug("ProductOfSubPartsCalculationPart: NamedDataValueCalculationPart missing mDataValue",q),0;const re=x(le.mDataValue);return re??0}if(te==="NumberCalculationPart")return q.mNumber??0;if(te==="EffectValueCalculationPart"){const re=q.mEffectIndex??0,ve=((ne=r.effectBurn)==null?void 0:ne[re])??null;if(!ve)return K.debug(`ProductOfSubPartsCalculationPart: EffectValueCalculationPart missing effectBurn[${re}]`,{spellId:r.id}),0;let Ce;if(ve.includes("/")){const ie=ve.split("/").map(Te=>Number.parseFloat(Te)).filter(Te=>!Number.isNaN(Te));if(ie.length===0)return 0;Ce=ie.length===1?ie[0]:ie}else{const ie=Number.parseFloat(ve);if(Number.isNaN(ie))return 0;Ce=ie}return Ce}return K.debug(`ProductOfSubPartsCalculationPart: unsupported sub part type "${te}"`,q),0},M=A(_.mPart1),U=A(_.mPart2),H=Pe(M,U);p=Ve(p,H)}}let I=p,B=R;if(V.mMultiplier){let P=null;V.mMultiplier.mDataValue?(P=x(V.mMultiplier.mDataValue),P==null&&(P=null)):V.mMultiplier.mNumber!=null&&(P=V.mMultiplier.mNumber),P!=null&&(I=Pe(I,P),B=B.map(D=>({...D,ratio:Pe(D.ratio,P)})))}let k;return typeof V.mPrecision=="number"&&V.mPrecision>=0?k=V.mPrecision+1:k=void 0,{base:I,statParts:B,isPercent:E,precision:k}}throw new Error(`Unsupported mSpellCalculation type: ${v.__type}`)}let b;try{b=f(i)}catch(g){return K.error("Failed to evaluate calculation:",g),null}let w;const C=b.precision;b.isPercent?C!=null?ee(b.base)?w=b.base.map(g=>g*100):w=b.base*100:w=Qe(b.base):w=b.base;const l=b.statParts.map(g=>{if(g.isCoefficient){const N=C!=null?ee(g.ratio)?g.ratio.map(v=>v*100):g.ratio*100:Qe(g.ratio);return{...g,ratio:N}}if(C!=null){const N=ee(g.ratio)?g.ratio.map(v=>v*100):g.ratio*100;return{...g,ratio:N}}return{...g,ratio:Qe(g.ratio)}});let y=null;const j=ee(w)&&w.length>0&&w.every(g=>g===0),c=!ee(w)&&w===0;if(!j&&!c)if(b.isCharLevelRange&&ee(w)&&w.length===2){const[g,N]=w,v=me(g),T=me(N);y=`(${v}% ~ ${T}%)`}else if(b.isBreakpointRange&&ee(w)&&w.length===2){const[g,N]=w,v=me(g),T=me(N);y=b.isPercent?`(${v}% ~ ${T}%)`:`(${v} ~ ${T})`}else{const g=C!=null?Tt(w,C):ze(w);y=b.isPercent?`${g}%`:g}const u=l.map(g=>{const N=C!=null?Tt(g.ratio,C):ze(g.ratio);return g.name?`(${N}% ${g.name})`:`(${N}%)`}),m=[];if(y&&m.push(y),m.push(...u),m.length===0)return null;const S=m.join(" + ");return m.length===1?S:`(${S})`}function Tr(t,r){return!Number.isFinite(r)||r<0?t:t.replace(/-?\d+(?:\.\d+)?/g,s=>{const n=Number.parseFloat(s);return Number.isFinite(n)?n.toFixed(r):s})}function Vr(t){return t.replace(/(}})\s*\+\s*(\S)/g,"$1 + $2").replace(/(\S)\s*\+\s*({{)/g,"$1 + $2").replace(/(\S)\s*~\s*(\S)/g,"$1 ~ $2")}function Pr(t){return t.replace(/\{\{([^}]*\{\{[^}]*}}[^}]*)}}/g,()=>"")}function $r(t){let r=t;return r=r.replace(/\{\{Spell_[^}]*Tooltip[^}]*}}/gi,""),r=r.replace(/\{\{spellmodifierdescriptionappend}}/gi,""),r}function Er(t,r,s,n){const a=/\{\{([^}]+)}}/g;return t.replace(a,(o,d)=>{const i=String(d).trim();if(i==="spellmodifierdescriptionappend"||i.includes("gamemodeinteger")||i.includes("Spell_")&&i.includes("Tooltip"))return"";let x=i,f;const b=/^([a-zA-Z_][a-zA-Z0-9_]*)(?:\.(\d+))(.*)$/.exec(i);if(b){const[,C,l,y]=b,j=Number.parseInt(l,10);Number.isFinite(j)&&(f=j,x=`${C}${y}`)}const w=Rr(x,r,s,n);return w!==null?f!==void 0?Tr(w,f):w:""})}function Lr(t){let r=t;return r=r.replace(/\{\{\s*\}/g,""),r=r.replace(/\}\}/g,""),r=r.replace(/\{\{/g,""),r=r.replace(/%[^\s:%]+:[^\s%]+%/g,""),r=r.replace(/\s+%\s+/g," "),r=r.replace(new RegExp("(?<!\\d)\\s*%\\s*(?!\\d)","g"),""),r=r.replace(/^\s*%\s*(?!\d)/g,""),r=r.replace(new RegExp("(?<!\\d)\\s*%\\s*$","g"),""),r=r.replace(/[^\S\r\n]+/g," "),r}function Ft(t,r,s,n="ko_KR"){if(!r)return t;let a=t;return a=Vr(a),a=Pr(a),a=$r(a),a=Er(a,r,s,n),a=Lr(a),a}function Rr(t,r,s,n="ko_KR"){const a=It(t),o=Ar(a,r,s);if(o!==null)return o;const d=Mt(a,r,s);return d!==null?d:Cr(a,r,s,n)}function Ar(t,r,s){const n=t.variable,a=/^e(\d+)$/i.exec(n);if(!a)return null;const o=Number.parseInt(a[1],10);if(!Number.isFinite(o)||o<=0)return null;const d=(s==null?void 0:s.effectBurn)??r.effectBurn;if(!d)return null;const i=d[o];if(!i)return null;let x;if(i.includes("/")){const b=i.split("/").map(w=>Number.parseFloat(w)).filter(w=>!Number.isNaN(w));if(b.length===0)return null;x=b.length===1?b[0]:b}else{const b=Number.parseFloat(i);if(Number.isNaN(b))return null;x=b}const f=_t(x,t);return ze(f)}function et(t,r,s,n="ko_KR"){if(!t)return"";let a=t;return a=Sr(a),a=Ft(a,r,s,n),a=kr(a),a=a.replace(/\n/g,"<br />"),a}function Vt(t,r,s="ko_KR"){const n=je(s);if(!t.leveltip||!t.leveltip.label||!t.leveltip.effect)return"";let a;r&&(r.DataValues?a=r:a={DataValues:r});const{label:o,effect:d}=t.leveltip,i=[];for(let x=0;x<o.length&&x<d.length;x++){const f=o[x],w=d[x].match(/\{\{\s*([^}]+)\s*\}\}/);if(!w)continue;const C=w[1].trim();let l=null;if(a)try{const c=It(C),u=Mt(c,t,a);if(u&&u.trim()!==""){let m=u;(f.includes("%")||f.toLowerCase().includes("percent")||f.toLowerCase().includes("퍼센트")||f.toLowerCase().includes("둔화"))&&!m.includes("%")&&(m=m.split("/").map(v=>v&&`${v}%`).join("/"));const g=at(t,s),N=f.replace("@AbilityResourceName@",g);if(N.includes("{{")||N.includes("}}"))continue;i.push(`${N}: [${m}]`);continue}}catch{}const y=C;l=null;const j=y.match(/^e(\d+)$/i);if(j){const c=parseInt(j[1]);if(t.effectBurn&&t.effectBurn.length>c){const u=t.effectBurn[c];u&&u!==null&&u!=="0"&&(l=u)}}else if(y.toLowerCase()==="cost"||y.toLowerCase().includes("cost"))t.costBurn&&(l=t.costBurn);else if(y.toLowerCase().includes("cooldown"))t.cooldownBurn&&(l=t.cooldownBurn);else if(y.toLowerCase().includes("ammorechargetime")||y.toLowerCase().includes("ammorecharge")){const c=(r==null?void 0:r.DataValues)||r;if(c&&c.mAmmoRechargeTime){const u=c.mAmmoRechargeTime;if(Array.isArray(u)&&u.length>1){const S=u.slice(1).map(N=>typeof N=="number"?N:parseFloat(String(N))),g=St(S,t.maxrank,!1);g&&(l=g)}}}if(l){const c=St(l.includes("/")?l.split("/"):[l],t.maxrank);if(c){let u=n.common.mana;u=at(t,s);const m=f.replace("@AbilityResourceName@",u);if(m.includes("{{")||m.includes("}}"))continue;let S=c;(f.includes("%")||f.toLowerCase().includes("slow")||f.toLowerCase().includes("둔화"))&&(c.includes("%")||(S=c.split("/").map(g=>`${g}%`).join("/"))),i.push(`${m}: [${S}]`)}}}return i.length===0?"":i.join("<br />")}function Ir(t,r,s="ko_KR"){var i,x;const n=je(s);if(!t||!t.cooldown||!Array.isArray(t.cooldown)||t.cooldown.length===0)return null;const a=((i=r==null?void 0:r.communityDragonData)==null?void 0:i.DataValues)||(r==null?void 0:r.communityDragonData),o=a==null?void 0:a.mAmmoRechargeTime;if(t.cooldown[0]===0&&o&&Array.isArray(o)&&o.length>1&&o){const f=o[1],b=((x=t.effectBurn)==null?void 0:x[1])||"3";return`${n.common.rechargeTime} ${f}${n.common.seconds} (${n.common.max}: ${b}${n.common.items})`}if(t.cooldownBurn){const f=t.cooldownBurn.split("/");return f.length>1&&f.every(b=>b===f[0])?`${f[0]}${n.common.seconds}`:`${t.cooldownBurn}${n.common.seconds}`}if(t.cooldown&&t.cooldown.length>0){const f=t.cooldown[0];return t.cooldown.every(b=>b===f)?`${f}${n.common.seconds}`:`${t.cooldown.join("/")}${n.common.seconds}`}return null}function xe(t){if(!t)return t;let r=t.replace(/\(\s*\)/g,"");return r=r.replace(/\s{2,}/g," ").trim(),r}function Br(t,r,s="ko_KR"){var i;const n=je(s);if(!t)return null;const a=Array.isArray(t.cost)&&t.cost.length>0,o=a&&t.cost.every(x=>x===0),d=t.costBurn==="0";if((d||o)&&typeof t.resource=="string"&&t.resource.includes("{{")){const x=t.resource.trim(),f=((i=r==null?void 0:r.communityDragonData)==null?void 0:i.DataValues)||(r==null?void 0:r.communityDragonData);if(f){const w=Ft(x,t,{DataValues:f}).trim();if(w)return xe(w)}return xe(n.common.noCost)}if(d||o)return xe(n.common.noCost);if(t.costBurn){const x=t.costBurn.split("/");return x.length>1&&x.every(f=>f===x[0])?xe(`${n.common.mana} ${x[0]}`):xe(`${n.common.mana} ${t.costBurn}`)}if(a){const x=t.cost[0];return t.cost.every(f=>f===x)?xe(`${n.common.mana} ${x}`):xe(`${n.common.mana} ${t.cost.join("/")}`)}return null}function zt(t,r,s){var i;const n=((i=s==null?void 0:s.communityDragonData)==null?void 0:i.DataValues)||(s==null?void 0:s.communityDragonData),a=n==null?void 0:n.mAmmoRechargeTime,o=t.cooldown[r-1];return o===0&&a&&Array.isArray(a)&&a.length>r&&a?a[r]!==void 0?String(a[r]):"":o!=null?String(o):""}const tt="cooldown:active-skill-tooltip";function ue({skill:t,skillIdx:r,version:s,spellData:n,isPassive:a,passiveName:o,passiveDescription:d,passiveImageFull:i,size:x="default"}){const{t:f,lang:b}=Y(),C=Ee()==="mobile",[l,y]=O.useState(!1),[j,c]=O.useState(!1),u=O.useRef(null),m=O.useRef(null),S=O.useRef(""),[g,N]=O.useState("bottom"),[v,T]=O.useState(void 0),V=a&&i?null:Ir(t,n,b),L=a&&i?null:Br(t,n,b),p=x==="small",R=p?"min-w-6 min-h-6 w-6 h-6":"min-w-8 min-h-8 w-8 h-8",E=p?"text-[8px]":"text-[9px]",I=O.useCallback(()=>{C||(S.current||(S.current=`${t.id}-${r}-${s}`),typeof window<"u"&&window.dispatchEvent(new CustomEvent(tt,{detail:S.current})),m.current!==null&&(window.clearTimeout(m.current),m.current=null),c(!0))},[C]),B=O.useCallback(()=>{C||(m.current!==null&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{c(!1),m.current=null},40))},[C]);O.useEffect(()=>{if(C||!j){T(void 0);return}const A=u.current;if(!A)return;const M=()=>{const U=A.getBoundingClientRect(),H=window.innerHeight,q=16,te=8,ne=U.top-q,le=H-U.bottom-q;if(ne<=0&&le<=0){T(void 0);return}if(le>=ne){N("bottom");const re=Math.max(le-te,0);T(re||void 0)}else{N("top");const re=Math.max(ne-te,0);T(re||void 0)}};return M(),window.addEventListener("resize",M),window.addEventListener("scroll",M,!0),()=>{window.removeEventListener("resize",M),window.removeEventListener("scroll",M,!0)}},[C,j]),O.useEffect(()=>{if(typeof window>"u")return;const A=M=>{const H=M.detail;S.current&&H!==S.current&&(m.current!==null&&(window.clearTimeout(m.current),m.current=null),c(!1))};return window.addEventListener(tt,A),()=>{m.current!==null&&window.clearTimeout(m.current),window.removeEventListener(tt,A)}},[]);const k=e.jsx("div",{ref:u,className:`flex flex-col items-center gap-0.5 p-1 -m-1 touch-manipulation ${C?"cursor-pointer":"cursor-help"}`,onClick:A=>{C&&(A.stopPropagation(),y(M=>!M))},onTouchStart:A=>{C&&(A.stopPropagation(),y(M=>!M))},onPointerEnter:()=>{C||I()},onPointerLeave:()=>{C||B()},children:a&&i?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:ir(s,i),alt:"Passive",className:F(R,"rounded")}),e.jsx("span",{className:F(E,"font-semibold"),children:"P"})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:jt(s,t.id),alt:Ne[r],className:F(R,"rounded")}),e.jsx("span",{className:F(E,"font-semibold"),children:Ne[r]})]})}),P=()=>a&&i?e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:`font-semibold text-sm ${C?"pr-10":""}`,children:o}),d&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:et(d,void 0,void 0,b)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground leading-relaxed border-t pt-3 mt-3 flex items-start gap-1.5",children:[e.jsx(Nt,{className:"w-3 h-3 mt-0.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:f.skillTooltip.warningPassive})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3 border-b pb-3 pr-6",children:[e.jsx("img",{src:jt(s,t.id),alt:Ne[r],className:"w-12 h-12 min-w-12 min-h-12 rounded flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:t.name&&e.jsxs("div",{className:"font-semibold text-sm",children:["[",Ne[r],"] ",t.name]})}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[V&&e.jsx("div",{className:"text-xs text-muted-foreground",children:V.includes(" (")?e.jsxs(e.Fragment,{children:[V.split(" (")[0],e.jsx("br",{}),"(",V.split(" (")[1]]}):V}),L&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 whitespace-nowrap",children:L})]})]}),t.description&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:et(t.description,t,n==null?void 0:n.communityDragonData,b).replace(/<br\s*\/?>/gi," ")}})}),t.tooltip&&e.jsx("div",{className:"text-xs text-muted-foreground leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:et(t.tooltip,t,n==null?void 0:n.communityDragonData,b)}})}),n&&Vt(t,n.communityDragonData,b)&&e.jsx("div",{className:"text-[11px] leading-relaxed text-muted-foreground border-t pt-3 mt-3",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Vt(t,n.communityDragonData,b)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground leading-relaxed border-t pt-3 mt-3 flex items-start gap-1.5",children:[e.jsx(Nt,{className:"w-3 h-3 mt-0.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:f.skillTooltip.warningSkill})]})]}),D=e.jsx(Oe,{open:l,onOpenChange:y,children:e.jsxs(pt,{className:F(C?"w-[calc(100vw-32px)] max-w-lg h-[70vh] max-h-[70vh]":"w-full max-w-3xl h-[80vh] max-h-[80vh]","p-0 rounded-xl overflow-hidden flex flex-col"),children:[e.jsxs(Ke,{children:[e.jsx(He,{children:a&&i?`${o||f.skillTooltip.passive} ${f.skillTooltip.skillInfo}`:`[${Ne[r]}] ${t.name||f.skillTooltip.skill} ${f.skillTooltip.skillInfo}`}),e.jsx(Ue,{children:a&&i?`${o||f.skillTooltip.passive} ${f.skillTooltip.skillDescription}`:`[${Ne[r]}] ${t.name||f.skillTooltip.skill} ${f.skillTooltip.skillDescription}`})]}),e.jsx(pe,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4 flex flex-col gap-3",children:P()})})]})});if(C)return e.jsxs(e.Fragment,{children:[k,D]});const _=e.jsxs("div",{className:"space-y-3",children:[P(),e.jsx("div",{className:"pt-1 flex justify-end",children:e.jsx("button",{type:"button",className:"text-[11px] text-primary hover:underline",onClick:A=>{A.preventDefault(),A.stopPropagation(),c(!1),y(!0)},children:f.skillTooltip.viewDetail})})]});return a&&i?e.jsxs(e.Fragment,{children:[e.jsxs(rt,{open:j,children:[e.jsx(st,{asChild:!0,children:k}),e.jsx(nt,{side:g,align:"center",sideOffset:0,className:"max-w-xs p-3 space-y-2",style:!C&&v?{maxHeight:v}:void 0,onPointerEnter:I,onPointerLeave:B,children:_})]}),D]}):e.jsxs(e.Fragment,{children:[e.jsxs(rt,{open:j,children:[e.jsx(st,{asChild:!0,children:k}),e.jsx(nt,{side:g,align:"center",sideOffset:0,className:"max-w-sm p-4 space-y-3",style:!C&&v?{maxHeight:v}:void 0,onPointerEnter:I,onPointerLeave:B,children:_})]}),D]})}const Ot=h.createContext(void 0);function _r({initialDDragonVersion:t=null,initialCDragonVersion:r=null,children:s}){const[n,a]=h.useState(t??null),[o,d]=h.useState(r??null),i=h.useMemo(()=>({ddragonVersion:n,cdragonVersion:o,setDDragonVersion:a,setCDragonVersion:d}),[n,o]);return e.jsx(Ot.Provider,{value:i,children:s})}function ht(){const t=h.useContext(Ot);if(!t)throw new Error("useVersionContext must be used within VersionProvider");return t}function Dr({champions:t,version:r,championList:s,onAddChampion:n,onRemoveChampion:a,onReorderChampions:o,vsMode:d}){const{t:i}=Y(),{cdragonVersion:x,setCDragonVersion:f}=ht(),[b,w]=h.useState(!1),[C,l]=O.useState({}),y=lt(we(ct,{activationConstraint:{distance:8}}),we(it,{coordinateGetter:ot})),j=v=>{},c=v=>{const{active:T,over:V}=v;if(V&&T.id!==V.id&&o){const L=t.findIndex(R=>R.id===T.id),p=t.findIndex(R=>R.id===V.id);L!==-1&&p!==-1&&o(L,p)}};O.useEffect(()=>{const v=async()=>{try{const T=await At(t,r);if(l(T),!x)try{let V=null;for(const L of Object.keys(T)){const p=T[L];if(p&&p.length>0&&(V=p[0].cdragonVersion??null,V))break}V&&f(V)}catch(V){K.warn("Failed to extract CDragon version from integrated spell data:",V)}}catch(T){K.warn("Failed to load integrated spell data:",T),l({})}};t.length>0&&v()},[t,r]);const u=O.useMemo(()=>Math.max(...t.map(v=>v.spells?Math.max(...v.spells.map(T=>T.maxrank)):0)),[t]),m=O.useCallback((v,T)=>{const V=C[v];return!V||V.length<=T?null:V[T]},[C]),S=O.useMemo(()=>Array.from({length:u},(v,T)=>{const V=T+1;return{level:V,skills:t.map(L=>L.spells?L.spells.map((p,R)=>{const E=m(L.id,R),I=zt(p,V,E);return{skill:p,cooldown:I}}):null)}}),[t,u,m]),g=({champion:v,children:T,className:V})=>{const{setNodeRef:L,transform:p,transition:R,isDragging:E}=ye({id:v.id,disabled:!0}),B={transform:p?Se.Transform.toString(p):void 0,transition:E?R:void 0,opacity:E?.5:1};return e.jsx(z,{ref:L,style:B,className:V,children:T})},N=({champion:v,index:T})=>{const{attributes:V,listeners:L,setNodeRef:p,transform:R,transition:E,isDragging:I}=ye({id:v.id}),k={transform:R?Se.Transform.toString(R):void 0,transition:I?E:void 0,opacity:I?.5:1};return e.jsx(G,{ref:p,style:k,className:F("text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] select-none",T<t.length-1&&"border-r border-border/30",I&&"z-50"),children:e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 relative",children:[o&&e.jsx("button",{...V,...L,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity -ml-1","aria-label":"Drag to reorder",children:e.jsx(We,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:se(r,v.id),alt:v.name,className:"w-8 h-8 rounded-full"}),a&&e.jsx(oe,{variant:"ghost",size:"icon",className:F("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:P=>{P.stopPropagation(),a(v.id)},"aria-label":`Remove ${v.name}`,children:e.jsx(ke,{className:"h-2.5 w-2.5"})})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("div",{className:"text-[11px] font-semibold leading-tight text-foreground",children:v.name}),e.jsx("div",{className:"text-[9px] text-muted-foreground leading-tight",children:v.title})]})]})})};return e.jsx(Fe,{delayDuration:0,skipDelayDuration:150,children:e.jsxs("div",{className:"relative",children:[e.jsx(dt,{sensors:y,collisionDetection:ut,onDragStart:j,onDragEnd:c,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(he,{className:"border-collapse table-fixed w-auto",children:[e.jsx(ge,{children:e.jsxs(J,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[80px] min-w-[80px] border-r border-border/30 select-none",style:{left:0},children:i.common.level}),e.jsx(mt,{items:t.map(v=>v.id),strategy:ft,children:t.map((v,T)=>e.jsx(N,{champion:v,index:T},v.id))}),n&&e.jsx(G,{className:"text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] border-l border-border/30 select-none",children:e.jsxs(oe,{onClick:()=>w(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Ge,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsxs(be,{children:[e.jsxs(J,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(z,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:i.skills.label}),t.map((v,T)=>{var V;return e.jsx(g,{champion:v,className:F("p-2",T<t.length-1&&"border-r border-border/30"),children:e.jsxs("div",{className:"flex justify-center gap-1.5",children:[v.passive&&e.jsx(ue,{isPassive:!0,passiveName:v.passive.name,passiveDescription:v.passive.description,passiveImageFull:v.passive.image.full,skill:{},skillIdx:0,version:r}),(V=v.spells)==null?void 0:V.map((L,p)=>{const R=m(v.id,p);return e.jsx(ue,{skill:L,skillIdx:p,version:r,spellData:R},L.id)})]})},v.id)}),n&&e.jsx(z,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]}),S.map((v,T)=>e.jsxs(J,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(z,{className:F("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",T===S.length-1&&"rounded-bl-lg"),style:{left:0},children:[v.level,i.common.level]}),v.skills.map((V,L)=>{const p=t[L];return e.jsx(g,{champion:p,className:F("p-2",L<t.length-1&&"border-r border-border/30"),children:V?e.jsxs("div",{className:"flex justify-center gap-1.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),V.map((R,E)=>e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs font-semibold",children:R.cooldown!==""?`${R.cooldown}${i.common.seconds}`:"-"})},E))]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})},p.id)}),n&&e.jsx(z,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]},v.level))]})]})})}),b&&n&&s&&e.jsx(qe,{championList:s,selectedChampions:t,onSelect:v=>{n(v)},onClose:()=>w(!1)})]})})}function Mr({champions:t,version:r,vsMode:s}){var w,C;const{t:n}=Y(),{cdragonVersion:a,setCDragonVersion:o}=ht(),[d,i]=O.useState({});O.useEffect(()=>{const l=async()=>{try{const y=await At(t,r);if(i(y),!a)try{let j=null;for(const c of Object.keys(y)){const u=y[c];if(u&&u.length>0&&(j=u[0].cdragonVersion??null,j))break}j&&o(j)}catch(j){K.warn("Failed to extract CDragon version from integrated spell data (mobile):",j)}}catch(y){K.warn("Failed to load integrated spell data:",y),i({})}};t.length>0&&l()},[t,r]);const x=O.useMemo(()=>Math.max(...t.map(l=>l.spells?Math.max(...l.spells.map(y=>y.maxrank)):0)),[t]),f=O.useCallback((l,y)=>{const j=d[l];return!j||j.length<=y?null:j[y]},[d]),b=O.useMemo(()=>Array.from({length:x},(l,y)=>{const j=y+1;return{level:j,skills:t.map(c=>c.spells?c.spells.map((u,m)=>{const S=f(c.id,m),g=zt(u,j,S);return{skill:u,cooldown:g}}):null)}}),[t,x,f]);if(s&&t.length===2){const l=s.championA,y=s.championB;return e.jsx(Fe,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(he,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(ge,{children:e.jsxs(J,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:n.common.level}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:se(r,l.id),alt:l.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:l.name})]})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:se(r,y.id),alt:y.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:y.name})]})})]})}),e.jsxs(be,{children:[e.jsxs(J,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(z,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:n.skills.label}),e.jsx(z,{className:"p-1.5 border-r border-border/30",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[l.passive&&e.jsx(ue,{isPassive:!0,passiveName:l.passive.name,passiveDescription:l.passive.description,passiveImageFull:l.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(w=l.spells)==null?void 0:w.map((j,c)=>{const u=f(l.id,c);return e.jsx(ue,{skill:j,skillIdx:c,version:r,spellData:u,size:"small"},j.id)})]})}),e.jsx(z,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(z,{className:"p-1.5",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[y.passive&&e.jsx(ue,{isPassive:!0,passiveName:y.passive.name,passiveDescription:y.passive.description,passiveImageFull:y.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(C=y.spells)==null?void 0:C.map((j,c)=>{const u=f(y.id,c);return e.jsx(ue,{skill:j,skillIdx:c,version:r,spellData:u,size:"small"},j.id)})]})})]}),b.map((j,c)=>{const u=j.skills[0],m=j.skills[1];return e.jsxs(J,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(z,{className:F("p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",c===b.length-1&&"rounded-bl-lg"),style:{left:0},children:[j.level,n.common.level]}),e.jsx(z,{className:"p-1.5 border-r border-border/30",children:u?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),u.map((S,g)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:S.cooldown!==""?`${S.cooldown}${n.common.seconds}`:"-"})},g))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),e.jsx(z,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(z,{className:"p-1.5",children:m?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),m.map((S,g)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:S.cooldown!==""?`${S.cooldown}${n.common.seconds}`:"-"})},g))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})})]},j.level)})]})]})})})})})})}return e.jsx(Fe,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(he,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(ge,{children:e.jsxs(J,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[60px] min-w-[60px] border-r border-border/30 select-none",style:{left:0},children:n.common.level}),t.map(l=>e.jsx(G,{className:"text-center p-2 text-xs font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:se(r,l.id),alt:l.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:l.name})]})},l.id))]})}),e.jsxs(be,{children:[e.jsxs(J,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(z,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:n.skills.label}),t.map(l=>{var y;return e.jsx(z,{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[l.passive&&e.jsx(ue,{isPassive:!0,passiveName:l.passive.name,passiveDescription:l.passive.description,passiveImageFull:l.passive.image.full,skill:{},skillIdx:0,version:r}),(y=l.spells)==null?void 0:y.map((j,c)=>{const u=f(l.id,c);return e.jsx(ue,{skill:j,skillIdx:c,version:r,spellData:u},j.id)})]})},l.id)})]}),b.map((l,y)=>e.jsxs(J,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(z,{className:F("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",y===b.length-1&&"rounded-bl-lg"),style:{left:0},children:[l.level,n.common.level]}),l.skills.map((j,c)=>e.jsx(z,{className:"p-2",children:j?e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})}),j.map((u,m)=>e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] font-semibold",children:u.cooldown!==""?`${u.cooldown}${n.common.seconds}`:"-"})},m))]}):e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})},t[c].id))]},l.level))]})]})})})})})})}function Fr({champions:t,version:r,activeTab:s,championList:n,onAddChampion:a,onRemoveChampion:o,onReorderChampions:d,vsMode:i}){const x=Ee();if(t.length===0)return null;const f=x==="mobile";return e.jsx(xt,{children:e.jsx(Lt,{className:"p-0",children:s==="stats"?f?e.jsx(wr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:o,vsMode:i}):e.jsx(Nr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:o,onReorderChampions:d}):f?e.jsx(Mr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:o,vsMode:i}):e.jsx(Dr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:o,onReorderChampions:d})})})}const zr=O.memo(Fr),Or=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;function Kr({version:t,initialTabs:r,initialSelectedTabId:s}){const[n,a]=h.useState([]),o=h.useRef([]),[d,i]=h.useState(null),[x,f]=h.useState(!1),[b,w]=h.useState(null);h.useEffect(()=>{o.current=n},[n]),h.useEffect(()=>{t&&(r&&r.length>0&&a(r),s&&i(s))},[t,r,s]),h.useEffect(()=>{!d&&n.length>0&&i(n[0].id)},[n,d]),h.useEffect(()=>{d&&!n.find(m=>m.id===d)&&i(n.length>0?n[0].id:null)},[n,d]);const C=h.useCallback(m=>{a(S=>{const g=S.findIndex(v=>v.id===m),N=S.filter(v=>v.id!==m);return i(v=>{if(v&&v!==m&&N.some(p=>p.id===v))return v;if(N.length===0)return null;const T=g>0?g-1:0;return(N[T]??N[0]).id}),N})},[i]),l=h.useCallback(m=>{a(S=>[...S,m]),i(m.id)},[]),y=h.useCallback((m,S)=>{a(g=>g.map(N=>N.id===m?S(N):N))},[]),j=h.useCallback((m,S)=>{a(g=>{const N=g.findIndex(T=>T.id===m);if(N===-1)return[...g,S];const v=[...g];return v[N]=S,v}),i(S.id)},[]),c=h.useCallback(()=>{a([]),i(null),ce(Ie),ce(Be)},[]),u=h.useCallback(m=>{const{active:S,over:g}=m;g&&S.id!==g.id&&a(N=>{const v=N.findIndex(V=>V.id===S.id),T=N.findIndex(V=>V.id===g.id);return v===-1||T===-1?N:Et(N,v,T)})},[]);return{tabs:n,setTabs:a,tabsRef:o,selectedTabId:d,setSelectedTabId:i,showVsSelector:x,setShowVsSelector:f,vsSelectorMode:b,setVsSelectorMode:w,removeTab:C,addTab:l,updateTab:y,replaceTab:j,resetTabs:c,handleDragEnd:u,generateTabId:Or}}function Hr({version:t,lang:r,championList:s,tabs:n,initialSelectedChampions:a}){const[o,d]=h.useState([]),[i,x]=h.useState(!0);h.useEffect(()=>{if(!t||!s){setTimeout(()=>{x(!1)},0);return}try{if(a&&a.length>0){const j=a.map(c=>{const u=s.find(m=>m.id===c.id||m.key===c.key);return u?{...u,isLoading:!1}:null}).filter(c=>c!==null);j.length>0&&setTimeout(()=>{d(j),j.forEach(c=>{c.id&&(d(u=>u.map(m=>m.id===c.id?{...m,isLoading:!0}:m)),vt(t,r,c.id).then(u=>{d(m=>m.map(S=>S.id===c.id?{...S,fullInfo:u,isLoading:!1}:S))}).catch(u=>{K.error("Failed to load champion info:",u),d(m=>m.map(S=>S.id===c.id?{...S,isLoading:!1}:S))}))})},0)}setTimeout(()=>{x(!1)},0)}catch(j){K.error("Failed to load initial selected champions:",j),setTimeout(()=>{x(!1)},0)}},[t,r,s,a]),h.useEffect(()=>{s&&o.length>0&&setTimeout(()=>{d(j=>j.map(c=>{const u=s.find(m=>m.id===c.id||m.key===c.key);return u?{...c,name:u.name,title:u.title}:c}))},0)},[s,o.length]),h.useEffect(()=>{i||setTimeout(()=>{const j=new Set(n.flatMap(c=>c.champions));d(c=>{if(n.length===0)return c.length>0?[]:c;const u=c.filter(m=>j.has(m.id));return u.length!==c.length?u:c})},0)},[n,i]);const f=h.useCallback(j=>{t&&(d(c=>c.map(u=>u.id===j?{...u,isLoading:!0}:u)),vt(t,r,j).then(c=>{d(u=>u.map(m=>m.id===j?{...m,fullInfo:c,isLoading:!1,skinIndex:0}:m))}).catch(c=>{K.error("Failed to load champion info:",c),d(u=>u.map(m=>m.id===j?{...m,isLoading:!1}:m))}))},[t,r]),b=h.useCallback(j=>{d(c=>{if(c.some(S=>S.id===j.id))return c;const m={...j,isLoading:!0,skinIndex:0};return f(j.id),[...c,m]})},[f]),w=h.useCallback(j=>{d(c=>c.filter(u=>u.id!==j))},[]),C=h.useCallback(()=>{d([]),ce(_e)},[]),l=h.useMemo(()=>o.filter(j=>j.fullInfo&&!j.isLoading),[o]),y=h.useMemo(()=>{const j=new Set(n.filter(c=>c.mode==="normal").flatMap(c=>c.champions));return o.filter(c=>j.has(c.id))},[n,o]);return{selectedChampions:o,setSelectedChampions:d,championsWithFullInfo:l,normalTabChampions:y,addChampionToList:b,removeChampion:w,resetChampions:C,loadChampionInfo:f}}function Ur({onAddClick:t}){const{t:r}=Y();return e.jsx(xt,{className:"border-dashed",children:e.jsxs(Lt,{className:"flex flex-col items-center justify-center py-12 md:py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:e.jsx($e,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:r.encyclopedia.emptyState.title}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md text-sm mb-4",children:r.encyclopedia.emptyState.description}),e.jsxs(oe,{onClick:t,variant:"outline",className:"flex flex-row items-center justify-center gap-2 border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Ge,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-primary transition-colors",children:r.encyclopedia.emptyState.addButton})]})]})})}function Gr({activeTab:t,onTabChange:r,onReset:s}){const{t:n}=Y();return e.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-border overflow-x-auto -mx-4 md:mx-0 px-4 md:px-0",children:[e.jsx(ar,{value:t,onValueChange:a=>r(a),className:"flex-1",children:e.jsxs(lr,{className:"inline-flex h-auto items-center justify-start gap-2 bg-transparent p-0 border-0",children:[e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx(Re,{value:"skills",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:n.encyclopedia.tabs.skills}),e.jsx(Re,{value:"stats",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:n.encyclopedia.tabs.stats})]}),e.jsx("div",{className:"h-6 w-px bg-border/70 mx-1"}),e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx(Re,{value:"runes",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:n.encyclopedia.tabs.runes}),e.jsx(Re,{value:"items",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:n.encyclopedia.tabs.items})]})]})}),e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:e.jsxs(oe,{variant:"ghost",size:"sm",onClick:s,className:"flex items-center gap-1.5 shrink-0 text-muted-foreground hover:text-primary hover:bg-muted/30 border-0",children:[e.jsx(fr,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[10px]",children:n.encyclopedia.reset})]})})]})}function Wr({version:t,lang:r}){const{t:s}=Y(),[n,a]=h.useState(null),[o,d]=h.useState(!1),x=Ee()==="mobile",[f,b]=h.useState(null);if(h.useEffect(()=>{let l=!1;return d(!0),cr(t,r).then(y=>{l||a(y)}).finally(()=>{l||d(!1)}),()=>{l=!0}},[t,r]),o&&!n)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:s.championSelector.loading});if(!n||n.length===0)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:s.championSelector.emptyList});const w=l=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${l.icon}`,alt:l.name,className:"w-8 h-8 rounded-full border border-border/60 bg-transparent"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"text-sm font-semibold",children:l.name})})]}),e.jsx("div",{className:"text-xs text-muted-foreground leading-relaxed",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:l.longDesc||l.shortDesc}})})]}),C=l=>x?e.jsxs("button",{type:"button",onClick:()=>b(l),className:"flex flex-col items-center gap-1 focus:outline-none w-20 md:w-24",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${l.icon}`,alt:l.name,className:"w-10 h-10 rounded-full border border-border/60 bg-transparent"}),e.jsx("span",{className:"text-[10px] text-center leading-tight line-clamp-2",children:l.name})]}):e.jsxs(rt,{children:[e.jsx(st,{asChild:!0,children:e.jsxs("button",{type:"button",className:"flex flex-col items-center gap-1 focus:outline-none cursor-help w-20 md:w-24",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${l.icon}`,alt:l.name,className:"w-10 h-10 rounded-full border border-border/60 bg-transparent"}),e.jsx("span",{className:"text-[10px] text-center leading-tight line-clamp-2",children:l.name})]})}),e.jsx(nt,{side:"top",align:"center",sideOffset:8,className:"max-w-xs p-3",children:w(l)})]},l.id);return e.jsx(Fe,{delayDuration:200,children:e.jsxs("div",{className:"mt-4",children:[e.jsx(pe,{className:"rounded-md border bg-card/40",children:e.jsx("div",{className:"p-4 grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:n.map(l=>e.jsxs(xt,{className:"p-4 flex flex-col gap-3 bg-background/60 border-border/70",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${l.icon}`,alt:l.name,className:"w-8 h-8 rounded-full border border-border/60 bg-transparent"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold",children:l.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.key})]})]}),e.jsx("div",{className:"space-y-3",children:l.slots.map((y,j)=>e.jsx("div",{className:"flex flex-wrap md:flex-nowrap justify-between gap-y-2 gap-x-3 md:gap-x-4",children:y.runes.map(c=>e.jsx(O.Fragment,{children:C(c)},c.id))},j))})]},l.id))})}),x&&e.jsx(Oe,{open:!!f,onOpenChange:l=>!l&&b(null),children:e.jsxs(pt,{className:"w-[calc(100vw-32px)] max-w-lg max-h-[70vh] h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(Ke,{children:[e.jsx(He,{children:(f==null?void 0:f.name)??"Rune"}),e.jsx(Ue,{children:(f==null?void 0:f.name)??"Rune"})]}),e.jsx(pe,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4",children:f&&w(f)})})]})})]})})}function qr(t){var x;const r=t.tags||[],s=t.name||"",n=t.plaintext||"",a=`${s} ${n}`.toLowerCase(),o=s+n,d=new Set(["3340","3363","3364"]);return new Set(["4638","4643"]).has(t.id)?!1:!!(d.has(t.id)||/포션|영약/.test(o)||a.includes("potion")||a.includes("elixir")||r.includes("Consumable")||r.includes("Trinket")||r.includes("Vision")&&d.has(t.id)||/도란/.test(o)||a.includes("doran")||r.includes("Jungle")||a.includes("jungle")||(((x=t.gold)==null?void 0:x.total)??0)===0)}function Zr(t){const r=!!t.from&&t.from.length>0,s=!!t.into&&t.into.length>0;return qr(t)?"starter":r?s?"epic":"legendary":"basic"}function Jr(t){var s;return!(!t.maps||!t.maps[11]||!((s=t.tags)==null?void 0:s.includes("Trinket"))&&t.gold&&t.gold.purchasable===!1||t.inStore===!1||t.cdragon&&(t.cdragon.inStore===!1||t.cdragon.displayInItemSets===!1))}function Pt(t){const r=t.tags||[],s=t.name.toLowerCase();(t.plaintext||"").toLowerCase();const n=new Set(["3340","3363","3364"]);return new Set(["4638","4643"]).has(t.id)?!1:!!(n.has(t.id)||r.includes("Trinket")||r.includes("Consumable")||s.includes("potion")||s.includes("elixir")||Yr(t))}function Yr(t){const r=t.name,s=t.plaintext||"";return/포션|영약/.test(r+s)}function $t(t){const r=t.tags||[],s=t.name.toLowerCase();return r.includes("Boots")||s.includes("boots")}function Xr(t){const r=t.tags||[],s=t.stats||{},n=Object.keys(s),a=r.includes("AttackDamage")||n.some(x=>x.toLowerCase().includes("attackdamage")),o=r.includes("SpellDamage")||n.some(x=>x.toLowerCase().includes("spelldamage")),d=r.includes("Health")||r.includes("Armor")||r.includes("SpellBlock"),i=r.includes("ManaRegen")||r.includes("HealthRegen")||r.includes("CooldownReduction");return o&&i?"support":d&&(a||o)?"tank":o?"mage":a&&!d?"assassin":a||d?"fighter":"all"}function Kt(t){return!(!t.gold||t.gold.total<=0||t.gold.purchasable===!1||t.inStore===!1)}function Ht(t,r){var d,i;const s=((d=t.gold)==null?void 0:d.total)??0,n=((i=t.gold)==null?void 0:i.base)??0,a=!!t.from&&t.from.length>0;return n===0&&a?r==="ko_KR"?"구매 불가":"Unavailable":s>0||Kt(t)?s.toLocaleString():r==="ko_KR"?"무료":"Free"}const Ae=({item:t,version:r,isSelected:s,onSelect:n,lang:a})=>{const o=Ht(t,a);return e.jsxs("button",{type:"button",onClick:n,className:`flex flex-col items-center gap-0 rounded-sm px-0.5 py-0 text-center transition-colors min-w-7 md:min-w-8 ${s?"bg-primary/20 border border-primary/60 shadow-sm":"hover:bg-muted/60 border border-transparent"}`,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${r}/img/item/${t.id}.png`,alt:t.name,className:"w-7 h-7 md:w-8 md:h-8 aspect-square object-cover rounded-sm border border-border/60 bg-black/40 flex-shrink-0"}),e.jsx("span",{className:"text-[9px] md:text-[10px] text-amber-600 dark:text-amber-400 font-semibold whitespace-nowrap",children:o})]})};function Qr({version:t,lang:r}){const{t:s}=Y(),a=Ee()==="mobile",[o,d]=h.useState(null),[i,x]=h.useState(!1),[f,b]=h.useState(""),[w,C]=h.useState("all"),[l,y]=h.useState(null),[j,c]=h.useState(!1);h.useEffect(()=>{let p=!1;return x(!0),dr(t,r).then(R=>{if(!p){const E=R.filter(Jr),I=new Set,B=E.filter(k=>I.has(k.name)?!1:(I.add(k.name),!0));d(B),!l&&B.length>0&&y(B[0])}}).finally(()=>{p||x(!1)}),()=>{p=!0}},[t,r]);const u=h.useMemo(()=>o?new Map(o.map(p=>[p.id,p])):new Map,[o]),m=f.trim().toLowerCase(),{itemsByTier:S,flatFiltered:g}=h.useMemo(()=>{const p={itemsByTier:{starter:[],basic:[],epic:[],legendary:[]},flatFiltered:[]};if(!o)return p;const R=B=>m?`${B.name} ${B.plaintext??""}`.toLowerCase().includes(m):!0,E={starter:[],basic:[],epic:[],legendary:[]},I=[];return o.forEach(B=>{if(!R(B))return;if(w==="trinket"){if(!Pt(B))return}else if(w==="boots"){if(!$t(B))return}else if(w!=="all"){if(Pt(B)||$t(B))return;const P=Xr(B);if(P!=="all"&&P!==w)return}const k=Zr(B);E[k].push(B),I.push(B)}),Object.keys(E).forEach(B=>{E[B].sort((k,P)=>{var D,_;return(((D=k.gold)==null?void 0:D.total)??0)-(((_=P.gold)==null?void 0:_.total)??0)})}),I.sort((B,k)=>{var P,D;return(((P=B.gold)==null?void 0:P.total)??0)-(((D=k.gold)==null?void 0:D.total)??0)}),{itemsByTier:E,flatFiltered:I}},[o,m,w]);if(i&&!o)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:s.championSelector.loading});if(!o||o.length===0)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:s.championSelector.emptyList});const N=p=>{const R=[],E=new Set,I=p.into?[...p.into]:[];for(;I.length>0;){const B=I.shift();if(E.has(B))continue;E.add(B);const k=u.get(B);k&&(R.push(k),k.into&&k.into.length>0&&I.push(...k.into))}return R.sort((B,k)=>{var P,D;return(((P=B.gold)==null?void 0:P.total)??0)-(((D=k.gold)==null?void 0:D.total)??0)}),R},v=(p,R=0,E=6)=>{if(R>=E)return{item:p,children:[]};const I=[];return p.from&&p.from.length>0&&p.from.forEach(B=>{const k=u.get(B);k&&I.push(v(k,R+1,E))}),{item:p,children:I}},T=l&&e.jsxs("div",{className:"flex flex-col gap-2 h-full min-h-0",children:[e.jsxs("div",{className:"space-y-0.5 text-[11px] pb-1 border-b border-border/60 flex-shrink-0",children:[e.jsx("div",{className:"font-semibold",children:r==="ko_KR"?"상위 아이템 (Builds into)":"Builds into"}),e.jsx("div",{className:"overflow-x-auto pb-0.5",children:e.jsx("div",{className:"flex flex-nowrap gap-1 min-w-max",children:N(l).length>0?N(l).map(p=>e.jsx(Ae,{item:p,version:t,isSelected:l.id===p.id,onSelect:()=>y(p),lang:r},p.id)):e.jsx("span",{className:"text-[10px] text-muted-foreground",children:r==="ko_KR"?"상위 아이템 없음":"No higher items"})})})]}),e.jsxs("div",{className:"space-y-1 text-[11px] py-1 border-b border-border/60 flex-shrink-0",children:[e.jsx("div",{className:"font-semibold",children:r==="ko_KR"?"아이템 트리":"Item Tree"}),(()=>{var E;const p=v(l),R=I=>{const B=I.children.length>0;return e.jsxs("div",{className:"flex flex-col items-center gap-0",children:[e.jsx(Ae,{item:I.item,version:t,isSelected:l.id===I.item.id,onSelect:()=>y(I.item),lang:r}),B&&e.jsxs("div",{className:"mt-0 flex flex-col items-stretch",children:[e.jsx("div",{className:"relative flex justify-center",children:e.jsx("div",{className:"h-1 w-[2px] bg-primary/60"})}),e.jsx("div",{className:"relative flex flex-nowrap items-start justify-center gap-y-0 pt-0",children:I.children.map((k,P)=>{const D=I.children.length,_=P===0,A=P===D-1,M=_?"left-1/2 right-0":A?"left-0 right-1/2":"left-0 right-0";return e.jsxs("div",{className:"relative flex flex-col items-center gap-0 pt-0.5 px-1",children:[D>1&&e.jsx("div",{className:`pointer-events-none absolute top-0 h-[2px] bg-primary/60 ${M}`}),e.jsx("div",{className:"pointer-events-none absolute top-0 left-1/2 -translate-x-1/2 h-2 w-[2px] bg-primary/60"}),R(k)]},`${k.item.id}-${P}`)})})]})]})};return!p.children.length&&!((E=p.item.from)!=null&&E.length)?e.jsx("span",{className:"text-[10px] text-muted-foreground",children:r==="ko_KR"?"구성 아이템 없음":"No components"}):e.jsx("div",{className:"pt-0",children:e.jsx("div",{className:"w-full rounded-md border border-border/60 bg-muted/40 px-2 py-0.5 overflow-x-auto scrollbar-hide",children:e.jsx("div",{className:"min-w-max flex justify-center",children:R(p)})})})})()]}),e.jsx(pe,{className:"flex-1 min-h-0",children:e.jsxs("div",{className:"space-y-2 pt-2 pr-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${t}/img/item/${l.id}.png`,alt:l.name,className:"w-10 h-10 rounded-sm border border-border/60 bg-black/40 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-sm font-semibold truncate",children:l.name}),Kt(l)&&e.jsx("div",{className:"text-xs text-amber-600 dark:text-amber-400 font-semibold whitespace-nowrap",children:Ht(l,r)})]}),l.plaintext&&e.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:l.plaintext})]})]}),e.jsx("div",{className:"font-semibold text-[11px]",children:r==="ko_KR"?"설명":"Description"}),e.jsx("div",{className:"text-[11px] leading-relaxed",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:l.description}})})]})})]}),V=p=>{if(r==="ko_KR")switch(p){case"all":return"전체";case"fighter":return"전사";case"mage":return"마법사";case"assassin":return"암살자";case"support":return"서포터";case"tank":return"탱커";case"trinket":return"장신구/와드/포션";case"boots":return"신발"}switch(p){case"all":return"All";case"fighter":return"Fighter";case"mage":return"Mage";case"assassin":return"Assassin";case"support":return"Support";case"tank":return"Tank";case"trinket":return"Trinkets";case"boots":return"Boots"}},L=p=>{if(r==="ko_KR")switch(p){case"legendary":return"전설 아이템";case"epic":return"서사급 아이템";case"basic":return"기본 아이템";case"starter":return"시작 아이템"}switch(p){case"legendary":return"Legendary";case"epic":return"Epic";case"basic":return"Basic";case"starter":return"Starter"}};return a?e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(Me,{value:f,onChange:p=>b(p.target.value),placeholder:r==="ko_KR"?"아이템 이름 검색...":"Search item name...",className:"h-9 text-xs"}),e.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1",children:["all","fighter","mage","assassin","support","tank","trinket","boots"].map(p=>e.jsx("button",{type:"button",onClick:()=>C(p),className:`px-2.5 py-1 rounded-full text-[11px] whitespace-nowrap border ${w===p?"bg-primary text-primary-foreground border-primary":"bg-muted/60 text-muted-foreground border-border/60"}`,children:V(p)},p))})]}),e.jsx("div",{className:"rounded-md border bg-card/40",children:e.jsx("div",{className:"p-1 space-y-1",children:Object.keys(S).map(p=>{const R=S[p];return!R||R.length===0?null:e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:L(p)}),e.jsx("div",{className:"flex flex-wrap gap-1",children:R.map(E=>e.jsx(Ae,{item:E,version:t,isSelected:(l==null?void 0:l.id)===E.id,onSelect:()=>{y(E),c(!0)},lang:r},E.id))})]},p)})})}),e.jsx(Oe,{open:j&&!!l,onOpenChange:p=>{p||c(!1)},children:e.jsxs(pt,{className:"w-[calc(100vw-32px)] max-w-lg max-h-[70vh] h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(Ke,{children:[e.jsx(He,{children:(l==null?void 0:l.name)??"Item"}),e.jsx(Ue,{children:(l==null?void 0:l.name)??"Item"})]}),e.jsx(pe,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4",children:T})})]})})]}):e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("div",{className:"flex flex-wrap gap-1",children:["all","fighter","mage","assassin","support","tank","trinket","boots"].map(p=>e.jsx("button",{type:"button",onClick:()=>C(p),className:`px-2.5 py-1 rounded-full text-[11px] whitespace-nowrap border ${w===p?"bg-primary text-primary-foreground border-primary":"bg-muted/60 text-muted-foreground border-border/60"}`,children:V(p)},p))}),e.jsx(Me,{value:f,onChange:p=>b(p.target.value),placeholder:r==="ko_KR"?"아이템 이름 검색...":"Search item name...",className:"h-8 text-xs md:text-sm w-full sm:w-52 md:w-64"})]}),e.jsxs("div",{className:"rounded-md border bg-card/40 md:h-[calc(100vh-12rem)] flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:flex-1 md:border-r border-border/60 flex flex-col min-w-0 min-h-0",children:[e.jsx("div",{className:"px-3 py-2 border-b border-border/60 flex items-center justify-between flex-shrink-0",children:e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:r==="ko_KR"?"아이템":"Items"})}),e.jsx(pe,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-1 space-y-1",children:Object.keys(S).map(p=>{const R=S[p];return!R||R.length===0?null:e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:L(p)}),e.jsx("div",{className:"flex flex-wrap gap-1",children:R.map(E=>e.jsx(Ae,{item:E,version:t,isSelected:(l==null?void 0:l.id)===E.id,onSelect:()=>y(E),lang:r},E.id))})]},p)})})})]}),e.jsx("div",{className:"md:w-[340px] hidden md:flex flex-col p-3 min-h-0",children:l?T:e.jsx("div",{className:"text-xs text-muted-foreground h-full flex items-center justify-center text-center px-4",children:r==="ko_KR"?"왼쪽에서 아이템을 선택하면 여기에서 아이템 트리와 설명을 볼 수 있어요.":"Select an item on the left to see its tree and description here."})})]})]})}const Ut="flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors shrink-0 relative select-none",Gt="bg-primary text-primary-foreground",Wt="bg-muted/50 text-muted-foreground",qt="touch-none cursor-grab active:cursor-grabbing p-0.5 -ml-1 mr-0.5 opacity-60 hover:opacity-100 transition-opacity select-none",Zt="ml-1 p-0.5 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group",es="ml-1 p-1 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group";function ts({tab:t,champion:r,version:s,selectedTabId:n,onSelect:a,onRemove:o,onVsClick:d}){const{t:i}=Y(),{attributes:x,listeners:f,setNodeRef:b,transform:w,transition:C,isDragging:l}=ye({id:t.id}),y={transform:Se.Transform.toString(w),transition:C,opacity:l?.5:1},j=n===t.id,c=j?Gt:Wt;return e.jsxs("div",{ref:b,style:y,"data-tab-id":t.id,className:F(Ut,c,l&&"z-50"),onClick:u=>{const m=u.target;m.tagName==="BUTTON"||m.closest("button")||a(t.id)},children:[e.jsx("button",{...x,...f,className:qt,"aria-label":"Drag to reorder",children:e.jsx(We,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 cursor-pointer select-none",children:[e.jsx("img",{src:se(s,r.id),alt:r.name,className:"w-5 h-5 rounded-full pointer-events-none select-none",draggable:"false"}),e.jsx("span",{className:"pointer-events-none select-none",children:r.name})]}),e.jsx("button",{onClick:u=>{u.preventDefault(),u.stopPropagation(),d(t.id)},className:es,"aria-label":`${i.encyclopedia.vs} with ${r.name}`,title:i.encyclopedia.vsStart,type:"button",children:e.jsx(De,{className:F("h-3 w-3 transition-colors",j?"text-primary-foreground":"text-muted-foreground")})}),e.jsx("button",{onClick:u=>{u.preventDefault(),u.stopPropagation(),o(t.id)},className:Zt,"aria-label":`Remove ${r.name}`,type:"button",children:e.jsx(ke,{className:F("h-3 w-3 transition-colors",j?"text-primary-foreground":"text-muted-foreground")})})]})}function rs({tab:t,championA:r,championB:s,version:n,selectedTabId:a,onSelect:o,onRemove:d,onChangeChampionA:i,onChangeChampionB:x}){const{t:f}=Y(),{attributes:b,listeners:w,setNodeRef:C,transform:l,transition:y,isDragging:j}=ye({id:t.id}),c={transform:Se.Transform.toString(l),transition:y,opacity:j?.5:1},u=a===t.id,m=u?Gt:Wt;return e.jsxs("div",{ref:C,style:c,"data-tab-id":t.id,className:F(Ut,m,j&&"z-50"),children:[e.jsx("button",{...b,...w,className:qt,"aria-label":"Drag to reorder",children:e.jsx(We,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 select-none",children:[e.jsx("button",{onClick:S=>{S.preventDefault(),S.stopPropagation(),i(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:se(n,r.id),alt:r.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})}),e.jsx("button",{onClick:()=>{o(t.id)},className:"text-[10px] font-semibold touch-none select-none",children:f.encyclopedia.vs}),e.jsx("button",{onClick:S=>{S.preventDefault(),S.stopPropagation(),x(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:se(n,s.id),alt:s.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})})]}),e.jsx("button",{onClick:S=>{S.preventDefault(),S.stopPropagation(),d(t.id)},className:Zt,"aria-label":"Remove VS tab",children:e.jsx(ke,{className:F("h-3 w-3 transition-colors",u?"text-primary-foreground":"text-muted-foreground")})})]})}function ss({tabs:t,championsWithFullInfo:r,version:s,selectedTabId:n,sensors:a,onDragEnd:o,onSelectTab:d,onRemoveTab:i,onVsClick:x,onChangeChampionA:f,onChangeChampionB:b,onAddClick:w}){const{t:C}=Y(),l=h.useRef(null),y=h.useRef(t.length),j=h.useRef(!1),c=h.useRef((u=!0)=>{if(!l.current||!n)return;const m=l.current.querySelector("[data-radix-scroll-area-viewport]");if(!m)return;const S=m.querySelector(`[data-tab-id="${n}"]`);if(S){const g=S.offsetLeft,N=S.offsetWidth,v=m.offsetWidth,T=g-v/2+N/2;u?m.scrollTo({left:Math.max(0,T),behavior:"smooth"}):m.scrollLeft=Math.max(0,T)}});return h.useEffect(()=>{!j.current&&n&&t.length>0&&(j.current=!0,requestAnimationFrame(()=>{requestAnimationFrame(()=>{c.current(!1)})}))},[n,t.length]),h.useEffect(()=>{if(!l.current)return;const u=l.current.querySelector("[data-radix-scroll-area-viewport]");u&&(t.length>y.current&&u.scrollTo({left:u.scrollWidth,behavior:"smooth"}),y.current=t.length)},[t.length]),h.useEffect(()=>{if(j.current&&n){const u=setTimeout(()=>{c.current(!0)},100);return()=>clearTimeout(u)}},[n]),e.jsx("div",{className:"border-b border-border -mx-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground shrink-0 pl-3",children:C.encyclopedia.champion}),e.jsxs(pe,{ref:l,type:"scroll",className:"flex-1",children:[e.jsx(dt,{sensors:a,collisionDetection:ut,onDragEnd:o,children:e.jsx(mt,{items:t.map(u=>u.id),strategy:ft,children:e.jsxs("div",{className:"flex items-center gap-2 w-max select-none pr-2",children:[t.map(u=>{if(u.mode==="vs"){const m=r.find(g=>g.id===u.champions[0]),S=r.find(g=>g.id===u.champions[1]);return!m||!S?null:e.jsx(rs,{tab:u,championA:m,championB:S,version:s,selectedTabId:n,onSelect:d,onRemove:i,onChangeChampionA:f,onChangeChampionB:b},u.id)}else{const m=r.find(S=>S.id===u.champions[0]);return m?e.jsx(ts,{tab:u,champion:m,version:s,selectedTabId:n,onSelect:d,onRemove:i,onVsClick:x},u.id):null}}),e.jsxs(oe,{onClick:w,variant:"outline",size:"sm",className:"flex items-center gap-1.5 shrink-0 border-2 border-dashed border-muted-foreground/30 hover:border-primary hover:bg-primary/10 hover:text-primary h-auto py-1.5 px-3 transition-colors",children:[e.jsx(Ge,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:C.encyclopedia.add})]})]})})}),e.jsx(ur,{orientation:"horizontal"})]})]})})}function ns({open:t,vsSelectorMode:r,tabs:s,championList:n,selectedChampions:a,onSelect:o,onClose:d,onOpenChange:i}){const{t:x}=Y();if(!t||!r)return null;const f=s.find(w=>w.id===r.tabId);if(!f||r.mode!=="select-second"&&f.mode!=="vs")return null;const b=r.mode==="change-champion-a"?f.champions[1]:f.champions[0];return b?e.jsx(qe,{championList:n,selectedChampions:a,onSelect:o,onClose:d,open:t,onOpenChange:i,vsMode:{currentChampionId:b,title:x.encyclopedia.selectOpponent}}):null}function as(t){return t==="skills"||t==="stats"||t==="runes"||t==="items"}function ls({lang:t,championList:r,version:s,cdragonVersion:n,initialSelectedChampions:a,initialTabs:o,initialSelectedTabId:d}){const[i,x]=nr(),b=Ee()==="mobile",w=h.useMemo(()=>{const $=i.get("tab");return as($)?$:null},[i]),C=()=>w||"skills",[l,y]=h.useState(C),j=h.useRef(w),c=h.useRef(C());h.useEffect(()=>{const $=w||"skills",W=j.current||"skills";$!==W&&$!==l&&(y($),c.current=$),j.current=w},[w,l]),h.useEffect(()=>{const $=w||"skills",W=c.current;if(l!==W&&$!==l){const Z=new URLSearchParams(i);l==="skills"?Z.delete("tab"):Z.set("tab",l),x(Z,{replace:!0}),j.current=l==="skills"?null:l}c.current=l},[l,w,i,x]);const[u,m]=h.useState(!1),{cdragonVersion:S}=ht(),{t:g}=Y(),{tabs:N,tabsRef:v,selectedTabId:T,setSelectedTabId:V,showVsSelector:L,setShowVsSelector:p,vsSelectorMode:R,setVsSelectorMode:E,removeTab:I,addTab:B,updateTab:k,replaceTab:P,resetTabs:D,handleDragEnd:_,generateTabId:A}=Kr({version:s,initialTabs:o,initialSelectedTabId:d}),{selectedChampions:M,setSelectedChampions:U,championsWithFullInfo:H,normalTabChampions:q,addChampionToList:te,removeChampion:ne,resetChampions:le}=Hr({version:s,lang:t,championList:r,tabs:N,initialSelectedChampions:a}),re=h.useCallback(()=>{try{if(M.length>0){const $=M.map(({id:W,key:Z})=>({id:W,key:Z}));Ye(_e,JSON.stringify($))}else ce(_e);N.length>0?Ye(Ie,JSON.stringify(N)):ce(Ie),T?Ye(Be,T):ce(Be)}catch($){K.error("Failed to persist encyclopedia state to storage:",$)}},[M,N,T]),ve=lt(we(ct,{activationConstraint:{distance:12}}),we(it,{coordinateGetter:ot})),Ce=h.useCallback(($,W)=>{U(Z=>Et(Z,$,W))},[U]),ie=h.useCallback($=>{if(new Set(M.map(fe=>fe.id)).has($.id)){const fe=v.current,X=fe.some(Q=>Q.mode==="normal"&&Q.champions.length===1&&Q.champions[0]===$.id),Le=fe.some(Q=>Q.mode==="vs"&&Q.champions.includes($.id));if(X){const Q=N.find(Ze=>Ze.mode==="normal"&&Ze.champions.length===1&&Ze.champions[0]===$.id);Q&&I(Q.id),Le||ne($.id);return}if(Le){const Q={mode:"normal",champions:[$.id],id:A()};B(Q);return}const bt=N.find(Q=>Q.mode==="normal"&&Q.champions.length===1&&Q.champions[0]===$.id);bt&&I(bt.id),ne($.id);return}te($);const Z={mode:"normal",champions:[$.id],id:A()};B(Z)},[M,N,v,te,ne,B,I,A]),Te=h.useCallback(()=>{le(),D(),ce(_e),ce(Ie),ce(Be)},[le,D]),Jt=h.useCallback($=>{if(!R)return;const{mode:W,tabId:Z}=R,fe=N.find(X=>X.id===Z);if(fe){if(W==="select-second"){const X={mode:"vs",champions:[fe.champions[0],$.id],id:A()};P(Z,X),M.some(Le=>Le.id===$.id)||te($)}else W==="change-champion-a"?(k(Z,X=>({...X,champions:[$.id,X.champions[1]]})),M.some(X=>X.id===$.id)||te($)):W==="change-champion-b"&&(k(Z,X=>({...X,champions:[X.champions[0],$.id]})),M.some(X=>X.id===$.id)||te($));p(!1),E(null)}},[R,N,M,te,k,P,A]),ae=h.useMemo(()=>T&&N.find($=>$.id===T)||null,[T,N]),de=h.useMemo(()=>ae?ae.champions.map($=>{var W;return(W=H.find(Z=>Z.id===$))==null?void 0:W.fullInfo}).filter($=>$!==void 0):[],[ae,H]),gt=h.useMemo(()=>!b||ae&&ae.mode==="vs"?null:ae&&ae.mode==="normal"&&de.length>0?de[0]:null,[b,ae,de]),Yt=h.useCallback($=>{N.forEach(W=>{W.champions.includes($)&&I(W.id)}),ne($)},[N,ne,I]),Xt=h.useCallback($=>{E({mode:"select-second",tabId:$}),p(!0)},[]),Qt=h.useCallback($=>{E({mode:"change-champion-a",tabId:$,championIndex:0}),p(!0)},[]),er=h.useCallback($=>{E({mode:"change-champion-b",tabId:$,championIndex:1}),p(!0)},[]);return e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6 lg:px-8 pb-4 md:pb-5",children:[u&&e.jsx(qe,{championList:r,selectedChampions:q,onSelect:ie,onClose:()=>{m(!1),re()},open:u,onOpenChange:$=>{m($),$||re()}}),e.jsx(ns,{open:L,vsSelectorMode:R,tabs:N,championList:r,selectedChampions:M,onSelect:Jt,onClose:()=>{p(!1),E(null),re()},onOpenChange:$=>{p($),$||(E(null),re())}}),e.jsx("div",{className:"mt-3 md:mt-4",children:e.jsx(Gr,{activeTab:l,onTabChange:$=>{y($)},onReset:Te})}),l==="runes"&&e.jsx(Wr,{version:s,lang:t}),l==="items"&&e.jsx(Qr,{version:s,lang:t}),(l==="skills"||l==="stats")&&e.jsxs(e.Fragment,{children:[M.length>0&&H.length>0&&e.jsxs("div",{className:"mt-4 md:mt-6 space-y-4 md:space-y-6",children:[b&&N.length>0&&e.jsx(ss,{tabs:N,championsWithFullInfo:H,version:s,selectedTabId:T,sensors:ve,onDragEnd:_,onSelectTab:V,onRemoveTab:I,onVsClick:Xt,onChangeChampionA:Qt,onChangeChampionB:er,onAddClick:()=>m(!0)}),e.jsx(zr,{champions:b&&ae&&ae.mode==="vs"&&de.length===2?de:b&&gt?[gt]:H.map($=>$.fullInfo),version:s,activeTab:l==="skills"?"skills":"stats",championList:r,onAddChampion:b?void 0:ie,onRemoveChampion:Yt,onReorderChampions:b?void 0:Ce,vsMode:b&&ae&&ae.mode==="vs"&&de.length===2?{championA:de[0],championB:de[1]}:void 0})]}),M.length===0&&e.jsx("div",{className:"mt-4",children:e.jsx(Ur,{onAddClick:()=>m(!0)})})]})]})}function us(t){return e.jsx(_r,{initialDDragonVersion:t.version,initialCDragonVersion:t.cdragonVersion,children:e.jsx(ls,{...t})})}export{us as default};
