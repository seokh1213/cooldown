import{r as b,j as e,d as U,f as Ut,O as Zt,g as Wt,v as Ze,w as be,x as We,K as qe,y as Ye,z as Je,A as Xe,E as Qe,F as et,G as he,I as je,J as jt,L as qt,M as Nt,N as vt,Q as yt}from"/cooldown/assets/react-vendor-CrtkgiRr.js";import{c as A,B as se,u as te,g as Me,C as ee,D as wt,V as Ct,a as St,b as kt,d as ve,l as F,e as Yt,f as tt,P as Jt,S as ot,h as Xt,i as Tt,T as lt,j as it,k as ct,m as Ke,s as He,n as $e,r as le,o as Ae,p as dt,q as Ee,t as Qt}from"/cooldown/assets/index-1a5C3Mfz.js";import{e as er,f as ke,X as Ne,S as Re,g as Be,G as _e,T as ut,R as tr}from"/cooldown/assets/lucide-icons-DdUfcdEd.js";const rt=b.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:A("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r}));rt.displayName="Card";const rr=b.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:A("flex flex-col space-y-1.5 p-6",t),...r}));rr.displayName="CardHeader";const sr=b.forwardRef(({className:t,...r},s)=>e.jsx("h3",{ref:s,className:A("text-2xl font-semibold leading-none tracking-tight",t),...r}));sr.displayName="CardTitle";const nr=b.forwardRef(({className:t,...r},s)=>e.jsx("p",{ref:s,className:A("text-sm text-muted-foreground",t),...r}));nr.displayName="CardDescription";const st=b.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:A("p-6 pt-0",t),...r}));st.displayName="CardContent";const ar=b.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:A("flex items-center p-6 pt-0",t),...r}));ar.displayName="CardFooter";const fe=b.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:A("w-full caption-bottom text-sm",t),...r})}));fe.displayName="Table";const xe=b.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:A("[&_tr]:border-b",t),...r}));xe.displayName="TableHeader";const pe=b.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:A("[&_tr:last-child]:border-0",t),...r}));pe.displayName="TableBody";const or=b.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:A("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));or.displayName="TableFooter";const G=b.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:A("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));G.displayName="TableRow";const K=b.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:A("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r}));K.displayName="TableHead";const _=b.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:A("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r}));_.displayName="TableCell";const lr=b.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:A("mt-4 text-sm text-muted-foreground",t),...r}));lr.displayName="TableCaption";const Ge=b.forwardRef(({className:t,type:r,...s},n)=>e.jsx("input",{type:r,className:A("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base md:text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...s}));Ge.displayName="Input";function ir({className:t,...r}){return e.jsx("div",{className:A("animate-pulse rounded-md bg-muted",t),...r})}function cr({addChampion:t,data:r,name:s,thumbnailSrc:n,selected:a}){const[l,c]=b.useState(!1),[i,f]=b.useState(!1),[x,h]=b.useState(a);b.useEffect(()=>{h(a)},[a]);const y=U.useRef(!1),C=b.useCallback(o=>{if(y.current){y.current=!1;return}o.preventDefault(),o.stopPropagation(),h(!a),t(r)},[t,r,a]),N=b.useCallback(o=>{o.stopPropagation(),y.current=!0,h(!a),t(r),setTimeout(()=>{y.current=!1},300)},[t,r,a]),j=b.useCallback(()=>{c(!0)},[]),u=b.useCallback(()=>{f(!0)},[]);return e.jsxs("div",{className:"flex flex-col items-center justify-center m-1 h-fit",children:[e.jsxs(se,{variant:"ghost",className:"cursor-pointer rounded-full shrink-0 p-0 h-auto w-auto hover:bg-transparent relative touch-manipulation",onClick:C,onTouchStart:N,"aria-label":a?`Deselect ${s}`:`Select ${s}`,"aria-pressed":a,children:[e.jsxs("div",{className:"relative w-12 h-12 md:w-14 md:h-14 shrink-0 overflow-hidden rounded-full",children:[!l&&!i&&e.jsx(ir,{className:"absolute inset-0 rounded-full"}),!l&&!i&&e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-muted via-muted/80 to-muted/60 blur-sm"}),e.jsx("img",{className:A("absolute inset-0 w-full h-full rounded-full bg-black/5 border-0 box-border transition-all duration-200 ease-out object-cover",!a&&!x&&"hover:scale-105",l?"opacity-100":"opacity-0"),src:n,alt:s,loading:"lazy",decoding:"async",width:"56",height:"56",onLoad:j,onError:u}),(x||a)&&e.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{boxShadow:"inset 0 0 0 2px hsl(var(--primary)), 0 0 0 3px hsl(var(--primary) / 0.3)"}})]}),(x||a)&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 md:w-5 md:h-5 bg-primary rounded-full flex items-center justify-center pointer-events-none z-20 shadow-lg border-2 border-background",children:e.jsx(er,{className:"w-2.5 h-2.5 md:w-3 md:h-3 text-primary-foreground stroke-[3]"})})]}),e.jsx("div",{className:"text-xs md:text-sm whitespace-nowrap mt-0.5",children:s})]})}const mt=U.memo(cr);function dr(t,r){const{lang:s}=te();return b.useMemo(()=>{if(!t)return[];if(!r)return t;const a=Me(r,s);return t.filter(l=>a.some(c=>{const i=c.toLowerCase();return!!(l.name.toLowerCase().includes(i)||l.hangul&&l.hangul.toLowerCase().includes(i)||l.id.toLowerCase().includes(i)||s==="ko_KR"&&(Me(l.name,s).some(x=>x.toLowerCase().includes(i))||l.hangul&&Me(l.hangul,s).some(h=>h.toLowerCase().includes(i))))}))},[t,r,s])}const ft="championSelectorScrollPosition";function ur(t,r,s){b.useEffect(()=>{if(!r||!s)return;const n=()=>{if(t.current){const a=sessionStorage.getItem(ft);if(a){const l=parseInt(a,10);t.current.scrollTop=l}}};n(),requestAnimationFrame(()=>{n()}),setTimeout(()=>{n()},200)},[r,s,t]),b.useEffect(()=>{const n=t.current;if(!n||!r||!s)return;let a;const l=()=>{clearTimeout(a),a=setTimeout(()=>{sessionStorage.setItem(ft,n.scrollTop.toString())},100)};return n.addEventListener("scroll",l,{passive:!0}),()=>{clearTimeout(a),n.removeEventListener("scroll",l)}},[r,s,t])}function mr({championList:t,selectedChampions:r,onSelect:s,onClose:n,slotIndex:a,open:l,onOpenChange:c,vsMode:i}){const{t:f}=te(),[x,h]=b.useState(!1),y=l!==void 0,C=y?!!l:x,N=y?c||(()=>{}):h,[j,u]=b.useState(""),[o,d]=b.useState(-1),g=b.useRef(null),w=b.useRef(null),m=b.useRef(null),v=n!==void 0,p=n||(()=>{}),k=dr(t,j),S=b.useMemo(()=>new Set(r.map(T=>T.id)),[r]),P=b.useMemo(()=>i&&(r.find(T=>T.id===i.currentChampionId)||(t==null?void 0:t.find(T=>T.id===i.currentChampionId)))||null,[i,r,t]),$=b.useMemo(()=>i?k.filter(T=>T.id!==i.currentChampionId):k,[k,i]),B=b.useCallback(T=>{const V=T.target;g.current&&!g.current.contains(V)&&(N(!1),u(""),d(-1))},[N]);b.useEffect(()=>{if(C&&!v)return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[C,B,v]);const I=b.useCallback(T=>{N(T),T||(u(""),d(-1),n&&n()),c&&c(T)},[n,c]),M=b.useCallback(T=>{s(T),v?d(-1):(N(!1),d(-1),document.body.style.overflow="",p())},[s,n,v]),O=b.useCallback(T=>{if(!(!C&&!v||!t))if(T.key==="ArrowDown")T.preventDefault(),d(V=>V<k.length-1?V+1:V);else if(T.key==="ArrowUp")T.preventDefault(),d(V=>V>0?V-1:-1);else if(T.key==="Enter"&&o>=0){T.preventDefault();const V=k[o];V&&M(V)}else T.key==="Escape"&&I(!1)},[C,v,t,k,o,M,I,S]);return b.useEffect(()=>{if(o>=0&&m.current){const T=m.current.querySelectorAll("[data-champion-item]");T[o]&&T[o].scrollIntoView({block:"nearest"})}},[o]),b.useEffect(()=>{y||N(!!v)},[v,y,N]),ur(m,v,C),b.useEffect(()=>{v&&C&&requestAnimationFrame(()=>{var T;(T=w.current)==null||T.focus()})},[v,C]),v?y&&!C?null:e.jsx(wt,{open:C,onOpenChange:I,children:e.jsxs(Ut,{children:[e.jsx(Zt,{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm"}),e.jsxs(Wt,{ref:g,className:"fixed inset-0 left-0 top-0 translate-x-0 translate-y-0 md:inset-auto md:left-[50%] md:top-[50%] md:translate-x-[-50%] md:translate-y-[-50%] w-full h-full md:w-[600px] md:h-[500px] lg:w-[800px] lg:h-[600px] p-0 flex flex-col overflow-hidden max-w-none md:max-w-[600px] lg:max-w-[800px] max-h-none md:max-h-[500px] lg:max-h-[600px] rounded-none md:rounded-xl z-50 border bg-background shadow-lg",onInteractOutside:()=>{I(!1)},onEscapeKeyDown:()=>{I(!1)},children:[e.jsxs(Ct,{children:[e.jsx(St,{children:i?f.championSelector.vsSelectOpponent:f.championSelector.selectChampion}),e.jsx(kt,{children:i?f.championSelector.vsSelectOpponentDescription:f.championSelector.selectChampionDescription})]}),i&&P&&e.jsxs("div",{className:"p-4 border-b-2 border-destructive/30 bg-destructive/5 flex items-center gap-3 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ee(P.version||"",P.id),alt:P.name,className:"w-10 h-10 rounded-full border-2 border-destructive/50"}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-destructive rounded-full p-0.5",children:e.jsx(Re,{className:"h-3 w-3 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-foreground",children:P.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:f.championSelector.currentChampion})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-destructive",children:[e.jsx(Re,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"VS"})]})]}),e.jsxs("div",{className:A("p-4 border-b border-border flex items-center gap-2 shrink-0",i?"bg-muted/30":"bg-card"),children:[e.jsx(ke,{className:A("h-5 w-5 shrink-0",i?"text-destructive":"text-muted-foreground")}),e.jsx(Ge,{ref:w,type:"text",placeholder:i?f.championSelector.vsSearchPlaceholder:f.championSelector.searchPlaceholder,value:j,onChange:T=>{u(T.target.value),d(-1)},onKeyDown:O,className:"flex-1",autoFocus:!0}),e.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>I(!1),children:e.jsx(Ne,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:m,className:"overflow-y-auto overflow-x-hidden p-4 flex-1 min-h-0 md:flex-none md:w-[600px] md:h-[427px] lg:w-[800px] lg:h-[527px]",children:t?(i?$:k).length>0?e.jsxs(e.Fragment,{children:[i&&e.jsx("div",{className:"mb-3 pb-2 border-b border-destructive/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-semibold",children:f.championSelector.selectOpponentLabel})]})}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:(i?$:k).map((T,V)=>{const D=o===V,R=i?!1:S.has(T.id);return e.jsx("div",{"data-champion-item":!0,className:A(D&&"ring-2 ring-offset-1 rounded-md",i?"ring-destructive":"ring-primary"),children:e.jsx(mt,{addChampion:L=>M(L),data:T,name:T.name,selected:R,thumbnailSrc:ee(T.version||"",T.id)})},T.id)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground min-h-[200px] space-y-2",children:[e.jsx(ke,{className:"h-12 w-12 opacity-50"}),e.jsx("p",{className:"text-base font-medium",children:j?f.championSelector.noResults:f.championSelector.emptyList})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground min-h-[200px]",children:f.championSelector.loading})})]})]})}):e.jsxs("div",{ref:g,className:"w-full",children:[e.jsxs(se,{onClick:()=>{N(!0),setTimeout(()=>{var T;return(T=w.current)==null?void 0:T.focus()},0)},variant:"ghost",className:A("w-full flex flex-col items-center justify-center space-y-2","text-muted-foreground hover:text-foreground","py-4 h-auto"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:e.jsx(ke,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-medium",children:f.championSelector.selectChampion})]}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>{N(!1),u(""),document.body.style.overflow="",p()},"aria-hidden":"true"}),e.jsxs("div",{className:A("fixed inset-0 z-50 md:absolute md:inset-auto md:top-full md:left-0 md:right-0 md:mt-2 md:z-10 md:rounded-lg md:border md:border-border md:shadow-lg bg-card md:max-h-[60vh] flex flex-col",v&&"md:relative md:inset-0 md:mt-0 md:rounded-lg md:border md:shadow-lg"),children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-2 sticky top-0 bg-card z-10",children:[e.jsx(ke,{className:"h-5 w-5 text-muted-foreground shrink-0"}),e.jsx(Ge,{ref:w,type:"text",placeholder:f.championSelector.searchPlaceholder,value:j,onChange:T=>{u(T.target.value),d(-1)},onKeyDown:O,className:"flex-1",autoFocus:!0}),e.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>{N(!1),u(""),document.body.style.overflow="",p()},children:e.jsx(Ne,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:m,className:"flex-1 overflow-auto p-4",style:{maxHeight:"calc(100vh - 120px)"},children:t?e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:k.map((T,V)=>{const D=o===V,R=S.has(T.id);return e.jsx("div",{"data-champion-item":!0,className:A(D&&"ring-2 ring-primary ring-offset-1 rounded-md"),children:e.jsx(mt,{addChampion:L=>M(L),data:T,name:T.name,selected:R,thumbnailSrc:ee(T.version||"",T.id)})},T.id)})}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:f.championSelector.loading})})]})]})]})}const De=U.memo(mr);function Vt(t="ko_KR"){const r=ve(t);return[{key:"hp",label:r.stats.health,format:s=>Math.round(s)},{key:"hpperlevel",label:r.stats.healthPerLevel,format:s=>s.toFixed(1)},{key:"mp",label:r.stats.mana,format:s=>Math.round(s)},{key:"mpperlevel",label:r.stats.manaPerLevel,format:s=>s.toFixed(1)},{key:"movespeed",label:r.stats.movespeed,format:s=>Math.round(s)},{key:"armor",label:r.stats.armor,format:s=>Math.round(s)},{key:"armorperlevel",label:r.stats.armorPerLevel,format:s=>s.toFixed(1)},{key:"spellblock",label:r.stats.spellblock,format:s=>Math.round(s)},{key:"spellblockperlevel",label:r.stats.spellblockPerLevel,format:s=>s.toFixed(1)},{key:"attackdamage",label:r.stats.attackdamage,format:s=>Math.round(s)},{key:"attackdamageperlevel",label:r.stats.attackdamagePerLevel,format:s=>s.toFixed(1)},{key:"attackspeed",label:r.stats.attackspeed,format:s=>s.toFixed(3)},{key:"attackspeedperlevel",label:r.stats.attackspeedPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"attackrange",label:r.stats.attackrange,format:s=>Math.round(s)},{key:"crit",label:r.stats.crit,format:s=>`${(s*100).toFixed(1)}%`},{key:"critperlevel",label:r.stats.critPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"hpregen",label:r.stats.hpregen,format:s=>s.toFixed(1)},{key:"hpregenperlevel",label:r.stats.hpregenPerLevel,format:s=>s.toFixed(1)},{key:"mpregen",label:r.stats.mpregen,format:s=>s.toFixed(1)},{key:"mpregenperlevel",label:r.stats.mpregenPerLevel,format:s=>s.toFixed(1)}]}const ge=["Q","W","E","R"];function fr({champions:t,version:r,championList:s,onAddChampion:n,onRemoveChampion:a,onReorderChampions:l}){const{t:c,lang:i}=te(),[f,x]=b.useState(!1),h=Vt(i),y=Ze(be(Ye,{activationConstraint:{distance:8}}),be(qe,{coordinateGetter:We})),C=o=>{},N=o=>{const{active:d,over:g}=o;if(g&&d.id!==g.id&&l){const w=t.findIndex(v=>v.id===d.id),m=t.findIndex(v=>v.id===g.id);w!==-1&&m!==-1&&l(w,m)}},j=({champion:o,children:d,className:g})=>{const{setNodeRef:w,transform:m,transition:v,isDragging:p}=he({id:o.id,disabled:!0}),S={transform:m?je.Transform.toString(m):void 0,transition:p?v:void 0,opacity:p?.5:1};return e.jsx(_,{ref:w,style:S,className:g,children:d})},u=({champion:o,index:d})=>{const{attributes:g,listeners:w,setNodeRef:m,transform:v,transition:p,isDragging:k}=he({id:o.id}),P={transform:v?je.Transform.toString(v):void 0,transition:k?p:void 0,opacity:k?.5:1};return e.jsx(K,{ref:m,style:P,className:A("text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] select-none",d<t.length-1&&"border-r border-border/30",k&&"z-50"),children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1.5 relative",children:[l&&e.jsx("button",{...g,...w,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity absolute -left-2 top-1/2 -translate-y-1/2","aria-label":"Drag to reorder",children:e.jsx(_e,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ee(r,o.id),alt:o.name,className:"w-8 h-8 rounded-full"}),a&&e.jsx(se,{variant:"ghost",size:"icon",className:A("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:$=>{$.stopPropagation(),a(o.id)},"aria-label":`Remove ${o.name}`,children:e.jsx(Ne,{className:"h-2.5 w-2.5"})})]}),e.jsx("div",{className:"text-[10px] font-semibold leading-tight text-center break-words text-foreground",children:o.name})]})})};return e.jsxs("div",{className:"relative",children:[e.jsx(Je,{sensors:y,collisionDetection:Xe,onDragStart:C,onDragEnd:N,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(fe,{className:"border-collapse table-fixed w-auto",children:[e.jsx(xe,{children:e.jsxs(G,{className:"border-b border-border/30 select-none",children:[e.jsx(K,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[90px] min-w-[90px] border-r border-border/30 select-none",style:{left:0},children:c.stats.label}),e.jsx(Qe,{items:t.map(o=>o.id),strategy:et,children:t.map((o,d)=>e.jsx(u,{champion:o,index:d},o.id))}),n&&e.jsx(K,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] border-l border-border/30 select-none",children:e.jsxs(se,{onClick:()=>x(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Be,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsx(pe,{children:h.map(o=>{const d=t.map(m=>{var v;return((v=m.stats)==null?void 0:v[o.key])??0}),g=Math.max(...d),w=Math.min(...d);return e.jsxs(G,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(_,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:o.label}),t.map((m,v)=>{var P;const p=((P=m.stats)==null?void 0:P[o.key])??0,k=p===g&&g!==w,S=p===w&&g!==w;return e.jsx(j,{champion:m,className:A("p-1.5 text-[11px] text-center",v<t.length-1&&"border-r border-border/30",k&&"text-primary font-semibold",S&&"text-muted-foreground"),children:o.format(p)},m.id)}),n&&e.jsx(_,{className:"p-1.5 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[24px]"})})]},o.key)})})]})})}),f&&n&&s&&e.jsx(De,{championList:s,selectedChampions:t,onSelect:o=>{n(o)},onClose:()=>x(!1)})]})}function xr({champions:t,version:r,vsMode:s}){const{t:n,lang:a}=te(),l=Vt(a);if(s&&t.length===2){const c=s.championA,i=s.championB;return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(fe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(xe,{children:e.jsxs(G,{className:"border-b border-border/30 select-none",children:[e.jsx(K,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:n.stats.label}),e.jsx(K,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:ee(r,c.id),alt:c.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:c.name})]})}),e.jsx(K,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(K,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:ee(r,i.id),alt:i.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:i.name})]})})]})}),e.jsx(pe,{children:l.map(f=>{var N,j;const x=((N=c.stats)==null?void 0:N[f.key])??0,h=((j=i.stats)==null?void 0:j[f.key])??0,y=Math.max(x,h),C=Math.min(x,h);return e.jsxs(G,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(_,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:f.label}),e.jsx(_,{className:A("p-1.5 text-[10px] text-center border-r border-border/30",x===y&&y!==C&&"text-primary font-semibold",x===C&&y!==C&&"text-muted-foreground"),children:f.format(x)}),e.jsx(_,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(_,{className:A("p-1.5 text-[10px] text-center",h===y&&y!==C&&"text-primary font-semibold",h===C&&y!==C&&"text-muted-foreground"),children:f.format(h)})]},f.key)})})]})})})})})}return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(fe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(xe,{children:e.jsxs(G,{className:"border-b border-border/30 select-none",children:[e.jsx(K,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[70px] min-w-[70px] border-r border-border/30 select-none",style:{left:0},children:n.stats.label}),t.map(c=>e.jsx(K,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:ee(r,c.id),alt:c.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:c.name})]})},c.id))]})}),e.jsx(pe,{children:l.map(c=>{const i=t.map(h=>{var y;return((y=h.stats)==null?void 0:y[c.key])??0}),f=Math.max(...i),x=Math.min(...i);return e.jsxs(G,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(_,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:c.label}),t.map(h=>{var j;const y=((j=h.stats)==null?void 0:j[c.key])??0,C=y===f&&f!==x,N=y===x&&f!==x;return e.jsx(_,{className:A("p-1.5 text-[11px] text-center",C&&"text-primary font-semibold",N&&"text-muted-foreground"),children:c.format(y)},h.id)})]},c.key)})})]})})})})})}async function pr(t,r,s){let n={},a=null;try{a=await Yt(t,s),n=a.spellDataMap}catch(l){F.warn(`Failed to load Community Dragon data for ${t}:`,l)}return r.map((l,c)=>{let i={};if(n[c.toString()])i=n[c.toString()];else{const f=l.id.replace(t,"");for(const x of Object.keys(n))if(x.toLowerCase().includes(f.toLowerCase())||x.toLowerCase().includes(l.id.toLowerCase())){i=n[x];break}}return{spell:l,communityDragonData:i,spellIndex:c,ddragonVersion:(a==null?void 0:a.ddragonVersion)??s,cdragonVersion:(a==null?void 0:a.cdragonVersion)??null}})}async function Pt(t,r){const s={},n=t.map(async a=>{if(!a.spells||a.spells.length===0){s[a.id]=[];return}try{s[a.id]=await pr(a.id,a.spells,r)}catch(l){F.warn(`Failed to get integrated spell data for ${a.id}:`,l),s[a.id]=a.spells.map((c,i)=>({spell:c,communityDragonData:{},spellIndex:i}))}});return await Promise.all(n),s}const Fe={physicalDamage:{tag:"span",className:"text-red-600 dark:text-red-500 font-semibold"},magicDamage:{tag:"span",className:"text-blue-600 dark:text-blue-500 font-semibold"},trueDamage:{tag:"span",className:"text-yellow-600 dark:text-yellow-500 font-semibold"},status:{tag:"span",className:"text-purple-600 dark:text-purple-500"},lifeSteal:{tag:"span",className:"text-green-600 dark:text-green-500"},scaleAD:{tag:"span",className:"text-orange-600 dark:text-orange-500"},scaleAP:{tag:"span",className:"text-blue-600 dark:text-blue-400"},scaleArmor:{tag:"span",className:"text-orange-600 dark:text-orange-400"},scaleLevel:{tag:"span",className:"text-gray-600 dark:text-gray-400"},healing:{tag:"span",className:"text-green-600 dark:text-green-400"},speed:{tag:"span",className:"text-cyan-600 dark:text-cyan-500"},keywordMajor:{tag:"span",className:"text-yellow-600 dark:text-yellow-400 font-semibold"},keywordStealth:{tag:"span",className:"text-purple-600 dark:text-purple-400 font-semibold"},spellPassive:{tag:"span",className:"text-gray-600 dark:text-gray-500 italic"},spellActive:{tag:"span",className:"text-gray-900 dark:text-white font-semibold"},recast:{tag:"span",className:"text-yellow-600 dark:text-yellow-300"},damage:{tag:"span",className:"text-red-600 dark:text-red-400"},shield:{tag:"span",className:"text-blue-600 dark:text-blue-300"},mana:{tag:"span",className:"text-blue-600 dark:text-blue-400"},energy:{tag:"span",className:"text-yellow-600 dark:text-yellow-400"},health:{tag:"span",className:"text-red-600 dark:text-red-400"},cooldown:{tag:"span",className:"text-gray-600 dark:text-gray-300"},range:{tag:"span",className:"text-cyan-600 dark:text-cyan-400"},radius:{tag:"span",className:"text-purple-600 dark:text-purple-400"},width:{tag:"span",className:"text-indigo-600 dark:text-indigo-400"},length:{tag:"span",className:"text-pink-600 dark:text-pink-400"},rules:{tag:"span",className:"text-gray-600 dark:text-gray-400 italic"}};function gr(t){let r=t;r=r.replace(/<font\s+color=['"]([^'"]+)['"]\s*>/gi,'<span style="color: $1">'),r=r.replace(/<\/font>/gi,"</span>"),Object.entries(Fe).forEach(([n,{tag:a,className:l}])=>{const c=new RegExp(`</${n}>`,"gi");r=r.replace(c,`</${a}>`);const i=new RegExp(`<${n}>`,"gi");r=r.replace(i,`<${a}${l?` class="${l}"`:""}>`)});const s=["keywordMajor","keywordStealth","rules","recast"];return s.forEach(n=>{r=r.replace(new RegExp(`</${n}>`,"gi"),"</span>"),n==="rules"?r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-gray-600 dark:text-gray-400 italic">'):n==="keywordStealth"?r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-purple-600 dark:text-purple-400 font-semibold">'):r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-yellow-600 dark:text-yellow-400 font-semibold">')}),r=r.replace(/<(\w+)(?![\\w])>/gi,(n,a)=>Fe[a]||s.includes(a)||a==="font"||a==="br"?n:"<span>"),r=r.replace(/<\/(\w+)(?![\\w])>/gi,(n,a)=>Fe[a]||s.includes(a)||a==="font"||a==="br"?n:"</span>"),r}function $t(t){const r=t.trim(),s=/^([a-zA-Z_][a-zA-Z0-9_]*)\s*([*+\/-])\s*(-?\d+(?:\.\d+)?)$/,n=r.match(s);if(n){const a=n[2];return{type:"formula",variable:n[1],operator:a,operand:parseFloat(n[3])}}return{type:"variable",variable:r}}function At(t,r,s){if(!r||typeof r!="string")return null;const n=Object.entries(t).find(([f])=>f!=null&&f.toLowerCase()===r.toLowerCase());if(!n)return null;const[,a]=n,l=a.slice(1,s+1);if(l.length===0)return null;const c=l[0];return l.every(f=>f===c)?c:l}function Et(t,r){if(r.type!=="formula"||!r.operator||r.operand==null)return t;const{operator:s,operand:n}=r;return s==="*"?Array.isArray(t)?t.map(a=>a*n):t*n:s==="+"?Array.isArray(t)?t.map(a=>a+n):t+n:s==="-"?Array.isArray(t)?t.map(a=>a-n):t-n:s==="/"?Array.isArray(t)?t.map(a=>a/n):t/n:t}function ce(t){if(t==null||t==="")return"";const r=typeof t=="number"?t:parseFloat(String(t));return isNaN(r)?String(t):r%1===0?r.toString():parseFloat(r.toFixed(3)).toString()}function xt(t,r,s=!1){if(!t||t.length===0)return"";const n=s&&t.length>1?1:0,l=t.slice(n).filter(h=>h!=null&&h!==""&&h!=="0");if(l.length===0)return"";const c=r?l.slice(0,r):l;if(c.length===0)return"";const i=c.map(h=>ce(h)),f=i[0];return i.every(h=>h===f)?f:i.join("/")}function br(t){let r=t;return r=r.replace(/<br\s*\/?>/gi,"<br />"),r=r.replace(/[^\S\r\n]+/g," "),r}function Y(t){return Array.isArray(t)}function pt(t,r){return Array.isArray(t)?t:Array.from({length:r},()=>t)}function Rt(t,r,s){if(!Y(t)&&!Y(r))return s(t,r);const n=Y(t)?t:pt(t,Y(r)?r.length:1),a=Y(r)?r:pt(r,n.length);if(n.length!==a.length)throw new Error(`Vector length mismatch: ${n.length} vs ${a.length}`);return n.map((l,c)=>s(l,a[c]))}function Ce(t,r){return Rt(t,r,(s,n)=>s+n)}function Se(t,r){return Rt(t,r,(s,n)=>s*n)}function Le(t){return Y(t)?t.every(s=>s===t[0])?ce(t[0]):t.map(s=>ce(s)).join("/"):ce(t)}function ze(t){return Y(t)?t.map(r=>r*100):t*100}function gt(t,r,s="ko_KR"){const n=ve(s),a=t!=null,l=r!=null;if(!a&&!l)return n.stats.abilityPower;const c=t??r;return c===2?t===2&&r===2?n.stats.bonusAttackDamage:n.stats.attackDamage:c===12?t===12&&r===2?n.stats.bonusHealth:n.stats.health:c===1?t===1&&r===2?n.stats.bonusArmor:n.stats.armor:c===6?t===6&&r===2?n.stats.bonusMagicResist:n.stats.magicResist:c===18?t===18&&r===2?n.stats.bonusLifesteal:n.stats.lifesteal:""}function Lt(t,r,s){const n=s==null?void 0:s.DataValues;if(!n)return null;const a=At(n,t.variable,r.maxrank);if(a==null)return null;const l=Et(a,t);return Le(l)}function bt(t,r){const s=n=>Number.isFinite(n)?n.toFixed(r).replace(/\.?0+$/,""):String(n);if(Y(t)){const n=t.map(c=>s(c)),a=n[0];return n.every(c=>c===a)?a:n.join("/")}return s(t)}function hr(t,r,s,n="ko_KR"){const a=s==null?void 0:s.mSpellCalculations,l=s==null?void 0:s.DataValues;if(!a)return null;const c=Object.entries(a).find(([m])=>m!=null&&m.toLowerCase()===t.variable.toLowerCase());if(!c)return null;const[i]=c;function f(m){if(!m||typeof m!="string")return F.debug(`DataValue name is invalid: ${m}`),null;if(!l)return F.debug("dataValues is undefined"),null;const v=At(l,m,r.maxrank);return v??(F.debug(`DataValue "${m}" missing`),null)}function x(m,v=new Set){var k;if(!a)throw new Error("spellCalcs is undefined");const p=a[m];if(!p)throw new Error(`SpellCalculation "${m}" not found`);if(v.has(m))throw new Error(`Circular reference in mSpellCalculations: ${m}`);if(v.add(m),p.__type==="GameCalculationModified"){const S=p;if(!S.mModifiedGameCalculation)throw new Error("mModifiedGameCalculation is missing");const P=x(S.mModifiedGameCalculation,v);if(!S.mMultiplier)return P;let $=null;if(S.mMultiplier.mDataValue){if($=f(S.mMultiplier.mDataValue),$==null)return P}else S.mMultiplier.mNumber!=null&&($=S.mMultiplier.mNumber);if($==null)return P;const B=Se(P.base,$),I=P.statParts.map(M=>({name:M.name,ratio:Se(M.ratio,$)}));return{base:B,statParts:I,isPercent:P.isPercent,precision:P.precision}}if(p.__type==="GameCalculation"){const S=p,P=S.mFormulaParts??[];let $=0;const B=[],I=!!S.mDisplayAsPercent;if(P.length===1&&P[0].__type==="ByCharLevelBreakpointsCalculationPart"&&S.mSimpleTooltipCalculationDisplay===6){const V=P[0],D=V.mLevel1Value??0;let R=D;for(const J of V.mBreakpoints??[])typeof J.mAdditionalBonusAtThisLevel=="number"&&(R+=J.mAdditionalBonusAtThisLevel);return{base:[D,R],statParts:[],isPercent:I,isBreakpointRange:!0,precision:void 0}}if(P.length===1&&P[0].__type==="ByCharLevelBreakpointsCalculationPart"&&I){const V=P[0],D=V.mLevel1Value??0,R=V.mInitialBonusPerLevel??0,L=(V.mBreakpoints??[])[0];if(R!==0&&(L!=null&&L.mLevel)){const z=L.mLevel-1,J=Math.max(z-1,0),re=D+J*R;return{base:[D,re],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}}if(P.length===1&&P[0].__type==="ByCharLevelInterpolationCalculationPart"&&I){const V=P[0],D=V.mStartValue??0,R=V.mEndValue??D;return{base:[D,R],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}for(const V of P){const D=V.__type;if(D==="NamedDataValueCalculationPart"){const R=V;if(!R.mDataValue){F.debug("NamedDataValueCalculationPart missing mDataValue",V);continue}const L=f(R.mDataValue);if(L==null)continue;$=Ce($,L)}else if(D==="EffectValueCalculationPart"){const L=V.mEffectIndex??0,z=((k=r.effectBurn)==null?void 0:k[L])??null;if(!z)F.debug(`EffectValueCalculationPart: effectBurn[${L}] is missing`,{spellId:r.id});else{const J=z.split("/").map(re=>parseFloat(re)).filter(re=>!Number.isNaN(re));if(J.length>0){const re=J.length>r.maxrank?J.slice(0,r.maxrank):J;$=Ce($,re)}}}else if(D==="StatByNamedDataValueCalculationPart"){const R=V;if(!R.mDataValue){F.debug("StatByNamedDataValueCalculationPart missing mDataValue",V);continue}const L=f(R.mDataValue);if(L==null)continue;const z=gt(R.mStat,R.mStatFormula,n);B.push({name:z,ratio:L})}else if(D==="StatByCoefficientCalculationPart"){const R=V;if(R.mCoefficient==null){F.debug("StatByCoefficientCalculationPart missing mCoefficient",V);continue}const L=gt(R.mStat,R.mStatFormula,n),z=R.mCoefficient;B.push({name:L,ratio:z,isCoefficient:!0})}else if(D==="AbilityResourceByCoefficientCalculationPart"){const R=V;if(R.mCoefficient==null){F.debug("AbilityResourceByCoefficientCalculationPart missing mCoefficient",V);continue}const L=ve(n);let z=L.common.mana;if(r.costType){const ne=r.costType.trim();ne&&!ne.includes("{{")?z=ne:r.resource&&!r.resource.includes("{{")&&(z=r.resource)}else r.resource&&!r.resource.includes("{{")&&(z=r.resource);const re=R.mStatFormula===2?`${L.common.bonus} ${z}`:z,X=R.mCoefficient;B.push({name:re,ratio:X,isCoefficient:!0})}else if(D==="NumberCalculationPart"){const L=V.mNumber??0;$=Ce($,L)}else if(D==="ByCharLevelBreakpointsCalculationPart"){const R=V;let L=R.mLevel1Value||0;for(const z of R.mBreakpoints??[])z.mAdditionalBonusAtThisLevel!=null&&(L+=z.mAdditionalBonusAtThisLevel);$=Ce($,L)}else if(D==="ProductOfSubPartsCalculationPart"){const R=V,L=X=>{var Te;if(!X||!X.__type)return 0;const ne=X.__type;if(ne==="NamedDataValueCalculationPart"){const H=X;if(!H.mDataValue)return F.debug("ProductOfSubPartsCalculationPart: NamedDataValueCalculationPart missing mDataValue",X),0;const Q=f(H.mDataValue);return Q??0}if(ne==="NumberCalculationPart")return X.mNumber??0;if(ne==="EffectValueCalculationPart"){const Q=X.mEffectIndex??0,de=((Te=r.effectBurn)==null?void 0:Te[Q])??null;if(!de)return F.debug(`ProductOfSubPartsCalculationPart: EffectValueCalculationPart missing effectBurn[${Q}]`,{spellId:r.id}),0;let ye;if(de.includes("/")){const oe=de.split("/").map(we=>Number.parseFloat(we)).filter(we=>!Number.isNaN(we));if(oe.length===0)return 0;ye=oe.length===1?oe[0]:oe}else{const oe=Number.parseFloat(de);if(Number.isNaN(oe))return 0;ye=oe}return ye}return F.debug(`ProductOfSubPartsCalculationPart: unsupported sub part type "${ne}"`,X),0},z=L(R.mPart1),J=L(R.mPart2),re=Se(z,J);$=Ce($,re)}}let M=$,O=B;if(S.mMultiplier){let V=null;S.mMultiplier.mDataValue?(V=f(S.mMultiplier.mDataValue),V==null&&(V=null)):S.mMultiplier.mNumber!=null&&(V=S.mMultiplier.mNumber),V!=null&&(M=Se(M,V),O=O.map(D=>({...D,ratio:Se(D.ratio,V)})))}let T;return typeof S.mPrecision=="number"&&S.mPrecision>=0?T=S.mPrecision+1:T=void 0,{base:M,statParts:O,isPercent:I,precision:T}}throw new Error(`Unsupported mSpellCalculation type: ${p.__type}`)}let h;try{h=x(i)}catch(m){return F.error("Failed to evaluate calculation:",m),null}let y;const C=h.precision;h.isPercent?C!=null?Y(h.base)?y=h.base.map(m=>m*100):y=h.base*100:y=ze(h.base):y=h.base;const N=h.statParts.map(m=>{if(m.isCoefficient){const v=C!=null?Y(m.ratio)?m.ratio.map(p=>p*100):m.ratio*100:ze(m.ratio);return{...m,ratio:v}}if(C!=null){const v=Y(m.ratio)?m.ratio.map(p=>p*100):m.ratio*100;return{...m,ratio:v}}return{...m,ratio:ze(m.ratio)}});let j=null;const u=Y(y)&&y.length>0&&y.every(m=>m===0),o=!Y(y)&&y===0;if(!u&&!o)if(h.isCharLevelRange&&Y(y)&&y.length===2){const[m,v]=y,p=ce(m),k=ce(v);j=`(${p}% ~ ${k}%)`}else if(h.isBreakpointRange&&Y(y)&&y.length===2){const[m,v]=y,p=ce(m),k=ce(v);j=h.isPercent?`(${p}% ~ ${k}%)`:`(${p} ~ ${k})`}else{const m=C!=null?bt(y,C):Le(y);j=h.isPercent?`${m}%`:m}const d=N.map(m=>{const v=C!=null?bt(m.ratio,C):Le(m.ratio);return m.name?`(${v}% ${m.name})`:`(${v}%)`}),g=[];if(j&&g.push(j),g.push(...d),g.length===0)return null;const w=g.join(" + ");return g.length===1?w:`(${w})`}function jr(t,r){return!Number.isFinite(r)||r<0?t:t.replace(/-?\d+(?:\.\d+)?/g,s=>{const n=Number.parseFloat(s);return Number.isFinite(n)?n.toFixed(r):s})}function Bt(t,r,s,n="ko_KR"){if(!r)return t;let a=t;a=a.replace(/(}})\s*\+\s*(\S)/g,"$1 + $2").replace(/(\S)\s*\+\s*({{)/g,"$1 + $2").replace(/(\S)\s*~\s*(\S)/g,"$1 ~ $2"),a=a.replace(/\{\{([^}]*\{\{[^}]*}}[^}]*)}}/g,()=>""),a=a.replace(/\{\{Spell_[^}]*Tooltip[^}]*}}/gi,""),a=a.replace(/\{\{spellmodifierdescriptionappend}}/gi,"");const l=/\{\{([^}]+)}}/g;return a=a.replace(l,(c,i)=>{const f=i.trim();if(f==="spellmodifierdescriptionappend"||f.includes("gamemodeinteger")||f.includes("Spell_")&&f.includes("Tooltip"))return"";let x=f,h;const y=/^([a-zA-Z_][a-zA-Z0-9_]*)(?:\.(\d+))(.*)$/.exec(f);if(y){const[,N,j,u]=y,o=Number.parseInt(j,10);Number.isFinite(o)&&(h=o,x=`${N}${u}`)}const C=Nr(x,r,s,n);return C!==null?h!==void 0?jr(C,h):C:""}),a=a.replace(/\{\{\s*\}/g,""),a=a.replace(/\}\}/g,""),a=a.replace(/\{\{/g,""),a=a.replace(/%[^\s:%]+:[^\s%]+%/g,""),a=a.replace(/\s+%\s+/g," "),a=a.replace(new RegExp("(?<!\\d)\\s*%\\s*(?!\\d)","g"),""),a=a.replace(/^\s*%\s*(?!\d)/g,""),a=a.replace(new RegExp("(?<!\\d)\\s*%\\s*$","g"),""),a=a.replace(/[^\S\r\n]+/g," "),a}function Nr(t,r,s,n="ko_KR"){const a=$t(t),l=vr(a,r,s);if(l!==null)return l;const c=Lt(a,r,s);return c!==null?c:hr(a,r,s,n)}function vr(t,r,s){const n=t.variable,a=/^e(\d+)$/i.exec(n);if(!a)return null;const l=Number.parseInt(a[1],10);if(!Number.isFinite(l)||l<=0)return null;const c=(s==null?void 0:s.effectBurn)??r.effectBurn;if(!c)return null;const i=c[l];if(!i)return null;let f;if(i.includes("/")){const h=i.split("/").map(y=>Number.parseFloat(y)).filter(y=>!Number.isNaN(y));if(h.length===0)return null;f=h.length===1?h[0]:h}else{const h=Number.parseFloat(i);if(Number.isNaN(h))return null;f=h}const x=Et(f,t);return Le(x)}function Oe(t,r,s,n="ko_KR"){if(!t)return"";let a=t;return a=gr(a),a=Bt(a,r,s,n),a=br(a),a=a.replace(/\n/g,"<br />"),a}function ht(t,r,s="ko_KR"){const n=ve(s);if(!t.leveltip||!t.leveltip.label||!t.leveltip.effect)return"";let a;r&&(r.DataValues?a=r:a={DataValues:r});const{label:l,effect:c}=t.leveltip,i=[];for(let f=0;f<l.length&&f<c.length;f++){const x=l[f],y=c[f].match(/\{\{\s*([^}]+)\s*\}\}/);if(!y)continue;const C=y[1].trim();let N=null;if(a)try{const o=$t(C),d=Lt(o,t,a);if(d&&d.trim()!==""){let g=d;(x.includes("%")||x.toLowerCase().includes("percent")||x.toLowerCase().includes("퍼센트")||x.toLowerCase().includes("둔화"))&&!g.includes("%")&&(g=g.split("/").map(p=>p&&`${p}%`).join("/"));let m=n.common.mana;if(t.costType){const p=t.costType.trim();p&&!p.includes("{{")?m=p:t.resource&&!t.resource.includes("{{")&&(m=t.resource)}else t.resource&&!t.resource.includes("{{")&&(m=t.resource);const v=x.replace("@AbilityResourceName@",m);if(v.includes("{{")||v.includes("}}"))continue;i.push(`${v}: [${g}]`);continue}}catch{}const j=C;N=null;const u=j.match(/^e(\d+)$/i);if(u){const o=parseInt(u[1]);if(t.effectBurn&&t.effectBurn.length>o){const d=t.effectBurn[o];d&&d!==null&&d!=="0"&&(N=d)}}else if(j.toLowerCase()==="cost"||j.toLowerCase().includes("cost"))t.costBurn&&(N=t.costBurn);else if(j.toLowerCase().includes("cooldown"))t.cooldownBurn&&(N=t.cooldownBurn);else if(j.toLowerCase().includes("ammorechargetime")||j.toLowerCase().includes("ammorecharge")){const o=(r==null?void 0:r.DataValues)||r;if(o&&o.mAmmoRechargeTime){const d=o.mAmmoRechargeTime;if(Array.isArray(d)&&d.length>1){const w=d.slice(1).map(v=>typeof v=="number"?v:parseFloat(String(v))),m=xt(w,t.maxrank,!1);m&&(N=m)}}}if(N){const o=xt(N.includes("/")?N.split("/"):[N],t.maxrank);if(o){let d=n.common.mana;if(t.costType){const m=t.costType.trim();m&&!m.includes("{{")?d=m:t.resource&&!t.resource.includes("{{")&&(d=t.resource)}else t.resource&&!t.resource.includes("{{")&&(d=t.resource);const g=x.replace("@AbilityResourceName@",d);if(g.includes("{{")||g.includes("}}"))continue;let w=o;(x.includes("%")||x.toLowerCase().includes("slow")||x.toLowerCase().includes("둔화"))&&(o.includes("%")||(w=o.split("/").map(m=>`${m}%`).join("/"))),i.push(`${g}: [${w}]`)}}}return i.length===0?"":i.join("<br />")}function yr(t,r,s="ko_KR"){var i,f;const n=ve(s);if(!t||!t.cooldown||!Array.isArray(t.cooldown)||t.cooldown.length===0)return null;const a=((i=r==null?void 0:r.communityDragonData)==null?void 0:i.DataValues)||(r==null?void 0:r.communityDragonData),l=a==null?void 0:a.mAmmoRechargeTime;if(t.cooldown[0]===0&&l&&Array.isArray(l)&&l.length>1&&l){const x=l[1],h=((f=t.effectBurn)==null?void 0:f[1])||"3";return`${n.common.rechargeTime} ${x}${n.common.seconds} (${n.common.max}: ${h}${n.common.items})`}if(t.cooldownBurn){const x=t.cooldownBurn.split("/");return x.length>1&&x.every(h=>h===x[0])?`${x[0]}${n.common.seconds}`:`${t.cooldownBurn}${n.common.seconds}`}if(t.cooldown&&t.cooldown.length>0){const x=t.cooldown[0];return t.cooldown.every(h=>h===x)?`${x}${n.common.seconds}`:`${t.cooldown.join("/")}${n.common.seconds}`}return null}function me(t){if(!t)return t;let r=t.replace(/\(\s*\)/g,"");return r=r.replace(/\s{2,}/g," ").trim(),r}function wr(t,r,s="ko_KR"){var i;const n=ve(s);if(!t)return null;const a=Array.isArray(t.cost)&&t.cost.length>0,l=a&&t.cost.every(f=>f===0),c=t.costBurn==="0";if((c||l)&&typeof t.resource=="string"&&t.resource.includes("{{")){const f=t.resource.trim(),x=((i=r==null?void 0:r.communityDragonData)==null?void 0:i.DataValues)||(r==null?void 0:r.communityDragonData);if(x){const y=Bt(f,t,{DataValues:x}).trim();if(y)return me(y)}return me(n.common.noCost)}if(c||l)return me(n.common.noCost);if(t.costBurn){const f=t.costBurn.split("/");return f.length>1&&f.every(x=>x===f[0])?me(`${n.common.mana} ${f[0]}`):me(`${n.common.mana} ${t.costBurn}`)}if(a){const f=t.cost[0];return t.cost.every(x=>x===f)?me(`${n.common.mana} ${f}`):me(`${n.common.mana} ${t.cost.join("/")}`)}return null}function _t(t,r,s){var i;const n=((i=s==null?void 0:s.communityDragonData)==null?void 0:i.DataValues)||(s==null?void 0:s.communityDragonData),a=n==null?void 0:n.mAmmoRechargeTime,l=t.cooldown[r-1];return l===0&&a&&Array.isArray(a)&&a.length>r&&a?a[r]!==void 0?String(a[r]):"":l!=null?String(l):""}function ie({skill:t,skillIdx:r,version:s,spellData:n,isPassive:a,passiveName:l,passiveDescription:c,passiveImageFull:i,size:f="default"}){const{t:x,lang:h}=te(),C=tt()==="mobile",[N,j]=U.useState(!1),u=U.useRef(null),o=a&&i?null:yr(t,n,h),d=a&&i?null:wr(t,n,h),g=f==="small",w=g?"min-w-6 min-h-6 w-6 h-6":"min-w-8 min-h-8 w-8 h-8",m=g?"text-[8px]":"text-[9px]",v=e.jsx("div",{ref:u,className:`flex flex-col items-center gap-0.5 p-1 -m-1 touch-manipulation ${C?"cursor-pointer":"cursor-help"}`,onClick:k=>{C&&(k.stopPropagation(),j(S=>!S))},onTouchStart:k=>{C&&(k.stopPropagation(),j(S=>!S))},children:a&&i?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:Jt(s,i),alt:"Passive",className:A(w,"rounded")}),e.jsx("span",{className:A(m,"font-semibold"),children:"P"})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:ot(s,t.id),alt:ge[r],className:A(w,"rounded")}),e.jsx("span",{className:A(m,"font-semibold"),children:ge[r]})]})}),p=()=>a&&i?e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{className:`font-semibold text-sm ${C?"pr-10":""}`,children:l}),c&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Oe(c,void 0,void 0,h)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground leading-relaxed border-t pt-3 mt-3 flex items-start gap-1.5",children:[e.jsx(ut,{className:"w-3 h-3 mt-0.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:x.skillTooltip.warningPassive})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex items-start gap-3 border-b pb-3 ${C?"pr-10":""}`,children:[e.jsx("img",{src:ot(s,t.id),alt:ge[r],className:"w-12 h-12 min-w-12 min-h-12 rounded flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:t.name&&e.jsxs("div",{className:"font-semibold text-sm",children:["[",ge[r],"] ",t.name]})}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[o&&e.jsx("div",{className:"text-xs text-muted-foreground",children:o.includes(" (")?e.jsxs(e.Fragment,{children:[o.split(" (")[0],e.jsx("br",{}),"(",o.split(" (")[1]]}):o}),d&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 whitespace-nowrap",children:d})]})]}),t.description&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Oe(t.description,t,n==null?void 0:n.communityDragonData,h).replace(/<br\s*\/?>/gi," ")}})}),t.tooltip&&e.jsx("div",{className:"text-xs text-muted-foreground leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Oe(t.tooltip,t,n==null?void 0:n.communityDragonData,h)}})}),n&&ht(t,n.communityDragonData,h)&&e.jsx("div",{className:"text-[11px] leading-relaxed text-muted-foreground border-t pt-3 mt-3",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:ht(t,n.communityDragonData,h)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground leading-relaxed border-t pt-3 mt-3 flex items-start gap-1.5",children:[e.jsx(ut,{className:"w-3 h-3 mt-0.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:x.skillTooltip.warningSkill})]})]});return C?e.jsxs(e.Fragment,{children:[v,e.jsx(wt,{open:N,onOpenChange:j,children:e.jsxs(Xt,{className:"w-[calc(100vw-32px)] max-w-lg h-[70vh] max-h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(Ct,{children:[e.jsx(St,{children:a&&i?`${l||x.skillTooltip.passive} ${x.skillTooltip.skillInfo}`:`[${ge[r]}] ${t.name||x.skillTooltip.skill} ${x.skillTooltip.skillInfo}`}),e.jsx(kt,{children:a&&i?`${l||x.skillTooltip.passive} ${x.skillTooltip.skillDescription}`:`[${ge[r]}] ${t.name||x.skillTooltip.skill} ${x.skillTooltip.skillDescription}`})]}),e.jsx(Tt,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4 flex flex-col gap-3",children:p()})})]})})]}):a&&i?e.jsxs(lt,{children:[e.jsx(it,{asChild:!0,children:v}),e.jsx(ct,{side:"top",align:"center",sideOffset:8,className:"max-w-xs p-3 space-y-2",children:p()})]}):e.jsxs(lt,{children:[e.jsx(it,{asChild:!0,children:v}),e.jsx(ct,{side:"top",align:"center",sideOffset:8,className:"max-w-sm p-4 space-y-3",children:p()})]})}const Dt=b.createContext(void 0);function Cr({initialDDragonVersion:t=null,initialCDragonVersion:r=null,children:s}){const[n,a]=b.useState(t??null),[l,c]=b.useState(r??null),i=b.useMemo(()=>({ddragonVersion:n,cdragonVersion:l,setDDragonVersion:a,setCDragonVersion:c}),[n,l]);return e.jsx(Dt.Provider,{value:i,children:s})}function nt(){const t=b.useContext(Dt);if(!t)throw new Error("useVersionContext must be used within VersionProvider");return t}function Sr({champions:t,version:r,championList:s,onAddChampion:n,onRemoveChampion:a,onReorderChampions:l,vsMode:c}){const{t:i}=te(),{cdragonVersion:f,setCDragonVersion:x}=nt(),[h,y]=b.useState(!1),[C,N]=U.useState({}),j=Ze(be(Ye,{activationConstraint:{distance:8}}),be(qe,{coordinateGetter:We})),u=p=>{},o=p=>{const{active:k,over:S}=p;if(S&&k.id!==S.id&&l){const P=t.findIndex(B=>B.id===k.id),$=t.findIndex(B=>B.id===S.id);P!==-1&&$!==-1&&l(P,$)}};U.useEffect(()=>{const p=async()=>{try{const k=await Pt(t,r);if(N(k),!f)try{let S=null;for(const P of Object.keys(k)){const $=k[P];if($&&$.length>0&&(S=$[0].cdragonVersion??null,S))break}S&&x(S)}catch(S){F.warn("Failed to extract CDragon version from integrated spell data:",S)}}catch(k){F.warn("Failed to load integrated spell data:",k),N({})}};t.length>0&&p()},[t,r]);const d=U.useMemo(()=>Math.max(...t.map(p=>p.spells?Math.max(...p.spells.map(k=>k.maxrank)):0)),[t]),g=U.useCallback((p,k)=>{const S=C[p];return!S||S.length<=k?null:S[k]},[C]),w=U.useMemo(()=>Array.from({length:d},(p,k)=>{const S=k+1;return{level:S,skills:t.map(P=>P.spells?P.spells.map(($,B)=>{const I=g(P.id,B),M=_t($,S,I);return{skill:$,cooldown:M}}):null)}}),[t,d,g]),m=({champion:p,children:k,className:S})=>{const{setNodeRef:P,transform:$,transition:B,isDragging:I}=he({id:p.id,disabled:!0}),O={transform:$?je.Transform.toString($):void 0,transition:I?B:void 0,opacity:I?.5:1};return e.jsx(_,{ref:P,style:O,className:S,children:k})},v=({champion:p,index:k})=>{const{attributes:S,listeners:P,setNodeRef:$,transform:B,transition:I,isDragging:M}=he({id:p.id}),T={transform:B?je.Transform.toString(B):void 0,transition:M?I:void 0,opacity:M?.5:1};return e.jsx(K,{ref:$,style:T,className:A("text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] select-none",k<t.length-1&&"border-r border-border/30",M&&"z-50"),children:e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 relative",children:[l&&e.jsx("button",{...S,...P,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity -ml-1","aria-label":"Drag to reorder",children:e.jsx(_e,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ee(r,p.id),alt:p.name,className:"w-8 h-8 rounded-full"}),a&&e.jsx(se,{variant:"ghost",size:"icon",className:A("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:V=>{V.stopPropagation(),a(p.id)},"aria-label":`Remove ${p.name}`,children:e.jsx(Ne,{className:"h-2.5 w-2.5"})})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("div",{className:"text-[11px] font-semibold leading-tight text-foreground",children:p.name}),e.jsx("div",{className:"text-[9px] text-muted-foreground leading-tight",children:p.title})]})]})})};return e.jsx(Ke,{delayDuration:0,skipDelayDuration:150,children:e.jsxs("div",{className:"relative",children:[e.jsx(Je,{sensors:j,collisionDetection:Xe,onDragStart:u,onDragEnd:o,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(fe,{className:"border-collapse table-fixed w-auto",children:[e.jsx(xe,{children:e.jsxs(G,{className:"border-b border-border/30 select-none",children:[e.jsx(K,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[80px] min-w-[80px] border-r border-border/30 select-none",style:{left:0},children:i.common.level}),e.jsx(Qe,{items:t.map(p=>p.id),strategy:et,children:t.map((p,k)=>e.jsx(v,{champion:p,index:k},p.id))}),n&&e.jsx(K,{className:"text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] border-l border-border/30 select-none",children:e.jsxs(se,{onClick:()=>y(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Be,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsxs(pe,{children:[e.jsxs(G,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(_,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:i.skills.label}),t.map((p,k)=>{var S;return e.jsx(m,{champion:p,className:A("p-2",k<t.length-1&&"border-r border-border/30"),children:e.jsxs("div",{className:"flex justify-center gap-1.5",children:[p.passive&&e.jsx(ie,{isPassive:!0,passiveName:p.passive.name,passiveDescription:p.passive.description,passiveImageFull:p.passive.image.full,skill:{},skillIdx:0,version:r}),(S=p.spells)==null?void 0:S.map((P,$)=>{const B=g(p.id,$);return e.jsx(ie,{skill:P,skillIdx:$,version:r,spellData:B},P.id)})]})},p.id)}),n&&e.jsx(_,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]}),w.map((p,k)=>e.jsxs(G,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(_,{className:A("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",k===w.length-1&&"rounded-bl-lg"),style:{left:0},children:[p.level,i.common.level]}),p.skills.map((S,P)=>{const $=t[P];return e.jsx(m,{champion:$,className:A("p-2",P<t.length-1&&"border-r border-border/30"),children:S?e.jsxs("div",{className:"flex justify-center gap-1.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),S.map((B,I)=>e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs font-semibold",children:B.cooldown!==""?`${B.cooldown}${i.common.seconds}`:"-"})},I))]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})},$.id)}),n&&e.jsx(_,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]},p.level))]})]})})}),h&&n&&s&&e.jsx(De,{championList:s,selectedChampions:t,onSelect:p=>{n(p)},onClose:()=>y(!1)})]})})}function kr({champions:t,version:r,vsMode:s}){var y,C;const{t:n}=te(),{cdragonVersion:a,setCDragonVersion:l}=nt(),[c,i]=U.useState({});U.useEffect(()=>{const N=async()=>{try{const j=await Pt(t,r);if(i(j),!a)try{let u=null;for(const o of Object.keys(j)){const d=j[o];if(d&&d.length>0&&(u=d[0].cdragonVersion??null,u))break}u&&l(u)}catch(u){F.warn("Failed to extract CDragon version from integrated spell data (mobile):",u)}}catch(j){F.warn("Failed to load integrated spell data:",j),i({})}};t.length>0&&N()},[t,r]);const f=U.useMemo(()=>Math.max(...t.map(N=>N.spells?Math.max(...N.spells.map(j=>j.maxrank)):0)),[t]),x=U.useCallback((N,j)=>{const u=c[N];return!u||u.length<=j?null:u[j]},[c]),h=U.useMemo(()=>Array.from({length:f},(N,j)=>{const u=j+1;return{level:u,skills:t.map(o=>o.spells?o.spells.map((d,g)=>{const w=x(o.id,g),m=_t(d,u,w);return{skill:d,cooldown:m}}):null)}}),[t,f,x]);if(s&&t.length===2){const N=s.championA,j=s.championB;return e.jsx(Ke,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(fe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(xe,{children:e.jsxs(G,{className:"border-b border-border/30 select-none",children:[e.jsx(K,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:n.common.level}),e.jsx(K,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:ee(r,N.id),alt:N.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:N.name})]})}),e.jsx(K,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(K,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:ee(r,j.id),alt:j.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:j.name})]})})]})}),e.jsxs(pe,{children:[e.jsxs(G,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(_,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:n.skills.label}),e.jsx(_,{className:"p-1.5 border-r border-border/30",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[N.passive&&e.jsx(ie,{isPassive:!0,passiveName:N.passive.name,passiveDescription:N.passive.description,passiveImageFull:N.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(y=N.spells)==null?void 0:y.map((u,o)=>{const d=x(N.id,o);return e.jsx(ie,{skill:u,skillIdx:o,version:r,spellData:d,size:"small"},u.id)})]})}),e.jsx(_,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(_,{className:"p-1.5",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[j.passive&&e.jsx(ie,{isPassive:!0,passiveName:j.passive.name,passiveDescription:j.passive.description,passiveImageFull:j.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(C=j.spells)==null?void 0:C.map((u,o)=>{const d=x(j.id,o);return e.jsx(ie,{skill:u,skillIdx:o,version:r,spellData:d,size:"small"},u.id)})]})})]}),h.map((u,o)=>{const d=u.skills[0],g=u.skills[1];return e.jsxs(G,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(_,{className:A("p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",o===h.length-1&&"rounded-bl-lg"),style:{left:0},children:[u.level,n.common.level]}),e.jsx(_,{className:"p-1.5 border-r border-border/30",children:d?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),d.map((w,m)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:w.cooldown!==""?`${w.cooldown}${n.common.seconds}`:"-"})},m))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),e.jsx(_,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(_,{className:"p-1.5",children:g?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),g.map((w,m)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:w.cooldown!==""?`${w.cooldown}${n.common.seconds}`:"-"})},m))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})})]},u.level)})]})]})})})})})})}return e.jsx(Ke,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(fe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(xe,{children:e.jsxs(G,{className:"border-b border-border/30 select-none",children:[e.jsx(K,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[60px] min-w-[60px] border-r border-border/30 select-none",style:{left:0},children:n.common.level}),t.map(N=>e.jsx(K,{className:"text-center p-2 text-xs font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:ee(r,N.id),alt:N.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:N.name})]})},N.id))]})}),e.jsxs(pe,{children:[e.jsxs(G,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(_,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:n.skills.label}),t.map(N=>{var j;return e.jsx(_,{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[N.passive&&e.jsx(ie,{isPassive:!0,passiveName:N.passive.name,passiveDescription:N.passive.description,passiveImageFull:N.passive.image.full,skill:{},skillIdx:0,version:r}),(j=N.spells)==null?void 0:j.map((u,o)=>{const d=x(N.id,o);return e.jsx(ie,{skill:u,skillIdx:o,version:r,spellData:d},u.id)})]})},N.id)})]}),h.map((N,j)=>e.jsxs(G,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(_,{className:A("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",j===h.length-1&&"rounded-bl-lg"),style:{left:0},children:[N.level,n.common.level]}),N.skills.map((u,o)=>e.jsx(_,{className:"p-2",children:u?e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})}),u.map((d,g)=>e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] font-semibold",children:d.cooldown!==""?`${d.cooldown}${n.common.seconds}`:"-"})},g))]}):e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})},t[o].id))]},N.level))]})]})})})})})})}function Tr({champions:t,version:r,activeTab:s,championList:n,onAddChampion:a,onRemoveChampion:l,onReorderChampions:c,vsMode:i}){const f=tt();if(t.length===0)return null;const x=f==="mobile";return e.jsx(rt,{children:e.jsx(st,{className:"p-0",children:s==="stats"?x?e.jsx(xr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:l,vsMode:i}):e.jsx(fr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:l,onReorderChampions:c}):x?e.jsx(kr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:l,vsMode:i}):e.jsx(Sr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:l,onReorderChampions:c})})})}const Vr=U.memo(Tr),Pr=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;function $r({version:t,initialTabs:r,initialSelectedTabId:s}){const[n,a]=b.useState([]),l=b.useRef([]),[c,i]=b.useState(null),[f,x]=b.useState(!1),[h,y]=b.useState(null);b.useEffect(()=>{l.current=n},[n]),b.useEffect(()=>{t&&(r&&r.length>0&&a(r),s&&i(s))},[t,r,s]),b.useEffect(()=>{try{n.length>0?He($e,JSON.stringify(n)):le($e)}catch(g){F.error("Failed to save tabs to storage:",g)}},[n]),b.useEffect(()=>{try{c?He(Ae,c):le(Ae)}catch(g){F.error("Failed to save selected tab ID to storage:",g)}},[c]),b.useEffect(()=>{!c&&n.length>0&&i(n[0].id)},[n,c]),b.useEffect(()=>{c&&!n.find(g=>g.id===c)&&i(n.length>0?n[0].id:null)},[n,c]);const C=b.useCallback(g=>{a(w=>{const m=w.findIndex(p=>p.id===g),v=w.filter(p=>p.id!==g);return i(p=>{if(p&&p!==g&&v.some($=>$.id===p))return p;if(v.length===0)return null;const k=m>0?m-1:0;return(v[k]??v[0]).id}),v})},[i]),N=b.useCallback(g=>{a(w=>[...w,g]),i(g.id)},[]),j=b.useCallback((g,w)=>{a(m=>m.map(v=>v.id===g?w(v):v))},[]),u=b.useCallback((g,w)=>{a(m=>{const v=m.findIndex(k=>k.id===g);if(v===-1)return[...m,w];const p=[...m];return p[v]=w,p}),i(w.id)},[]),o=b.useCallback(()=>{a([]),i(null),le($e),le(Ae)},[]),d=b.useCallback(g=>{const{active:w,over:m}=g;m&&w.id!==m.id&&a(v=>{const p=v.findIndex(S=>S.id===w.id),k=v.findIndex(S=>S.id===m.id);return p===-1||k===-1?v:jt(v,p,k)})},[]);return{tabs:n,setTabs:a,tabsRef:l,selectedTabId:c,setSelectedTabId:i,showVsSelector:f,setShowVsSelector:x,vsSelectorMode:h,setVsSelectorMode:y,removeTab:C,addTab:N,updateTab:j,replaceTab:u,resetTabs:o,handleDragEnd:d,generateTabId:Pr}}function Ar({version:t,lang:r,championList:s,tabs:n,initialSelectedChampions:a}){const[l,c]=b.useState([]),[i,f]=b.useState(!0);b.useEffect(()=>{if(!t||!s){setTimeout(()=>{f(!1)},0);return}try{if(a&&a.length>0){const u=a.map(o=>{const d=s.find(g=>g.id===o.id||g.key===o.key);return d?{...d,isLoading:!1}:null}).filter(o=>o!==null);u.length>0&&setTimeout(()=>{c(u),u.forEach(o=>{o.id&&(c(d=>d.map(g=>g.id===o.id?{...g,isLoading:!0}:g)),dt(t,r,o.id).then(d=>{c(g=>g.map(w=>w.id===o.id?{...w,fullInfo:d,isLoading:!1}:w))}).catch(d=>{F.error("Failed to load champion info:",d),c(g=>g.map(w=>w.id===o.id?{...w,isLoading:!1}:w))}))})},0)}setTimeout(()=>{f(!1)},0)}catch(u){F.error("Failed to load initial selected champions:",u),setTimeout(()=>{f(!1)},0)}},[t,r,s,a]),b.useEffect(()=>{try{if(l.length>0){const u=l.map(({id:o,key:d})=>({id:o,key:d}));He(Ee,JSON.stringify(u))}else le(Ee)}catch(u){F.error("Failed to save champions to storage:",u)}},[l]),b.useEffect(()=>{s&&l.length>0&&setTimeout(()=>{c(u=>u.map(o=>{const d=s.find(g=>g.id===o.id||g.key===o.key);return d?{...o,name:d.name,title:d.title}:o}))},0)},[s,l.length]),b.useEffect(()=>{i||setTimeout(()=>{const u=new Set(n.flatMap(o=>o.champions));c(o=>{if(n.length===0)return o.length>0?[]:o;const d=o.filter(g=>u.has(g.id));return d.length!==o.length?d:o})},0)},[n,i]);const x=b.useCallback(u=>{t&&(c(o=>o.map(d=>d.id===u?{...d,isLoading:!0}:d)),dt(t,r,u).then(o=>{c(d=>d.map(g=>g.id===u?{...g,fullInfo:o,isLoading:!1,skinIndex:0}:g))}).catch(o=>{F.error("Failed to load champion info:",o),c(d=>d.map(g=>g.id===u?{...g,isLoading:!1}:g))}))},[t,r]),h=b.useCallback(u=>{c(o=>{if(o.some(w=>w.id===u.id))return o;const g={...u,isLoading:!0,skinIndex:0};return x(u.id),[...o,g]})},[x]),y=b.useCallback(u=>{c(o=>o.filter(d=>d.id!==u))},[]),C=b.useCallback(()=>{c([]),le(Ee)},[]),N=b.useMemo(()=>l.filter(u=>u.fullInfo&&!u.isLoading),[l]),j=b.useMemo(()=>{const u=new Set(n.filter(o=>o.mode==="normal").flatMap(o=>o.champions));return l.filter(o=>u.has(o.id))},[n,l]);return{selectedChampions:l,setSelectedChampions:c,championsWithFullInfo:N,normalTabChampions:j,addChampionToList:h,removeChampion:y,resetChampions:C,loadChampionInfo:x}}function Er({onAddClick:t}){const{t:r}=te();return e.jsx(rt,{className:"border-dashed",children:e.jsxs(st,{className:"flex flex-col items-center justify-center py-12 md:py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:e.jsx(ke,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:r.encyclopedia.emptyState.title}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md text-sm mb-4",children:r.encyclopedia.emptyState.description}),e.jsxs(se,{onClick:t,variant:"outline",className:"flex flex-row items-center justify-center gap-2 border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Be,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-primary transition-colors",children:r.encyclopedia.emptyState.addButton})]})]})})}const Rr=qt,It=b.forwardRef(({className:t,...r},s)=>e.jsx(Nt,{ref:s,className:A("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r}));It.displayName=Nt.displayName;const Ue=b.forwardRef(({className:t,...r},s)=>e.jsx(vt,{ref:s,className:A("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r}));Ue.displayName=vt.displayName;const Lr=b.forwardRef(({className:t,...r},s)=>e.jsx(yt,{ref:s,className:A("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r}));Lr.displayName=yt.displayName;function Br({activeTab:t,onTabChange:r,onReset:s}){const{t:n}=te();return e.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-border overflow-x-auto -mx-4 md:mx-0 px-4 md:px-0",children:[e.jsx(Rr,{value:t,onValueChange:a=>r(a),className:"flex-1",children:e.jsxs(It,{className:"inline-flex h-auto items-center justify-start gap-2 bg-transparent p-0 border-0",children:[e.jsx(Ue,{value:"skills",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:n.encyclopedia.tabs.skills}),e.jsx(Ue,{value:"stats",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:n.encyclopedia.tabs.stats})]})}),e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:e.jsxs(se,{variant:"ghost",size:"sm",onClick:s,className:"flex items-center gap-1.5 shrink-0 text-muted-foreground hover:text-primary hover:bg-muted/30 border-0",children:[e.jsx(tr,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[10px]",children:n.encyclopedia.reset})]})})]})}const Mt="flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors shrink-0 relative select-none",Ft="bg-primary text-primary-foreground",zt="bg-muted/50 text-muted-foreground",Ot="touch-none cursor-grab active:cursor-grabbing p-0.5 -ml-1 mr-0.5 opacity-60 hover:opacity-100 transition-opacity select-none",Kt="ml-1 p-0.5 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group",_r="ml-1 p-1 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group";function Dr({tab:t,champion:r,version:s,selectedTabId:n,onSelect:a,onRemove:l,onVsClick:c}){const{t:i}=te(),{attributes:f,listeners:x,setNodeRef:h,transform:y,transition:C,isDragging:N}=he({id:t.id}),j={transform:je.Transform.toString(y),transition:C,opacity:N?.5:1},u=n===t.id,o=u?Ft:zt;return e.jsxs("div",{ref:h,style:j,className:A(Mt,o,N&&"z-50"),onClick:d=>{const g=d.target;g.tagName==="BUTTON"||g.closest("button")||a(t.id)},children:[e.jsx("button",{...f,...x,className:Ot,"aria-label":"Drag to reorder",children:e.jsx(_e,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 cursor-pointer select-none",children:[e.jsx("img",{src:ee(s,r.id),alt:r.name,className:"w-5 h-5 rounded-full pointer-events-none select-none",draggable:"false"}),e.jsx("span",{className:"pointer-events-none select-none",children:r.name})]}),e.jsx("button",{onClick:d=>{d.preventDefault(),d.stopPropagation(),c(t.id)},className:_r,"aria-label":`${i.encyclopedia.vs} with ${r.name}`,title:i.encyclopedia.vsStart,type:"button",children:e.jsx(Re,{className:A("h-3 w-3 transition-colors",u?"text-primary-foreground":"text-muted-foreground")})}),e.jsx("button",{onClick:d=>{d.preventDefault(),d.stopPropagation(),l(t.id)},className:Kt,"aria-label":`Remove ${r.name}`,type:"button",children:e.jsx(Ne,{className:A("h-3 w-3 transition-colors",u?"text-primary-foreground":"text-muted-foreground")})})]})}function Ir({tab:t,championA:r,championB:s,version:n,selectedTabId:a,onSelect:l,onRemove:c,onChangeChampionA:i,onChangeChampionB:f}){const{t:x}=te(),{attributes:h,listeners:y,setNodeRef:C,transform:N,transition:j,isDragging:u}=he({id:t.id}),o={transform:je.Transform.toString(N),transition:j,opacity:u?.5:1},d=a===t.id,g=d?Ft:zt;return e.jsxs("div",{ref:C,style:o,className:A(Mt,g,u&&"z-50"),children:[e.jsx("button",{...h,...y,className:Ot,"aria-label":"Drag to reorder",children:e.jsx(_e,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 select-none",children:[e.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),i(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:ee(n,r.id),alt:r.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})}),e.jsx("button",{onClick:()=>{l(t.id)},className:"text-[10px] font-semibold touch-none select-none",children:x.encyclopedia.vs}),e.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),f(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:ee(n,s.id),alt:s.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})})]}),e.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),c(t.id)},className:Kt,"aria-label":"Remove VS tab",children:e.jsx(Ne,{className:A("h-3 w-3 transition-colors",d?"text-primary-foreground":"text-muted-foreground")})})]})}function Mr({tabs:t,championsWithFullInfo:r,version:s,selectedTabId:n,sensors:a,onDragEnd:l,onSelectTab:c,onRemoveTab:i,onVsClick:f,onChangeChampionA:x,onChangeChampionB:h,onAddClick:y}){const{t:C}=te(),N=b.useRef(null);return b.useEffect(()=>{if(!N.current)return;const j=N.current.querySelector("[data-radix-scroll-area-viewport]");j&&j.scrollTo({left:j.scrollWidth,behavior:"smooth"})},[t.length]),e.jsx("div",{className:"border-b border-border -mx-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground shrink-0 pl-3",children:C.encyclopedia.champion}),e.jsxs(Tt,{ref:N,type:"scroll",className:"flex-1",children:[e.jsx(Je,{sensors:a,collisionDetection:Xe,onDragEnd:l,children:e.jsx(Qe,{items:t.map(j=>j.id),strategy:et,children:e.jsxs("div",{className:"flex items-center gap-2 w-max select-none pr-2",children:[t.map(j=>{if(j.mode==="vs"){const u=r.find(d=>d.id===j.champions[0]),o=r.find(d=>d.id===j.champions[1]);return!u||!o?null:e.jsx(Ir,{tab:j,championA:u,championB:o,version:s,selectedTabId:n,onSelect:c,onRemove:i,onChangeChampionA:x,onChangeChampionB:h},j.id)}else{const u=r.find(o=>o.id===j.champions[0]);return u?e.jsx(Dr,{tab:j,champion:u,version:s,selectedTabId:n,onSelect:c,onRemove:i,onVsClick:f},j.id):null}}),e.jsxs(se,{onClick:y,variant:"outline",size:"sm",className:"flex items-center gap-1.5 shrink-0 border-2 border-dashed border-muted-foreground/30 hover:border-primary hover:bg-primary/10 hover:text-primary h-auto py-1.5 px-3 transition-colors",children:[e.jsx(Be,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:C.encyclopedia.add})]})]})})}),e.jsx(Qt,{orientation:"horizontal"})]})]})})}function Fr({open:t,vsSelectorMode:r,tabs:s,championList:n,selectedChampions:a,onSelect:l,onClose:c,onOpenChange:i}){const{t:f}=te();if(!t||!r)return null;const x=s.find(y=>y.id===r.tabId);if(!x||r.mode!=="select-second"&&x.mode!=="vs")return null;const h=r.mode==="change-champion-a"?x.champions[1]:x.champions[0];return h?e.jsx(De,{championList:n,selectedChampions:a,onSelect:l,onClose:c,open:t,onOpenChange:i,vsMode:{currentChampionId:h,title:f.encyclopedia.selectOpponent}}):null}function Pe(t){if(!t)return null;const r=t.split(".");return r.length>=2?`${r[0]}.${r[1]}`:t}function zr({lang:t,championList:r,version:s,cdragonVersion:n,initialSelectedChampions:a,initialTabs:l,initialSelectedTabId:c}){const[i,f]=b.useState("skills"),[x,h]=b.useState(!1),C=tt()==="mobile",{cdragonVersion:N}=nt(),{t:j}=te(),{tabs:u,tabsRef:o,selectedTabId:d,setSelectedTabId:g,showVsSelector:w,setShowVsSelector:m,vsSelectorMode:v,setVsSelectorMode:p,removeTab:k,addTab:S,updateTab:P,replaceTab:$,resetTabs:B,handleDragEnd:I,generateTabId:M}=$r({version:s,initialTabs:l,initialSelectedTabId:c}),{selectedChampions:O,setSelectedChampions:T,championsWithFullInfo:V,normalTabChampions:D,addChampionToList:R,removeChampion:L,resetChampions:z}=Ar({version:s,lang:t,championList:r,tabs:u,initialSelectedChampions:a}),J=Ze(be(Ye,{activationConstraint:{distance:12}}),be(qe,{coordinateGetter:We})),re=b.useCallback((E,Z)=>{T(ae=>jt(ae,E,Z))},[T]),X=b.useCallback(E=>{if(new Set(O.map(ue=>ue.id)).has(E.id)){const ue=o.current,W=ue.some(q=>q.mode==="normal"&&q.champions.length===1&&q.champions[0]===E.id),Ve=ue.some(q=>q.mode==="vs"&&q.champions.includes(E.id));if(W){const q=u.find(Ie=>Ie.mode==="normal"&&Ie.champions.length===1&&Ie.champions[0]===E.id);q&&k(q.id),Ve||L(E.id);return}if(Ve){const q={mode:"normal",champions:[E.id],id:M()};S(q);return}const at=u.find(q=>q.mode==="normal"&&q.champions.length===1&&q.champions[0]===E.id);at&&k(at.id),L(E.id);return}R(E);const ae={mode:"normal",champions:[E.id],id:M()};S(ae)},[O,u,o,R,L,S,k,M]),ne=b.useCallback(()=>{z(),B(),le(Ee),le($e),le(Ae)},[z,B]),Te=b.useCallback(E=>{if(!v)return;const{mode:Z,tabId:ae}=v,ue=u.find(W=>W.id===ae);if(ue){if(Z==="select-second"){const W={mode:"vs",champions:[ue.champions[0],E.id],id:M()};$(ae,W),O.some(Ve=>Ve.id===E.id)||R(E)}else Z==="change-champion-a"?(P(ae,W=>({...W,champions:[E.id,W.champions[1]]})),O.some(W=>W.id===E.id)||R(E)):Z==="change-champion-b"&&(P(ae,W=>({...W,champions:[W.champions[0],E.id]})),O.some(W=>W.id===E.id)||R(E));m(!1),p(null)}},[v,u,O,R,P,$,M]),H=b.useMemo(()=>d&&u.find(E=>E.id===d)||null,[d,u]),Q=b.useMemo(()=>H?H.champions.map(E=>{var Z;return(Z=V.find(ae=>ae.id===E))==null?void 0:Z.fullInfo}).filter(E=>E!==void 0):[],[H,V]),de=b.useMemo(()=>!C||H&&H.mode==="vs"?null:H&&H.mode==="normal"&&Q.length>0?Q[0]:null,[C,H,Q]),ye=b.useCallback(E=>{u.forEach(Z=>{Z.champions.includes(E)&&k(Z.id)}),L(E)},[u,L,k]),oe=b.useCallback(E=>{p({mode:"select-second",tabId:E}),m(!0)},[]),we=b.useCallback(E=>{p({mode:"change-champion-a",tabId:E,championIndex:0}),m(!0)},[]),Ht=b.useCallback(E=>{p({mode:"change-champion-b",tabId:E,championIndex:1}),m(!0)},[]),Gt=b.useMemo(()=>{const E=Pe(s),Z=Pe(N);return!E||!Z?!1:E!==Z},[s,N]);return e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6 lg:px-8 py-4 md:py-5",children:[Gt&&e.jsxs("div",{className:"mb-3 md:mb-4 rounded-md border border-amber-400/60 bg-amber-50/90 px-3 py-2 text-xs md:text-sm text-amber-950 shadow-sm",children:[e.jsx("div",{className:"font-semibold mb-0.5",children:j.versionNotice.title}),e.jsx("div",{className:"text-[11px] md:text-xs text-amber-900/90 mb-1.5",children:j.versionNotice.description}),e.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5 text-[10px] md:text-[11px] text-amber-900/80",children:[e.jsxs("span",{children:[e.jsxs("span",{className:"font-semibold",children:[j.versionNotice.cdragonLabel,":"]})," ",Pe(N)??"-"]}),e.jsxs("span",{children:[e.jsxs("span",{className:"font-semibold",children:[j.versionNotice.ddragonLabel,":"]})," ",Pe(s)??"-"]})]})]}),x&&e.jsx(De,{championList:r,selectedChampions:D,onSelect:X,onClose:()=>h(!1),open:x,onOpenChange:h}),e.jsx(Fr,{open:w,vsSelectorMode:v,tabs:u,championList:r,selectedChampions:O,onSelect:Te,onClose:()=>{m(!1),p(null)},onOpenChange:E=>{m(E),E||p(null)}}),O.length>0&&V.length>0&&e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx(Br,{activeTab:i,onTabChange:f,onReset:ne}),C&&u.length>0&&e.jsx(Mr,{tabs:u,championsWithFullInfo:V,version:s,selectedTabId:d,sensors:J,onDragEnd:I,onSelectTab:g,onRemoveTab:k,onVsClick:oe,onChangeChampionA:we,onChangeChampionB:Ht,onAddClick:()=>h(!0)}),e.jsx(Vr,{champions:C&&H&&H.mode==="vs"&&Q.length===2?Q:C&&de?[de]:V.map(E=>E.fullInfo),version:s,activeTab:i,championList:r,onAddChampion:C?void 0:X,onRemoveChampion:ye,onReorderChampions:C?void 0:re,vsMode:C&&H&&H.mode==="vs"&&Q.length===2?{championA:Q[0],championB:Q[1]}:void 0})]}),O.length===0&&e.jsx(Er,{onAddClick:()=>h(!0)})]})}function Gr(t){return e.jsx(Cr,{initialDDragonVersion:t.version,initialCDragonVersion:t.cdragonVersion,children:e.jsx(zr,{...t})})}export{Gr as default};
