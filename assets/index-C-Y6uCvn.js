import{r as g,j as e,d as Z,f as Ot,O as Kt,g as Ht,v as Ge,w as ge,x as Ue,K as Ze,y as We,z as Je,A as qe,E as Ye,F as Xe,G as be,I as he,J as bt,L as Gt,M as ht,N as jt,Q as Nt}from"/cooldown/assets/react-vendor-CrtkgiRr.js";import{c as E,B as re,u as ee,g as Ie,C as Q,D as vt,V as yt,a as wt,b as St,d as Ne,l as z,e as Ut,f as Qe,P as Zt,S as nt,h as Wt,i as Ct,T as at,j as ot,k as lt,m as ze,s as Oe,r as ne,n as it,o as Jt}from"/cooldown/assets/index-SpdwNbOX.js";import{e as qt,f as Se,X as je,S as Ae,g as Re,G as Le,T as ct,R as Yt}from"/cooldown/assets/lucide-icons-DdUfcdEd.js";const et=g.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:E("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r}));et.displayName="Card";const Xt=g.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:E("flex flex-col space-y-1.5 p-6",t),...r}));Xt.displayName="CardHeader";const Qt=g.forwardRef(({className:t,...r},s)=>e.jsx("h3",{ref:s,className:E("text-2xl font-semibold leading-none tracking-tight",t),...r}));Qt.displayName="CardTitle";const er=g.forwardRef(({className:t,...r},s)=>e.jsx("p",{ref:s,className:E("text-sm text-muted-foreground",t),...r}));er.displayName="CardDescription";const tt=g.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:E("p-6 pt-0",t),...r}));tt.displayName="CardContent";const tr=g.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:E("flex items-center p-6 pt-0",t),...r}));tr.displayName="CardFooter";const de=g.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:E("w-full caption-bottom text-sm",t),...r})}));de.displayName="Table";const ue=g.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:E("[&_tr]:border-b",t),...r}));ue.displayName="TableHeader";const me=g.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:E("[&_tr:last-child]:border-0",t),...r}));me.displayName="TableBody";const rr=g.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:E("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));rr.displayName="TableFooter";const U=g.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:E("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));U.displayName="TableRow";const H=g.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:E("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r}));H.displayName="TableHead";const B=g.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:E("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r}));B.displayName="TableCell";const sr=g.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:E("mt-4 text-sm text-muted-foreground",t),...r}));sr.displayName="TableCaption";const Ke=g.forwardRef(({className:t,type:r,...s},a)=>e.jsx("input",{type:r,className:E("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base md:text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s}));Ke.displayName="Input";function nr({className:t,...r}){return e.jsx("div",{className:E("animate-pulse rounded-md bg-muted",t),...r})}function ar({addChampion:t,data:r,name:s,thumbnailSrc:a,selected:n}){const[l,x]=g.useState(!1),[m,d]=g.useState(!1),[p,h]=g.useState(n);g.useEffect(()=>{h(n)},[n]);const N=Z.useRef(!1),b=g.useCallback(o=>{if(N.current){N.current=!1;return}o.preventDefault(),o.stopPropagation(),h(!n),t(r)},[t,r,n]),y=g.useCallback(o=>{o.stopPropagation(),N.current=!0,h(!n),t(r),setTimeout(()=>{N.current=!1},300)},[t,r,n]),i=g.useCallback(()=>{x(!0)},[]),j=g.useCallback(()=>{d(!0)},[]);return e.jsxs("div",{className:"flex flex-col items-center justify-center m-1 h-fit",children:[e.jsxs(re,{variant:"ghost",className:"cursor-pointer rounded-full shrink-0 p-0 h-auto w-auto hover:bg-transparent relative touch-manipulation",onClick:b,onTouchStart:y,"aria-label":n?`Deselect ${s}`:`Select ${s}`,"aria-pressed":n,children:[e.jsxs("div",{className:"relative w-12 h-12 md:w-14 md:h-14 shrink-0 overflow-hidden rounded-full",children:[!l&&!m&&e.jsx(nr,{className:"absolute inset-0 rounded-full"}),!l&&!m&&e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-muted via-muted/80 to-muted/60 blur-sm"}),e.jsx("img",{className:E("absolute inset-0 w-full h-full rounded-full bg-black/5 border-0 box-border transition-all duration-200 ease-out object-cover",!n&&!p&&"hover:scale-105",l?"opacity-100":"opacity-0"),src:a,alt:s,loading:"lazy",decoding:"async",width:"56",height:"56",onLoad:i,onError:j}),(p||n)&&e.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{boxShadow:"inset 0 0 0 2px hsl(var(--primary)), 0 0 0 3px hsl(var(--primary) / 0.3)"}})]}),(p||n)&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 md:w-5 md:h-5 bg-primary rounded-full flex items-center justify-center pointer-events-none z-20 shadow-lg border-2 border-background",children:e.jsx(qt,{className:"w-2.5 h-2.5 md:w-3 md:h-3 text-primary-foreground stroke-[3]"})})]}),e.jsx("div",{className:"text-xs md:text-sm whitespace-nowrap mt-0.5",children:s})]})}const dt=Z.memo(ar);function or(t,r){const{lang:s}=ee();return g.useMemo(()=>{if(!t)return[];if(!r)return t;const n=Ie(r,s);return t.filter(l=>n.some(x=>{const m=x.toLowerCase();return!!(l.name.toLowerCase().includes(m)||l.hangul&&l.hangul.toLowerCase().includes(m)||l.id.toLowerCase().includes(m)||s==="ko_KR"&&(Ie(l.name,s).some(p=>p.toLowerCase().includes(m))||l.hangul&&Ie(l.hangul,s).some(h=>h.toLowerCase().includes(m))))}))},[t,r,s])}const ut="championSelectorScrollPosition";function lr(t,r,s){g.useEffect(()=>{if(!r||!s)return;const a=()=>{if(t.current){const n=sessionStorage.getItem(ut);if(n){const l=parseInt(n,10);t.current.scrollTop=l}}};a(),requestAnimationFrame(()=>{a()}),setTimeout(()=>{a()},200)},[r,s,t]),g.useEffect(()=>{const a=t.current;if(!a||!r||!s)return;let n;const l=()=>{clearTimeout(n),n=setTimeout(()=>{sessionStorage.setItem(ut,a.scrollTop.toString())},100)};return a.addEventListener("scroll",l,{passive:!0}),()=>{clearTimeout(n),a.removeEventListener("scroll",l)}},[r,s,t])}function ir({championList:t,selectedChampions:r,onSelect:s,onClose:a,slotIndex:n,open:l,onOpenChange:x,vsMode:m}){const{t:d}=ee(),[p,h]=g.useState(!1),N=l!==void 0,b=N?!!l:p,y=N?x||(()=>{}):h,[i,j]=g.useState(""),[o,c]=g.useState(-1),v=g.useRef(null),w=g.useRef(null),u=g.useRef(null),f=a!==void 0,S=a||(()=>{}),k=or(t,i),V=g.useMemo(()=>new Set(r.map(C=>C.id)),[r]),T=g.useMemo(()=>m&&(r.find(C=>C.id===m.currentChampionId)||(t==null?void 0:t.find(C=>C.id===m.currentChampionId)))||null,[m,r,t]),A=g.useMemo(()=>m?k.filter(C=>C.id!==m.currentChampionId):k,[k,m]),M=g.useCallback(C=>{const $=C.target;v.current&&!v.current.contains($)&&(y(!1),j(""),c(-1))},[y]);g.useEffect(()=>{if(b&&!f)return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[b,M,f]);const _=g.useCallback(C=>{y(C),C||(j(""),c(-1),a&&a()),x&&x(C)},[a,x]),G=g.useCallback(C=>{s(C),f?c(-1):(y(!1),c(-1),document.body.style.overflow="",S())},[s,a,f]),W=g.useCallback(C=>{if(!(!b&&!f||!t))if(C.key==="ArrowDown")C.preventDefault(),c($=>$<k.length-1?$+1:$);else if(C.key==="ArrowUp")C.preventDefault(),c($=>$>0?$-1:-1);else if(C.key==="Enter"&&o>=0){C.preventDefault();const $=k[o];$&&G($)}else C.key==="Escape"&&_(!1)},[b,f,t,k,o,G,_,V]);return g.useEffect(()=>{if(o>=0&&u.current){const C=u.current.querySelectorAll("[data-champion-item]");C[o]&&C[o].scrollIntoView({block:"nearest"})}},[o]),g.useEffect(()=>{N||y(!!f)},[f,N,y]),lr(u,f,b),g.useEffect(()=>{f&&b&&requestAnimationFrame(()=>{var C;(C=w.current)==null||C.focus()})},[f,b]),f?N&&!b?null:e.jsx(vt,{open:b,onOpenChange:_,children:e.jsxs(Ot,{children:[e.jsx(Kt,{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm"}),e.jsxs(Ht,{ref:v,className:"fixed inset-0 left-0 top-0 translate-x-0 translate-y-0 md:inset-auto md:left-[50%] md:top-[50%] md:translate-x-[-50%] md:translate-y-[-50%] w-full h-full md:w-[600px] md:h-[500px] lg:w-[800px] lg:h-[600px] p-0 flex flex-col overflow-hidden max-w-none md:max-w-[600px] lg:max-w-[800px] max-h-none md:max-h-[500px] lg:max-h-[600px] rounded-none md:rounded-xl z-50 border bg-background shadow-lg",onInteractOutside:()=>{_(!1)},onEscapeKeyDown:()=>{_(!1)},children:[e.jsxs(yt,{children:[e.jsx(wt,{children:m?d.championSelector.vsSelectOpponent:d.championSelector.selectChampion}),e.jsx(St,{children:m?d.championSelector.vsSelectOpponentDescription:d.championSelector.selectChampionDescription})]}),m&&T&&e.jsxs("div",{className:"p-4 border-b-2 border-destructive/30 bg-destructive/5 flex items-center gap-3 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Q(T.version||"",T.id),alt:T.name,className:"w-10 h-10 rounded-full border-2 border-destructive/50"}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-destructive rounded-full p-0.5",children:e.jsx(Ae,{className:"h-3 w-3 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-foreground",children:T.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:d.championSelector.currentChampion})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-destructive",children:[e.jsx(Ae,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"VS"})]})]}),e.jsxs("div",{className:E("p-4 border-b border-border flex items-center gap-2 shrink-0",m?"bg-muted/30":"bg-card"),children:[e.jsx(Se,{className:E("h-5 w-5 shrink-0",m?"text-destructive":"text-muted-foreground")}),e.jsx(Ke,{ref:w,type:"text",placeholder:m?d.championSelector.vsSearchPlaceholder:d.championSelector.searchPlaceholder,value:i,onChange:C=>{j(C.target.value),c(-1)},onKeyDown:W,className:"flex-1",autoFocus:!0}),e.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>_(!1),children:e.jsx(je,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:u,className:"overflow-y-auto overflow-x-hidden p-4 flex-1 min-h-0 md:flex-none md:w-[600px] md:h-[427px] lg:w-[800px] lg:h-[527px]",children:t?(m?A:k).length>0?e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"mb-3 pb-2 border-b border-destructive/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-semibold",children:d.championSelector.selectOpponentLabel})]})}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:(m?A:k).map((C,$)=>{const I=o===$,R=m?!1:V.has(C.id);return e.jsx("div",{"data-champion-item":!0,className:E(I&&"ring-2 ring-offset-1 rounded-md",m?"ring-destructive":"ring-primary"),children:e.jsx(dt,{addChampion:L=>G(L),data:C,name:C.name,selected:R,thumbnailSrc:Q(C.version||"",C.id)})},C.id)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground min-h-[200px] space-y-2",children:[e.jsx(Se,{className:"h-12 w-12 opacity-50"}),e.jsx("p",{className:"text-base font-medium",children:i?d.championSelector.noResults:d.championSelector.emptyList})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground min-h-[200px]",children:d.championSelector.loading})})]})]})}):e.jsxs("div",{ref:v,className:"w-full",children:[e.jsxs(re,{onClick:()=>{y(!0),setTimeout(()=>{var C;return(C=w.current)==null?void 0:C.focus()},0)},variant:"ghost",className:E("w-full flex flex-col items-center justify-center space-y-2","text-muted-foreground hover:text-foreground","py-4 h-auto"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:e.jsx(Se,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-medium",children:d.championSelector.selectChampion})]}),b&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>{y(!1),j(""),document.body.style.overflow="",S()},"aria-hidden":"true"}),e.jsxs("div",{className:E("fixed inset-0 z-50 md:absolute md:inset-auto md:top-full md:left-0 md:right-0 md:mt-2 md:z-10 md:rounded-lg md:border md:border-border md:shadow-lg bg-card md:max-h-[60vh] flex flex-col",f&&"md:relative md:inset-0 md:mt-0 md:rounded-lg md:border md:shadow-lg"),children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-2 sticky top-0 bg-card z-10",children:[e.jsx(Se,{className:"h-5 w-5 text-muted-foreground shrink-0"}),e.jsx(Ke,{ref:w,type:"text",placeholder:d.championSelector.searchPlaceholder,value:i,onChange:C=>{j(C.target.value),c(-1)},onKeyDown:W,className:"flex-1",autoFocus:!0}),e.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>{y(!1),j(""),document.body.style.overflow="",S()},children:e.jsx(je,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:u,className:"flex-1 overflow-auto p-4",style:{maxHeight:"calc(100vh - 120px)"},children:t?e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:k.map((C,$)=>{const I=o===$,R=V.has(C.id);return e.jsx("div",{"data-champion-item":!0,className:E(I&&"ring-2 ring-primary ring-offset-1 rounded-md"),children:e.jsx(dt,{addChampion:L=>G(L),data:C,name:C.name,selected:R,thumbnailSrc:Q(C.version||"",C.id)})},C.id)})}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:d.championSelector.loading})})]})]})]})}const Be=Z.memo(ir);function kt(t="ko_KR"){const r=Ne(t);return[{key:"hp",label:r.stats.health,format:s=>Math.round(s)},{key:"hpperlevel",label:r.stats.healthPerLevel,format:s=>s.toFixed(1)},{key:"mp",label:r.stats.mana,format:s=>Math.round(s)},{key:"mpperlevel",label:r.stats.manaPerLevel,format:s=>s.toFixed(1)},{key:"movespeed",label:r.stats.movespeed,format:s=>Math.round(s)},{key:"armor",label:r.stats.armor,format:s=>Math.round(s)},{key:"armorperlevel",label:r.stats.armorPerLevel,format:s=>s.toFixed(1)},{key:"spellblock",label:r.stats.spellblock,format:s=>Math.round(s)},{key:"spellblockperlevel",label:r.stats.spellblockPerLevel,format:s=>s.toFixed(1)},{key:"attackdamage",label:r.stats.attackdamage,format:s=>Math.round(s)},{key:"attackdamageperlevel",label:r.stats.attackdamagePerLevel,format:s=>s.toFixed(1)},{key:"attackspeed",label:r.stats.attackspeed,format:s=>s.toFixed(3)},{key:"attackspeedperlevel",label:r.stats.attackspeedPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"attackrange",label:r.stats.attackrange,format:s=>Math.round(s)},{key:"crit",label:r.stats.crit,format:s=>`${(s*100).toFixed(1)}%`},{key:"critperlevel",label:r.stats.critPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"hpregen",label:r.stats.hpregen,format:s=>s.toFixed(1)},{key:"hpregenperlevel",label:r.stats.hpregenPerLevel,format:s=>s.toFixed(1)},{key:"mpregen",label:r.stats.mpregen,format:s=>s.toFixed(1)},{key:"mpregenperlevel",label:r.stats.mpregenPerLevel,format:s=>s.toFixed(1)}]}const pe=["Q","W","E","R"];function cr({champions:t,version:r,championList:s,onAddChampion:a,onRemoveChampion:n,onReorderChampions:l}){const{t:x,lang:m}=ee(),[d,p]=g.useState(!1),h=kt(m),N=Ge(ge(We,{activationConstraint:{distance:8}}),ge(Ze,{coordinateGetter:Ue})),b=o=>{},y=o=>{const{active:c,over:v}=o;if(v&&c.id!==v.id&&l){const w=t.findIndex(f=>f.id===c.id),u=t.findIndex(f=>f.id===v.id);w!==-1&&u!==-1&&l(w,u)}},i=({champion:o,children:c,className:v})=>{const{setNodeRef:w,transform:u,transition:f,isDragging:S}=be({id:o.id,disabled:!0}),V={transform:u?he.Transform.toString(u):void 0,transition:S?f:void 0,opacity:S?.5:1};return e.jsx(B,{ref:w,style:V,className:v,children:c})},j=({champion:o,index:c})=>{const{attributes:v,listeners:w,setNodeRef:u,transform:f,transition:S,isDragging:k}=be({id:o.id}),T={transform:f?he.Transform.toString(f):void 0,transition:k?S:void 0,opacity:k?.5:1};return e.jsx(H,{ref:u,style:T,className:E("text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] select-none",c<t.length-1&&"border-r border-border/30",k&&"z-50"),children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1.5 relative",children:[l&&e.jsx("button",{...v,...w,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity absolute -left-2 top-1/2 -translate-y-1/2","aria-label":"Drag to reorder",children:e.jsx(Le,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Q(r,o.id),alt:o.name,className:"w-8 h-8 rounded-full"}),n&&e.jsx(re,{variant:"ghost",size:"icon",className:E("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:A=>{A.stopPropagation(),n(o.id)},"aria-label":`Remove ${o.name}`,children:e.jsx(je,{className:"h-2.5 w-2.5"})})]}),e.jsx("div",{className:"text-[10px] font-semibold leading-tight text-center break-words text-foreground",children:o.name})]})})};return e.jsxs("div",{className:"relative",children:[e.jsx(Je,{sensors:N,collisionDetection:qe,onDragStart:b,onDragEnd:y,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(de,{className:"border-collapse table-fixed w-auto",children:[e.jsx(ue,{children:e.jsxs(U,{className:"border-b border-border/30 select-none",children:[e.jsx(H,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[90px] min-w-[90px] border-r border-border/30 select-none",style:{left:0},children:x.stats.label}),e.jsx(Ye,{items:t.map(o=>o.id),strategy:Xe,children:t.map((o,c)=>e.jsx(j,{champion:o,index:c},o.id))}),a&&e.jsx(H,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] border-l border-border/30 select-none",children:e.jsxs(re,{onClick:()=>p(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Re,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsx(me,{children:h.map(o=>{const c=t.map(u=>{var f;return((f=u.stats)==null?void 0:f[o.key])??0}),v=Math.max(...c),w=Math.min(...c);return e.jsxs(U,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(B,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:o.label}),t.map((u,f)=>{var T;const S=((T=u.stats)==null?void 0:T[o.key])??0,k=S===v&&v!==w,V=S===w&&v!==w;return e.jsx(i,{champion:u,className:E("p-1.5 text-[11px] text-center",f<t.length-1&&"border-r border-border/30",k&&"text-primary font-semibold",V&&"text-muted-foreground"),children:o.format(S)},u.id)}),a&&e.jsx(B,{className:"p-1.5 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[24px]"})})]},o.key)})})]})})}),d&&a&&s&&e.jsx(Be,{championList:s,selectedChampions:t,onSelect:o=>{a(o)},onClose:()=>p(!1)})]})}function dr({champions:t,version:r,vsMode:s}){const{t:a,lang:n}=ee(),l=kt(n);if(s&&t.length===2){const x=s.championA,m=s.championB;return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(de,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(ue,{children:e.jsxs(U,{className:"border-b border-border/30 select-none",children:[e.jsx(H,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:a.stats.label}),e.jsx(H,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:Q(r,x.id),alt:x.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:x.name})]})}),e.jsx(H,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(H,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:Q(r,m.id),alt:m.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:m.name})]})})]})}),e.jsx(me,{children:l.map(d=>{var y,i;const p=((y=x.stats)==null?void 0:y[d.key])??0,h=((i=m.stats)==null?void 0:i[d.key])??0,N=Math.max(p,h),b=Math.min(p,h);return e.jsxs(U,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(B,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:d.label}),e.jsx(B,{className:E("p-1.5 text-[10px] text-center border-r border-border/30",p===N&&N!==b&&"text-primary font-semibold",p===b&&N!==b&&"text-muted-foreground"),children:d.format(p)}),e.jsx(B,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(B,{className:E("p-1.5 text-[10px] text-center",h===N&&N!==b&&"text-primary font-semibold",h===b&&N!==b&&"text-muted-foreground"),children:d.format(h)})]},d.key)})})]})})})})})}return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(de,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(ue,{children:e.jsxs(U,{className:"border-b border-border/30 select-none",children:[e.jsx(H,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[70px] min-w-[70px] border-r border-border/30 select-none",style:{left:0},children:a.stats.label}),t.map(x=>e.jsx(H,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:Q(r,x.id),alt:x.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:x.name})]})},x.id))]})}),e.jsx(me,{children:l.map(x=>{const m=t.map(h=>{var N;return((N=h.stats)==null?void 0:N[x.key])??0}),d=Math.max(...m),p=Math.min(...m);return e.jsxs(U,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(B,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:x.label}),t.map(h=>{var i;const N=((i=h.stats)==null?void 0:i[x.key])??0,b=N===d&&d!==p,y=N===p&&d!==p;return e.jsx(B,{className:E("p-1.5 text-[11px] text-center",b&&"text-primary font-semibold",y&&"text-muted-foreground"),children:x.format(N)},h.id)})]},x.key)})})]})})})})})}async function ur(t,r,s){let a={},n=null;try{n=await Ut(t,s),a=n.spellDataMap}catch(l){z.warn(`Failed to load Community Dragon data for ${t}:`,l)}return r.map((l,x)=>{let m={};if(a[x.toString()])m=a[x.toString()];else{const d=l.id.replace(t,"");for(const p of Object.keys(a))if(p.toLowerCase().includes(d.toLowerCase())||p.toLowerCase().includes(l.id.toLowerCase())){m=a[p];break}}return{spell:l,communityDragonData:m,spellIndex:x,ddragonVersion:(n==null?void 0:n.ddragonVersion)??s,cdragonVersion:(n==null?void 0:n.cdragonVersion)??null}})}async function Tt(t,r){const s={},a=t.map(async n=>{if(!n.spells||n.spells.length===0){s[n.id]=[];return}try{s[n.id]=await ur(n.id,n.spells,r)}catch(l){z.warn(`Failed to get integrated spell data for ${n.id}:`,l),s[n.id]=n.spells.map((x,m)=>({spell:x,communityDragonData:{},spellIndex:m}))}});return await Promise.all(a),s}const De={physicalDamage:{tag:"span",className:"text-red-600 dark:text-red-500 font-semibold"},magicDamage:{tag:"span",className:"text-blue-600 dark:text-blue-500 font-semibold"},trueDamage:{tag:"span",className:"text-yellow-600 dark:text-yellow-500 font-semibold"},status:{tag:"span",className:"text-purple-600 dark:text-purple-500"},lifeSteal:{tag:"span",className:"text-green-600 dark:text-green-500"},scaleAD:{tag:"span",className:"text-orange-600 dark:text-orange-500"},scaleAP:{tag:"span",className:"text-blue-600 dark:text-blue-400"},scaleArmor:{tag:"span",className:"text-orange-600 dark:text-orange-400"},scaleLevel:{tag:"span",className:"text-gray-600 dark:text-gray-400"},healing:{tag:"span",className:"text-green-600 dark:text-green-400"},speed:{tag:"span",className:"text-cyan-600 dark:text-cyan-500"},keywordMajor:{tag:"span",className:"text-yellow-600 dark:text-yellow-400 font-semibold"},keywordStealth:{tag:"span",className:"text-purple-600 dark:text-purple-400 font-semibold"},spellPassive:{tag:"span",className:"text-gray-600 dark:text-gray-500 italic"},spellActive:{tag:"span",className:"text-gray-900 dark:text-white font-semibold"},recast:{tag:"span",className:"text-yellow-600 dark:text-yellow-300"},damage:{tag:"span",className:"text-red-600 dark:text-red-400"},shield:{tag:"span",className:"text-blue-600 dark:text-blue-300"},mana:{tag:"span",className:"text-blue-600 dark:text-blue-400"},energy:{tag:"span",className:"text-yellow-600 dark:text-yellow-400"},health:{tag:"span",className:"text-red-600 dark:text-red-400"},cooldown:{tag:"span",className:"text-gray-600 dark:text-gray-300"},range:{tag:"span",className:"text-cyan-600 dark:text-cyan-400"},radius:{tag:"span",className:"text-purple-600 dark:text-purple-400"},width:{tag:"span",className:"text-indigo-600 dark:text-indigo-400"},length:{tag:"span",className:"text-pink-600 dark:text-pink-400"},rules:{tag:"span",className:"text-gray-600 dark:text-gray-400 italic"}};function mr(t){let r=t;r=r.replace(/<font\s+color=['"]([^'"]+)['"]\s*>/gi,'<span style="color: $1">'),r=r.replace(/<\/font>/gi,"</span>"),Object.entries(De).forEach(([a,{tag:n,className:l}])=>{const x=new RegExp(`</${a}>`,"gi");r=r.replace(x,`</${n}>`);const m=new RegExp(`<${a}>`,"gi");r=r.replace(m,`<${n}${l?` class="${l}"`:""}>`)});const s=["keywordMajor","keywordStealth","rules","recast"];return s.forEach(a=>{r=r.replace(new RegExp(`</${a}>`,"gi"),"</span>"),a==="rules"?r=r.replace(new RegExp(`<${a}>`,"gi"),'<span class="text-gray-600 dark:text-gray-400 italic">'):a==="keywordStealth"?r=r.replace(new RegExp(`<${a}>`,"gi"),'<span class="text-purple-600 dark:text-purple-400 font-semibold">'):r=r.replace(new RegExp(`<${a}>`,"gi"),'<span class="text-yellow-600 dark:text-yellow-400 font-semibold">')}),r=r.replace(/<(\w+)(?![\\w])>/gi,(a,n)=>De[n]||s.includes(n)||n==="font"||n==="br"?a:"<span>"),r=r.replace(/<\/(\w+)(?![\\w])>/gi,(a,n)=>De[n]||s.includes(n)||n==="font"||n==="br"?a:"</span>"),r}function Vt(t){const r=t.trim(),s=/^([a-zA-Z_][a-zA-Z0-9_]*)\s*([*+\/-])\s*(-?\d+(?:\.\d+)?)$/,a=r.match(s);if(a){const n=a[2];return{type:"formula",variable:a[1],operator:n,operand:parseFloat(a[3])}}return{type:"variable",variable:r}}function Pt(t,r,s){if(!r||typeof r!="string")return null;const a=Object.entries(t).find(([d])=>d!=null&&d.toLowerCase()===r.toLowerCase());if(!a)return null;const[,n]=a,l=n.slice(1,s+1);if(l.length===0)return null;const x=l[0];return l.every(d=>d===x)?x:l}function $t(t,r){if(r.type!=="formula"||!r.operator||r.operand==null)return t;const{operator:s,operand:a}=r;return s==="*"?Array.isArray(t)?t.map(n=>n*a):t*a:s==="+"?Array.isArray(t)?t.map(n=>n+a):t+a:s==="-"?Array.isArray(t)?t.map(n=>n-a):t-a:s==="/"?Array.isArray(t)?t.map(n=>n/a):t/a:t}function oe(t){if(t==null||t==="")return"";const r=typeof t=="number"?t:parseFloat(String(t));return isNaN(r)?String(t):r%1===0?r.toString():parseFloat(r.toFixed(3)).toString()}function mt(t,r,s=!1){if(!t||t.length===0)return"";const a=s&&t.length>1?1:0,l=t.slice(a).filter(h=>h!=null&&h!==""&&h!=="0");if(l.length===0)return"";const x=r?l.slice(0,r):l;if(x.length===0)return"";const m=x.map(h=>oe(h)),d=m[0];return m.every(h=>h===d)?d:m.join("/")}function fr(t){let r=t;return r=r.replace(/<br\s*\/?>/gi,"<br />"),r=r.replace(/[^\S\r\n]+/g," "),r}function Y(t){return Array.isArray(t)}function ft(t,r){return Array.isArray(t)?t:Array.from({length:r},()=>t)}function At(t,r,s){if(!Y(t)&&!Y(r))return s(t,r);const a=Y(t)?t:ft(t,Y(r)?r.length:1),n=Y(r)?r:ft(r,a.length);if(a.length!==n.length)throw new Error(`Vector length mismatch: ${a.length} vs ${n.length}`);return a.map((l,x)=>s(l,n[x]))}function ye(t,r){return At(t,r,(s,a)=>s+a)}function we(t,r){return At(t,r,(s,a)=>s*a)}function Ee(t){return Y(t)?t.every(s=>s===t[0])?oe(t[0]):t.map(s=>oe(s)).join("/"):oe(t)}function Me(t){return Y(t)?t.map(r=>r*100):t*100}function xt(t,r,s="ko_KR"){const a=Ne(s),n=t!=null,l=r!=null;if(!n&&!l)return a.stats.abilityPower;const x=t??r;return x===2?t===2&&r===2?a.stats.bonusAttackDamage:a.stats.attackDamage:x===12?t===12&&r===2?a.stats.bonusHealth:a.stats.health:x===1?t===1&&r===2?a.stats.bonusArmor:a.stats.armor:x===6?t===6&&r===2?a.stats.bonusMagicResist:a.stats.magicResist:x===18?t===18&&r===2?a.stats.bonusLifesteal:a.stats.lifesteal:""}function Et(t,r,s){const a=s==null?void 0:s.DataValues;if(!a)return null;const n=Pt(a,t.variable,r.maxrank);if(n==null)return null;const l=$t(n,t);return Ee(l)}function pt(t,r){const s=a=>Number.isFinite(a)?a.toFixed(r).replace(/\.?0+$/,""):String(a);if(Y(t)){const a=t.map(x=>s(x)),n=a[0];return a.every(x=>x===n)?n:a.join("/")}return s(t)}function xr(t,r,s,a="ko_KR"){const n=s==null?void 0:s.mSpellCalculations,l=s==null?void 0:s.DataValues;if(!n)return null;const x=Object.entries(n).find(([u])=>u!=null&&u.toLowerCase()===t.variable.toLowerCase());if(!x)return null;const[m]=x;function d(u){if(!u||typeof u!="string")return z.debug(`DataValue name is invalid: ${u}`),null;if(!l)return z.debug("dataValues is undefined"),null;const f=Pt(l,u,r.maxrank);return f??(z.debug(`DataValue "${u}" missing`),null)}function p(u,f=new Set){var k;if(!n)throw new Error("spellCalcs is undefined");const S=n[u];if(!S)throw new Error(`SpellCalculation "${u}" not found`);if(f.has(u))throw new Error(`Circular reference in mSpellCalculations: ${u}`);if(f.add(u),S.__type==="GameCalculationModified"){const V=S;if(!V.mModifiedGameCalculation)throw new Error("mModifiedGameCalculation is missing");const T=p(V.mModifiedGameCalculation,f);if(!V.mMultiplier)return T;let A=null;if(V.mMultiplier.mDataValue){if(A=d(V.mMultiplier.mDataValue),A==null)return T}else V.mMultiplier.mNumber!=null&&(A=V.mMultiplier.mNumber);if(A==null)return T;const M=we(T.base,A),_=T.statParts.map(G=>({name:G.name,ratio:we(G.ratio,A)}));return{base:M,statParts:_,isPercent:T.isPercent,precision:T.precision}}if(S.__type==="GameCalculation"){const V=S,T=V.mFormulaParts??[];let A=0;const M=[],_=!!V.mDisplayAsPercent;if(T.length===1&&T[0].__type==="ByCharLevelBreakpointsCalculationPart"&&V.mSimpleTooltipCalculationDisplay===6){const $=T[0],I=$.mLevel1Value??0;let R=I;for(const X of $.mBreakpoints??[])typeof X.mAdditionalBonusAtThisLevel=="number"&&(R+=X.mAdditionalBonusAtThisLevel);return{base:[I,R],statParts:[],isPercent:_,isBreakpointRange:!0,precision:void 0}}if(T.length===1&&T[0].__type==="ByCharLevelBreakpointsCalculationPart"&&_){const $=T[0],I=$.mLevel1Value??0,R=$.mInitialBonusPerLevel??0,L=($.mBreakpoints??[])[0];if(R!==0&&(L!=null&&L.mLevel)){const F=L.mLevel-1,X=Math.max(F-1,0),D=I+X*R;return{base:[I,D],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}}if(T.length===1&&T[0].__type==="ByCharLevelInterpolationCalculationPart"&&_){const $=T[0],I=$.mStartValue??0,R=$.mEndValue??I;return{base:[I,R],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}for(const $ of T){const I=$.__type;if(I==="NamedDataValueCalculationPart"){const R=$;if(!R.mDataValue){z.debug("NamedDataValueCalculationPart missing mDataValue",$);continue}const L=d(R.mDataValue);if(L==null)continue;A=ye(A,L)}else if(I==="EffectValueCalculationPart"){const L=$.mEffectIndex??0,F=((k=r.effectBurn)==null?void 0:k[L])??null;if(!F)z.debug(`EffectValueCalculationPart: effectBurn[${L}] is missing`,{spellId:r.id});else{const X=F.split("/").map(D=>parseFloat(D)).filter(D=>!Number.isNaN(D));if(X.length>0){const D=X.length>r.maxrank?X.slice(0,r.maxrank):X;A=ye(A,D)}}}else if(I==="StatByNamedDataValueCalculationPart"){const R=$;if(!R.mDataValue){z.debug("StatByNamedDataValueCalculationPart missing mDataValue",$);continue}const L=d(R.mDataValue);if(L==null)continue;const F=xt(R.mStat,R.mStatFormula,a);M.push({name:F,ratio:L})}else if(I==="StatByCoefficientCalculationPart"){const R=$;if(R.mCoefficient==null){z.debug("StatByCoefficientCalculationPart missing mCoefficient",$);continue}const L=xt(R.mStat,R.mStatFormula,a),F=R.mCoefficient;M.push({name:L,ratio:F,isCoefficient:!0})}else if(I==="AbilityResourceByCoefficientCalculationPart"){const R=$;if(R.mCoefficient==null){z.debug("AbilityResourceByCoefficientCalculationPart missing mCoefficient",$);continue}const L=Ne(a);let F=L.common.mana;if(r.costType){const te=r.costType.trim();te&&!te.includes("{{")?F=te:r.resource&&!r.resource.includes("{{")&&(F=r.resource)}else r.resource&&!r.resource.includes("{{")&&(F=r.resource);const D=R.mStatFormula===2?`${L.common.bonus} ${F}`:F,O=R.mCoefficient;M.push({name:D,ratio:O,isCoefficient:!0})}else if(I==="NumberCalculationPart"){const L=$.mNumber??0;A=ye(A,L)}else if(I==="ByCharLevelBreakpointsCalculationPart"){const R=$;let L=R.mLevel1Value||0;for(const F of R.mBreakpoints??[])F.mAdditionalBonusAtThisLevel!=null&&(L+=F.mAdditionalBonusAtThisLevel);A=ye(A,L)}else if(I==="ProductOfSubPartsCalculationPart"){const R=$,L=O=>{var Ve;if(!O||!O.__type)return 0;const te=O.__type;if(te==="NamedDataValueCalculationPart"){const fe=O;if(!fe.mDataValue)return z.debug("ProductOfSubPartsCalculationPart: NamedDataValueCalculationPart missing mDataValue",O),0;const le=d(fe.mDataValue);return le??0}if(te==="NumberCalculationPart")return O.mNumber??0;if(te==="EffectValueCalculationPart"){const le=O.mEffectIndex??0,xe=((Ve=r.effectBurn)==null?void 0:Ve[le])??null;if(!xe)return z.debug(`ProductOfSubPartsCalculationPart: EffectValueCalculationPart missing effectBurn[${le}]`,{spellId:r.id}),0;let ve;if(xe.includes("/")){const P=xe.split("/").map(K=>Number.parseFloat(K)).filter(K=>!Number.isNaN(K));if(P.length===0)return 0;ve=P.length===1?P[0]:P}else{const P=Number.parseFloat(xe);if(Number.isNaN(P))return 0;ve=P}return ve}return z.debug(`ProductOfSubPartsCalculationPart: unsupported sub part type "${te}"`,O),0},F=L(R.mPart1),X=L(R.mPart2),D=we(F,X);A=ye(A,D)}}let G=A,W=M;if(V.mMultiplier){let $=null;V.mMultiplier.mDataValue?($=d(V.mMultiplier.mDataValue),$==null&&($=null)):V.mMultiplier.mNumber!=null&&($=V.mMultiplier.mNumber),$!=null&&(G=we(G,$),W=W.map(I=>({...I,ratio:we(I.ratio,$)})))}let C;return typeof V.mPrecision=="number"&&V.mPrecision>=0?C=V.mPrecision+1:C=void 0,{base:G,statParts:W,isPercent:_,precision:C}}throw new Error(`Unsupported mSpellCalculation type: ${S.__type}`)}let h;try{h=p(m)}catch(u){return z.error("Failed to evaluate calculation:",u),null}let N;const b=h.precision;h.isPercent?b!=null?Y(h.base)?N=h.base.map(u=>u*100):N=h.base*100:N=Me(h.base):N=h.base;const y=h.statParts.map(u=>{if(u.isCoefficient){const f=b!=null?Y(u.ratio)?u.ratio.map(S=>S*100):u.ratio*100:Me(u.ratio);return{...u,ratio:f}}if(b!=null){const f=Y(u.ratio)?u.ratio.map(S=>S*100):u.ratio*100;return{...u,ratio:f}}return{...u,ratio:Me(u.ratio)}});let i=null;const j=Y(N)&&N.length>0&&N.every(u=>u===0),o=!Y(N)&&N===0;if(!j&&!o)if(h.isCharLevelRange&&Y(N)&&N.length===2){const[u,f]=N,S=oe(u),k=oe(f);i=`(${S}% ~ ${k}%)`}else if(h.isBreakpointRange&&Y(N)&&N.length===2){const[u,f]=N,S=oe(u),k=oe(f);i=h.isPercent?`(${S}% ~ ${k}%)`:`(${S} ~ ${k})`}else{const u=b!=null?pt(N,b):Ee(N);i=h.isPercent?`${u}%`:u}const c=y.map(u=>{const f=b!=null?pt(u.ratio,b):Ee(u.ratio);return u.name?`(${f}% ${u.name})`:`(${f}%)`}),v=[];if(i&&v.push(i),v.push(...c),v.length===0)return null;const w=v.join(" + ");return v.length===1?w:`(${w})`}function pr(t,r){return!Number.isFinite(r)||r<0?t:t.replace(/-?\d+(?:\.\d+)?/g,s=>{const a=Number.parseFloat(s);return Number.isFinite(a)?a.toFixed(r):s})}function Rt(t,r,s,a="ko_KR"){if(!r)return t;let n=t;n=n.replace(/(}})\s*\+\s*(\S)/g,"$1 + $2").replace(/(\S)\s*\+\s*({{)/g,"$1 + $2").replace(/(\S)\s*~\s*(\S)/g,"$1 ~ $2"),n=n.replace(/\{\{([^}]*\{\{[^}]*}}[^}]*)}}/g,()=>""),n=n.replace(/\{\{Spell_[^}]*Tooltip[^}]*}}/gi,""),n=n.replace(/\{\{spellmodifierdescriptionappend}}/gi,"");const l=/\{\{([^}]+)}}/g;return n=n.replace(l,(x,m)=>{const d=m.trim();if(d==="spellmodifierdescriptionappend"||d.includes("gamemodeinteger")||d.includes("Spell_")&&d.includes("Tooltip"))return"";let p=d,h;const N=/^([a-zA-Z_][a-zA-Z0-9_]*)(?:\.(\d+))(.*)$/.exec(d);if(N){const[,y,i,j]=N,o=Number.parseInt(i,10);Number.isFinite(o)&&(h=o,p=`${y}${j}`)}const b=gr(p,r,s,a);return b!==null?h!==void 0?pr(b,h):b:""}),n=n.replace(/\{\{\s*\}/g,""),n=n.replace(/\}\}/g,""),n=n.replace(/\{\{/g,""),n=n.replace(/%[^\s:%]+:[^\s%]+%/g,""),n=n.replace(/\s+%\s+/g," "),n=n.replace(new RegExp("(?<!\\d)\\s*%\\s*(?!\\d)","g"),""),n=n.replace(/^\s*%\s*(?!\d)/g,""),n=n.replace(new RegExp("(?<!\\d)\\s*%\\s*$","g"),""),n=n.replace(/[^\S\r\n]+/g," "),n}function gr(t,r,s,a="ko_KR"){const n=Vt(t),l=br(n,r,s);if(l!==null)return l;const x=Et(n,r,s);return x!==null?x:xr(n,r,s,a)}function br(t,r,s){const a=t.variable,n=/^e(\d+)$/i.exec(a);if(!n)return null;const l=Number.parseInt(n[1],10);if(!Number.isFinite(l)||l<=0)return null;const x=(s==null?void 0:s.effectBurn)??r.effectBurn;if(!x)return null;const m=x[l];if(!m)return null;let d;if(m.includes("/")){const h=m.split("/").map(N=>Number.parseFloat(N)).filter(N=>!Number.isNaN(N));if(h.length===0)return null;d=h.length===1?h[0]:h}else{const h=Number.parseFloat(m);if(Number.isNaN(h))return null;d=h}const p=$t(d,t);return Ee(p)}function Fe(t,r,s,a="ko_KR"){if(!t)return"";let n=t;return n=mr(n),n=Rt(n,r,s,a),n=fr(n),n=n.replace(/\n/g,"<br />"),n}function gt(t,r,s="ko_KR"){const a=Ne(s);if(!t.leveltip||!t.leveltip.label||!t.leveltip.effect)return"";let n;r&&(r.DataValues?n=r:n={DataValues:r});const{label:l,effect:x}=t.leveltip,m=[];for(let d=0;d<l.length&&d<x.length;d++){const p=l[d],N=x[d].match(/\{\{\s*([^}]+)\s*\}\}/);if(!N)continue;const b=N[1].trim();let y=null;if(n)try{const o=Vt(b),c=Et(o,t,n);if(c&&c.trim()!==""){let v=c;(p.includes("%")||p.toLowerCase().includes("percent")||p.toLowerCase().includes("퍼센트")||p.toLowerCase().includes("둔화"))&&!v.includes("%")&&(v=v.split("/").map(S=>S&&`${S}%`).join("/"));let u=a.common.mana;if(t.costType){const S=t.costType.trim();S&&!S.includes("{{")?u=S:t.resource&&!t.resource.includes("{{")&&(u=t.resource)}else t.resource&&!t.resource.includes("{{")&&(u=t.resource);const f=p.replace("@AbilityResourceName@",u);if(f.includes("{{")||f.includes("}}"))continue;m.push(`${f}: [${v}]`);continue}}catch{}const i=b;y=null;const j=i.match(/^e(\d+)$/i);if(j){const o=parseInt(j[1]);if(t.effectBurn&&t.effectBurn.length>o){const c=t.effectBurn[o];c&&c!==null&&c!=="0"&&(y=c)}}else if(i.toLowerCase()==="cost"||i.toLowerCase().includes("cost"))t.costBurn&&(y=t.costBurn);else if(i.toLowerCase().includes("cooldown"))t.cooldownBurn&&(y=t.cooldownBurn);else if(i.toLowerCase().includes("ammorechargetime")||i.toLowerCase().includes("ammorecharge")){const o=(r==null?void 0:r.DataValues)||r;if(o&&o.mAmmoRechargeTime){const c=o.mAmmoRechargeTime;if(Array.isArray(c)&&c.length>1){const w=c.slice(1).map(f=>typeof f=="number"?f:parseFloat(String(f))),u=mt(w,t.maxrank,!1);u&&(y=u)}}}if(y){const o=mt(y.includes("/")?y.split("/"):[y],t.maxrank);if(o){let c=a.common.mana;if(t.costType){const u=t.costType.trim();u&&!u.includes("{{")?c=u:t.resource&&!t.resource.includes("{{")&&(c=t.resource)}else t.resource&&!t.resource.includes("{{")&&(c=t.resource);const v=p.replace("@AbilityResourceName@",c);if(v.includes("{{")||v.includes("}}"))continue;let w=o;(p.includes("%")||p.toLowerCase().includes("slow")||p.toLowerCase().includes("둔화"))&&(o.includes("%")||(w=o.split("/").map(u=>`${u}%`).join("/"))),m.push(`${v}: [${w}]`)}}}return m.length===0?"":m.join("<br />")}function hr(t,r,s="ko_KR"){var m,d;const a=Ne(s);if(!t||!t.cooldown||!Array.isArray(t.cooldown)||t.cooldown.length===0)return null;const n=((m=r==null?void 0:r.communityDragonData)==null?void 0:m.DataValues)||(r==null?void 0:r.communityDragonData),l=n==null?void 0:n.mAmmoRechargeTime;if(t.cooldown[0]===0&&l&&Array.isArray(l)&&l.length>1&&l){const p=l[1],h=((d=t.effectBurn)==null?void 0:d[1])||"3";return`${a.common.rechargeTime} ${p}${a.common.seconds} (${a.common.max}: ${h}${a.common.items})`}if(t.cooldownBurn){const p=t.cooldownBurn.split("/");return p.length>1&&p.every(h=>h===p[0])?`${p[0]}${a.common.seconds}`:`${t.cooldownBurn}${a.common.seconds}`}if(t.cooldown&&t.cooldown.length>0){const p=t.cooldown[0];return t.cooldown.every(h=>h===p)?`${p}${a.common.seconds}`:`${t.cooldown.join("/")}${a.common.seconds}`}return null}function ce(t){if(!t)return t;let r=t.replace(/\(\s*\)/g,"");return r=r.replace(/\s{2,}/g," ").trim(),r}function jr(t,r,s="ko_KR"){var m;const a=Ne(s);if(!t)return null;const n=Array.isArray(t.cost)&&t.cost.length>0,l=n&&t.cost.every(d=>d===0),x=t.costBurn==="0";if((x||l)&&typeof t.resource=="string"&&t.resource.includes("{{")){const d=t.resource.trim(),p=((m=r==null?void 0:r.communityDragonData)==null?void 0:m.DataValues)||(r==null?void 0:r.communityDragonData);if(p){const N=Rt(d,t,{DataValues:p}).trim();if(N)return ce(N)}return ce(a.common.noCost)}if(x||l)return ce(a.common.noCost);if(t.costBurn){const d=t.costBurn.split("/");return d.length>1&&d.every(p=>p===d[0])?ce(`${a.common.mana} ${d[0]}`):ce(`${a.common.mana} ${t.costBurn}`)}if(n){const d=t.cost[0];return t.cost.every(p=>p===d)?ce(`${a.common.mana} ${d}`):ce(`${a.common.mana} ${t.cost.join("/")}`)}return null}function Lt(t,r,s){var m;const a=((m=s==null?void 0:s.communityDragonData)==null?void 0:m.DataValues)||(s==null?void 0:s.communityDragonData),n=a==null?void 0:a.mAmmoRechargeTime,l=t.cooldown[r-1];return l===0&&n&&Array.isArray(n)&&n.length>r&&n?n[r]!==void 0?String(n[r]):"":l!=null?String(l):""}function ae({skill:t,skillIdx:r,version:s,spellData:a,isPassive:n,passiveName:l,passiveDescription:x,passiveImageFull:m,size:d="default"}){const{t:p,lang:h}=ee(),b=Qe()==="mobile",[y,i]=Z.useState(!1),j=Z.useRef(null),o=n&&m?null:hr(t,a,h),c=n&&m?null:jr(t,a,h),v=d==="small",w=v?"min-w-6 min-h-6 w-6 h-6":"min-w-8 min-h-8 w-8 h-8",u=v?"text-[8px]":"text-[9px]",f=e.jsx("div",{ref:j,className:`flex flex-col items-center gap-0.5 p-1 -m-1 touch-manipulation ${b?"cursor-pointer":"cursor-help"}`,onClick:k=>{b&&(k.stopPropagation(),i(V=>!V))},onTouchStart:k=>{b&&(k.stopPropagation(),i(V=>!V))},children:n&&m?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:Zt(s,m),alt:"Passive",className:E(w,"rounded")}),e.jsx("span",{className:E(u,"font-semibold"),children:"P"})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:nt(s,t.id),alt:pe[r],className:E(w,"rounded")}),e.jsx("span",{className:E(u,"font-semibold"),children:pe[r]})]})}),S=()=>n&&m?e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{className:`font-semibold text-sm ${b?"pr-10":""}`,children:l}),x&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Fe(x,void 0,void 0,h)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground leading-relaxed border-t pt-3 mt-3 flex items-start gap-1.5",children:[e.jsx(ct,{className:"w-3 h-3 mt-0.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:p.skillTooltip.warningPassive})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex items-start gap-3 border-b pb-3 ${b?"pr-10":""}`,children:[e.jsx("img",{src:nt(s,t.id),alt:pe[r],className:"w-12 h-12 min-w-12 min-h-12 rounded flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:t.name&&e.jsxs("div",{className:"font-semibold text-sm",children:["[",pe[r],"] ",t.name]})}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[o&&e.jsx("div",{className:"text-xs text-muted-foreground",children:o.includes(" (")?e.jsxs(e.Fragment,{children:[o.split(" (")[0],e.jsx("br",{}),"(",o.split(" (")[1]]}):o}),c&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 whitespace-nowrap",children:c})]})]}),t.description&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Fe(t.description,t,a==null?void 0:a.communityDragonData,h).replace(/<br\s*\/?>/gi," ")}})}),t.tooltip&&e.jsx("div",{className:"text-xs text-muted-foreground leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Fe(t.tooltip,t,a==null?void 0:a.communityDragonData,h)}})}),a&&gt(t,a.communityDragonData,h)&&e.jsx("div",{className:"text-[11px] leading-relaxed text-muted-foreground border-t pt-3 mt-3",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:gt(t,a.communityDragonData,h)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground leading-relaxed border-t pt-3 mt-3 flex items-start gap-1.5",children:[e.jsx(ct,{className:"w-3 h-3 mt-0.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:p.skillTooltip.warningSkill})]})]});return b?e.jsxs(e.Fragment,{children:[f,e.jsx(vt,{open:y,onOpenChange:i,children:e.jsxs(Wt,{className:"w-[calc(100vw-32px)] max-w-lg h-[70vh] max-h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(yt,{children:[e.jsx(wt,{children:n&&m?`${l||p.skillTooltip.passive} ${p.skillTooltip.skillInfo}`:`[${pe[r]}] ${t.name||p.skillTooltip.skill} ${p.skillTooltip.skillInfo}`}),e.jsx(St,{children:n&&m?`${l||p.skillTooltip.passive} ${p.skillTooltip.skillDescription}`:`[${pe[r]}] ${t.name||p.skillTooltip.skill} ${p.skillTooltip.skillDescription}`})]}),e.jsx(Ct,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4 flex flex-col gap-3",children:S()})})]})})]}):n&&m?e.jsxs(at,{children:[e.jsx(ot,{asChild:!0,children:f}),e.jsx(lt,{side:"top",align:"center",sideOffset:8,className:"max-w-xs p-3 space-y-2",children:S()})]}):e.jsxs(at,{children:[e.jsx(ot,{asChild:!0,children:f}),e.jsx(lt,{side:"top",align:"center",sideOffset:8,className:"max-w-sm p-4 space-y-3",children:S()})]})}const Bt=g.createContext(void 0);function Nr({initialDDragonVersion:t=null,children:r}){const[s,a]=g.useState(t??null),[n,l]=g.useState(null),x=g.useMemo(()=>({ddragonVersion:s,cdragonVersion:n,setDDragonVersion:a,setCDragonVersion:l}),[s,n]);return e.jsx(Bt.Provider,{value:x,children:r})}function rt(){const t=g.useContext(Bt);if(!t)throw new Error("useVersionContext must be used within VersionProvider");return t}function vr({champions:t,version:r,championList:s,onAddChampion:a,onRemoveChampion:n,onReorderChampions:l,vsMode:x}){const{t:m}=ee(),{setCDragonVersion:d}=rt(),[p,h]=g.useState(!1),[N,b]=Z.useState({}),y=Ge(ge(We,{activationConstraint:{distance:8}}),ge(Ze,{coordinateGetter:Ue})),i=f=>{},j=f=>{const{active:S,over:k}=f;if(k&&S.id!==k.id&&l){const V=t.findIndex(A=>A.id===S.id),T=t.findIndex(A=>A.id===k.id);V!==-1&&T!==-1&&l(V,T)}};Z.useEffect(()=>{const f=async()=>{try{const S=await Tt(t,r);b(S);try{let k=null;for(const V of Object.keys(S)){const T=S[V];if(T&&T.length>0&&(k=T[0].cdragonVersion??null,k))break}k&&d(k)}catch(k){z.warn("Failed to extract CDragon version from integrated spell data:",k)}}catch(S){z.warn("Failed to load integrated spell data:",S),b({})}};t.length>0&&f()},[t,r]);const o=Z.useMemo(()=>Math.max(...t.map(f=>f.spells?Math.max(...f.spells.map(S=>S.maxrank)):0)),[t]),c=Z.useCallback((f,S)=>{const k=N[f];return!k||k.length<=S?null:k[S]},[N]),v=Z.useMemo(()=>Array.from({length:o},(f,S)=>{const k=S+1;return{level:k,skills:t.map(V=>V.spells?V.spells.map((T,A)=>{const M=c(V.id,A),_=Lt(T,k,M);return{skill:T,cooldown:_}}):null)}}),[t,o,c]),w=({champion:f,children:S,className:k})=>{const{setNodeRef:V,transform:T,transition:A,isDragging:M}=be({id:f.id,disabled:!0}),G={transform:T?he.Transform.toString(T):void 0,transition:M?A:void 0,opacity:M?.5:1};return e.jsx(B,{ref:V,style:G,className:k,children:S})},u=({champion:f,index:S})=>{const{attributes:k,listeners:V,setNodeRef:T,transform:A,transition:M,isDragging:_}=be({id:f.id}),W={transform:A?he.Transform.toString(A):void 0,transition:_?M:void 0,opacity:_?.5:1};return e.jsx(H,{ref:T,style:W,className:E("text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] select-none",S<t.length-1&&"border-r border-border/30",_&&"z-50"),children:e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 relative",children:[l&&e.jsx("button",{...k,...V,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity -ml-1","aria-label":"Drag to reorder",children:e.jsx(Le,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Q(r,f.id),alt:f.name,className:"w-8 h-8 rounded-full"}),n&&e.jsx(re,{variant:"ghost",size:"icon",className:E("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:C=>{C.stopPropagation(),n(f.id)},"aria-label":`Remove ${f.name}`,children:e.jsx(je,{className:"h-2.5 w-2.5"})})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("div",{className:"text-[11px] font-semibold leading-tight text-foreground",children:f.name}),e.jsx("div",{className:"text-[9px] text-muted-foreground leading-tight",children:f.title})]})]})})};return e.jsx(ze,{delayDuration:0,skipDelayDuration:150,children:e.jsxs("div",{className:"relative",children:[e.jsx(Je,{sensors:y,collisionDetection:qe,onDragStart:i,onDragEnd:j,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(de,{className:"border-collapse table-fixed w-auto",children:[e.jsx(ue,{children:e.jsxs(U,{className:"border-b border-border/30 select-none",children:[e.jsx(H,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[80px] min-w-[80px] border-r border-border/30 select-none",style:{left:0},children:m.common.level}),e.jsx(Ye,{items:t.map(f=>f.id),strategy:Xe,children:t.map((f,S)=>e.jsx(u,{champion:f,index:S},f.id))}),a&&e.jsx(H,{className:"text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] border-l border-border/30 select-none",children:e.jsxs(re,{onClick:()=>h(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Re,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsxs(me,{children:[e.jsxs(U,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(B,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:m.skills.label}),t.map((f,S)=>{var k;return e.jsx(w,{champion:f,className:E("p-2",S<t.length-1&&"border-r border-border/30"),children:e.jsxs("div",{className:"flex justify-center gap-1.5",children:[f.passive&&e.jsx(ae,{isPassive:!0,passiveName:f.passive.name,passiveDescription:f.passive.description,passiveImageFull:f.passive.image.full,skill:{},skillIdx:0,version:r}),(k=f.spells)==null?void 0:k.map((V,T)=>{const A=c(f.id,T);return e.jsx(ae,{skill:V,skillIdx:T,version:r,spellData:A},V.id)})]})},f.id)}),a&&e.jsx(B,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]}),v.map((f,S)=>e.jsxs(U,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(B,{className:E("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",S===v.length-1&&"rounded-bl-lg"),style:{left:0},children:[f.level,m.common.level]}),f.skills.map((k,V)=>{const T=t[V];return e.jsx(w,{champion:T,className:E("p-2",V<t.length-1&&"border-r border-border/30"),children:k?e.jsxs("div",{className:"flex justify-center gap-1.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),k.map((A,M)=>e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs font-semibold",children:A.cooldown!==""?`${A.cooldown}${m.common.seconds}`:"-"})},M))]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})},T.id)}),a&&e.jsx(B,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]},f.level))]})]})})}),p&&a&&s&&e.jsx(Be,{championList:s,selectedChampions:t,onSelect:f=>{a(f)},onClose:()=>h(!1)})]})})}function yr({champions:t,version:r,vsMode:s}){var h,N;const{t:a}=ee(),{setCDragonVersion:n}=rt(),[l,x]=Z.useState({});Z.useEffect(()=>{const b=async()=>{try{const y=await Tt(t,r);x(y);try{let i=null;for(const j of Object.keys(y)){const o=y[j];if(o&&o.length>0&&(i=o[0].cdragonVersion??null,i))break}i&&n(i)}catch(i){z.warn("Failed to extract CDragon version from integrated spell data (mobile):",i)}}catch(y){z.warn("Failed to load integrated spell data:",y),x({})}};t.length>0&&b()},[t,r]);const m=Z.useMemo(()=>Math.max(...t.map(b=>b.spells?Math.max(...b.spells.map(y=>y.maxrank)):0)),[t]),d=Z.useCallback((b,y)=>{const i=l[b];return!i||i.length<=y?null:i[y]},[l]),p=Z.useMemo(()=>Array.from({length:m},(b,y)=>{const i=y+1;return{level:i,skills:t.map(j=>j.spells?j.spells.map((o,c)=>{const v=d(j.id,c),w=Lt(o,i,v);return{skill:o,cooldown:w}}):null)}}),[t,m,d]);if(s&&t.length===2){const b=s.championA,y=s.championB;return e.jsx(ze,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(de,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(ue,{children:e.jsxs(U,{className:"border-b border-border/30 select-none",children:[e.jsx(H,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:a.common.level}),e.jsx(H,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:Q(r,b.id),alt:b.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:b.name})]})}),e.jsx(H,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(H,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:Q(r,y.id),alt:y.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:y.name})]})})]})}),e.jsxs(me,{children:[e.jsxs(U,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(B,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:a.skills.label}),e.jsx(B,{className:"p-1.5 border-r border-border/30",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[b.passive&&e.jsx(ae,{isPassive:!0,passiveName:b.passive.name,passiveDescription:b.passive.description,passiveImageFull:b.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(h=b.spells)==null?void 0:h.map((i,j)=>{const o=d(b.id,j);return e.jsx(ae,{skill:i,skillIdx:j,version:r,spellData:o,size:"small"},i.id)})]})}),e.jsx(B,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(B,{className:"p-1.5",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[y.passive&&e.jsx(ae,{isPassive:!0,passiveName:y.passive.name,passiveDescription:y.passive.description,passiveImageFull:y.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(N=y.spells)==null?void 0:N.map((i,j)=>{const o=d(y.id,j);return e.jsx(ae,{skill:i,skillIdx:j,version:r,spellData:o,size:"small"},i.id)})]})})]}),p.map((i,j)=>{const o=i.skills[0],c=i.skills[1];return e.jsxs(U,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(B,{className:E("p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",j===p.length-1&&"rounded-bl-lg"),style:{left:0},children:[i.level,a.common.level]}),e.jsx(B,{className:"p-1.5 border-r border-border/30",children:o?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),o.map((v,w)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:v.cooldown!==""?`${v.cooldown}${a.common.seconds}`:"-"})},w))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),e.jsx(B,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(B,{className:"p-1.5",children:c?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),c.map((v,w)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:v.cooldown!==""?`${v.cooldown}${a.common.seconds}`:"-"})},w))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})})]},i.level)})]})]})})})})})})}return e.jsx(ze,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(de,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(ue,{children:e.jsxs(U,{className:"border-b border-border/30 select-none",children:[e.jsx(H,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[60px] min-w-[60px] border-r border-border/30 select-none",style:{left:0},children:a.common.level}),t.map(b=>e.jsx(H,{className:"text-center p-2 text-xs font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:Q(r,b.id),alt:b.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:b.name})]})},b.id))]})}),e.jsxs(me,{children:[e.jsxs(U,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(B,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:a.skills.label}),t.map(b=>{var y;return e.jsx(B,{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[b.passive&&e.jsx(ae,{isPassive:!0,passiveName:b.passive.name,passiveDescription:b.passive.description,passiveImageFull:b.passive.image.full,skill:{},skillIdx:0,version:r}),(y=b.spells)==null?void 0:y.map((i,j)=>{const o=d(b.id,j);return e.jsx(ae,{skill:i,skillIdx:j,version:r,spellData:o},i.id)})]})},b.id)})]}),p.map((b,y)=>e.jsxs(U,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(B,{className:E("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",y===p.length-1&&"rounded-bl-lg"),style:{left:0},children:[b.level,a.common.level]}),b.skills.map((i,j)=>e.jsx(B,{className:"p-2",children:i?e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})}),i.map((o,c)=>e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] font-semibold",children:o.cooldown!==""?`${o.cooldown}${a.common.seconds}`:"-"})},c))]}):e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})},t[j].id))]},b.level))]})]})})})})})})}function wr({champions:t,version:r,activeTab:s,championList:a,onAddChampion:n,onRemoveChampion:l,onReorderChampions:x,vsMode:m}){const d=Qe();if(t.length===0)return null;const p=d==="mobile";return e.jsx(et,{children:e.jsx(tt,{className:"p-0",children:s==="stats"?p?e.jsx(dr,{champions:t,version:r,championList:a,onAddChampion:n,onRemoveChampion:l,vsMode:m}):e.jsx(cr,{champions:t,version:r,championList:a,onAddChampion:n,onRemoveChampion:l,onReorderChampions:x}):p?e.jsx(yr,{champions:t,version:r,championList:a,onAddChampion:n,onRemoveChampion:l,vsMode:m}):e.jsx(vr,{champions:t,version:r,championList:a,onAddChampion:n,onRemoveChampion:l,onReorderChampions:x})})})}const Sr=Z.memo(wr),Cr=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Ce="encyclopedia_selected_champions",ke="encyclopedia_tabs",Te="encyclopedia_selected_tab_id";function kr(t){const[r,s]=g.useState([]),a=g.useRef([]),[n,l]=g.useState(null),[x,m]=g.useState(!1),[d,p]=g.useState(null);g.useEffect(()=>{a.current=r},[r]),g.useEffect(()=>{if(t)try{const o=localStorage.getItem(ke);if(o)try{const v=JSON.parse(o);Array.isArray(v)&&s(v)}catch{}const c=localStorage.getItem(Te);c&&l(c)}catch(o){logger.error("Failed to load stored tabs:",o)}},[t]),g.useEffect(()=>{try{r.length>0?Oe(ke,JSON.stringify(r)):ne(ke)}catch(o){logger.error("Failed to save tabs to storage:",o)}},[r]),g.useEffect(()=>{try{n?Oe(Te,n):ne(Te)}catch(o){logger.error("Failed to save selected tab ID to storage:",o)}},[n]),g.useEffect(()=>{!n&&r.length>0&&l(r[0].id)},[r,n]),g.useEffect(()=>{n&&!r.find(o=>o.id===n)&&l(r.length>0?r[0].id:null)},[r,n]);const h=g.useCallback(o=>{s(c=>{const v=c.findIndex(u=>u.id===o),w=c.filter(u=>u.id!==o);return l(u=>{if(u&&u!==o&&w.some(V=>V.id===u))return u;if(w.length===0)return null;const f=v>0?v-1:0;return(w[f]??w[0]).id}),w})},[l]),N=g.useCallback(o=>{s(c=>[...c,o]),l(o.id)},[]),b=g.useCallback((o,c)=>{s(v=>v.map(w=>w.id===o?c(w):w))},[]),y=g.useCallback((o,c)=>{s(v=>{const w=v.findIndex(f=>f.id===o);if(w===-1)return[...v,c];const u=[...v];return u[w]=c,u}),l(c.id)},[]),i=g.useCallback(()=>{s([]),l(null),ne(ke),ne(Te)},[]),j=g.useCallback(o=>{const{active:c,over:v}=o;v&&c.id!==v.id&&s(w=>{const u=w.findIndex(S=>S.id===c.id),f=w.findIndex(S=>S.id===v.id);return u===-1||f===-1?w:bt(w,u,f)})},[]);return{tabs:r,setTabs:s,tabsRef:a,selectedTabId:n,setSelectedTabId:l,showVsSelector:x,setShowVsSelector:m,vsSelectorMode:d,setVsSelectorMode:p,removeTab:h,addTab:N,updateTab:b,replaceTab:y,resetTabs:i,handleDragEnd:j,generateTabId:Cr}}function Tr({version:t,lang:r,championList:s,tabs:a}){const[n,l]=g.useState([]),[x,m]=g.useState(!0);g.useEffect(()=>{if(t)try{const i=localStorage.getItem(Ce);if(i){const j=JSON.parse(i);if(Array.isArray(j)&&j.length>0&&s){const o=j.map(c=>{const v=s.find(w=>w.id===c.id||w.key===c.key);return v?{...v,isLoading:!1}:null}).filter(c=>c!==null);o.length>0&&setTimeout(()=>{l(o),o.forEach(c=>{c.id&&(l(v=>v.map(w=>w.id===c.id?{...w,isLoading:!0}:w)),it(t,r,c.id).then(v=>{l(w=>w.map(u=>u.id===c.id?{...u,fullInfo:v,isLoading:!1}:u))}).catch(v=>{z.error("Failed to load champion info:",v),l(w=>w.map(u=>u.id===c.id?{...u,isLoading:!1}:u))}))})},0)}}setTimeout(()=>{m(!1)},0)}catch(i){z.error("Failed to load stored champions:",i),setTimeout(()=>{m(!1)},0)}},[t,r,s]),g.useEffect(()=>{try{if(n.length>0){const i=n.map(({id:j,key:o})=>({id:j,key:o}));Oe(Ce,JSON.stringify(i))}else ne(Ce)}catch(i){z.error("Failed to save champions to storage:",i)}},[n]),g.useEffect(()=>{s&&n.length>0&&setTimeout(()=>{l(i=>i.map(j=>{const o=s.find(c=>c.id===j.id||c.key===j.key);return o?{...j,name:o.name,title:o.title}:j}))},0)},[s,n.length]),g.useEffect(()=>{x||setTimeout(()=>{const i=new Set(a.flatMap(j=>j.champions));l(j=>{if(a.length===0)return j.length>0?[]:j;const o=j.filter(c=>i.has(c.id));return o.length!==j.length?o:j})},0)},[a,x]);const d=g.useCallback(i=>{t&&(l(j=>j.map(o=>o.id===i?{...o,isLoading:!0}:o)),it(t,r,i).then(j=>{l(o=>o.map(c=>c.id===i?{...c,fullInfo:j,isLoading:!1,skinIndex:0}:c))}).catch(j=>{z.error("Failed to load champion info:",j),l(o=>o.map(c=>c.id===i?{...c,isLoading:!1}:c))}))},[t,r]),p=g.useCallback(i=>{l(j=>{if(j.some(v=>v.id===i.id))return j;const c={...i,isLoading:!0,skinIndex:0};return d(i.id),[...j,c]})},[d]),h=g.useCallback(i=>{l(j=>j.filter(o=>o.id!==i))},[]),N=g.useCallback(()=>{l([]),ne(Ce)},[]),b=g.useMemo(()=>n.filter(i=>i.fullInfo&&!i.isLoading),[n]),y=g.useMemo(()=>{const i=new Set(a.filter(j=>j.mode==="normal").flatMap(j=>j.champions));return n.filter(j=>i.has(j.id))},[a,n]);return{selectedChampions:n,setSelectedChampions:l,championsWithFullInfo:b,normalTabChampions:y,addChampionToList:p,removeChampion:h,resetChampions:N,loadChampionInfo:d}}function Vr({onAddClick:t}){const{t:r}=ee();return e.jsx(et,{className:"border-dashed",children:e.jsxs(tt,{className:"flex flex-col items-center justify-center py-12 md:py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:e.jsx(Se,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:r.encyclopedia.emptyState.title}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md text-sm mb-4",children:r.encyclopedia.emptyState.description}),e.jsxs(re,{onClick:t,variant:"outline",className:"flex flex-row items-center justify-center gap-2 border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Re,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-primary transition-colors",children:r.encyclopedia.emptyState.addButton})]})]})})}const Pr=Gt,_t=g.forwardRef(({className:t,...r},s)=>e.jsx(ht,{ref:s,className:E("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r}));_t.displayName=ht.displayName;const He=g.forwardRef(({className:t,...r},s)=>e.jsx(jt,{ref:s,className:E("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r}));He.displayName=jt.displayName;const $r=g.forwardRef(({className:t,...r},s)=>e.jsx(Nt,{ref:s,className:E("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r}));$r.displayName=Nt.displayName;function Ar({activeTab:t,onTabChange:r,onReset:s}){const{t:a}=ee();return e.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-border overflow-x-auto -mx-4 md:mx-0 px-4 md:px-0",children:[e.jsx(Pr,{value:t,onValueChange:n=>r(n),className:"flex-1",children:e.jsxs(_t,{className:"inline-flex h-auto items-center justify-start gap-2 bg-transparent p-0 border-0",children:[e.jsx(He,{value:"skills",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:a.encyclopedia.tabs.skills}),e.jsx(He,{value:"stats",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:a.encyclopedia.tabs.stats})]})}),e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:e.jsxs(re,{variant:"ghost",size:"sm",onClick:s,className:"flex items-center gap-1.5 shrink-0 text-muted-foreground hover:text-primary hover:bg-muted/30 border-0",children:[e.jsx(Yt,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[10px]",children:a.encyclopedia.reset})]})})]})}const It="flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors shrink-0 relative select-none",Dt="bg-primary text-primary-foreground",Mt="bg-muted/50 text-muted-foreground",Ft="touch-none cursor-grab active:cursor-grabbing p-0.5 -ml-1 mr-0.5 opacity-60 hover:opacity-100 transition-opacity select-none",zt="ml-1 p-0.5 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group",Er="ml-1 p-1 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group";function Rr({tab:t,champion:r,version:s,selectedTabId:a,onSelect:n,onRemove:l,onVsClick:x}){const{t:m}=ee(),{attributes:d,listeners:p,setNodeRef:h,transform:N,transition:b,isDragging:y}=be({id:t.id}),i={transform:he.Transform.toString(N),transition:b,opacity:y?.5:1},j=a===t.id,o=j?Dt:Mt;return e.jsxs("div",{ref:h,style:i,className:E(It,o,y&&"z-50"),onClick:c=>{const v=c.target;v.tagName==="BUTTON"||v.closest("button")||n(t.id)},children:[e.jsx("button",{...d,...p,className:Ft,"aria-label":"Drag to reorder",children:e.jsx(Le,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 cursor-pointer select-none",children:[e.jsx("img",{src:Q(s,r.id),alt:r.name,className:"w-5 h-5 rounded-full pointer-events-none select-none",draggable:"false"}),e.jsx("span",{className:"pointer-events-none select-none",children:r.name})]}),e.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),x(t.id)},className:Er,"aria-label":`${m.encyclopedia.vs} with ${r.name}`,title:m.encyclopedia.vsStart,type:"button",children:e.jsx(Ae,{className:E("h-3 w-3 transition-colors",j?"text-primary-foreground":"text-muted-foreground")})}),e.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),l(t.id)},className:zt,"aria-label":`Remove ${r.name}`,type:"button",children:e.jsx(je,{className:E("h-3 w-3 transition-colors",j?"text-primary-foreground":"text-muted-foreground")})})]})}function Lr({tab:t,championA:r,championB:s,version:a,selectedTabId:n,onSelect:l,onRemove:x,onChangeChampionA:m,onChangeChampionB:d}){const{t:p}=ee(),{attributes:h,listeners:N,setNodeRef:b,transform:y,transition:i,isDragging:j}=be({id:t.id}),o={transform:he.Transform.toString(y),transition:i,opacity:j?.5:1},c=n===t.id,v=c?Dt:Mt;return e.jsxs("div",{ref:b,style:o,className:E(It,v,j&&"z-50"),children:[e.jsx("button",{...h,...N,className:Ft,"aria-label":"Drag to reorder",children:e.jsx(Le,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 select-none",children:[e.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),m(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:Q(a,r.id),alt:r.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})}),e.jsx("button",{onClick:()=>{l(t.id)},className:"text-[10px] font-semibold touch-none select-none",children:p.encyclopedia.vs}),e.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),d(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:Q(a,s.id),alt:s.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})})]}),e.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),x(t.id)},className:zt,"aria-label":"Remove VS tab",children:e.jsx(je,{className:E("h-3 w-3 transition-colors",c?"text-primary-foreground":"text-muted-foreground")})})]})}function Br({tabs:t,championsWithFullInfo:r,version:s,selectedTabId:a,sensors:n,onDragEnd:l,onSelectTab:x,onRemoveTab:m,onVsClick:d,onChangeChampionA:p,onChangeChampionB:h,onAddClick:N}){const{t:b}=ee(),y=g.useRef(null);return g.useEffect(()=>{if(!y.current)return;const i=y.current.querySelector("[data-radix-scroll-area-viewport]");i&&i.scrollTo({left:i.scrollWidth,behavior:"smooth"})},[t.length]),e.jsx("div",{className:"border-b border-border -mx-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground shrink-0 pl-3",children:b.encyclopedia.champion}),e.jsxs(Ct,{ref:y,type:"scroll",className:"flex-1",children:[e.jsx(Je,{sensors:n,collisionDetection:qe,onDragEnd:l,children:e.jsx(Ye,{items:t.map(i=>i.id),strategy:Xe,children:e.jsxs("div",{className:"flex items-center gap-2 w-max select-none pr-2",children:[t.map(i=>{if(i.mode==="vs"){const j=r.find(c=>c.id===i.champions[0]),o=r.find(c=>c.id===i.champions[1]);return!j||!o?null:e.jsx(Lr,{tab:i,championA:j,championB:o,version:s,selectedTabId:a,onSelect:x,onRemove:m,onChangeChampionA:p,onChangeChampionB:h},i.id)}else{const j=r.find(o=>o.id===i.champions[0]);return j?e.jsx(Rr,{tab:i,champion:j,version:s,selectedTabId:a,onSelect:x,onRemove:m,onVsClick:d},i.id):null}}),e.jsxs(re,{onClick:N,variant:"outline",size:"sm",className:"flex items-center gap-1.5 shrink-0 border-2 border-dashed border-muted-foreground/30 hover:border-primary hover:bg-primary/10 hover:text-primary h-auto py-1.5 px-3 transition-colors",children:[e.jsx(Re,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:b.encyclopedia.add})]})]})})}),e.jsx(Jt,{orientation:"horizontal"})]})]})})}function _r({open:t,vsSelectorMode:r,tabs:s,championList:a,selectedChampions:n,onSelect:l,onClose:x,onOpenChange:m}){const{t:d}=ee();if(!t||!r)return null;const p=s.find(N=>N.id===r.tabId);if(!p||r.mode!=="select-second"&&p.mode!=="vs")return null;const h=r.mode==="change-champion-a"?p.champions[1]:p.champions[0];return h?e.jsx(Be,{championList:a,selectedChampions:n,onSelect:l,onClose:x,open:t,onOpenChange:m,vsMode:{currentChampionId:h,title:d.encyclopedia.selectOpponent}}):null}function $e(t){if(!t)return null;const r=t.split(".");return r.length>=2?`${r[0]}.${r[1]}`:t}function Ir({lang:t,championList:r,version:s}){const[a,n]=g.useState("skills"),[l,x]=g.useState(!1),d=Qe()==="mobile",{cdragonVersion:p}=rt(),{t:h}=ee(),{tabs:N,tabsRef:b,selectedTabId:y,setSelectedTabId:i,showVsSelector:j,setShowVsSelector:o,vsSelectorMode:c,setVsSelectorMode:v,removeTab:w,addTab:u,updateTab:f,replaceTab:S,resetTabs:k,handleDragEnd:V,generateTabId:T}=kr(s),{selectedChampions:A,setSelectedChampions:M,championsWithFullInfo:_,normalTabChampions:G,addChampionToList:W,removeChampion:C,resetChampions:$}=Tr({version:s,lang:t,championList:r,tabs:N}),I=Ge(ge(We,{activationConstraint:{distance:12}}),ge(Ze,{coordinateGetter:Ue})),R=g.useCallback((P,K)=>{M(se=>bt(se,P,K))},[M]),L=g.useCallback(P=>{if(new Set(A.map(ie=>ie.id)).has(P.id)){const ie=b.current,J=ie.some(q=>q.mode==="normal"&&q.champions.length===1&&q.champions[0]===P.id),Pe=ie.some(q=>q.mode==="vs"&&q.champions.includes(P.id));if(J){const q=N.find(_e=>_e.mode==="normal"&&_e.champions.length===1&&_e.champions[0]===P.id);q&&w(q.id),Pe||C(P.id);return}if(Pe){const q={mode:"normal",champions:[P.id],id:T()};u(q);return}const st=N.find(q=>q.mode==="normal"&&q.champions.length===1&&q.champions[0]===P.id);st&&w(st.id),C(P.id);return}W(P);const se={mode:"normal",champions:[P.id],id:T()};u(se)},[A,N,b,W,C,u,w,T]),F=g.useCallback(()=>{$(),k(),ne(Ce),ne(ke),ne(Te)},[$,k]),X=g.useCallback(P=>{if(!c)return;const{mode:K,tabId:se}=c,ie=N.find(J=>J.id===se);if(ie){if(K==="select-second"){const J={mode:"vs",champions:[ie.champions[0],P.id],id:T()};S(se,J),A.some(Pe=>Pe.id===P.id)||W(P)}else K==="change-champion-a"?(f(se,J=>({...J,champions:[P.id,J.champions[1]]})),A.some(J=>J.id===P.id)||W(P)):K==="change-champion-b"&&(f(se,J=>({...J,champions:[J.champions[0],P.id]})),A.some(J=>J.id===P.id)||W(P));o(!1),v(null)}},[c,N,A,W,f,S,T]),D=g.useMemo(()=>y&&N.find(P=>P.id===y)||null,[y,N]),O=g.useMemo(()=>D?D.champions.map(P=>{var K;return(K=_.find(se=>se.id===P))==null?void 0:K.fullInfo}).filter(P=>P!==void 0):[],[D,_]),te=g.useMemo(()=>!d||D&&D.mode==="vs"?null:D&&D.mode==="normal"&&O.length>0?O[0]:null,[d,D,O]),Ve=g.useCallback(P=>{N.forEach(K=>{K.champions.includes(P)&&w(K.id)}),C(P)},[N,C,w]),fe=g.useCallback(P=>{v({mode:"select-second",tabId:P}),o(!0)},[]),le=g.useCallback(P=>{v({mode:"change-champion-a",tabId:P,championIndex:0}),o(!0)},[]),xe=g.useCallback(P=>{v({mode:"change-champion-b",tabId:P,championIndex:1}),o(!0)},[]),ve=g.useMemo(()=>{const P=$e(s),K=$e(p);return!P||!K?!1:P!==K},[s,p]);return e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6 lg:px-8 py-4 md:py-5",children:[ve&&e.jsxs("div",{className:"mb-3 md:mb-4 rounded-md border border-amber-400/60 bg-amber-50/90 px-3 py-2 text-xs md:text-sm text-amber-950 shadow-sm",children:[e.jsx("div",{className:"font-semibold mb-0.5",children:h.versionNotice.title}),e.jsx("div",{className:"text-[11px] md:text-xs text-amber-900/90 mb-1.5",children:h.versionNotice.description}),e.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5 text-[10px] md:text-[11px] text-amber-900/80",children:[e.jsxs("span",{children:[e.jsxs("span",{className:"font-semibold",children:[h.versionNotice.cdragonLabel,":"]})," ",$e(p)??"-"]}),e.jsxs("span",{children:[e.jsxs("span",{className:"font-semibold",children:[h.versionNotice.ddragonLabel,":"]})," ",$e(s)??"-"]})]})]}),l&&e.jsx(Be,{championList:r,selectedChampions:G,onSelect:L,onClose:()=>x(!1),open:l,onOpenChange:x}),e.jsx(_r,{open:j,vsSelectorMode:c,tabs:N,championList:r,selectedChampions:A,onSelect:X,onClose:()=>{o(!1),v(null)},onOpenChange:P=>{o(P),P||v(null)}}),A.length>0&&_.length>0&&e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx(Ar,{activeTab:a,onTabChange:n,onReset:F}),d&&N.length>0&&e.jsx(Br,{tabs:N,championsWithFullInfo:_,version:s,selectedTabId:y,sensors:I,onDragEnd:V,onSelectTab:i,onRemoveTab:w,onVsClick:fe,onChangeChampionA:le,onChangeChampionB:xe,onAddClick:()=>x(!0)}),e.jsx(Sr,{champions:d&&D&&D.mode==="vs"&&O.length===2?O:d&&te?[te]:_.map(P=>P.fullInfo),version:s,activeTab:a,championList:r,onAddChampion:d?void 0:L,onRemoveChampion:Ve,onReorderChampions:d?void 0:R,vsMode:d&&D&&D.mode==="vs"&&O.length===2?{championA:O[0],championB:O[1]}:void 0})]}),A.length===0&&e.jsx(Vr,{onAddClick:()=>x(!0)})]})}function zr(t){return e.jsx(Nr,{initialDDragonVersion:t.version,children:e.jsx(Ir,{...t})})}export{zr as default};
