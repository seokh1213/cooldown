import{j as e,r as f,H as be,z as je}from"/cooldown/assets/react-vendor-CopeUkDP.js";import{T as ve,a as ye,b as Q,V as Ne,u as we}from"/cooldown/assets/VersionContext-Cu8j3HKa.js";import{u as B,a as Y,g as Se,b as Te,T as ke,S as H,D as Z,c as ee,V as se,d as te,e as re,f as Ie,h as Ce,i as Me,j as Le,k as ie,l as $e}from"/cooldown/assets/index-DNWoCbO_.js";import{C as oe,u as Pe,I as W}from"/cooldown/assets/useDebouncedValue-pCBNQKaH.js";import{T as pe,f as q}from"/cooldown/assets/lucide-icons-DTvcjo7T.js";function De({activeTab:s,onTabChange:l,onReset:n}){const{t:u}=B();return e.jsx("div",{className:"flex items-center justify-between gap-2 border-b border-border overflow-x-auto -mx-4 md:mx-0 px-4 md:px-0",children:e.jsx(ve,{value:s,onValueChange:g=>l(g),className:"flex-1",children:e.jsx(ye,{className:"inline-flex h-auto items-center justify-start gap-2 bg-transparent p-0 border-0",children:e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx(Q,{value:"runes",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:u.encyclopedia.tabs.runes}),e.jsx(Q,{value:"items",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:u.encyclopedia.tabs.items}),e.jsx(Q,{value:"summoner",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:u.encyclopedia.tabs.summoner})]})})})})}function Re({version:s,lang:l}){const{t:n}=B(),[u,g]=f.useState(null),[x,N]=f.useState(null),[v,S]=f.useState(!1),M=Y()==="mobile",[a,L]=f.useState(null);f.useEffect(()=>{let r=!1;return S(!0),Promise.all([Se(s,l),Te(s,l)]).then(([d,i])=>{r||(g(d),N(i))}).finally(()=>{r||S(!1)}),()=>{r=!0}},[s,l]);const k=f.useMemo(()=>{if(!x||!x.groups.length)return[];const r=new Map;for(const i of x.groups)for(const m of i.rows){if(!m.perks||m.perks.length===0)continue;const I=m.label||"";let P=r.get(I);P||(P={label:m.label,perksMap:new Map},r.set(I,P));for(const D of m.perks)P.perksMap.has(D.id)||P.perksMap.set(D.id,D)}const d=Array.from(r.values()).map(({label:i,perksMap:m})=>({label:i,perks:Array.from(m.values())}));return d.sort((i,m)=>!i.label&&m.label?1:i.label&&!m.label?-1:!i.label&&!m.label?0:i.label.localeCompare(m.label)),d},[x]);if(v&&!u)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:n.championSelector.loading});if(!u||u.length===0)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:n.championSelector.emptyList});const $={Precision:0,Domination:1,Sorcery:2,Resolve:3,Inspiration:4},o=[...u].sort((r,d)=>{const i=$[r.key]??999,m=$[d.key]??999;return i-m}),y=r=>{const d=' <span class="text-destructive dark:text-red-400">?</span> ';let i=r.replace(/@\{[^}]+\}@/g,d);return i=i.replace(/@[^@]+@/g,d),i},F=r=>{const d=r.descriptionHtml||"",i=y(d);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${r.icon}`,alt:r.name,loading:"lazy",decoding:"async",width:32,height:32,className:"w-8 h-8 rounded-full border border-border/60 bg-transparent"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"text-sm font-semibold",children:r.name})})]}),e.jsx("div",{className:"text-xs text-muted-foreground leading-relaxed",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:i}})}),e.jsxs("div",{className:"text-xs text-muted-foreground/80 italic leading-relaxed border-t pt-3 mt-3 flex items-center gap-1.5",children:[e.jsx(pe,{className:"w-2.5 h-2.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:n.encyclopedia.runes.warning})]})]})},A=(r,d,i)=>M?e.jsxs("button",{type:"button",onClick:()=>L(r),className:"flex flex-col items-center gap-1 focus:outline-none min-w-0",style:d,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${r.icon}`,alt:r.name,loading:"lazy",decoding:"async",width:40,height:40,className:"w-10 h-10 rounded-full border border-border/60 bg-transparent flex-shrink-0"}),e.jsx("span",{className:"text-[10px] text-center leading-tight line-clamp-2 w-full",children:r.name})]},i):e.jsxs(Ie,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs("button",{type:"button",className:"flex flex-col items-center gap-1 focus:outline-none cursor-help min-w-0",style:d,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${r.icon}`,alt:r.name,loading:"lazy",decoding:"async",width:40,height:40,className:"w-10 h-10 rounded-full border border-border/60 bg-transparent flex-shrink-0"}),e.jsx("span",{className:"text-[10px] text-center leading-tight line-clamp-2 w-full",children:r.name})]})}),e.jsx(Me,{side:"top",align:"center",sideOffset:8,className:"max-w-xs p-3",children:F(r)})]},i??r.id),V=r=>{const d="/lol-game-data/assets/v1";return`https://ddragon.leagueoflegends.com/cdn/img${r.startsWith(d)?r.slice(d.length):r}`},p=r=>(r.shortDesc||r.longDesc||"").replace(/<font[^>]*>/gi,"").replace(/<\/font>/gi,"");return e.jsx(ke,{delayDuration:200,children:e.jsxs("div",{className:"mt-4",children:[e.jsx(H,{className:"rounded-md border bg-card/40",children:e.jsxs("div",{className:"p-4 grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:[o.map(r=>e.jsxs(oe,{className:"p-4 flex flex-col gap-3 bg-background/60 border-border/70",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${r.icon}`,alt:r.name,loading:"lazy",decoding:"async",width:32,height:32,className:"w-8 h-8 rounded-full border border-border/60 bg-transparent"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold",children:r.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:r.key})]})]}),e.jsx("div",{className:"space-y-3",children:r.slots.map((d,i)=>{const m=Math.max(...r.slots.map(I=>I.runes.length));return e.jsx("div",{className:"grid gap-y-2 gap-x-2 md:gap-x-4",style:{gridTemplateColumns:`repeat(${m}, minmax(0, 1fr))`},children:d.runes.map((I,P)=>{const D=d.runes.length;let R=String(P+1);return m===4&&D===3&&(P===0?R="1":P===1?R="2 / span 2":P===2&&(R="4")),m===4&&D===2&&(P===0?R="1":P===1&&(R="4")),D===1&&(R="1 / -1"),A(I,{gridColumn:R},I.id)})},i)})})]},r.id)),k.length>0&&e.jsxs(oe,{className:"p-4 flex flex-col gap-3 bg-background/60 border-border/70 md:col-span-2 xl:col-span-3",children:[e.jsx("div",{className:"flex items-center justify-between gap-3 mb-1.5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold",children:n.encyclopedia.runes.statShardsTitle}),e.jsx("span",{className:"text-xs text-muted-foreground",children:n.encyclopedia.runes.warning})]})}),e.jsx("div",{className:"space-y-3 mt-1",children:k.map((r,d)=>!r.perks||r.perks.length===0?null:e.jsxs("div",{className:"flex flex-col gap-1",children:[r.label&&e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground mb-0.5",children:r.label}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.perks.map(i=>e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-md border border-border/60 bg-background/80 px-2 py-1",children:[e.jsx("img",{src:V(i.iconPath),alt:i.name,loading:"lazy",decoding:"async",width:24,height:24,className:"w-6 h-6 rounded-full border border-border/60 bg-transparent flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"text-[11px] font-semibold leading-tight truncate",children:i.name}),e.jsx("span",{className:"text-[10px] text-muted-foreground leading-snug line-clamp-2",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:p(i)}})})]})]},i.id))})]},`${r.label||"row"}-${d}`))})]})]})}),M&&e.jsx(Z,{open:!!a,onOpenChange:r=>!r&&L(null),children:e.jsxs(ee,{className:"w-[calc(100vw-32px)] max-w-lg max-h-[70vh] h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(se,{children:[e.jsx(te,{children:(a==null?void 0:a.name)??"Rune"}),e.jsx(re,{children:(a==null?void 0:a.name)??"Rune"})]}),e.jsx(H,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4",children:a&&F(a)})})]})})]})})}function Ae(s){const l=s.tags||[],n=s.name||"",u=n.toLowerCase(),g=n,x=new Set(["3340","3363","3364"]);return new Set(["4638","4643"]).has(s.id)?!1:!!(x.has(s.id)||/포션|영약/.test(g)||u.includes("potion")||u.includes("elixir")||l.includes("Consumable")||l.includes("Trinket")||l.includes("Vision")&&x.has(s.id)||/도란/.test(g)||u.includes("doran")||l.includes("Jungle")||u.includes("jungle")||(s.priceTotal??0)===0)}function ce(s){const l=!!s.buildsFrom&&s.buildsFrom.length>0,n=!!s.buildsInto&&s.buildsInto.length>0;return Ae(s)?"starter":l?n?"epic":"legendary":"basic"}function X(s,l){return s.name||s.id}function Fe(s){const l=s.tags||[],n=l.includes("Trinket")||l.includes("Consumable"),u=s.priceTotal??0;return!(s.availableOnMap11===!1||!n&&u<=0||s.purchasable===!1||s.inStore===!1||s.displayInItemSets===!1)}function de(s){const l=s.tags||[],n=(s.name||"").toLowerCase(),u=new Set(["3340","3363","3364"]);return new Set(["4638","4643"]).has(s.id)?!1:!!(u.has(s.id)||l.includes("Trinket")||l.includes("Consumable")||n.includes("potion")||n.includes("elixir"))}function me(s){const l=s.tags||[],n=(s.name||"").toLowerCase();return l.includes("Boots")||n.includes("boots")}function ue(s){const l=s.tags||[],n=l.includes("AttackDamage"),u=l.includes("SpellDamage"),g=l.includes("Health")||l.includes("Armor")||l.includes("SpellBlock"),x=l.includes("ManaRegen")||l.includes("HealthRegen")||l.includes("CooldownReduction");return u&&x?"support":g&&(n||u)?"tank":u?"mage":n&&!g?"assassin":n||g?"fighter":"all"}function he(s){return!((s.priceTotal??0)<=0||s.purchasable===!1||s.inStore===!1||s.displayInItemSets===!1)}function xe(s,l){const n=s.stats||[];if(n.length===0)return[];const u=l.startsWith("ko"),g=new Map;for(const N of n){const v=ie[N.stat];if(!v)continue;const S=g.get(N.stat)||{value:0,isPercent:v.isPercent};if(N.valueType==="percent")S.value+=N.value,S.isPercent=!0;else if(N.valueType==="flat")S.value+=N.value;else continue;g.set(N.stat,S)}const x=[];for(const[N,{value:v,isPercent:S}]of g.entries()){if(!v)continue;const T=ie[N],M=u?T.label.ko:T.label.en,a=S&&Math.abs(v)<=1?Math.round(v*100):v,L=S?`${a}%`:`${a}`;x.push(`+ ${L} ${M}`)}return x}function ge(s,l){const n=s.priceTotal??0,u=s.price??0,g=Array.isArray(s.buildsFrom)&&s.buildsFrom.length>0;return u===0&&g?l.encyclopedia.items.price.unavailable:n>0||he(s)?n.toLocaleString():l.encyclopedia.items.price.free}const K=({item:s,version:l,isSelected:n,onSelect:u})=>{const{t:g}=B(),x=ge(s,g),N=x===g.encyclopedia.items.price.unavailable;return e.jsxs("button",{type:"button",onClick:u,className:`flex flex-col items-center gap-0 rounded-sm px-0.5 py-0 text-center transition-colors w-9 md:w-10 ${n?"bg-primary/20 border border-primary/60 shadow-sm":"hover:bg-muted/60 border border-transparent"}`,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${l}/img/item/${s.id}.png`,alt:X(s),loading:"lazy",decoding:"async",width:32,height:32,className:"w-7 h-7 md:w-8 md:h-8 aspect-square object-cover rounded-sm border border-border/60 bg-black/40 flex-shrink-0"}),e.jsx("span",{className:`${N?"text-[8px] md:text-[9px]":"text-[9px] md:text-[10px]"} text-amber-600 dark:text-amber-400 font-semibold whitespace-nowrap leading-tight`,children:x}),e.jsx("span",{className:"sr-only absolute",children:X(s)})]})};function Oe({version:s,lang:l}){const{t:n}=B(),g=Y()==="mobile",[x,N]=f.useState(null),[v,S]=f.useState(null),[T,M]=f.useState(!1),[a,L]=f.useState(""),[k,$]=f.useState("all"),[o,y]=f.useState(null),[F,A]=f.useState(!1);f.useEffect(()=>{let t=!1;return M(!0),Le(s,l).then(j=>{if(!t){N(j);const b=j.filter(Fe),w=new Set,c=b.filter(h=>w.has(h.name)?!1:(w.add(h.name),!0));S(c),!o&&c.length>0&&y(c[0])}}).finally(()=>{t||M(!1)}),()=>{t=!0}},[s,l]);const V=f.useMemo(()=>x?new Map(x.map(t=>[t.id,t])):new Map,[x]),r=Pe(a,g?220:180).trim().toLowerCase(),d=t=>t.toLowerCase().replace(/[^0-9a-z\uac00-\ud7a3ㄱ-ㅎ]/g,""),i=t=>{if(!t)return"";try{return be.d(t,!0).map(j=>j[0]).join("")}catch{return""}},m=d(r),I=r.replace(/\s+/g,""),D=I.length>0&&/^[ㄱ-ㅎ]+$/.test(I)?I:"",{itemsByTier:R,flatFiltered:He}=f.useMemo(()=>{const t={itemsByTier:{starter:[],basic:[],epic:[],legendary:[]},flatFiltered:[]};if(!v)return t;const j=c=>{if(!m&&!D)return!0;const h=X(c),C="",z="",O=d(h),_=[O,d(C),d(z.replace(/;/g," "))];if(m&&_.some(E=>E.includes(m))||D&&i(h).includes(D))return!0;if(m&&O){const E=i(h);if(E&&(E.charAt(0)+O.slice(1)).includes(m))return!0}return!1},b={starter:[],basic:[],epic:[],legendary:[]},w=[];return v.forEach(c=>{if(!j(c))return;if(k==="trinket"){if(!de(c))return}else if(k==="boots"){if(!me(c))return}else if(k!=="all"){if(de(c)||me(c))return;const C=ue(c);if(C!=="all"&&C!==k)return}const h=ce(c);b[h].push(c),w.push(c)}),Object.keys(b).forEach(c=>{b[c].sort((h,C)=>(h.priceTotal??0)-(C.priceTotal??0))}),w.sort((c,h)=>(c.priceTotal??0)-(h.priceTotal??0)),{itemsByTier:b,flatFiltered:w}},[v,m,D,k]);if(T&&!v)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:n.championSelector.loading});if(!v||v.length===0)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:n.championSelector.emptyList});const ne=t=>{if(!t.buildsInto||t.buildsInto.length===0)return[];const j=[];t.buildsInto.forEach(c=>{const h=V.get(c);h&&h.displayInItemSets!==!1&&j.push(h)});const b=new Map;for(const c of j){const h=c.name||c.id,C=b.get(h);if(!C){b.set(h,c);continue}const z=Number.parseInt(C.id,10),O=Number.parseInt(c.id,10);(Number.isFinite(z)&&Number.isFinite(O)?O<z:c.id<C.id)&&b.set(h,c)}const w=Array.from(b.values());return w.sort((c,h)=>(c.priceTotal??0)-(h.priceTotal??0)),w},ae=(t,j=0,b=6)=>{if(j>=b)return{item:t,children:[]};const w=[];return t.buildsFrom&&t.buildsFrom.length>0&&t.buildsFrom.forEach(c=>{const h=V.get(c);h&&w.push(ae(h,j+1,b))}),{item:t,children:w}},J=t=>n.encyclopedia.items.filters[t],G=t=>n.encyclopedia.items.tiers[t],le=o&&e.jsxs("div",{className:"flex flex-col gap-2 h-full min-h-0",children:[e.jsxs("div",{className:"space-y-0.5 text-[11px] pb-1 border-b border-border/60 flex-shrink-0",children:[e.jsx("div",{className:"font-semibold",children:n.encyclopedia.items.buildsIntoTitle}),e.jsx("div",{className:"overflow-x-auto pb-0.5",children:e.jsx("div",{className:"flex flex-nowrap gap-1 min-w-max",children:ne(o).length>0?ne(o).map(t=>e.jsx(K,{item:t,version:s,isSelected:o.id===t.id,onSelect:()=>y(t)},t.id)):e.jsx("span",{className:"text-[10px] text-muted-foreground",children:n.encyclopedia.items.buildsIntoEmpty})})})]}),e.jsxs("div",{className:"space-y-1 text-[11px] py-1 flex-shrink-0",children:[e.jsx("div",{className:"font-semibold",children:n.encyclopedia.items.treeTitle}),(()=>{var b;const t=ae(o),j=w=>{const c=w.children.length>0;return e.jsxs("div",{className:"flex flex-col items-center gap-0",children:[e.jsx(K,{item:w.item,version:s,isSelected:o.id===w.item.id,onSelect:()=>y(w.item)}),c&&e.jsxs("div",{className:"mt-0 flex flex-col items-stretch",children:[e.jsx("div",{className:"relative flex justify-center",children:e.jsx("div",{className:"h-1 w-[2px] bg-primary/60"})}),e.jsx("div",{className:"relative flex flex-nowrap items-start justify-center gap-y-0 pt-0",children:w.children.map((h,C)=>{const z=w.children.length,O=C===0,_=C===z-1,E=O?"left-1/2 right-0":_?"left-0 right-1/2":"left-0 right-0";return e.jsxs("div",{className:"relative flex flex-col items-center gap-0 pt-0.5 px-1",children:[z>1&&e.jsx("div",{className:`pointer-events-none absolute top-0 h-[2px] bg-primary/60 ${E}`}),e.jsx("div",{className:"pointer-events-none absolute top-0 left-1/2 -translate-x-1/2 h-2 w-[2px] bg-primary/60"}),j(h)]},`${h.item.id}-${C}`)})})]})]})};return!t.children.length&&!((b=t.item.from)!=null&&b.length)?e.jsx("span",{className:"text-[10px] text-muted-foreground",children:n.encyclopedia.items.treeEmpty}):e.jsx("div",{className:"pt-0",children:e.jsx("div",{className:"w-full rounded-md border border-border/60 bg-muted/40 px-2 py-0.5 overflow-x-auto scrollbar-hide",children:e.jsx("div",{className:"min-w-max flex justify-center",children:j(t)})})})})()]}),e.jsx(H,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"pt-2 pr-3",children:e.jsxs("div",{className:"rounded-md border border-border/70 dark:border-neutral-700/80 bg-card text-foreground dark:bg-neutral-950 dark:text-slate-50 shadow-md px-3 py-2 text-[11px] space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${s}/img/item/${o.id}.png`,alt:o.name,className:"w-9 h-9 rounded-sm border border-border/60 bg-black/40 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xs font-semibold truncate text-foreground dark:text-amber-200",children:o.name}),he(o)&&e.jsx("div",{className:"text-[11px] text-amber-600 dark:text-amber-300 font-semibold whitespace-nowrap",children:ge(o,n)})]}),e.jsxs("div",{className:"mt-0.5 flex items-center justify-between text-[10px] text-muted-foreground dark:text-slate-300",children:[e.jsx("span",{children:G(ce(o))}),(()=>{const t=ue(o);if(t==="all")return null;const j=J(t);return e.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-slate-400",children:j})})()]})]})]}),e.jsx("div",{className:"h-px bg-neutral-700/80"}),xe(o,l).length>0&&e.jsx("ul",{className:"space-y-0.5 text-[11px] leading-snug",children:xe(o,l).map(t=>e.jsx("li",{className:"text-primary",children:t},t))})]})})})]});return g?e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(q,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),e.jsx(W,{value:a,onChange:t=>L(t.target.value),placeholder:n.encyclopedia.items.searchPlaceholder,className:"h-9 pl-7 text-xs border-neutral-400 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-primary"})]}),e.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1",children:["all","fighter","mage","assassin","support","tank","trinket","boots"].map(t=>e.jsx("button",{type:"button",onClick:()=>$(t),className:`px-2.5 py-1 rounded-full text-[11px] whitespace-nowrap border ${k===t?"bg-primary text-primary-foreground border-primary":"bg-muted/60 text-muted-foreground border-border/60"}`,children:J(t)},t))})]}),e.jsx("div",{className:"rounded-md border bg-card/40",children:e.jsx("div",{className:"p-1 space-y-1",children:Object.keys(R).map(t=>{const j=R[t];return!j||j.length===0?null:e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:G(t)}),e.jsx("div",{className:"flex flex-wrap gap-1",children:j.map(b=>e.jsx(K,{item:b,version:s,isSelected:(o==null?void 0:o.id)===b.id,onSelect:()=>{y(b),A(!0)}},b.id))})]},t)})})}),e.jsx(Z,{open:F&&!!o,onOpenChange:t=>{t||A(!1)},children:e.jsxs(ee,{className:"w-[calc(100vw-32px)] max-w-lg max-h-[70vh] h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(se,{children:[e.jsx(te,{children:(o==null?void 0:o.name)??"Item"}),e.jsx(re,{children:(o==null?void 0:o.name)??"Item"})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:e.jsx("div",{className:"p-4",children:le})})]})})]}):e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("div",{className:"flex flex-wrap gap-1",children:["all","fighter","mage","assassin","support","tank","trinket","boots"].map(t=>e.jsx("button",{type:"button",onClick:()=>$(t),className:`px-2.5 py-1 rounded-full text-[11px] whitespace-nowrap border ${k===t?"bg-primary text-primary-foreground border-primary":"bg-muted/60 text-muted-foreground border-border/60"}`,children:J(t)},t))}),e.jsxs("div",{className:"relative w-full sm:w-52 md:w-64 group",children:[e.jsx(q,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),e.jsx(W,{value:a,onChange:t=>L(t.target.value),placeholder:n.encyclopedia.items.searchPlaceholder,className:"h-8 pl-8 text-xs md:text-sm w-full border-neutral-400 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-primary"})]})]}),e.jsxs("div",{className:"rounded-md border bg-card/40 md:h-[calc(100vh-12rem)] flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:flex-1 md:border-r border-border/60 flex flex-col min-w-0 min-h-0",children:[e.jsx("div",{className:"px-3 py-2 border-b border-border/60 flex items-center justify-between flex-shrink-0",children:e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:n.encyclopedia.items.listTitle})}),e.jsx(H,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-1 space-y-1",children:Object.keys(R).map(t=>{const j=R[t];return!j||j.length===0?null:e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:G(t)}),e.jsx("div",{className:"flex flex-wrap gap-1",children:j.map(b=>e.jsx(K,{item:b,version:s,isSelected:(o==null?void 0:o.id)===b.id,onSelect:()=>y(b)},b.id))})]},t)})})})]}),e.jsx("div",{className:"md:w-[340px] hidden md:flex flex-col p-3 min-h-0",children:o?le:e.jsx("div",{className:"text-xs text-muted-foreground h-full flex items-center justify-center text-center px-4",children:n.encyclopedia.items.detailEmpty})})]})]})}function U(s,l){return s.name||s.id}function fe(s,l){return s.tooltip||""}function Ee({version:s,lang:l}){const{t:n}=B(),g=Y()==="mobile",[x,N]=f.useState(null),[v,S]=f.useState(!1),[T,M]=f.useState(""),[a,L]=f.useState(null),[k,$]=f.useState(!1);f.useEffect(()=>{let p=!1;return S(!0),$e(s,l).then(r=>{if(!p){const i=[...r.filter(m=>Array.isArray(m.modes)&&m.modes.includes("CLASSIC"))].sort((m,I)=>m.name.localeCompare(I.name));N(i),!a&&i.length>0&&L(i[0])}}).finally(()=>{p||S(!1)}),()=>{p=!0}},[s,l]);const o=T.trim().toLowerCase(),y=f.useMemo(()=>x?o?x.filter(p=>{const r=U(p).toLowerCase(),d=fe(p).toLowerCase();return r.includes(o)||d.includes(o)}):x:[],[x,o,l]);if(v&&!x)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:n.championSelector.loading});if(!x||x.length===0)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:n.championSelector.emptyList});const F=p=>{const r=m=>m.replace(/{{\s*[^}]+\s*}}/g,' <span class="text-destructive dark:text-red-400">?</span> '),d=fe(p),i=r(d);return e.jsx("span",{className:"text-xs leading-relaxed [&_br]:block",dangerouslySetInnerHTML:{__html:i}})},A=e.jsx("div",{className:"p-2 space-y-1",children:y.map(p=>{const r=(a==null?void 0:a.id)===p.id;return e.jsxs("button",{type:"button",onClick:()=>{L(p),g&&$(!0)},className:`w-full flex items-center gap-2 rounded-md px-2 py-1.5 text-left transition-colors ${r?"bg-primary/10 border border-primary/60":"hover:bg-muted/60 border border-transparent"}`,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${s}/img/spell/${p.iconPath}`,alt:U(p),loading:"lazy",decoding:"async",width:32,height:32,className:"w-8 h-8 rounded-md border border-border/60 bg-black/40 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-xs font-semibold truncate",children:U(p)}),e.jsx("span",{className:"text-[11px] text-muted-foreground whitespace-nowrap",children:p.cooldown&&p.cooldown.length>0?`${p.cooldown[0]}${n.common.seconds}`:""})]}),e.jsx("div",{className:"mt-0.5 text-[11px] text-muted-foreground line-clamp-2",children:p.description})]})]},p.id)})}),V=a&&e.jsxs("div",{className:"flex flex-col gap-2 h-full min-h-0",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${s}/img/spell/${a.iconPath}`,alt:U(a),loading:"lazy",decoding:"async",width:40,height:40,className:"w-10 h-10 rounded-md border border-border/60 bg-black/40 flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-sm font-semibold truncate",children:U(a)}),a.cooldown&&a.cooldown.length>0&&e.jsxs("div",{className:"text-xs text-muted-foreground whitespace-nowrap",children:[n.common.rechargeTime,": ",a.cooldown[0],n.common.seconds]})]})})]}),e.jsx(H,{className:"flex-1 min-h-0 mt-2",children:e.jsx("div",{className:"pr-3",children:e.jsxs("div",{className:"rounded-md border border-border/70 bg-card px-3 py-2 space-y-1.5",children:[F(a),e.jsxs("div",{className:"text-xs text-muted-foreground/80 italic leading-relaxed border-t pt-3 mt-3 flex items-center gap-1.5",children:[e.jsx(pe,{className:"w-2.5 h-2.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:n.encyclopedia.runes.warning})]})]})})})]});return g?e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(q,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),e.jsx(W,{value:T,onChange:p=>M(p.target.value),placeholder:n.encyclopedia.summoner.searchPlaceholder,className:"h-9 pl-7 text-xs border-neutral-400 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-primary"})]}),e.jsx("div",{className:"rounded-md border bg-card/40 max-h-[50vh]",children:e.jsx(H,{className:"h-[50vh]",children:A})}),e.jsx(Z,{open:k&&!!a,onOpenChange:p=>{p||$(!1)},children:e.jsxs(ee,{className:"w-[calc(100vw-32px)] max-w-lg max-h-[70vh] h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(se,{children:[e.jsx(te,{children:(a==null?void 0:a.name)??"Summoner Spell"}),e.jsx(re,{children:(a==null?void 0:a.name)??"Summoner Spell"})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:e.jsx("div",{className:"p-4",children:V})})]})})]}):e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-sm font-semibold",children:n.encyclopedia.tabs.summoner}),e.jsxs("div",{className:"relative w-full sm:w-52 md:w-64 group",children:[e.jsx(q,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),e.jsx(W,{value:T,onChange:p=>M(p.target.value),placeholder:n.encyclopedia.summoner.searchPlaceholder,className:"h-8 pl-8 text-xs md:text-sm w-full border-neutral-400 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-primary"})]})]}),e.jsxs("div",{className:"rounded-md border bg-card/40 md:h-[calc(100vh-12rem)] flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:flex-1 md:border-r border-border/60 flex flex-col min-w-0 min-h-0",children:[e.jsx("div",{className:"px-3 py-2 border-b border-border/60 flex items-center justify-between flex-shrink-0",children:e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:n.encyclopedia.summoner.listTitle})}),e.jsx(H,{className:"flex-1 min-h-0",children:A})]}),e.jsx("div",{className:"md:w-[340px] hidden md:flex flex-col p-3 min-h-0",children:a?V:e.jsx("div",{className:"text-xs text-muted-foreground h-full flex items-center justify-center text-center px-4",children:n.encyclopedia.summoner.detailEmpty})})]})]})}function Ve(s){return s==="runes"||s==="items"||s==="summoner"}function ze({lang:s,championList:l,version:n,cdragonVersion:u,initialSelectedChampions:g,initialTabs:x,initialSelectedTabId:N}){const[v,S]=je(),T=f.useMemo(()=>{const y=v.get("tab");return Ve(y)?y:null},[v]),M=()=>T||"runes",[a,L]=f.useState(M),k=f.useRef(T),$=f.useRef(M());f.useEffect(()=>{const y=T||"runes",F=k.current||"runes";y!==F&&y!==a&&(L(y),$.current=y),k.current=T},[T,a]),f.useEffect(()=>{const y=T||"runes",F=$.current;if(a!==F&&y!==a){const A=new URLSearchParams(v);a==="runes"?A.delete("tab"):A.set("tab",a),S(A,{replace:!0}),$.current=a==="runes"?null:a}$.current=a},[a,T,v,S]);const{cdragonVersion:o}=we();return e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6 lg:px-8 pb-4 md:pb-5",children:[e.jsx("div",{className:"mt-3 md:mt-4",children:e.jsx(De,{activeTab:a,onTabChange:y=>{L(y)}})}),a==="runes"&&e.jsx(Re,{version:n,lang:s}),a==="items"&&e.jsx(Oe,{version:n,lang:s}),a==="summoner"&&e.jsx(Ee,{version:n,lang:s})]})}function Je(s){return e.jsx(Ne,{initialDDragonVersion:s.version,initialCDragonVersion:s.cdragonVersion,children:e.jsx(ze,{...s})})}export{Je as default};
