import{r as T,j as e,A as Ke,E as ve,F as Ue,K as We,G as Ze,I as qe,J as Je,L as Xe,M as Ye,N as we,Q as ye,d as O,U as pt,z as Dt}from"/cooldown/assets/react-vendor-CopeUkDP.js";import{C as gt,a as bt}from"/cooldown/assets/useDebouncedValue-Dzsu1l-N.js";import{m as B,n as he,u as oe,B as xe,C as ae,o as F,p as It,a as Qe,P as Ft,q as st,D as Ot,c as zt,V as Ht,d as Gt,e as Kt,S as ht,f as nt,h as at,i as ot,T as He,r as ie,s as lt,t as Ut,v as De}from"/cooldown/assets/index-D9lNrV-8.js";import{C as Ee}from"/cooldown/assets/ChampionSelector-Dol1hR6N.js";import{g as Re,h as Be,X as _e,T as it,f as Wt,S as Zt,R as qt}from"/cooldown/assets/lucide-icons-DTvcjo7T.js";import{u as et,V as Jt,T as Xt,a as Yt,b as ct}from"/cooldown/assets/VersionContext-HQJ6LIOI.js";const pe=T.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:B("w-full caption-bottom text-sm",t),...r})}));pe.displayName="Table";const ge=T.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:B("[&_tr]:border-b",t),...r}));ge.displayName="TableHeader";const be=T.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:B("[&_tr:last-child]:border-0",t),...r}));be.displayName="TableBody";const Qt=T.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:B("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));Qt.displayName="TableFooter";const q=T.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:B("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));q.displayName="TableRow";const G=T.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:B("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r}));G.displayName="TableHead";const D=T.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:B("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r}));D.displayName="TableCell";const er=T.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:B("mt-4 text-sm text-muted-foreground",t),...r}));er.displayName="TableCaption";function jt(t="ko_KR"){const r=he(t);return[{key:"hp",label:r.stats.health,format:s=>Math.round(s)},{key:"hpperlevel",label:r.stats.healthPerLevel,format:s=>s.toFixed(1)},{key:"mp",label:r.stats.mana,format:s=>Math.round(s)},{key:"mpperlevel",label:r.stats.manaPerLevel,format:s=>s.toFixed(1)},{key:"movespeed",label:r.stats.movespeed,format:s=>Math.round(s)},{key:"armor",label:r.stats.armor,format:s=>Math.round(s)},{key:"armorperlevel",label:r.stats.armorPerLevel,format:s=>s.toFixed(1)},{key:"spellblock",label:r.stats.spellblock,format:s=>Math.round(s)},{key:"spellblockperlevel",label:r.stats.spellblockPerLevel,format:s=>s.toFixed(1)},{key:"attackdamage",label:r.stats.attackdamage,format:s=>Math.round(s)},{key:"attackdamageperlevel",label:r.stats.attackdamagePerLevel,format:s=>s.toFixed(1)},{key:"attackspeed",label:r.stats.attackspeed,format:s=>s.toFixed(3)},{key:"attackspeedperlevel",label:r.stats.attackspeedPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"attackrange",label:r.stats.attackrange,format:s=>Math.round(s)},{key:"crit",label:r.stats.crit,format:s=>`${(s*100).toFixed(1)}%`},{key:"critperlevel",label:r.stats.critPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"hpregen",label:r.stats.hpregen,format:s=>s.toFixed(1)},{key:"hpregenperlevel",label:r.stats.hpregenPerLevel,format:s=>s.toFixed(1)},{key:"mpregen",label:r.stats.mpregen,format:s=>s.toFixed(1)},{key:"mpregenperlevel",label:r.stats.mpregenPerLevel,format:s=>s.toFixed(1)}]}const Ne=["Q","W","E","R"];function tr({champions:t,version:r,championList:s,onAddChampion:n,onRemoveChampion:a,onReorderChampions:c}){const{t:u,lang:d}=oe(),[j,i]=T.useState(!1),x=jt(d),w=Ke(ve(Ze,{activationConstraint:{distance:8}}),ve(We,{coordinateGetter:Ue})),V=v=>{},h=v=>{const{active:p,over:m}=v;if(m&&p.id!==m.id&&c){const f=t.findIndex(g=>g.id===p.id),o=t.findIndex(g=>g.id===m.id);f!==-1&&o!==-1&&c(f,o)}},y=({champion:v,children:p,className:m})=>{const{setNodeRef:f,transform:o,transition:g,isDragging:l}=we({id:v.id,disabled:!0}),N={transform:o?ye.Transform.toString(o):void 0,transition:l?g:void 0,opacity:l?.5:1};return e.jsx(D,{ref:f,style:N,className:m,children:p})},k=({champion:v,index:p})=>{const{attributes:m,listeners:f,setNodeRef:o,transform:g,transition:l,isDragging:b}=we({id:v.id}),C={transform:g?ye.Transform.toString(g):void 0,transition:b?l:void 0,opacity:b?.5:1};return e.jsx(G,{ref:o,style:C,className:B("text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] select-none",p<t.length-1&&"border-r border-border/30",b&&"z-50"),children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1.5 relative",children:[c&&e.jsx("button",{...m,...f,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity absolute -left-2 top-1/2 -translate-y-1/2","aria-label":"Drag to reorder",children:e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ae(r,v.id),alt:v.name,className:"w-8 h-8 rounded-full"}),a&&e.jsx(xe,{variant:"ghost",size:"icon",className:B("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:S=>{S.stopPropagation(),a(v.id)},"aria-label":`Remove ${v.name}`,children:e.jsx(_e,{className:"h-2.5 w-2.5"})})]}),e.jsx("div",{className:"text-[10px] font-semibold leading-tight text-center break-words text-foreground",children:v.name})]})})};return e.jsxs("div",{className:"relative",children:[e.jsx(qe,{sensors:w,collisionDetection:Je,onDragStart:V,onDragEnd:h,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto",children:[e.jsx(ge,{children:e.jsxs(q,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[90px] min-w-[90px] border-r border-border/30 select-none",style:{left:0},children:u.stats.label}),e.jsx(Xe,{items:t.map(v=>v.id),strategy:Ye,children:t.map((v,p)=>e.jsx(k,{champion:v,index:p},v.id))}),n&&e.jsx(G,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] border-l border-border/30 select-none",children:e.jsxs(xe,{onClick:()=>i(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Re,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsx(be,{children:x.map(v=>{const p=t.map(o=>{var g;return((g=o.stats)==null?void 0:g[v.key])??0}),m=Math.max(...p),f=Math.min(...p);return e.jsxs(q,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(D,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:v.label}),t.map((o,g)=>{var C;const l=((C=o.stats)==null?void 0:C[v.key])??0,b=l===m&&m!==f,N=l===f&&m!==f;return e.jsx(y,{champion:o,className:B("p-1.5 text-[11px] text-center",g<t.length-1&&"border-r border-border/30",b&&"text-primary font-semibold",N&&"text-muted-foreground"),children:v.format(l)},o.id)}),n&&e.jsx(D,{className:"p-1.5 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[24px]"})})]},v.key)})})]})})}),j&&n&&s&&e.jsx(Ee,{championList:s,selectedChampions:t,onSelect:v=>{n(v)},onClose:()=>i(!1)})]})}function rr({champions:t,version:r,vsMode:s}){const{t:n,lang:a}=oe(),c=jt(a);if(s&&t.length===2){const u=s.championA,d=s.championB;return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(ge,{children:e.jsxs(q,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:n.stats.label}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:ae(r,u.id),alt:u.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:u.name})]})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:ae(r,d.id),alt:d.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:d.name})]})})]})}),e.jsx(be,{children:c.map(j=>{var h,y;const i=((h=u.stats)==null?void 0:h[j.key])??0,x=((y=d.stats)==null?void 0:y[j.key])??0,w=Math.max(i,x),V=Math.min(i,x);return e.jsxs(q,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(D,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:j.label}),e.jsx(D,{className:B("p-1.5 text-[10px] text-center border-r border-border/30",i===w&&w!==V&&"text-primary font-semibold",i===V&&w!==V&&"text-muted-foreground"),children:j.format(i)}),e.jsx(D,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(D,{className:B("p-1.5 text-[10px] text-center",x===w&&w!==V&&"text-primary font-semibold",x===V&&w!==V&&"text-muted-foreground"),children:j.format(x)})]},j.key)})})]})})})})})}return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(ge,{children:e.jsxs(q,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[70px] min-w-[70px] border-r border-border/30 select-none",style:{left:0},children:n.stats.label}),t.map(u=>e.jsx(G,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:ae(r,u.id),alt:u.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:u.name})]})},u.id))]})}),e.jsx(be,{children:c.map(u=>{const d=t.map(x=>{var w;return((w=x.stats)==null?void 0:w[u.key])??0}),j=Math.max(...d),i=Math.min(...d);return e.jsxs(q,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(D,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:u.label}),t.map(x=>{var y;const w=((y=x.stats)==null?void 0:y[u.key])??0,V=w===j&&j!==i,h=w===i&&j!==i;return e.jsx(D,{className:B("p-1.5 text-[11px] text-center",V&&"text-primary font-semibold",h&&"text-muted-foreground"),children:u.format(w)},x.id)})]},u.key)})})]})})})})})}async function sr(t,r,s){let n={},a=null;try{a=await It(t,s),n=a.spellDataMap}catch(c){F.warn(`Failed to load Community Dragon data for ${t}:`,c)}return r.map((c,u)=>{let d={};if(n[u.toString()])d=n[u.toString()];else{const j=c.id.replace(t,"");for(const i of Object.keys(n))if(i.toLowerCase().includes(j.toLowerCase())||i.toLowerCase().includes(c.id.toLowerCase())){d=n[i];break}}return{spell:c,communityDragonData:d,spellIndex:u,ddragonVersion:(a==null?void 0:a.ddragonVersion)??s,cdragonVersion:(a==null?void 0:a.cdragonVersion)??null}})}async function Nt(t,r){const s={},n=t.map(async a=>{if(!a.spells||a.spells.length===0){s[a.id]=[];return}try{s[a.id]=await sr(a.id,a.spells,r)}catch(c){F.warn(`Failed to get integrated spell data for ${a.id}:`,c),s[a.id]=a.spells.map((u,d)=>({spell:u,communityDragonData:{},spellIndex:d}))}});return await Promise.all(n),s}const Ie={physicalDamage:{tag:"span",className:"text-red-600 dark:text-red-500 font-semibold"},magicDamage:{tag:"span",className:"text-blue-600 dark:text-blue-500 font-semibold"},trueDamage:{tag:"span",className:"text-yellow-600 dark:text-yellow-500 font-semibold"},status:{tag:"span",className:"text-purple-600 dark:text-purple-500"},lifeSteal:{tag:"span",className:"text-green-600 dark:text-green-500"},scaleAD:{tag:"span",className:"text-orange-600 dark:text-orange-500"},scaleAP:{tag:"span",className:"text-blue-600 dark:text-blue-400"},scaleArmor:{tag:"span",className:"text-orange-600 dark:text-orange-400"},scaleLevel:{tag:"span",className:"text-gray-600 dark:text-gray-400"},healing:{tag:"span",className:"text-green-600 dark:text-green-400"},speed:{tag:"span",className:"text-cyan-600 dark:text-cyan-500"},keywordMajor:{tag:"span",className:"text-yellow-600 dark:text-yellow-400 font-semibold"},keywordStealth:{tag:"span",className:"text-purple-600 dark:text-purple-400 font-semibold"},spellPassive:{tag:"span",className:"text-gray-600 dark:text-gray-500 italic"},spellActive:{tag:"span",className:"text-gray-900 dark:text-white font-semibold"},recast:{tag:"span",className:"text-yellow-600 dark:text-yellow-300"},damage:{tag:"span",className:"text-red-600 dark:text-red-400"},shield:{tag:"span",className:"text-blue-600 dark:text-blue-300"},mana:{tag:"span",className:"text-blue-600 dark:text-blue-400"},energy:{tag:"span",className:"text-yellow-600 dark:text-yellow-400"},health:{tag:"span",className:"text-red-600 dark:text-red-400"},cooldown:{tag:"span",className:"text-gray-600 dark:text-gray-300"},range:{tag:"span",className:"text-cyan-600 dark:text-cyan-400"},radius:{tag:"span",className:"text-purple-600 dark:text-purple-400"},width:{tag:"span",className:"text-indigo-600 dark:text-indigo-400"},length:{tag:"span",className:"text-pink-600 dark:text-pink-400"},rules:{tag:"span",className:"text-gray-600 dark:text-gray-400 italic"}};function nr(t){let r=t;r=r.replace(/<font\s+color=['"]([^'"]+)['"]\s*>/gi,'<span style="color: $1">'),r=r.replace(/<\/font>/gi,"</span>"),Object.entries(Ie).forEach(([n,{tag:a,className:c}])=>{const u=new RegExp(`</${n}>`,"gi");r=r.replace(u,`</${a}>`);const d=new RegExp(`<${n}>`,"gi");r=r.replace(d,`<${a}${c?` class="${c}"`:""}>`)});const s=["keywordMajor","keywordStealth","rules","recast"];return s.forEach(n=>{r=r.replace(new RegExp(`</${n}>`,"gi"),"</span>"),n==="rules"?r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-gray-600 dark:text-gray-400 italic">'):n==="keywordStealth"?r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-purple-600 dark:text-purple-400 font-semibold">'):r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-yellow-600 dark:text-yellow-400 font-semibold">')}),r=r.replace(/<(\w+)(?![\\w])>/gi,(n,a)=>Ie[a]||s.includes(a)||a==="font"||a==="br"?n:"<span>"),r=r.replace(/<\/(\w+)(?![\\w])>/gi,(n,a)=>Ie[a]||s.includes(a)||a==="font"||a==="br"?n:"</span>"),r}function vt(t){const r=t.trim(),s=/^([a-zA-Z_][a-zA-Z0-9_]*)\s*([*+\/-])\s*(-?\d+(?:\.\d+)?)$/,n=r.match(s);if(n){const a=n[2];return{type:"formula",variable:n[1],operator:a,operand:parseFloat(n[3])}}return{type:"variable",variable:r}}function wt(t,r,s){if(!r||typeof r!="string")return null;const n=Object.entries(t).find(([j])=>j!=null&&j.toLowerCase()===r.toLowerCase());if(!n)return null;const[,a]=n,c=a.slice(1,s+1);if(c.length===0)return null;const u=c[0];return c.every(j=>j===u)?u:c}function yt(t,r){if(r.type!=="formula"||!r.operator||r.operand==null)return t;const{operator:s,operand:n}=r;return s==="*"?Array.isArray(t)?t.map(a=>a*n):t*n:s==="+"?Array.isArray(t)?t.map(a=>a+n):t+n:s==="-"?Array.isArray(t)?t.map(a=>a-n):t-n:s==="/"?Array.isArray(t)?t.map(a=>a/n):t/n:t}function ue(t){if(t==null||t==="")return"";const r=typeof t=="number"?t:parseFloat(String(t));return isNaN(r)?String(t):r%1===0?r.toString():parseFloat(r.toFixed(3)).toString()}function dt(t,r,s=!1){if(!t||t.length===0)return"";const n=s&&t.length>1?1:0,c=t.slice(n).filter(x=>x!=null&&x!==""&&x!=="0");if(c.length===0)return"";const u=r?c.slice(0,r):c;if(u.length===0)return"";const d=u.map(x=>ue(x)),j=d[0];return d.every(x=>x===j)?j:d.join("/")}function ar(t){let r=t;return r=r.replace(/<br\s*\/?>/gi,"<br />"),r=r.replace(/[^\S\r\n]+/g," "),r}function Y(t){return Array.isArray(t)}function ut(t,r){return Array.isArray(t)?t:Array.from({length:r},()=>t)}function Ct(t,r,s){if(!Y(t)&&!Y(r))return s(t,r);const n=Y(t)?t:ut(t,Y(r)?r.length:1),a=Y(r)?r:ut(r,n.length);if(n.length!==a.length)throw new Error(`Vector length mismatch: ${n.length} vs ${a.length}`);return n.map((c,u)=>s(c,a[u]))}function ke(t,r){return Ct(t,r,(s,n)=>s+n)}function Te(t,r){return Ct(t,r,(s,n)=>s*n)}function Le(t){return Y(t)?t.every(s=>s===t[0])?ue(t[0]):t.map(s=>ue(s)).join("/"):ue(t)}function Fe(t){return Y(t)?t.map(r=>r*100):t*100}function mt(t,r,s="ko_KR"){const n=he(s),a=t!=null,c=r!=null;if(!a&&!c)return n.stats.abilityPower;const u=t??r;return u===2?t===2&&r===2?n.stats.bonusAttackDamage:n.stats.attackDamage:u===12?t===12&&r===2?n.stats.bonusHealth:n.stats.health:u===1?t===1&&r===2?n.stats.bonusArmor:n.stats.armor:u===6?t===6&&r===2?n.stats.bonusMagicResist:n.stats.magicResist:u===18?t===18&&r===2?n.stats.bonusLifesteal:n.stats.lifesteal:""}function Ge(t,r="ko_KR"){let n=he(r).common.mana;if(t.costType){const a=t.costType.trim();return a&&!a.includes("{{")?a:t.resource&&!t.resource.includes("{{")?t.resource:n}return t.resource&&!t.resource.includes("{{")?t.resource:n}function St(t,r,s){const n=s==null?void 0:s.DataValues;if(!n)return null;const a=wt(n,t.variable,r.maxrank);if(a==null)return null;const c=yt(a,t);return Le(c)}function ft(t,r){const s=n=>Number.isFinite(n)?n.toFixed(r).replace(/\.?0+$/,""):String(n);if(Y(t)){const n=t.map(u=>s(u)),a=n[0];return n.every(u=>u===a)?a:n.join("/")}return s(t)}function or(t,r,s,n="ko_KR"){const a=s==null?void 0:s.mSpellCalculations,c=s==null?void 0:s.DataValues;if(!a)return null;const u=Object.entries(a).find(([o])=>o!=null&&o.toLowerCase()===t.variable.toLowerCase());if(!u)return null;const[d]=u;function j(o){if(!o||typeof o!="string")return F.debug(`DataValue name is invalid: ${o}`),null;if(!c)return F.debug("dataValues is undefined"),null;const g=wt(c,o,r.maxrank);return g??(F.debug(`DataValue "${o}" missing`),null)}function i(o,g=new Set){var b;if(!a)throw new Error("spellCalcs is undefined");const l=a[o];if(!l)throw new Error(`SpellCalculation "${o}" not found`);if(g.has(o))throw new Error(`Circular reference in mSpellCalculations: ${o}`);if(g.add(o),l.__type==="GameCalculationModified"){const N=l;if(!N.mModifiedGameCalculation)throw new Error("mModifiedGameCalculation is missing");const C=i(N.mModifiedGameCalculation,g);if(!N.mMultiplier)return C;let S=null;if(N.mMultiplier.mDataValue){if(S=j(N.mMultiplier.mDataValue),S==null)return C}else N.mMultiplier.mNumber!=null&&(S=N.mMultiplier.mNumber);if(S==null)return C;const E=Te(C.base,S),_=C.statParts.map(I=>({name:I.name,ratio:Te(I.ratio,S)}));return{base:E,statParts:_,isPercent:C.isPercent,precision:C.precision}}if(l.__type==="GameCalculation"){const N=l,C=N.mFormulaParts??[];let S=0;const E=[],_=!!N.mDisplayAsPercent;if(C.length===1&&C[0].__type==="ByCharLevelBreakpointsCalculationPart"&&N.mSimpleTooltipCalculationDisplay===6){const L=C[0],M=L.mLevel1Value??0;let R=M;for(const H of L.mBreakpoints??[])typeof H.mAdditionalBonusAtThisLevel=="number"&&(R+=H.mAdditionalBonusAtThisLevel);return{base:[M,R],statParts:[],isPercent:_,isBreakpointRange:!0,precision:void 0}}if(C.length===1&&C[0].__type==="ByCharLevelBreakpointsCalculationPart"&&_){const L=C[0],M=L.mLevel1Value??0,R=L.mInitialBonusPerLevel??0,$=(L.mBreakpoints??[])[0];if(R!==0&&($!=null&&$.mLevel)){const A=$.mLevel-1,H=Math.max(A-1,0),z=M+H*R;return{base:[M,z],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}}if(C.length===1&&C[0].__type==="ByCharLevelInterpolationCalculationPart"&&_){const L=C[0],M=L.mStartValue??0,R=L.mEndValue??M;return{base:[M,R],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}for(const L of C){const M=L.__type;if(M==="NamedDataValueCalculationPart"){const R=L;if(!R.mDataValue){F.debug("NamedDataValueCalculationPart missing mDataValue",L);continue}const $=j(R.mDataValue);if($==null)continue;S=ke(S,$)}else if(M==="EffectValueCalculationPart"){const $=L.mEffectIndex??0,A=((b=r.effectBurn)==null?void 0:b[$])??null;if(!A)F.debug(`EffectValueCalculationPart: effectBurn[${$}] is missing`,{spellId:r.id});else{const H=A.split("/").map(z=>parseFloat(z)).filter(z=>!Number.isNaN(z));if(H.length>0){const z=H.length>r.maxrank?H.slice(0,r.maxrank):H;S=ke(S,z)}}}else if(M==="StatByNamedDataValueCalculationPart"){const R=L;if(!R.mDataValue){F.debug("StatByNamedDataValueCalculationPart missing mDataValue",L);continue}const $=j(R.mDataValue);if($==null)continue;const A=mt(R.mStat,R.mStatFormula,n);E.push({name:A,ratio:$})}else if(M==="StatByCoefficientCalculationPart"){const R=L;if(R.mCoefficient==null){F.debug("StatByCoefficientCalculationPart missing mCoefficient",L);continue}const $=mt(R.mStat,R.mStatFormula,n),A=R.mCoefficient;E.push({name:$,ratio:A,isCoefficient:!0})}else if(M==="AbilityResourceByCoefficientCalculationPart"){const R=L;if(R.mCoefficient==null){F.debug("AbilityResourceByCoefficientCalculationPart missing mCoefficient",L);continue}const $=Ge(r,n),A=he(n),z=R.mStatFormula===2?`${A.common.bonus} ${$}`:$,W=R.mCoefficient;E.push({name:z,ratio:W,isCoefficient:!0})}else if(M==="NumberCalculationPart"){const $=L.mNumber??0;S=ke(S,$)}else if(M==="ByCharLevelBreakpointsCalculationPart"){const R=L;let $=R.mLevel1Value||0;for(const A of R.mBreakpoints??[])A.mAdditionalBonusAtThisLevel!=null&&($+=A.mAdditionalBonusAtThisLevel);S=ke(S,$)}else if(M==="ProductOfSubPartsCalculationPart"){const R=L,$=W=>{var re;if(!W||!W.__type)return 0;const Q=W.__type;if(Q==="NamedDataValueCalculationPart"){const ne=W;if(!ne.mDataValue)return F.debug("ProductOfSubPartsCalculationPart: NamedDataValueCalculationPart missing mDataValue",W),0;const ee=j(ne.mDataValue);return ee??0}if(Q==="NumberCalculationPart")return W.mNumber??0;if(Q==="EffectValueCalculationPart"){const ee=W.mEffectIndex??0,je=((re=r.effectBurn)==null?void 0:re[ee])??null;if(!je)return F.debug(`ProductOfSubPartsCalculationPart: EffectValueCalculationPart missing effectBurn[${ee}]`,{spellId:r.id}),0;let Ce;if(je.includes("/")){const le=je.split("/").map(Se=>Number.parseFloat(Se)).filter(Se=>!Number.isNaN(Se));if(le.length===0)return 0;Ce=le.length===1?le[0]:le}else{const le=Number.parseFloat(je);if(Number.isNaN(le))return 0;Ce=le}return Ce}return F.debug(`ProductOfSubPartsCalculationPart: unsupported sub part type "${Q}"`,W),0},A=$(R.mPart1),H=$(R.mPart2),z=Te(A,H);S=ke(S,z)}}let I=S,U=E;if(N.mMultiplier){let L=null;N.mMultiplier.mDataValue?(L=j(N.mMultiplier.mDataValue),L==null&&(L=null)):N.mMultiplier.mNumber!=null&&(L=N.mMultiplier.mNumber),L!=null&&(I=Te(I,L),U=U.map(M=>({...M,ratio:Te(M.ratio,L)})))}let te;return typeof N.mPrecision=="number"&&N.mPrecision>=0?te=N.mPrecision+1:te=void 0,{base:I,statParts:U,isPercent:_,precision:te}}throw new Error(`Unsupported mSpellCalculation type: ${l.__type}`)}let x;try{x=i(d)}catch(o){return F.error("Failed to evaluate calculation:",o),null}let w;const V=x.precision;x.isPercent?V!=null?Y(x.base)?w=x.base.map(o=>o*100):w=x.base*100:w=Fe(x.base):w=x.base;const h=x.statParts.map(o=>{if(o.isCoefficient){const g=V!=null?Y(o.ratio)?o.ratio.map(l=>l*100):o.ratio*100:Fe(o.ratio);return{...o,ratio:g}}if(V!=null){const g=Y(o.ratio)?o.ratio.map(l=>l*100):o.ratio*100;return{...o,ratio:g}}return{...o,ratio:Fe(o.ratio)}});let y=null;const k=Y(w)&&w.length>0&&w.every(o=>o===0),v=!Y(w)&&w===0;if(!k&&!v)if(x.isCharLevelRange&&Y(w)&&w.length===2){const[o,g]=w,l=ue(o),b=ue(g);y=`(${l}% ~ ${b}%)`}else if(x.isBreakpointRange&&Y(w)&&w.length===2){const[o,g]=w,l=ue(o),b=ue(g);y=x.isPercent?`(${l}% ~ ${b}%)`:`(${l} ~ ${b})`}else{const o=V!=null?ft(w,V):Le(w);y=x.isPercent?`${o}%`:o}const p=h.map(o=>{const g=V!=null?ft(o.ratio,V):Le(o.ratio);return o.name?`(${g}% ${o.name})`:`(${g}%)`}),m=[];if(y&&m.push(y),m.push(...p),m.length===0)return null;const f=m.join(" + ");return m.length===1?f:`(${f})`}function lr(t,r){return!Number.isFinite(r)||r<0?t:t.replace(/-?\d+(?:\.\d+)?/g,s=>{const n=Number.parseFloat(s);return Number.isFinite(n)?n.toFixed(r):s})}function ir(t){return t.replace(/(}})\s*\+\s*(\S)/g,"$1 + $2").replace(/(\S)\s*\+\s*({{)/g,"$1 + $2").replace(/(\S)\s*~\s*(\S)/g,"$1 ~ $2")}function cr(t){return t.replace(/\{\{([^}]*\{\{[^}]*}}[^}]*)}}/g,()=>"")}function dr(t){let r=t;return r=r.replace(/\{\{Spell_[^}]*Tooltip[^}]*}}/gi,""),r=r.replace(/\{\{spellmodifierdescriptionappend}}/gi,""),r}function ur(t,r,s,n){const a=/\{\{([^}]+)}}/g;return t.replace(a,(c,u)=>{const d=String(u).trim();if(d==="spellmodifierdescriptionappend"||d.includes("gamemodeinteger")||d.includes("Spell_")&&d.includes("Tooltip"))return"";let j=d,i;const x=/^([a-zA-Z_][a-zA-Z0-9_]*)(?:\.(\d+))(.*)$/.exec(d);if(x){const[,V,h,y]=x,k=Number.parseInt(h,10);Number.isFinite(k)&&(i=k,j=`${V}${y}`)}const w=fr(j,r,s,n);return w!==null?i!==void 0?lr(w,i):w:""})}function mr(t){let r=t;return r=r.replace(/\{\{\s*\}/g,""),r=r.replace(/\}\}/g,""),r=r.replace(/\{\{/g,""),r=r.replace(/%[^\s:%]+:[^\s%]+%/g,""),r=r.replace(/\s+%\s+/g," "),r=r.replace(new RegExp("(?<!\\d)\\s*%\\s*(?!\\d)","g"),""),r=r.replace(/^\s*%\s*(?!\d)/g,""),r=r.replace(new RegExp("(?<!\\d)\\s*%\\s*$","g"),""),r=r.replace(/[^\S\r\n]+/g," "),r}function kt(t,r,s,n="ko_KR"){if(!r)return t;let a=t;return a=ir(a),a=cr(a),a=dr(a),a=ur(a,r,s,n),a=mr(a),a}function fr(t,r,s,n="ko_KR"){const a=vt(t),c=xr(a,r,s);if(c!==null)return c;const u=St(a,r,s);return u!==null?u:or(a,r,s,n)}function xr(t,r,s){const n=t.variable,a=/^e(\d+)$/i.exec(n);if(!a)return null;const c=Number.parseInt(a[1],10);if(!Number.isFinite(c)||c<=0)return null;const u=(s==null?void 0:s.effectBurn)??r.effectBurn;if(!u)return null;const d=u[c];if(!d)return null;let j;if(d.includes("/")){const x=d.split("/").map(w=>Number.parseFloat(w)).filter(w=>!Number.isNaN(w));if(x.length===0)return null;j=x.length===1?x[0]:x}else{const x=Number.parseFloat(d);if(Number.isNaN(x))return null;j=x}const i=yt(j,t);return Le(i)}function Oe(t,r,s,n="ko_KR"){if(!t)return"";let a=t;return a=nr(a),a=kt(a,r,s,n),a=ar(a),a=a.replace(/\n/g,"<br />"),a}function xt(t,r,s="ko_KR"){const n=he(s);if(!t.leveltip||!t.leveltip.label||!t.leveltip.effect)return"";let a;r&&(r.DataValues?a=r:a={DataValues:r});const{label:c,effect:u}=t.leveltip,d=[];for(let j=0;j<c.length&&j<u.length;j++){const i=c[j],w=u[j].match(/\{\{\s*([^}]+)\s*\}\}/);if(!w)continue;const V=w[1].trim();let h=null;if(a)try{const v=vt(V),p=St(v,t,a);if(p&&p.trim()!==""){let m=p;(i.includes("%")||i.toLowerCase().includes("percent")||i.toLowerCase().includes("퍼센트")||i.toLowerCase().includes("둔화"))&&!m.includes("%")&&(m=m.split("/").map(l=>l&&`${l}%`).join("/"));const o=Ge(t,s),g=i.replace("@AbilityResourceName@",o);if(g.includes("{{")||g.includes("}}"))continue;d.push(`${g}: [${m}]`);continue}}catch{}const y=V;h=null;const k=y.match(/^e(\d+)$/i);if(k){const v=parseInt(k[1]);if(t.effectBurn&&t.effectBurn.length>v){const p=t.effectBurn[v];p&&p!==null&&p!=="0"&&(h=p)}}else if(y.toLowerCase()==="cost"||y.toLowerCase().includes("cost"))t.costBurn&&(h=t.costBurn);else if(y.toLowerCase().includes("cooldown"))t.cooldownBurn&&(h=t.cooldownBurn);else if(y.toLowerCase().includes("ammorechargetime")||y.toLowerCase().includes("ammorecharge")){const v=(r==null?void 0:r.DataValues)||r;if(v&&v.mAmmoRechargeTime){const p=v.mAmmoRechargeTime;if(Array.isArray(p)&&p.length>1){const f=p.slice(1).map(g=>typeof g=="number"?g:parseFloat(String(g))),o=dt(f,t.maxrank,!1);o&&(h=o)}}}if(h){const v=dt(h.includes("/")?h.split("/"):[h],t.maxrank);if(v){let p=n.common.mana;p=Ge(t,s);const m=i.replace("@AbilityResourceName@",p);if(m.includes("{{")||m.includes("}}"))continue;let f=v;(i.includes("%")||i.toLowerCase().includes("slow")||i.toLowerCase().includes("둔화"))&&(v.includes("%")||(f=v.split("/").map(o=>`${o}%`).join("/"))),d.push(`${m}: [${f}]`)}}}return d.length===0?"":d.join("<br />")}function pr(t,r,s="ko_KR"){var d,j;const n=he(s);if(!t||!t.cooldown||!Array.isArray(t.cooldown)||t.cooldown.length===0)return null;const a=((d=r==null?void 0:r.communityDragonData)==null?void 0:d.DataValues)||(r==null?void 0:r.communityDragonData),c=a==null?void 0:a.mAmmoRechargeTime;if(t.cooldown[0]===0&&c&&Array.isArray(c)&&c.length>1&&c){const i=c[1],x=((j=t.effectBurn)==null?void 0:j[1])||"3";return`${n.common.rechargeTime} ${i}${n.common.seconds} (${n.common.max}: ${x}${n.common.items})`}if(t.cooldownBurn){const i=t.cooldownBurn.split("/");return i.length>1&&i.every(x=>x===i[0])?`${i[0]}${n.common.seconds}`:`${t.cooldownBurn}${n.common.seconds}`}if(t.cooldown&&t.cooldown.length>0){const i=t.cooldown[0];return t.cooldown.every(x=>x===i)?`${i}${n.common.seconds}`:`${t.cooldown.join("/")}${n.common.seconds}`}return null}function fe(t){if(!t)return t;let r=t.replace(/\(\s*\)/g,"");return r=r.replace(/\s{2,}/g," ").trim(),r}function gr(t,r,s="ko_KR"){var d;const n=he(s);if(!t)return null;const a=Array.isArray(t.cost)&&t.cost.length>0,c=a&&t.cost.every(j=>j===0),u=t.costBurn==="0";if((u||c)&&typeof t.resource=="string"&&t.resource.includes("{{")){const j=t.resource.trim(),i=((d=r==null?void 0:r.communityDragonData)==null?void 0:d.DataValues)||(r==null?void 0:r.communityDragonData);if(i){const w=kt(j,t,{DataValues:i}).trim();if(w)return fe(w)}return fe(n.common.noCost)}if(u||c)return fe(n.common.noCost);if(t.costBurn){const j=t.costBurn.split("/");return j.length>1&&j.every(i=>i===j[0])?fe(`${n.common.mana} ${j[0]}`):fe(`${n.common.mana} ${t.costBurn}`)}if(a){const j=t.cost[0];return t.cost.every(i=>i===j)?fe(`${n.common.mana} ${j}`):fe(`${n.common.mana} ${t.cost.join("/")}`)}return null}function Tt(t,r,s){var d;const n=((d=s==null?void 0:s.communityDragonData)==null?void 0:d.DataValues)||(s==null?void 0:s.communityDragonData),a=n==null?void 0:n.mAmmoRechargeTime,c=t.cooldown[r-1];return c===0&&a&&Array.isArray(a)&&a.length>r&&a?a[r]!==void 0?String(a[r]):"":c!=null?String(c):""}const ze="cooldown:active-skill-tooltip";function de({skill:t,skillIdx:r,version:s,spellData:n,isPassive:a,passiveName:c,passiveDescription:u,passiveImageFull:d,size:j="default"}){const{t:i,lang:x}=oe(),V=Qe()==="mobile",[h,y]=O.useState(!1),[k,v]=O.useState(!1),p=O.useRef(null),m=O.useRef(null),f=O.useRef(""),[o,g]=O.useState("bottom"),[l,b]=O.useState(void 0),N=a&&d?null:pr(t,n,x),C=a&&d?null:gr(t,n,x),S=j==="small",E=S?"min-w-6 min-h-6 w-6 h-6":"min-w-8 min-h-8 w-8 h-8",_=S?"text-[8px]":"text-[9px]",I=O.useCallback(()=>{V||(f.current||(f.current=`${t.id}-${r}-${s}`),typeof window<"u"&&window.dispatchEvent(new CustomEvent(ze,{detail:f.current})),m.current!==null&&(window.clearTimeout(m.current),m.current=null),v(!0))},[V]),U=O.useCallback(()=>{V||(m.current!==null&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{v(!1),m.current=null},40))},[V]);O.useEffect(()=>{if(V||!k){b(void 0);return}const $=p.current;if(!$)return;const A=()=>{const H=$.getBoundingClientRect(),z=window.innerHeight,W=16,Q=8,re=H.top-W,ne=z-H.bottom-W;if(re<=0&&ne<=0){b(void 0);return}if(ne>=re){g("bottom");const ee=Math.max(ne-Q,0);b(ee||void 0)}else{g("top");const ee=Math.max(re-Q,0);b(ee||void 0)}};return A(),window.addEventListener("resize",A),window.addEventListener("scroll",A,!0),()=>{window.removeEventListener("resize",A),window.removeEventListener("scroll",A,!0)}},[V,k]),O.useEffect(()=>{if(typeof window>"u")return;const $=A=>{const z=A.detail;f.current&&z!==f.current&&(m.current!==null&&(window.clearTimeout(m.current),m.current=null),v(!1))};return window.addEventListener(ze,$),()=>{m.current!==null&&window.clearTimeout(m.current),window.removeEventListener(ze,$)}},[]);const te=e.jsx("div",{ref:p,className:`flex flex-col items-center gap-0.5 p-1 -m-1 touch-manipulation ${V?"cursor-pointer":"cursor-help"}`,onClick:$=>{V&&($.stopPropagation(),y(A=>!A))},onTouchStart:$=>{V&&($.stopPropagation(),y(A=>!A))},onPointerEnter:()=>{V||I()},onPointerLeave:()=>{V||U()},children:a&&d?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:Ft(s,d),alt:"Passive",className:B(E,"rounded")}),e.jsx("span",{className:B(_,"font-semibold"),children:"P"})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:st(s,t.id),alt:Ne[r],className:B(E,"rounded")}),e.jsx("span",{className:B(_,"font-semibold"),children:Ne[r]})]})}),L=()=>a&&d?e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:`font-semibold text-sm ${V?"pr-10":""}`,children:c}),u&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Oe(u,void 0,void 0,x)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground/80 italic leading-relaxed border-t pt-3 mt-3 flex items-center gap-1.5",children:[e.jsx(it,{className:"w-2.5 h-2.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:i.skillTooltip.warningPassive})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3 border-b pb-3 pr-6",children:[e.jsx("img",{src:st(s,t.id),alt:Ne[r],className:"w-12 h-12 min-w-12 min-h-12 rounded flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:t.name&&e.jsxs("div",{className:"font-semibold text-sm",children:["[",Ne[r],"] ",t.name]})}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[N&&e.jsx("div",{className:"text-xs text-muted-foreground",children:N.includes(" (")?e.jsxs(e.Fragment,{children:[N.split(" (")[0],e.jsx("br",{}),"(",N.split(" (")[1]]}):N}),C&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 whitespace-nowrap",children:C})]})]}),t.description&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Oe(t.description,t,n==null?void 0:n.communityDragonData,x).replace(/<br\s*\/?>/gi," ")}})}),t.tooltip&&e.jsx("div",{className:"text-xs text-muted-foreground leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Oe(t.tooltip,t,n==null?void 0:n.communityDragonData,x)}})}),n&&xt(t,n.communityDragonData,x)&&e.jsx("div",{className:"text-[11px] leading-relaxed text-muted-foreground border-t pt-3 mt-3",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:xt(t,n.communityDragonData,x)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground/80 italic leading-relaxed border-t pt-3 mt-3 flex items-center gap-1.5",children:[e.jsx(it,{className:"w-2.5 h-2.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:i.skillTooltip.warningSkill})]})]}),M=e.jsx(Ot,{open:h,onOpenChange:y,children:e.jsxs(zt,{className:B(V?"w-[calc(100vw-32px)] max-w-lg h-[70vh] max-h-[70vh]":"w-full max-w-3xl h-[80vh] max-h-[80vh]","p-0 rounded-xl overflow-hidden flex flex-col"),children:[e.jsxs(Ht,{children:[e.jsx(Gt,{children:a&&d?`${c||i.skillTooltip.passive} ${i.skillTooltip.skillInfo}`:`[${Ne[r]}] ${t.name||i.skillTooltip.skill} ${i.skillTooltip.skillInfo}`}),e.jsx(Kt,{children:a&&d?`${c||i.skillTooltip.passive} ${i.skillTooltip.skillDescription}`:`[${Ne[r]}] ${t.name||i.skillTooltip.skill} ${i.skillTooltip.skillDescription}`})]}),e.jsx(ht,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4 flex flex-col gap-3",children:L()})})]})});if(V)return e.jsxs(e.Fragment,{children:[te,M]});const R=e.jsxs("div",{className:"space-y-3",children:[L(),e.jsx("div",{className:"pt-1 flex justify-end",children:e.jsx("button",{type:"button",className:"text-[11px] text-primary hover:underline",onClick:$=>{$.preventDefault(),$.stopPropagation(),v(!1),y(!0)},children:i.skillTooltip.viewDetail})})]});return a&&d?e.jsxs(e.Fragment,{children:[e.jsxs(nt,{open:k,children:[e.jsx(at,{asChild:!0,children:te}),e.jsx(ot,{side:o,align:"center",sideOffset:0,className:"max-w-xs p-3 space-y-2",style:!V&&l?{maxHeight:l}:void 0,onPointerEnter:I,onPointerLeave:U,children:R})]}),M]}):e.jsxs(e.Fragment,{children:[e.jsxs(nt,{open:k,children:[e.jsx(at,{asChild:!0,children:te}),e.jsx(ot,{side:o,align:"center",sideOffset:0,className:"max-w-sm p-4 space-y-3",style:!V&&l?{maxHeight:l}:void 0,onPointerEnter:I,onPointerLeave:U,children:R})]}),M]})}function br({champions:t,version:r,championList:s,onAddChampion:n,onRemoveChampion:a,onReorderChampions:c,vsMode:u}){const{t:d}=oe(),{cdragonVersion:j,setCDragonVersion:i}=et(),[x,w]=T.useState(!1),[V,h]=O.useState({}),y=Ke(ve(Ze,{activationConstraint:{distance:8}}),ve(We,{coordinateGetter:Ue})),k=l=>{},v=l=>{const{active:b,over:N}=l;if(N&&b.id!==N.id&&c){const C=t.findIndex(E=>E.id===b.id),S=t.findIndex(E=>E.id===N.id);C!==-1&&S!==-1&&c(C,S)}};O.useEffect(()=>{const l=async()=>{try{const b=await Nt(t,r);if(h(b),!j)try{let N=null;for(const C of Object.keys(b)){const S=b[C];if(S&&S.length>0&&(N=S[0].cdragonVersion??null,N))break}N&&i(N)}catch(N){F.warn("Failed to extract CDragon version from integrated spell data:",N)}}catch(b){F.warn("Failed to load integrated spell data:",b),h({})}};t.length>0&&l()},[t,r]);const p=O.useMemo(()=>Math.max(...t.map(l=>l.spells?Math.max(...l.spells.map(b=>b.maxrank)):0)),[t]),m=O.useCallback((l,b)=>{const N=V[l];return!N||N.length<=b?null:N[b]},[V]),f=O.useMemo(()=>Array.from({length:p},(l,b)=>{const N=b+1;return{level:N,skills:t.map(C=>C.spells?C.spells.map((S,E)=>{const _=m(C.id,E),I=Tt(S,N,_);return{skill:S,cooldown:I}}):null)}}),[t,p,m]),o=({champion:l,children:b,className:N})=>{const{setNodeRef:C,transform:S,transition:E,isDragging:_}=we({id:l.id,disabled:!0}),U={transform:S?ye.Transform.toString(S):void 0,transition:_?E:void 0,opacity:_?.5:1};return e.jsx(D,{ref:C,style:U,className:N,children:b})},g=({champion:l,index:b})=>{const{attributes:N,listeners:C,setNodeRef:S,transform:E,transition:_,isDragging:I}=we({id:l.id}),te={transform:E?ye.Transform.toString(E):void 0,transition:I?_:void 0,opacity:I?.5:1};return e.jsx(G,{ref:S,style:te,className:B("text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] select-none",b<t.length-1&&"border-r border-border/30",I&&"z-50"),children:e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 relative",children:[c&&e.jsx("button",{...N,...C,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity -ml-1","aria-label":"Drag to reorder",children:e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ae(r,l.id),alt:l.name,className:"w-8 h-8 rounded-full"}),a&&e.jsx(xe,{variant:"ghost",size:"icon",className:B("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:L=>{L.stopPropagation(),a(l.id)},"aria-label":`Remove ${l.name}`,children:e.jsx(_e,{className:"h-2.5 w-2.5"})})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("div",{className:"text-[11px] font-semibold leading-tight text-foreground",children:l.name}),e.jsx("div",{className:"text-[9px] text-muted-foreground leading-tight",children:l.title})]})]})})};return e.jsx(He,{delayDuration:0,skipDelayDuration:150,children:e.jsxs("div",{className:"relative",children:[e.jsx(qe,{sensors:y,collisionDetection:Je,onDragStart:k,onDragEnd:v,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto",children:[e.jsx(ge,{children:e.jsxs(q,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[80px] min-w-[80px] border-r border-border/30 select-none",style:{left:0},children:d.common.level}),e.jsx(Xe,{items:t.map(l=>l.id),strategy:Ye,children:t.map((l,b)=>e.jsx(g,{champion:l,index:b},l.id))}),n&&e.jsx(G,{className:"text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] border-l border-border/30 select-none",children:e.jsxs(xe,{onClick:()=>w(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Re,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsxs(be,{children:[e.jsxs(q,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(D,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:d.skills.label}),t.map((l,b)=>{var N;return e.jsx(o,{champion:l,className:B("p-2",b<t.length-1&&"border-r border-border/30"),children:e.jsxs("div",{className:"flex justify-center gap-1.5",children:[l.passive&&e.jsx(de,{isPassive:!0,passiveName:l.passive.name,passiveDescription:l.passive.description,passiveImageFull:l.passive.image.full,skill:{},skillIdx:0,version:r}),(N=l.spells)==null?void 0:N.map((C,S)=>{const E=m(l.id,S);return e.jsx(de,{skill:C,skillIdx:S,version:r,spellData:E},C.id)})]})},l.id)}),n&&e.jsx(D,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]}),f.map((l,b)=>e.jsxs(q,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(D,{className:B("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",b===f.length-1&&"rounded-bl-lg"),style:{left:0},children:[l.level,d.common.level]}),l.skills.map((N,C)=>{const S=t[C];return e.jsx(o,{champion:S,className:B("p-2",C<t.length-1&&"border-r border-border/30"),children:N?e.jsxs("div",{className:"flex justify-center gap-1.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),N.map((E,_)=>e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs font-semibold",children:E.cooldown!==""?`${E.cooldown}${d.common.seconds}`:"-"})},_))]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})},S.id)}),n&&e.jsx(D,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]},l.level))]})]})})}),x&&n&&s&&e.jsx(Ee,{championList:s,selectedChampions:t,onSelect:l=>{n(l)},onClose:()=>w(!1)})]})})}function hr({champions:t,version:r,vsMode:s}){var w,V;const{t:n}=oe(),{cdragonVersion:a,setCDragonVersion:c}=et(),[u,d]=O.useState({});O.useEffect(()=>{const h=async()=>{try{const y=await Nt(t,r);if(d(y),!a)try{let k=null;for(const v of Object.keys(y)){const p=y[v];if(p&&p.length>0&&(k=p[0].cdragonVersion??null,k))break}k&&c(k)}catch(k){F.warn("Failed to extract CDragon version from integrated spell data (mobile):",k)}}catch(y){F.warn("Failed to load integrated spell data:",y),d({})}};t.length>0&&h()},[t,r]);const j=O.useMemo(()=>Math.max(...t.map(h=>h.spells?Math.max(...h.spells.map(y=>y.maxrank)):0)),[t]),i=O.useCallback((h,y)=>{const k=u[h];return!k||k.length<=y?null:k[y]},[u]),x=O.useMemo(()=>Array.from({length:j},(h,y)=>{const k=y+1;return{level:k,skills:t.map(v=>v.spells?v.spells.map((p,m)=>{const f=i(v.id,m),o=Tt(p,k,f);return{skill:p,cooldown:o}}):null)}}),[t,j,i]);if(s&&t.length===2){const h=s.championA,y=s.championB;return e.jsx(He,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(ge,{children:e.jsxs(q,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:n.common.level}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:ae(r,h.id),alt:h.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:h.name})]})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:ae(r,y.id),alt:y.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:y.name})]})})]})}),e.jsxs(be,{children:[e.jsxs(q,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(D,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:n.skills.label}),e.jsx(D,{className:"p-1.5 border-r border-border/30",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[h.passive&&e.jsx(de,{isPassive:!0,passiveName:h.passive.name,passiveDescription:h.passive.description,passiveImageFull:h.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(w=h.spells)==null?void 0:w.map((k,v)=>{const p=i(h.id,v);return e.jsx(de,{skill:k,skillIdx:v,version:r,spellData:p,size:"small"},k.id)})]})}),e.jsx(D,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(D,{className:"p-1.5",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[y.passive&&e.jsx(de,{isPassive:!0,passiveName:y.passive.name,passiveDescription:y.passive.description,passiveImageFull:y.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(V=y.spells)==null?void 0:V.map((k,v)=>{const p=i(y.id,v);return e.jsx(de,{skill:k,skillIdx:v,version:r,spellData:p,size:"small"},k.id)})]})})]}),x.map((k,v)=>{const p=k.skills[0],m=k.skills[1];return e.jsxs(q,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(D,{className:B("p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",v===x.length-1&&"rounded-bl-lg"),style:{left:0},children:[k.level,n.common.level]}),e.jsx(D,{className:"p-1.5 border-r border-border/30",children:p?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),p.map((f,o)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:f.cooldown!==""?`${f.cooldown}${n.common.seconds}`:"-"})},o))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),e.jsx(D,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(D,{className:"p-1.5",children:m?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),m.map((f,o)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:f.cooldown!==""?`${f.cooldown}${n.common.seconds}`:"-"})},o))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})})]},k.level)})]})]})})})})})})}return e.jsx(He,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(ge,{children:e.jsxs(q,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[60px] min-w-[60px] border-r border-border/30 select-none",style:{left:0},children:n.common.level}),t.map(h=>e.jsx(G,{className:"text-center p-2 text-xs font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:ae(r,h.id),alt:h.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:h.name})]})},h.id))]})}),e.jsxs(be,{children:[e.jsxs(q,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(D,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:n.skills.label}),t.map(h=>{var y;return e.jsx(D,{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[h.passive&&e.jsx(de,{isPassive:!0,passiveName:h.passive.name,passiveDescription:h.passive.description,passiveImageFull:h.passive.image.full,skill:{},skillIdx:0,version:r}),(y=h.spells)==null?void 0:y.map((k,v)=>{const p=i(h.id,v);return e.jsx(de,{skill:k,skillIdx:v,version:r,spellData:p},k.id)})]})},h.id)})]}),x.map((h,y)=>e.jsxs(q,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(D,{className:B("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",y===x.length-1&&"rounded-bl-lg"),style:{left:0},children:[h.level,n.common.level]}),h.skills.map((k,v)=>e.jsx(D,{className:"p-2",children:k?e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})}),k.map((p,m)=>e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] font-semibold",children:p.cooldown!==""?`${p.cooldown}${n.common.seconds}`:"-"})},m))]}):e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})},t[v].id))]},h.level))]})]})})})})})})}function jr({champions:t,version:r,activeTab:s,championList:n,onAddChampion:a,onRemoveChampion:c,onReorderChampions:u,vsMode:d}){const j=Qe();if(t.length===0)return null;const i=j==="mobile";return e.jsx(gt,{children:e.jsx(bt,{className:"p-0",children:s==="stats"?i?e.jsx(rr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:c,vsMode:d}):e.jsx(tr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:c,onReorderChampions:u}):i?e.jsx(hr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:c,vsMode:d}):e.jsx(br,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:c,onReorderChampions:u})})})}const Nr=O.memo(jr),vr=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;function wr({version:t,initialTabs:r,initialSelectedTabId:s,tabsStorageKey:n,selectedTabIdStorageKey:a}){const[c,u]=T.useState([]),d=T.useRef([]),[j,i]=T.useState(null),[x,w]=T.useState(!1),[V,h]=T.useState(null),[y,k]=T.useState(!1);T.useEffect(()=>{d.current=c},[c]),T.useEffect(()=>{if(!(!t||y))try{const l=window.localStorage.getItem(n);let b=null;if(l){const S=JSON.parse(l);Array.isArray(S)&&(b=S)}!b&&r&&r.length>0&&(b=r);const N=window.localStorage.getItem(a);let C=null;N?C=N:s&&(C=s),b&&b.length>0?(u(b),C&&b.some(S=>S.id===C)?i(C):i(b[0].id)):i(null),k(!0)}catch(l){F.error("Failed to load tabs from localStorage:",l),k(!0)}},[t,n,a,y,r,s]),T.useEffect(()=>{!j&&c.length>0&&i(c[0].id)},[c,j]),T.useEffect(()=>{j&&!c.find(l=>l.id===j)&&i(c.length>0?c[0].id:null)},[c,j]);const v=T.useCallback(l=>{u(b=>{const N=b.findIndex(S=>S.id===l),C=b.filter(S=>S.id!==l);return i(S=>{if(S&&S!==l&&C.some(U=>U.id===S))return S;if(C.length===0)return null;const E=N>0?N-1:0;return(C[E]??C[0]).id}),C})},[i]),p=T.useCallback(l=>{u(b=>[...b,l]),i(l.id)},[]),m=T.useCallback((l,b)=>{u(N=>N.map(C=>C.id===l?b(C):C))},[]),f=T.useCallback((l,b)=>{u(N=>{const C=N.findIndex(E=>E.id===l);if(C===-1)return[...N,b];const S=[...N];return S[C]=b,S}),i(b.id)},[]),o=T.useCallback(()=>{u([]),i(null),ie(n),ie(a)},[n,a]),g=T.useCallback(l=>{const{active:b,over:N}=l;N&&b.id!==N.id&&u(C=>{const S=C.findIndex(_=>_.id===b.id),E=C.findIndex(_=>_.id===N.id);return S===-1||E===-1?C:pt(C,S,E)})},[]);return{tabs:c,setTabs:u,tabsRef:d,selectedTabId:j,setSelectedTabId:i,showVsSelector:x,setShowVsSelector:w,vsSelectorMode:V,setVsSelectorMode:h,removeTab:v,addTab:p,updateTab:m,replaceTab:f,resetTabs:o,handleDragEnd:g,generateTabId:vr}}function yr({version:t,lang:r,championList:s,tabs:n,initialSelectedChampions:a,storageKey:c}){const[u,d]=T.useState([]),[j,i]=T.useState(!0),[x,w]=T.useState(!1);T.useEffect(()=>{if(!t||!s||x){!x&&(!t||!s)&&setTimeout(()=>{i(!1)},0);return}try{const m=window.localStorage.getItem(c);let f=null;if(m){const o=JSON.parse(m);Array.isArray(o)&&(f=o)}if(!f&&a&&a.length>0&&(f=a),f&&f.length>0){const o=f.map(g=>{const l=s.find(b=>b.id===g.id||b.key===g.key);return l?{...l,isLoading:!1}:null}).filter(g=>g!==null);o.length>0?setTimeout(()=>{d(o),w(!0),o.forEach(g=>{g.id&&(d(l=>l.map(b=>b.id===g.id?{...b,isLoading:!0}:b)),lt(t,r,g.id).then(l=>{d(b=>b.map(N=>N.id===g.id?{...N,fullInfo:l,isLoading:!1}:N))}).catch(l=>{F.error("Failed to load champion info:",l),d(b=>b.map(N=>N.id===g.id?{...N,isLoading:!1}:N))}))})},0):w(!0)}else w(!0);setTimeout(()=>{i(!1)},0)}catch(m){F.error("Failed to load initial selected champions:",m),setTimeout(()=>{i(!1),w(!0)},0)}},[t,r,s,c,x,a]),T.useEffect(()=>{s&&u.length>0&&setTimeout(()=>{d(m=>m.map(f=>{const o=s.find(g=>g.id===f.id||g.key===f.key);return o?{...f,name:o.name,title:o.title}:f}))},0)},[s,u.length]),T.useEffect(()=>{j||setTimeout(()=>{const m=new Set(n.flatMap(f=>f.champions));d(f=>{if(n.length===0)return f.length>0?[]:f;const o=f.filter(g=>m.has(g.id));return o.length!==f.length?o:f})},0)},[n,j]);const V=T.useCallback(m=>{t&&(d(f=>f.map(o=>o.id===m?{...o,isLoading:!0}:o)),lt(t,r,m).then(f=>{d(o=>o.map(g=>g.id===m?{...g,fullInfo:f,isLoading:!1,skinIndex:0}:g))}).catch(f=>{F.error("Failed to load champion info:",f),d(o=>o.map(g=>g.id===m?{...g,isLoading:!1}:g))}))},[t,r]),h=T.useCallback(m=>{d(f=>{if(f.some(l=>l.id===m.id))return f;const g={...m,isLoading:!0,skinIndex:0};return V(m.id),[...f,g]})},[V]),y=T.useCallback(m=>{d(f=>f.filter(o=>o.id!==m))},[]),k=T.useCallback(()=>{d([]),ie(c)},[c]),v=T.useMemo(()=>u.filter(m=>m.fullInfo&&!m.isLoading),[u]),p=T.useMemo(()=>{const m=new Set(n.filter(f=>f.mode==="normal").flatMap(f=>f.champions));return u.filter(f=>m.has(f.id))},[n,u]);return{selectedChampions:u,setSelectedChampions:d,championsWithFullInfo:v,normalTabChampions:p,addChampionToList:h,removeChampion:y,resetChampions:k,loadChampionInfo:V}}function Cr({onAddClick:t}){const{t:r}=oe();return e.jsx(gt,{className:"border-dashed",children:e.jsxs(bt,{className:"flex flex-col items-center justify-center py-12 md:py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:e.jsx(Wt,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:r.encyclopedia.emptyState.title}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md text-sm mb-4",children:r.encyclopedia.emptyState.description}),e.jsxs(xe,{onClick:t,variant:"outline",className:"flex flex-row items-center justify-center gap-2 border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Re,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-primary transition-colors",children:r.encyclopedia.emptyState.addButton})]})]})})}const Vt="flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors shrink-0 relative select-none",Pt="bg-primary text-primary-foreground",$t="bg-muted/50 text-muted-foreground",At="touch-none cursor-grab active:cursor-grabbing p-0.5 -ml-1 mr-0.5 opacity-60 hover:opacity-100 transition-opacity select-none",Lt="ml-1 p-0.5 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group",Sr="ml-1 p-1 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group";function kr({tab:t,champion:r,version:s,selectedTabId:n,onSelect:a,onRemove:c,onVsClick:u}){const{t:d}=oe(),{attributes:j,listeners:i,setNodeRef:x,transform:w,transition:V,isDragging:h}=we({id:t.id}),y={transform:ye.Transform.toString(w),transition:V,opacity:h?.5:1},k=n===t.id,v=k?Pt:$t;return e.jsxs("div",{ref:x,style:y,"data-tab-id":t.id,className:B(Vt,v,h&&"z-50"),onClick:p=>{const m=p.target;m.tagName==="BUTTON"||m.closest("button")||a(t.id)},children:[e.jsx("button",{...j,...i,className:At,"aria-label":"Drag to reorder",children:e.jsx(Be,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 cursor-pointer select-none",children:[e.jsx("img",{src:ae(s,r.id),alt:r.name,className:"w-5 h-5 rounded-full pointer-events-none select-none",draggable:"false"}),e.jsx("span",{className:"pointer-events-none select-none",children:r.name})]}),e.jsx("button",{onClick:p=>{p.preventDefault(),p.stopPropagation(),u(t.id)},className:Sr,"aria-label":`${d.encyclopedia.vs} with ${r.name}`,title:d.encyclopedia.vsStart,type:"button",children:e.jsx(Zt,{className:B("h-3 w-3 transition-colors",k?"text-primary-foreground":"text-muted-foreground")})}),e.jsx("button",{onClick:p=>{p.preventDefault(),p.stopPropagation(),c(t.id)},className:Lt,"aria-label":`Remove ${r.name}`,type:"button",children:e.jsx(_e,{className:B("h-3 w-3 transition-colors",k?"text-primary-foreground":"text-muted-foreground")})})]})}function Tr({tab:t,championA:r,championB:s,version:n,selectedTabId:a,onSelect:c,onRemove:u,onChangeChampionA:d,onChangeChampionB:j}){const{t:i}=oe(),{attributes:x,listeners:w,setNodeRef:V,transform:h,transition:y,isDragging:k}=we({id:t.id}),v={transform:ye.Transform.toString(h),transition:y,opacity:k?.5:1},p=a===t.id,m=p?Pt:$t;return e.jsxs("div",{ref:V,style:v,"data-tab-id":t.id,className:B(Vt,m,k&&"z-50"),children:[e.jsx("button",{...x,...w,className:At,"aria-label":"Drag to reorder",children:e.jsx(Be,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 select-none",children:[e.jsx("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),d(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:ae(n,r.id),alt:r.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})}),e.jsx("button",{onClick:()=>{c(t.id)},className:"text-[10px] font-semibold touch-none select-none",children:i.encyclopedia.vs}),e.jsx("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),j(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:ae(n,s.id),alt:s.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})})]}),e.jsx("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),u(t.id)},className:Lt,"aria-label":"Remove VS tab",children:e.jsx(_e,{className:B("h-3 w-3 transition-colors",p?"text-primary-foreground":"text-muted-foreground")})})]})}function Vr({tabs:t,championsWithFullInfo:r,version:s,selectedTabId:n,sensors:a,onDragEnd:c,onSelectTab:u,onRemoveTab:d,onVsClick:j,onChangeChampionA:i,onChangeChampionB:x,onAddClick:w}){const{t:V}=oe(),h=T.useRef(null),y=T.useRef(t.length),k=T.useRef(!1),v=T.useRef((p=!0)=>{if(!h.current||!n)return;const m=h.current.querySelector("[data-radix-scroll-area-viewport]");if(!m)return;const f=m.querySelector(`[data-tab-id="${n}"]`);if(f){const o=f.offsetLeft,g=f.offsetWidth,l=m.offsetWidth,b=o-l/2+g/2;p?m.scrollTo({left:Math.max(0,b),behavior:"smooth"}):m.scrollLeft=Math.max(0,b)}});return T.useEffect(()=>{!k.current&&n&&t.length>0&&(k.current=!0,requestAnimationFrame(()=>{requestAnimationFrame(()=>{v.current(!1)})}))},[n,t.length]),T.useEffect(()=>{if(!h.current)return;const p=h.current.querySelector("[data-radix-scroll-area-viewport]");p&&(t.length>y.current&&p.scrollTo({left:p.scrollWidth,behavior:"smooth"}),y.current=t.length)},[t.length]),T.useEffect(()=>{if(k.current&&n){const p=setTimeout(()=>{v.current(!0)},100);return()=>clearTimeout(p)}},[n]),e.jsx("div",{className:"border-b border-border -mx-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground shrink-0 pl-3",children:V.encyclopedia.champion}),e.jsxs(ht,{ref:h,type:"scroll",className:"flex-1",children:[e.jsx(qe,{sensors:a,collisionDetection:Je,onDragEnd:c,children:e.jsx(Xe,{items:t.map(p=>p.id),strategy:Ye,children:e.jsxs("div",{className:"flex items-center gap-2 w-max select-none pr-2",children:[t.map(p=>{if(p.mode==="vs"){const m=r.find(o=>o.id===p.champions[0]),f=r.find(o=>o.id===p.champions[1]);return!m||!f?null:e.jsx(Tr,{tab:p,championA:m,championB:f,version:s,selectedTabId:n,onSelect:u,onRemove:d,onChangeChampionA:i,onChangeChampionB:x},p.id)}else{const m=r.find(f=>f.id===p.champions[0]);return m?e.jsx(kr,{tab:p,champion:m,version:s,selectedTabId:n,onSelect:u,onRemove:d,onVsClick:j},p.id):null}}),e.jsxs(xe,{onClick:w,variant:"outline",size:"sm",className:"flex items-center gap-1.5 shrink-0 border-2 border-dashed border-muted-foreground/30 hover:border-primary hover:bg-primary/10 hover:text-primary h-auto py-1.5 px-3 transition-colors",children:[e.jsx(Re,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:V.encyclopedia.add})]})]})})}),e.jsx(Ut,{orientation:"horizontal"})]})]})})}function Pr({open:t,vsSelectorMode:r,tabs:s,championList:n,selectedChampions:a,onSelect:c,onClose:u,onOpenChange:d}){const{t:j}=oe();if(!t||!r)return null;const i=s.find(w=>w.id===r.tabId);if(!i||r.mode!=="select-second"&&i.mode!=="vs")return null;const x=r.mode==="change-champion-a"?i.champions[1]:i.champions[0];return x?e.jsx(Ee,{championList:n,selectedChampions:a,onSelect:c,onClose:u,open:t,onOpenChange:d,vsMode:{currentChampionId:x,title:j.encyclopedia.selectOpponent}}):null}const Pe="cooldown_selected_champions",$e="cooldown_tabs",Ae="cooldown_selected_tab_id";function $r(t){return t==="skills"||t==="stats"}function Ar({lang:t,championList:r,version:s,cdragonVersion:n,initialSelectedChampions:a,initialTabs:c,initialSelectedTabId:u}){const[d,j]=Dt(),x=Qe()==="mobile",w=T.useMemo(()=>{const P=d.get("tab");return $r(P)?P:null},[d]),V=()=>w||"skills",[h,y]=T.useState(V),k=T.useRef(w),v=T.useRef(V());T.useEffect(()=>{const P=w||"skills",K=k.current||"skills";P!==K&&P!==h&&(y(P),v.current=P),k.current=w},[w,h]),T.useEffect(()=>{const P=w||"skills",K=v.current;if(h!==K&&P!==h){const Z=new URLSearchParams(d);h==="skills"?Z.delete("tab"):Z.set("tab",h),j(Z,{replace:!0}),k.current=h==="skills"?null:h}v.current=h},[h,w,d,j]);const[p,m]=T.useState(!1),{cdragonVersion:f}=et(),{t:o}=oe(),{tabs:g,tabsRef:l,selectedTabId:b,setSelectedTabId:N,showVsSelector:C,setShowVsSelector:S,vsSelectorMode:E,setVsSelectorMode:_,removeTab:I,addTab:U,updateTab:te,replaceTab:L,resetTabs:M,handleDragEnd:R,generateTabId:$}=wr({version:s,initialTabs:c,initialSelectedTabId:u,tabsStorageKey:$e,selectedTabIdStorageKey:Ae}),{selectedChampions:A,setSelectedChampions:H,championsWithFullInfo:z,normalTabChampions:W,addChampionToList:Q,removeChampion:re,resetChampions:ne}=yr({version:s,lang:t,championList:r,tabs:g,initialSelectedChampions:a,storageKey:Pe}),ee=T.useCallback(()=>{try{if(A.length>0){const P=A.map(({id:K,key:Z})=>({id:K,key:Z}));De(Pe,JSON.stringify(P))}else ie(Pe);g.length>0?De($e,JSON.stringify(g)):ie($e),b?De(Ae,b):ie(Ae)}catch(P){F.error("Failed to persist cooldown state to storage:",P)}},[A,g,b]),je=Ke(ve(Ze,{activationConstraint:{distance:12}}),ve(We,{coordinateGetter:Ue})),Ce=T.useCallback((P,K)=>{H(Z=>pt(Z,P,K))},[H]),le=T.useCallback(P=>{if(new Set(A.map(me=>me.id)).has(P.id)){const me=l.current,J=me.some(X=>X.mode==="normal"&&X.champions.length===1&&X.champions[0]===P.id),Ve=me.some(X=>X.mode==="vs"&&X.champions.includes(P.id));if(J){const X=g.find(Me=>Me.mode==="normal"&&Me.champions.length===1&&Me.champions[0]===P.id);X&&I(X.id),Ve||re(P.id);return}if(Ve){const X={mode:"normal",champions:[P.id],id:$()};U(X);return}const rt=g.find(X=>X.mode==="normal"&&X.champions.length===1&&X.champions[0]===P.id);rt&&I(rt.id),re(P.id);return}Q(P);const Z={mode:"normal",champions:[P.id],id:$()};U(Z)},[A,g,l,Q,re,U,I,$]),Se=T.useCallback(()=>{ne(),M(),ie(Pe),ie($e),ie(Ae)},[ne,M]),Et=T.useCallback(P=>{if(!E)return;const{mode:K,tabId:Z}=E,me=g.find(J=>J.id===Z);if(me){if(K==="select-second"){const J={mode:"vs",champions:[me.champions[0],P.id],id:$()};L(Z,J),A.some(Ve=>Ve.id===P.id)||Q(P)}else K==="change-champion-a"?(te(Z,J=>({...J,champions:[P.id,J.champions[1]]})),A.some(J=>J.id===P.id)||Q(P)):K==="change-champion-b"&&(te(Z,J=>({...J,champions:[J.champions[0],P.id]})),A.some(J=>J.id===P.id)||Q(P));S(!1),_(null)}},[E,g,A,Q,te,L,$]),se=T.useMemo(()=>b&&g.find(P=>P.id===b)||null,[b,g]),ce=T.useMemo(()=>se?se.champions.map(P=>{var K;return(K=z.find(Z=>Z.id===P))==null?void 0:K.fullInfo}).filter(P=>P!==void 0):[],[se,z]),tt=T.useMemo(()=>!x||se&&se.mode==="vs"?null:se&&se.mode==="normal"&&ce.length>0?ce[0]:null,[x,se,ce]),Rt=T.useCallback(P=>{g.forEach(K=>{K.champions.includes(P)&&I(K.id)}),re(P)},[g,re,I]),Bt=T.useCallback(P=>{_({mode:"select-second",tabId:P}),S(!0)},[]),_t=T.useCallback(P=>{_({mode:"change-champion-a",tabId:P,championIndex:0}),S(!0)},[]),Mt=T.useCallback(P=>{_({mode:"change-champion-b",tabId:P,championIndex:1}),S(!0)},[]);return e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6 lg:px-8 pb-4 md:pb-5",children:[p&&e.jsx(Ee,{championList:r,selectedChampions:W,onSelect:le,onClose:()=>{m(!1),ee()},open:p,onOpenChange:P=>{m(P),P||ee()}}),e.jsx(Pr,{open:C,vsSelectorMode:E,tabs:g,championList:r,selectedChampions:A,onSelect:Et,onClose:()=>{S(!1),_(null),ee()},onOpenChange:P=>{S(P),P||(_(null),ee())}}),e.jsx("div",{className:"mt-3 md:mt-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-border overflow-x-auto -mx-4 md:mx-0 px-4 md:px-0",children:[e.jsx(Xt,{value:h,onValueChange:P=>y(P),className:"flex-1",children:e.jsxs(Yt,{className:"inline-flex h-auto items-center justify-start gap-2 bg-transparent p-0 border-0",children:[e.jsx(ct,{value:"skills",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:o.encyclopedia.tabs.skills}),e.jsx(ct,{value:"stats",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:o.encyclopedia.tabs.stats})]})}),e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:e.jsxs(xe,{variant:"ghost",size:"sm",onClick:Se,className:"flex items-center gap-1.5 shrink-0 text-muted-foreground hover:text-primary hover:bg-muted/30 border-0",children:[e.jsx(qt,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[10px]",children:o.encyclopedia.reset})]})})]})}),A.length>0&&z.length>0&&e.jsxs("div",{className:"mt-4 md:mt-6 space-y-4 md:space-y-6",children:[x&&g.length>0&&e.jsx(Vr,{tabs:g,championsWithFullInfo:z,version:s,selectedTabId:b,sensors:je,onDragEnd:R,onSelectTab:N,onRemoveTab:I,onVsClick:Bt,onChangeChampionA:_t,onChangeChampionB:Mt,onAddClick:()=>m(!0)}),e.jsx(Nr,{champions:x&&se&&se.mode==="vs"&&ce.length===2?ce:x&&tt?[tt]:z.map(P=>P.fullInfo),version:s,activeTab:h==="skills"?"skills":"stats",championList:r,onAddChampion:x?void 0:le,onRemoveChampion:Rt,onReorderChampions:x?void 0:Ce,vsMode:x&&se&&se.mode==="vs"&&ce.length===2?{championA:ce[0],championB:ce[1]}:void 0})]}),A.length===0&&e.jsx("div",{className:"mt-4",children:e.jsx(Cr,{onAddClick:()=>m(!0)})})]})}function Dr(t){return e.jsx(Jt,{initialDDragonVersion:t.version,initialCDragonVersion:t.cdragonVersion,children:e.jsx(Ar,{...t})})}export{Dr as default};
