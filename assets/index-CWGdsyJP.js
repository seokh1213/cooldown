import{r as h,j as e,d as Y,f as Wt,O as qt,g as Ut,v as qe,w as he,x as Ue,K as Ze,y as Ye,z as Je,A as Xe,E as Qe,F as et,G as be,I as je,J as jt,L as Zt,M as Nt,N as vt,Q as yt}from"/cooldown/assets/react-vendor-CrtkgiRr.js";import{c as E,B as se,u as te,g as Me,C as ee,D as wt,V as Ct,a as St,b as kt,d as ve,l as F,e as Yt,f as tt,P as Jt,S as ot,h as Xt,i as Tt,T as lt,j as it,k as ct,m as Ke,s as He,n as $e,r as le,o as Ee,p as dt,q as Ae,t as Qt}from"/cooldown/assets/index-CaKi16cu.js";import{e as er,f as ke,X as Ne,S as Le,g as Be,G as _e,T as ut,R as tr}from"/cooldown/assets/lucide-icons-DdUfcdEd.js";const rt=h.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:E("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r}));rt.displayName="Card";const rr=h.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:E("flex flex-col space-y-1.5 p-6",t),...r}));rr.displayName="CardHeader";const sr=h.forwardRef(({className:t,...r},s)=>e.jsx("h3",{ref:s,className:E("text-2xl font-semibold leading-none tracking-tight",t),...r}));sr.displayName="CardTitle";const nr=h.forwardRef(({className:t,...r},s)=>e.jsx("p",{ref:s,className:E("text-sm text-muted-foreground",t),...r}));nr.displayName="CardDescription";const st=h.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:E("p-6 pt-0",t),...r}));st.displayName="CardContent";const ar=h.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:E("flex items-center p-6 pt-0",t),...r}));ar.displayName="CardFooter";const fe=h.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:E("w-full caption-bottom text-sm",t),...r})}));fe.displayName="Table";const xe=h.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:E("[&_tr]:border-b",t),...r}));xe.displayName="TableHeader";const pe=h.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:E("[&_tr:last-child]:border-0",t),...r}));pe.displayName="TableBody";const or=h.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:E("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));or.displayName="TableFooter";const G=h.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:E("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));G.displayName="TableRow";const K=h.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:E("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r}));K.displayName="TableHead";const _=h.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:E("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r}));_.displayName="TableCell";const lr=h.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:E("mt-4 text-sm text-muted-foreground",t),...r}));lr.displayName="TableCaption";const Ge=h.forwardRef(({className:t,type:r,...s},n)=>e.jsx("input",{type:r,className:E("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base md:text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...s}));Ge.displayName="Input";function ir({className:t,...r}){return e.jsx("div",{className:E("animate-pulse rounded-md bg-muted",t),...r})}function cr({addChampion:t,data:r,name:s,thumbnailSrc:n,selected:a}){const[i,d]=h.useState(!1),[c,p]=h.useState(!1),[g,b]=h.useState(a);h.useEffect(()=>{b(a)},[a]);const w=h.useCallback(y=>{y.preventDefault(),y.stopPropagation(),b(f=>!f),t(r)},[t,r]),C=h.useCallback(()=>{d(!0)},[]),j=h.useCallback(()=>{p(!0)},[]);return e.jsxs("div",{className:"flex flex-col items-center justify-center m-1 h-fit",children:[e.jsxs(se,{variant:"ghost",className:"cursor-pointer rounded-full shrink-0 p-0 h-auto w-auto hover:bg-transparent relative touch-manipulation",onClick:w,"aria-label":a?`Deselect ${s}`:`Select ${s}`,"aria-pressed":a,children:[e.jsxs("div",{className:"relative w-12 h-12 md:w-14 md:h-14 shrink-0 overflow-hidden rounded-full",children:[!i&&!c&&e.jsx(ir,{className:"absolute inset-0 rounded-full"}),!i&&!c&&e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-muted via-muted/80 to-muted/60 blur-sm"}),e.jsx("img",{className:E("absolute inset-0 w-full h-full rounded-full bg-black/5 border-0 box-border transition-all duration-200 ease-out object-cover",!a&&!g&&"hover:scale-105",i?"opacity-100":"opacity-0"),src:n,alt:s,loading:"lazy",decoding:"async",width:"56",height:"56",onLoad:C,onError:j}),(g||a)&&e.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{boxShadow:"inset 0 0 0 2px hsl(var(--primary)), 0 0 0 3px hsl(var(--primary) / 0.3)"}})]}),(g||a)&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 md:w-5 md:h-5 bg-primary rounded-full flex items-center justify-center pointer-events-none z-20 shadow-lg border-2 border-background",children:e.jsx(er,{className:"w-2.5 h-2.5 md:w-3 md:h-3 text-primary-foreground stroke-[3]"})})]}),e.jsx("div",{className:"text-xs md:text-sm whitespace-nowrap mt-0.5",children:s})]})}const mt=Y.memo(cr);function dr(t,r){const{lang:s}=te();return h.useMemo(()=>{if(!t)return[];if(!r)return t;const a=Me(r,s);return t.filter(i=>a.some(d=>{const c=d.toLowerCase();return!!(i.name.toLowerCase().includes(c)||i.hangul&&i.hangul.toLowerCase().includes(c)||i.id.toLowerCase().includes(c)||s==="ko_KR"&&(Me(i.name,s).some(g=>g.toLowerCase().includes(c))||i.hangul&&Me(i.hangul,s).some(b=>b.toLowerCase().includes(c))))}))},[t,r,s])}const ft="championSelectorScrollPosition";function ur(t,r,s){h.useEffect(()=>{if(!r||!s)return;const n=()=>{if(t.current){const a=sessionStorage.getItem(ft);if(a){const i=parseInt(a,10);t.current.scrollTop=i}}};n(),requestAnimationFrame(()=>{n()}),setTimeout(()=>{n()},200)},[r,s,t]),h.useEffect(()=>{const n=t.current;if(!n||!r||!s)return;let a;const i=()=>{clearTimeout(a),a=setTimeout(()=>{sessionStorage.setItem(ft,n.scrollTop.toString())},100)};return n.addEventListener("scroll",i,{passive:!0}),()=>{clearTimeout(a),n.removeEventListener("scroll",i)}},[r,s,t])}function mr({championList:t,selectedChampions:r,onSelect:s,onClose:n,slotIndex:a,open:i,onOpenChange:d,vsMode:c}){const{t:p}=te(),[g,b]=h.useState(!1),w=i!==void 0,C=w?!!i:g,j=w?d||(()=>{}):b,[y,f]=h.useState(""),[o,l]=h.useState(-1),m=h.useRef(null),v=h.useRef(null),u=h.useRef(null),N=n!==void 0,x=n||(()=>{}),S=dr(t,y),k=h.useMemo(()=>new Set(r.map(T=>T.id)),[r]),P=h.useMemo(()=>c&&(r.find(T=>T.id===c.currentChampionId)||(t==null?void 0:t.find(T=>T.id===c.currentChampionId)))||null,[c,r,t]),$=h.useMemo(()=>c?S.filter(T=>T.id!==c.currentChampionId):S,[S,c]),B=h.useCallback(T=>{const V=T.target;m.current&&!m.current.contains(V)&&(j(!1),f(""),l(-1))},[j]);h.useEffect(()=>{if(C&&!N)return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[C,B,N]);const I=h.useCallback(T=>{j(T),T||(f(""),l(-1),n&&n()),d&&d(T)},[n,d]),M=h.useCallback(T=>{s(T),N?l(-1):(j(!1),l(-1),document.body.style.overflow="",x())},[s,n,N]),O=h.useCallback(T=>{if(!(!C&&!N||!t))if(T.key==="ArrowDown")T.preventDefault(),l(V=>V<S.length-1?V+1:V);else if(T.key==="ArrowUp")T.preventDefault(),l(V=>V>0?V-1:-1);else if(T.key==="Enter"&&o>=0){T.preventDefault();const V=S[o];V&&M(V)}else T.key==="Escape"&&I(!1)},[C,N,t,S,o,M,I,k]);return h.useEffect(()=>{if(o>=0&&u.current){const T=u.current.querySelectorAll("[data-champion-item]");T[o]&&T[o].scrollIntoView({block:"nearest"})}},[o]),h.useEffect(()=>{w||j(!!N)},[N,w,j]),ur(u,N,C),h.useEffect(()=>{N&&C&&requestAnimationFrame(()=>{var T;(T=v.current)==null||T.focus()})},[N,C]),N?w&&!C?null:e.jsx(wt,{open:C,onOpenChange:I,children:e.jsxs(Wt,{children:[e.jsx(qt,{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm"}),e.jsxs(Ut,{ref:m,className:"fixed inset-0 left-0 top-0 translate-x-0 translate-y-0 md:inset-auto md:left-[50%] md:top-[50%] md:translate-x-[-50%] md:translate-y-[-50%] w-full h-full md:w-[600px] md:h-[500px] lg:w-[800px] lg:h-[600px] p-0 flex flex-col overflow-hidden max-w-none md:max-w-[600px] lg:max-w-[800px] max-h-none md:max-h-[500px] lg:max-h-[600px] rounded-none md:rounded-xl z-50 border bg-background shadow-lg",onInteractOutside:()=>{I(!1)},onEscapeKeyDown:()=>{I(!1)},children:[e.jsxs(Ct,{children:[e.jsx(St,{children:c?p.championSelector.vsSelectOpponent:p.championSelector.selectChampion}),e.jsx(kt,{children:c?p.championSelector.vsSelectOpponentDescription:p.championSelector.selectChampionDescription})]}),c&&P&&e.jsxs("div",{className:"p-4 border-b-2 border-destructive/30 bg-destructive/5 flex items-center gap-3 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ee(P.version||"",P.id),alt:P.name,className:"w-10 h-10 rounded-full border-2 border-destructive/50"}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-destructive rounded-full p-0.5",children:e.jsx(Le,{className:"h-3 w-3 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-foreground",children:P.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:p.championSelector.currentChampion})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-destructive",children:[e.jsx(Le,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"VS"})]})]}),e.jsxs("div",{className:E("p-4 border-b border-border flex items-center gap-2 shrink-0",c?"bg-muted/30":"bg-card"),children:[e.jsx(ke,{className:E("h-5 w-5 shrink-0",c?"text-destructive":"text-muted-foreground")}),e.jsx(Ge,{ref:v,type:"text",placeholder:c?p.championSelector.vsSearchPlaceholder:p.championSelector.searchPlaceholder,value:y,onChange:T=>{f(T.target.value),l(-1)},onKeyDown:O,className:"flex-1",autoFocus:!0}),e.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>I(!1),children:e.jsx(Ne,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:u,className:"overflow-y-auto overflow-x-hidden p-4 flex-1 min-h-0 md:flex-none md:w-[600px] md:h-[427px] lg:w-[800px] lg:h-[527px]",children:t?(c?$:S).length>0?e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"mb-3 pb-2 border-b border-destructive/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-semibold",children:p.championSelector.selectOpponentLabel})]})}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:(c?$:S).map((T,V)=>{const D=o===V,L=c?!1:k.has(T.id);return e.jsx("div",{"data-champion-item":!0,className:E(D&&"ring-2 ring-offset-1 rounded-md",c?"ring-destructive":"ring-primary"),children:e.jsx(mt,{addChampion:R=>M(R),data:T,name:T.name,selected:L,thumbnailSrc:ee(T.version||"",T.id)})},T.id)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground min-h-[200px] space-y-2",children:[e.jsx(ke,{className:"h-12 w-12 opacity-50"}),e.jsx("p",{className:"text-base font-medium",children:y?p.championSelector.noResults:p.championSelector.emptyList})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground min-h-[200px]",children:p.championSelector.loading})})]})]})}):e.jsxs("div",{ref:m,className:"w-full",children:[e.jsxs(se,{onClick:()=>{j(!0),setTimeout(()=>{var T;return(T=v.current)==null?void 0:T.focus()},0)},variant:"ghost",className:E("w-full flex flex-col items-center justify-center space-y-2","text-muted-foreground hover:text-foreground","py-4 h-auto"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:e.jsx(ke,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-medium",children:p.championSelector.selectChampion})]}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>{j(!1),f(""),document.body.style.overflow="",x()},"aria-hidden":"true"}),e.jsxs("div",{className:E("fixed inset-0 z-50 md:absolute md:inset-auto md:top-full md:left-0 md:right-0 md:mt-2 md:z-10 md:rounded-lg md:border md:border-border md:shadow-lg bg-card md:max-h-[60vh] flex flex-col",N&&"md:relative md:inset-0 md:mt-0 md:rounded-lg md:border md:shadow-lg"),children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-2 sticky top-0 bg-card z-10",children:[e.jsx(ke,{className:"h-5 w-5 text-muted-foreground shrink-0"}),e.jsx(Ge,{ref:v,type:"text",placeholder:p.championSelector.searchPlaceholder,value:y,onChange:T=>{f(T.target.value),l(-1)},onKeyDown:O,className:"flex-1",autoFocus:!0}),e.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>{j(!1),f(""),document.body.style.overflow="",x()},children:e.jsx(Ne,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:u,className:"flex-1 overflow-auto p-4",style:{maxHeight:"calc(100vh - 120px)"},children:t?e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:S.map((T,V)=>{const D=o===V,L=k.has(T.id);return e.jsx("div",{"data-champion-item":!0,className:E(D&&"ring-2 ring-primary ring-offset-1 rounded-md"),children:e.jsx(mt,{addChampion:R=>M(R),data:T,name:T.name,selected:L,thumbnailSrc:ee(T.version||"",T.id)})},T.id)})}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:p.championSelector.loading})})]})]})]})}const De=Y.memo(mr);function Vt(t="ko_KR"){const r=ve(t);return[{key:"hp",label:r.stats.health,format:s=>Math.round(s)},{key:"hpperlevel",label:r.stats.healthPerLevel,format:s=>s.toFixed(1)},{key:"mp",label:r.stats.mana,format:s=>Math.round(s)},{key:"mpperlevel",label:r.stats.manaPerLevel,format:s=>s.toFixed(1)},{key:"movespeed",label:r.stats.movespeed,format:s=>Math.round(s)},{key:"armor",label:r.stats.armor,format:s=>Math.round(s)},{key:"armorperlevel",label:r.stats.armorPerLevel,format:s=>s.toFixed(1)},{key:"spellblock",label:r.stats.spellblock,format:s=>Math.round(s)},{key:"spellblockperlevel",label:r.stats.spellblockPerLevel,format:s=>s.toFixed(1)},{key:"attackdamage",label:r.stats.attackdamage,format:s=>Math.round(s)},{key:"attackdamageperlevel",label:r.stats.attackdamagePerLevel,format:s=>s.toFixed(1)},{key:"attackspeed",label:r.stats.attackspeed,format:s=>s.toFixed(3)},{key:"attackspeedperlevel",label:r.stats.attackspeedPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"attackrange",label:r.stats.attackrange,format:s=>Math.round(s)},{key:"crit",label:r.stats.crit,format:s=>`${(s*100).toFixed(1)}%`},{key:"critperlevel",label:r.stats.critPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"hpregen",label:r.stats.hpregen,format:s=>s.toFixed(1)},{key:"hpregenperlevel",label:r.stats.hpregenPerLevel,format:s=>s.toFixed(1)},{key:"mpregen",label:r.stats.mpregen,format:s=>s.toFixed(1)},{key:"mpregenperlevel",label:r.stats.mpregenPerLevel,format:s=>s.toFixed(1)}]}const ge=["Q","W","E","R"];function fr({champions:t,version:r,championList:s,onAddChampion:n,onRemoveChampion:a,onReorderChampions:i}){const{t:d,lang:c}=te(),[p,g]=h.useState(!1),b=Vt(c),w=qe(he(Ye,{activationConstraint:{distance:8}}),he(Ze,{coordinateGetter:Ue})),C=o=>{},j=o=>{const{active:l,over:m}=o;if(m&&l.id!==m.id&&i){const v=t.findIndex(N=>N.id===l.id),u=t.findIndex(N=>N.id===m.id);v!==-1&&u!==-1&&i(v,u)}},y=({champion:o,children:l,className:m})=>{const{setNodeRef:v,transform:u,transition:N,isDragging:x}=be({id:o.id,disabled:!0}),k={transform:u?je.Transform.toString(u):void 0,transition:x?N:void 0,opacity:x?.5:1};return e.jsx(_,{ref:v,style:k,className:m,children:l})},f=({champion:o,index:l})=>{const{attributes:m,listeners:v,setNodeRef:u,transform:N,transition:x,isDragging:S}=be({id:o.id}),P={transform:N?je.Transform.toString(N):void 0,transition:S?x:void 0,opacity:S?.5:1};return e.jsx(K,{ref:u,style:P,className:E("text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] select-none",l<t.length-1&&"border-r border-border/30",S&&"z-50"),children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1.5 relative",children:[i&&e.jsx("button",{...m,...v,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity absolute -left-2 top-1/2 -translate-y-1/2","aria-label":"Drag to reorder",children:e.jsx(_e,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ee(r,o.id),alt:o.name,className:"w-8 h-8 rounded-full"}),a&&e.jsx(se,{variant:"ghost",size:"icon",className:E("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:$=>{$.stopPropagation(),a(o.id)},"aria-label":`Remove ${o.name}`,children:e.jsx(Ne,{className:"h-2.5 w-2.5"})})]}),e.jsx("div",{className:"text-[10px] font-semibold leading-tight text-center break-words text-foreground",children:o.name})]})})};return e.jsxs("div",{className:"relative",children:[e.jsx(Je,{sensors:w,collisionDetection:Xe,onDragStart:C,onDragEnd:j,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(fe,{className:"border-collapse table-fixed w-auto",children:[e.jsx(xe,{children:e.jsxs(G,{className:"border-b border-border/30 select-none",children:[e.jsx(K,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[90px] min-w-[90px] border-r border-border/30 select-none",style:{left:0},children:d.stats.label}),e.jsx(Qe,{items:t.map(o=>o.id),strategy:et,children:t.map((o,l)=>e.jsx(f,{champion:o,index:l},o.id))}),n&&e.jsx(K,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] border-l border-border/30 select-none",children:e.jsxs(se,{onClick:()=>g(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Be,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsx(pe,{children:b.map(o=>{const l=t.map(u=>{var N;return((N=u.stats)==null?void 0:N[o.key])??0}),m=Math.max(...l),v=Math.min(...l);return e.jsxs(G,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(_,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:o.label}),t.map((u,N)=>{var P;const x=((P=u.stats)==null?void 0:P[o.key])??0,S=x===m&&m!==v,k=x===v&&m!==v;return e.jsx(y,{champion:u,className:E("p-1.5 text-[11px] text-center",N<t.length-1&&"border-r border-border/30",S&&"text-primary font-semibold",k&&"text-muted-foreground"),children:o.format(x)},u.id)}),n&&e.jsx(_,{className:"p-1.5 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[24px]"})})]},o.key)})})]})})}),p&&n&&s&&e.jsx(De,{championList:s,selectedChampions:t,onSelect:o=>{n(o)},onClose:()=>g(!1)})]})}function xr({champions:t,version:r,vsMode:s}){const{t:n,lang:a}=te(),i=Vt(a);if(s&&t.length===2){const d=s.championA,c=s.championB;return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(fe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(xe,{children:e.jsxs(G,{className:"border-b border-border/30 select-none",children:[e.jsx(K,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:n.stats.label}),e.jsx(K,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:ee(r,d.id),alt:d.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:d.name})]})}),e.jsx(K,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(K,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:ee(r,c.id),alt:c.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:c.name})]})})]})}),e.jsx(pe,{children:i.map(p=>{var j,y;const g=((j=d.stats)==null?void 0:j[p.key])??0,b=((y=c.stats)==null?void 0:y[p.key])??0,w=Math.max(g,b),C=Math.min(g,b);return e.jsxs(G,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(_,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:p.label}),e.jsx(_,{className:E("p-1.5 text-[10px] text-center border-r border-border/30",g===w&&w!==C&&"text-primary font-semibold",g===C&&w!==C&&"text-muted-foreground"),children:p.format(g)}),e.jsx(_,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(_,{className:E("p-1.5 text-[10px] text-center",b===w&&w!==C&&"text-primary font-semibold",b===C&&w!==C&&"text-muted-foreground"),children:p.format(b)})]},p.key)})})]})})})})})}return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(fe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(xe,{children:e.jsxs(G,{className:"border-b border-border/30 select-none",children:[e.jsx(K,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[70px] min-w-[70px] border-r border-border/30 select-none",style:{left:0},children:n.stats.label}),t.map(d=>e.jsx(K,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:ee(r,d.id),alt:d.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:d.name})]})},d.id))]})}),e.jsx(pe,{children:i.map(d=>{const c=t.map(b=>{var w;return((w=b.stats)==null?void 0:w[d.key])??0}),p=Math.max(...c),g=Math.min(...c);return e.jsxs(G,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(_,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:d.label}),t.map(b=>{var y;const w=((y=b.stats)==null?void 0:y[d.key])??0,C=w===p&&p!==g,j=w===g&&p!==g;return e.jsx(_,{className:E("p-1.5 text-[11px] text-center",C&&"text-primary font-semibold",j&&"text-muted-foreground"),children:d.format(w)},b.id)})]},d.key)})})]})})})})})}async function pr(t,r,s){let n={},a=null;try{a=await Yt(t,s),n=a.spellDataMap}catch(i){F.warn(`Failed to load Community Dragon data for ${t}:`,i)}return r.map((i,d)=>{let c={};if(n[d.toString()])c=n[d.toString()];else{const p=i.id.replace(t,"");for(const g of Object.keys(n))if(g.toLowerCase().includes(p.toLowerCase())||g.toLowerCase().includes(i.id.toLowerCase())){c=n[g];break}}return{spell:i,communityDragonData:c,spellIndex:d,ddragonVersion:(a==null?void 0:a.ddragonVersion)??s,cdragonVersion:(a==null?void 0:a.cdragonVersion)??null}})}async function Pt(t,r){const s={},n=t.map(async a=>{if(!a.spells||a.spells.length===0){s[a.id]=[];return}try{s[a.id]=await pr(a.id,a.spells,r)}catch(i){F.warn(`Failed to get integrated spell data for ${a.id}:`,i),s[a.id]=a.spells.map((d,c)=>({spell:d,communityDragonData:{},spellIndex:c}))}});return await Promise.all(n),s}const Fe={physicalDamage:{tag:"span",className:"text-red-600 dark:text-red-500 font-semibold"},magicDamage:{tag:"span",className:"text-blue-600 dark:text-blue-500 font-semibold"},trueDamage:{tag:"span",className:"text-yellow-600 dark:text-yellow-500 font-semibold"},status:{tag:"span",className:"text-purple-600 dark:text-purple-500"},lifeSteal:{tag:"span",className:"text-green-600 dark:text-green-500"},scaleAD:{tag:"span",className:"text-orange-600 dark:text-orange-500"},scaleAP:{tag:"span",className:"text-blue-600 dark:text-blue-400"},scaleArmor:{tag:"span",className:"text-orange-600 dark:text-orange-400"},scaleLevel:{tag:"span",className:"text-gray-600 dark:text-gray-400"},healing:{tag:"span",className:"text-green-600 dark:text-green-400"},speed:{tag:"span",className:"text-cyan-600 dark:text-cyan-500"},keywordMajor:{tag:"span",className:"text-yellow-600 dark:text-yellow-400 font-semibold"},keywordStealth:{tag:"span",className:"text-purple-600 dark:text-purple-400 font-semibold"},spellPassive:{tag:"span",className:"text-gray-600 dark:text-gray-500 italic"},spellActive:{tag:"span",className:"text-gray-900 dark:text-white font-semibold"},recast:{tag:"span",className:"text-yellow-600 dark:text-yellow-300"},damage:{tag:"span",className:"text-red-600 dark:text-red-400"},shield:{tag:"span",className:"text-blue-600 dark:text-blue-300"},mana:{tag:"span",className:"text-blue-600 dark:text-blue-400"},energy:{tag:"span",className:"text-yellow-600 dark:text-yellow-400"},health:{tag:"span",className:"text-red-600 dark:text-red-400"},cooldown:{tag:"span",className:"text-gray-600 dark:text-gray-300"},range:{tag:"span",className:"text-cyan-600 dark:text-cyan-400"},radius:{tag:"span",className:"text-purple-600 dark:text-purple-400"},width:{tag:"span",className:"text-indigo-600 dark:text-indigo-400"},length:{tag:"span",className:"text-pink-600 dark:text-pink-400"},rules:{tag:"span",className:"text-gray-600 dark:text-gray-400 italic"}};function gr(t){let r=t;r=r.replace(/<font\s+color=['"]([^'"]+)['"]\s*>/gi,'<span style="color: $1">'),r=r.replace(/<\/font>/gi,"</span>"),Object.entries(Fe).forEach(([n,{tag:a,className:i}])=>{const d=new RegExp(`</${n}>`,"gi");r=r.replace(d,`</${a}>`);const c=new RegExp(`<${n}>`,"gi");r=r.replace(c,`<${a}${i?` class="${i}"`:""}>`)});const s=["keywordMajor","keywordStealth","rules","recast"];return s.forEach(n=>{r=r.replace(new RegExp(`</${n}>`,"gi"),"</span>"),n==="rules"?r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-gray-600 dark:text-gray-400 italic">'):n==="keywordStealth"?r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-purple-600 dark:text-purple-400 font-semibold">'):r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-yellow-600 dark:text-yellow-400 font-semibold">')}),r=r.replace(/<(\w+)(?![\\w])>/gi,(n,a)=>Fe[a]||s.includes(a)||a==="font"||a==="br"?n:"<span>"),r=r.replace(/<\/(\w+)(?![\\w])>/gi,(n,a)=>Fe[a]||s.includes(a)||a==="font"||a==="br"?n:"</span>"),r}function $t(t){const r=t.trim(),s=/^([a-zA-Z_][a-zA-Z0-9_]*)\s*([*+\/-])\s*(-?\d+(?:\.\d+)?)$/,n=r.match(s);if(n){const a=n[2];return{type:"formula",variable:n[1],operator:a,operand:parseFloat(n[3])}}return{type:"variable",variable:r}}function Et(t,r,s){if(!r||typeof r!="string")return null;const n=Object.entries(t).find(([p])=>p!=null&&p.toLowerCase()===r.toLowerCase());if(!n)return null;const[,a]=n,i=a.slice(1,s+1);if(i.length===0)return null;const d=i[0];return i.every(p=>p===d)?d:i}function At(t,r){if(r.type!=="formula"||!r.operator||r.operand==null)return t;const{operator:s,operand:n}=r;return s==="*"?Array.isArray(t)?t.map(a=>a*n):t*n:s==="+"?Array.isArray(t)?t.map(a=>a+n):t+n:s==="-"?Array.isArray(t)?t.map(a=>a-n):t-n:s==="/"?Array.isArray(t)?t.map(a=>a/n):t/n:t}function ce(t){if(t==null||t==="")return"";const r=typeof t=="number"?t:parseFloat(String(t));return isNaN(r)?String(t):r%1===0?r.toString():parseFloat(r.toFixed(3)).toString()}function xt(t,r,s=!1){if(!t||t.length===0)return"";const n=s&&t.length>1?1:0,i=t.slice(n).filter(b=>b!=null&&b!==""&&b!=="0");if(i.length===0)return"";const d=r?i.slice(0,r):i;if(d.length===0)return"";const c=d.map(b=>ce(b)),p=c[0];return c.every(b=>b===p)?p:c.join("/")}function hr(t){let r=t;return r=r.replace(/<br\s*\/?>/gi,"<br />"),r=r.replace(/[^\S\r\n]+/g," "),r}function Z(t){return Array.isArray(t)}function pt(t,r){return Array.isArray(t)?t:Array.from({length:r},()=>t)}function Lt(t,r,s){if(!Z(t)&&!Z(r))return s(t,r);const n=Z(t)?t:pt(t,Z(r)?r.length:1),a=Z(r)?r:pt(r,n.length);if(n.length!==a.length)throw new Error(`Vector length mismatch: ${n.length} vs ${a.length}`);return n.map((i,d)=>s(i,a[d]))}function Ce(t,r){return Lt(t,r,(s,n)=>s+n)}function Se(t,r){return Lt(t,r,(s,n)=>s*n)}function Re(t){return Z(t)?t.every(s=>s===t[0])?ce(t[0]):t.map(s=>ce(s)).join("/"):ce(t)}function ze(t){return Z(t)?t.map(r=>r*100):t*100}function gt(t,r,s="ko_KR"){const n=ve(s),a=t!=null,i=r!=null;if(!a&&!i)return n.stats.abilityPower;const d=t??r;return d===2?t===2&&r===2?n.stats.bonusAttackDamage:n.stats.attackDamage:d===12?t===12&&r===2?n.stats.bonusHealth:n.stats.health:d===1?t===1&&r===2?n.stats.bonusArmor:n.stats.armor:d===6?t===6&&r===2?n.stats.bonusMagicResist:n.stats.magicResist:d===18?t===18&&r===2?n.stats.bonusLifesteal:n.stats.lifesteal:""}function Rt(t,r,s){const n=s==null?void 0:s.DataValues;if(!n)return null;const a=Et(n,t.variable,r.maxrank);if(a==null)return null;const i=At(a,t);return Re(i)}function ht(t,r){const s=n=>Number.isFinite(n)?n.toFixed(r).replace(/\.?0+$/,""):String(n);if(Z(t)){const n=t.map(d=>s(d)),a=n[0];return n.every(d=>d===a)?a:n.join("/")}return s(t)}function br(t,r,s,n="ko_KR"){const a=s==null?void 0:s.mSpellCalculations,i=s==null?void 0:s.DataValues;if(!a)return null;const d=Object.entries(a).find(([u])=>u!=null&&u.toLowerCase()===t.variable.toLowerCase());if(!d)return null;const[c]=d;function p(u){if(!u||typeof u!="string")return F.debug(`DataValue name is invalid: ${u}`),null;if(!i)return F.debug("dataValues is undefined"),null;const N=Et(i,u,r.maxrank);return N??(F.debug(`DataValue "${u}" missing`),null)}function g(u,N=new Set){var S;if(!a)throw new Error("spellCalcs is undefined");const x=a[u];if(!x)throw new Error(`SpellCalculation "${u}" not found`);if(N.has(u))throw new Error(`Circular reference in mSpellCalculations: ${u}`);if(N.add(u),x.__type==="GameCalculationModified"){const k=x;if(!k.mModifiedGameCalculation)throw new Error("mModifiedGameCalculation is missing");const P=g(k.mModifiedGameCalculation,N);if(!k.mMultiplier)return P;let $=null;if(k.mMultiplier.mDataValue){if($=p(k.mMultiplier.mDataValue),$==null)return P}else k.mMultiplier.mNumber!=null&&($=k.mMultiplier.mNumber);if($==null)return P;const B=Se(P.base,$),I=P.statParts.map(M=>({name:M.name,ratio:Se(M.ratio,$)}));return{base:B,statParts:I,isPercent:P.isPercent,precision:P.precision}}if(x.__type==="GameCalculation"){const k=x,P=k.mFormulaParts??[];let $=0;const B=[],I=!!k.mDisplayAsPercent;if(P.length===1&&P[0].__type==="ByCharLevelBreakpointsCalculationPart"&&k.mSimpleTooltipCalculationDisplay===6){const V=P[0],D=V.mLevel1Value??0;let L=D;for(const J of V.mBreakpoints??[])typeof J.mAdditionalBonusAtThisLevel=="number"&&(L+=J.mAdditionalBonusAtThisLevel);return{base:[D,L],statParts:[],isPercent:I,isBreakpointRange:!0,precision:void 0}}if(P.length===1&&P[0].__type==="ByCharLevelBreakpointsCalculationPart"&&I){const V=P[0],D=V.mLevel1Value??0,L=V.mInitialBonusPerLevel??0,R=(V.mBreakpoints??[])[0];if(L!==0&&(R!=null&&R.mLevel)){const z=R.mLevel-1,J=Math.max(z-1,0),re=D+J*L;return{base:[D,re],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}}if(P.length===1&&P[0].__type==="ByCharLevelInterpolationCalculationPart"&&I){const V=P[0],D=V.mStartValue??0,L=V.mEndValue??D;return{base:[D,L],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}for(const V of P){const D=V.__type;if(D==="NamedDataValueCalculationPart"){const L=V;if(!L.mDataValue){F.debug("NamedDataValueCalculationPart missing mDataValue",V);continue}const R=p(L.mDataValue);if(R==null)continue;$=Ce($,R)}else if(D==="EffectValueCalculationPart"){const R=V.mEffectIndex??0,z=((S=r.effectBurn)==null?void 0:S[R])??null;if(!z)F.debug(`EffectValueCalculationPart: effectBurn[${R}] is missing`,{spellId:r.id});else{const J=z.split("/").map(re=>parseFloat(re)).filter(re=>!Number.isNaN(re));if(J.length>0){const re=J.length>r.maxrank?J.slice(0,r.maxrank):J;$=Ce($,re)}}}else if(D==="StatByNamedDataValueCalculationPart"){const L=V;if(!L.mDataValue){F.debug("StatByNamedDataValueCalculationPart missing mDataValue",V);continue}const R=p(L.mDataValue);if(R==null)continue;const z=gt(L.mStat,L.mStatFormula,n);B.push({name:z,ratio:R})}else if(D==="StatByCoefficientCalculationPart"){const L=V;if(L.mCoefficient==null){F.debug("StatByCoefficientCalculationPart missing mCoefficient",V);continue}const R=gt(L.mStat,L.mStatFormula,n),z=L.mCoefficient;B.push({name:R,ratio:z,isCoefficient:!0})}else if(D==="AbilityResourceByCoefficientCalculationPart"){const L=V;if(L.mCoefficient==null){F.debug("AbilityResourceByCoefficientCalculationPart missing mCoefficient",V);continue}const R=ve(n);let z=R.common.mana;if(r.costType){const ne=r.costType.trim();ne&&!ne.includes("{{")?z=ne:r.resource&&!r.resource.includes("{{")&&(z=r.resource)}else r.resource&&!r.resource.includes("{{")&&(z=r.resource);const re=L.mStatFormula===2?`${R.common.bonus} ${z}`:z,X=L.mCoefficient;B.push({name:re,ratio:X,isCoefficient:!0})}else if(D==="NumberCalculationPart"){const R=V.mNumber??0;$=Ce($,R)}else if(D==="ByCharLevelBreakpointsCalculationPart"){const L=V;let R=L.mLevel1Value||0;for(const z of L.mBreakpoints??[])z.mAdditionalBonusAtThisLevel!=null&&(R+=z.mAdditionalBonusAtThisLevel);$=Ce($,R)}else if(D==="ProductOfSubPartsCalculationPart"){const L=V,R=X=>{var Te;if(!X||!X.__type)return 0;const ne=X.__type;if(ne==="NamedDataValueCalculationPart"){const H=X;if(!H.mDataValue)return F.debug("ProductOfSubPartsCalculationPart: NamedDataValueCalculationPart missing mDataValue",X),0;const Q=p(H.mDataValue);return Q??0}if(ne==="NumberCalculationPart")return X.mNumber??0;if(ne==="EffectValueCalculationPart"){const Q=X.mEffectIndex??0,de=((Te=r.effectBurn)==null?void 0:Te[Q])??null;if(!de)return F.debug(`ProductOfSubPartsCalculationPart: EffectValueCalculationPart missing effectBurn[${Q}]`,{spellId:r.id}),0;let ye;if(de.includes("/")){const oe=de.split("/").map(we=>Number.parseFloat(we)).filter(we=>!Number.isNaN(we));if(oe.length===0)return 0;ye=oe.length===1?oe[0]:oe}else{const oe=Number.parseFloat(de);if(Number.isNaN(oe))return 0;ye=oe}return ye}return F.debug(`ProductOfSubPartsCalculationPart: unsupported sub part type "${ne}"`,X),0},z=R(L.mPart1),J=R(L.mPart2),re=Se(z,J);$=Ce($,re)}}let M=$,O=B;if(k.mMultiplier){let V=null;k.mMultiplier.mDataValue?(V=p(k.mMultiplier.mDataValue),V==null&&(V=null)):k.mMultiplier.mNumber!=null&&(V=k.mMultiplier.mNumber),V!=null&&(M=Se(M,V),O=O.map(D=>({...D,ratio:Se(D.ratio,V)})))}let T;return typeof k.mPrecision=="number"&&k.mPrecision>=0?T=k.mPrecision+1:T=void 0,{base:M,statParts:O,isPercent:I,precision:T}}throw new Error(`Unsupported mSpellCalculation type: ${x.__type}`)}let b;try{b=g(c)}catch(u){return F.error("Failed to evaluate calculation:",u),null}let w;const C=b.precision;b.isPercent?C!=null?Z(b.base)?w=b.base.map(u=>u*100):w=b.base*100:w=ze(b.base):w=b.base;const j=b.statParts.map(u=>{if(u.isCoefficient){const N=C!=null?Z(u.ratio)?u.ratio.map(x=>x*100):u.ratio*100:ze(u.ratio);return{...u,ratio:N}}if(C!=null){const N=Z(u.ratio)?u.ratio.map(x=>x*100):u.ratio*100;return{...u,ratio:N}}return{...u,ratio:ze(u.ratio)}});let y=null;const f=Z(w)&&w.length>0&&w.every(u=>u===0),o=!Z(w)&&w===0;if(!f&&!o)if(b.isCharLevelRange&&Z(w)&&w.length===2){const[u,N]=w,x=ce(u),S=ce(N);y=`(${x}% ~ ${S}%)`}else if(b.isBreakpointRange&&Z(w)&&w.length===2){const[u,N]=w,x=ce(u),S=ce(N);y=b.isPercent?`(${x}% ~ ${S}%)`:`(${x} ~ ${S})`}else{const u=C!=null?ht(w,C):Re(w);y=b.isPercent?`${u}%`:u}const l=j.map(u=>{const N=C!=null?ht(u.ratio,C):Re(u.ratio);return u.name?`(${N}% ${u.name})`:`(${N}%)`}),m=[];if(y&&m.push(y),m.push(...l),m.length===0)return null;const v=m.join(" + ");return m.length===1?v:`(${v})`}function jr(t,r){return!Number.isFinite(r)||r<0?t:t.replace(/-?\d+(?:\.\d+)?/g,s=>{const n=Number.parseFloat(s);return Number.isFinite(n)?n.toFixed(r):s})}function Bt(t,r,s,n="ko_KR"){if(!r)return t;let a=t;a=a.replace(/(}})\s*\+\s*(\S)/g,"$1 + $2").replace(/(\S)\s*\+\s*({{)/g,"$1 + $2").replace(/(\S)\s*~\s*(\S)/g,"$1 ~ $2"),a=a.replace(/\{\{([^}]*\{\{[^}]*}}[^}]*)}}/g,()=>""),a=a.replace(/\{\{Spell_[^}]*Tooltip[^}]*}}/gi,""),a=a.replace(/\{\{spellmodifierdescriptionappend}}/gi,"");const i=/\{\{([^}]+)}}/g;return a=a.replace(i,(d,c)=>{const p=c.trim();if(p==="spellmodifierdescriptionappend"||p.includes("gamemodeinteger")||p.includes("Spell_")&&p.includes("Tooltip"))return"";let g=p,b;const w=/^([a-zA-Z_][a-zA-Z0-9_]*)(?:\.(\d+))(.*)$/.exec(p);if(w){const[,j,y,f]=w,o=Number.parseInt(y,10);Number.isFinite(o)&&(b=o,g=`${j}${f}`)}const C=Nr(g,r,s,n);return C!==null?b!==void 0?jr(C,b):C:""}),a=a.replace(/\{\{\s*\}/g,""),a=a.replace(/\}\}/g,""),a=a.replace(/\{\{/g,""),a=a.replace(/%[^\s:%]+:[^\s%]+%/g,""),a=a.replace(/\s+%\s+/g," "),a=a.replace(new RegExp("(?<!\\d)\\s*%\\s*(?!\\d)","g"),""),a=a.replace(/^\s*%\s*(?!\d)/g,""),a=a.replace(new RegExp("(?<!\\d)\\s*%\\s*$","g"),""),a=a.replace(/[^\S\r\n]+/g," "),a}function Nr(t,r,s,n="ko_KR"){const a=$t(t),i=vr(a,r,s);if(i!==null)return i;const d=Rt(a,r,s);return d!==null?d:br(a,r,s,n)}function vr(t,r,s){const n=t.variable,a=/^e(\d+)$/i.exec(n);if(!a)return null;const i=Number.parseInt(a[1],10);if(!Number.isFinite(i)||i<=0)return null;const d=(s==null?void 0:s.effectBurn)??r.effectBurn;if(!d)return null;const c=d[i];if(!c)return null;let p;if(c.includes("/")){const b=c.split("/").map(w=>Number.parseFloat(w)).filter(w=>!Number.isNaN(w));if(b.length===0)return null;p=b.length===1?b[0]:b}else{const b=Number.parseFloat(c);if(Number.isNaN(b))return null;p=b}const g=At(p,t);return Re(g)}function Oe(t,r,s,n="ko_KR"){if(!t)return"";let a=t;return a=gr(a),a=Bt(a,r,s,n),a=hr(a),a=a.replace(/\n/g,"<br />"),a}function bt(t,r,s="ko_KR"){const n=ve(s);if(!t.leveltip||!t.leveltip.label||!t.leveltip.effect)return"";let a;r&&(r.DataValues?a=r:a={DataValues:r});const{label:i,effect:d}=t.leveltip,c=[];for(let p=0;p<i.length&&p<d.length;p++){const g=i[p],w=d[p].match(/\{\{\s*([^}]+)\s*\}\}/);if(!w)continue;const C=w[1].trim();let j=null;if(a)try{const o=$t(C),l=Rt(o,t,a);if(l&&l.trim()!==""){let m=l;(g.includes("%")||g.toLowerCase().includes("percent")||g.toLowerCase().includes("퍼센트")||g.toLowerCase().includes("둔화"))&&!m.includes("%")&&(m=m.split("/").map(x=>x&&`${x}%`).join("/"));let u=n.common.mana;if(t.costType){const x=t.costType.trim();x&&!x.includes("{{")?u=x:t.resource&&!t.resource.includes("{{")&&(u=t.resource)}else t.resource&&!t.resource.includes("{{")&&(u=t.resource);const N=g.replace("@AbilityResourceName@",u);if(N.includes("{{")||N.includes("}}"))continue;c.push(`${N}: [${m}]`);continue}}catch{}const y=C;j=null;const f=y.match(/^e(\d+)$/i);if(f){const o=parseInt(f[1]);if(t.effectBurn&&t.effectBurn.length>o){const l=t.effectBurn[o];l&&l!==null&&l!=="0"&&(j=l)}}else if(y.toLowerCase()==="cost"||y.toLowerCase().includes("cost"))t.costBurn&&(j=t.costBurn);else if(y.toLowerCase().includes("cooldown"))t.cooldownBurn&&(j=t.cooldownBurn);else if(y.toLowerCase().includes("ammorechargetime")||y.toLowerCase().includes("ammorecharge")){const o=(r==null?void 0:r.DataValues)||r;if(o&&o.mAmmoRechargeTime){const l=o.mAmmoRechargeTime;if(Array.isArray(l)&&l.length>1){const v=l.slice(1).map(N=>typeof N=="number"?N:parseFloat(String(N))),u=xt(v,t.maxrank,!1);u&&(j=u)}}}if(j){const o=xt(j.includes("/")?j.split("/"):[j],t.maxrank);if(o){let l=n.common.mana;if(t.costType){const u=t.costType.trim();u&&!u.includes("{{")?l=u:t.resource&&!t.resource.includes("{{")&&(l=t.resource)}else t.resource&&!t.resource.includes("{{")&&(l=t.resource);const m=g.replace("@AbilityResourceName@",l);if(m.includes("{{")||m.includes("}}"))continue;let v=o;(g.includes("%")||g.toLowerCase().includes("slow")||g.toLowerCase().includes("둔화"))&&(o.includes("%")||(v=o.split("/").map(u=>`${u}%`).join("/"))),c.push(`${m}: [${v}]`)}}}return c.length===0?"":c.join("<br />")}function yr(t,r,s="ko_KR"){var c,p;const n=ve(s);if(!t||!t.cooldown||!Array.isArray(t.cooldown)||t.cooldown.length===0)return null;const a=((c=r==null?void 0:r.communityDragonData)==null?void 0:c.DataValues)||(r==null?void 0:r.communityDragonData),i=a==null?void 0:a.mAmmoRechargeTime;if(t.cooldown[0]===0&&i&&Array.isArray(i)&&i.length>1&&i){const g=i[1],b=((p=t.effectBurn)==null?void 0:p[1])||"3";return`${n.common.rechargeTime} ${g}${n.common.seconds} (${n.common.max}: ${b}${n.common.items})`}if(t.cooldownBurn){const g=t.cooldownBurn.split("/");return g.length>1&&g.every(b=>b===g[0])?`${g[0]}${n.common.seconds}`:`${t.cooldownBurn}${n.common.seconds}`}if(t.cooldown&&t.cooldown.length>0){const g=t.cooldown[0];return t.cooldown.every(b=>b===g)?`${g}${n.common.seconds}`:`${t.cooldown.join("/")}${n.common.seconds}`}return null}function me(t){if(!t)return t;let r=t.replace(/\(\s*\)/g,"");return r=r.replace(/\s{2,}/g," ").trim(),r}function wr(t,r,s="ko_KR"){var c;const n=ve(s);if(!t)return null;const a=Array.isArray(t.cost)&&t.cost.length>0,i=a&&t.cost.every(p=>p===0),d=t.costBurn==="0";if((d||i)&&typeof t.resource=="string"&&t.resource.includes("{{")){const p=t.resource.trim(),g=((c=r==null?void 0:r.communityDragonData)==null?void 0:c.DataValues)||(r==null?void 0:r.communityDragonData);if(g){const w=Bt(p,t,{DataValues:g}).trim();if(w)return me(w)}return me(n.common.noCost)}if(d||i)return me(n.common.noCost);if(t.costBurn){const p=t.costBurn.split("/");return p.length>1&&p.every(g=>g===p[0])?me(`${n.common.mana} ${p[0]}`):me(`${n.common.mana} ${t.costBurn}`)}if(a){const p=t.cost[0];return t.cost.every(g=>g===p)?me(`${n.common.mana} ${p}`):me(`${n.common.mana} ${t.cost.join("/")}`)}return null}function _t(t,r,s){var c;const n=((c=s==null?void 0:s.communityDragonData)==null?void 0:c.DataValues)||(s==null?void 0:s.communityDragonData),a=n==null?void 0:n.mAmmoRechargeTime,i=t.cooldown[r-1];return i===0&&a&&Array.isArray(a)&&a.length>r&&a?a[r]!==void 0?String(a[r]):"":i!=null?String(i):""}function ie({skill:t,skillIdx:r,version:s,spellData:n,isPassive:a,passiveName:i,passiveDescription:d,passiveImageFull:c,size:p="default"}){const{t:g,lang:b}=te(),C=tt()==="mobile",[j,y]=Y.useState(!1),f=Y.useRef(null),o=a&&c?null:yr(t,n,b),l=a&&c?null:wr(t,n,b),m=p==="small",v=m?"min-w-6 min-h-6 w-6 h-6":"min-w-8 min-h-8 w-8 h-8",u=m?"text-[8px]":"text-[9px]",N=e.jsx("div",{ref:f,className:`flex flex-col items-center gap-0.5 p-1 -m-1 touch-manipulation ${C?"cursor-pointer":"cursor-help"}`,onClick:S=>{C&&(S.stopPropagation(),y(k=>!k))},onTouchStart:S=>{C&&(S.stopPropagation(),y(k=>!k))},children:a&&c?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:Jt(s,c),alt:"Passive",className:E(v,"rounded")}),e.jsx("span",{className:E(u,"font-semibold"),children:"P"})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:ot(s,t.id),alt:ge[r],className:E(v,"rounded")}),e.jsx("span",{className:E(u,"font-semibold"),children:ge[r]})]})}),x=()=>a&&c?e.jsxs(e.Fragment,{children:[i&&e.jsx("div",{className:`font-semibold text-sm ${C?"pr-10":""}`,children:i}),d&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Oe(d,void 0,void 0,b)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground leading-relaxed border-t pt-3 mt-3 flex items-start gap-1.5",children:[e.jsx(ut,{className:"w-3 h-3 mt-0.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:g.skillTooltip.warningPassive})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex items-start gap-3 border-b pb-3 ${C?"pr-10":""}`,children:[e.jsx("img",{src:ot(s,t.id),alt:ge[r],className:"w-12 h-12 min-w-12 min-h-12 rounded flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:t.name&&e.jsxs("div",{className:"font-semibold text-sm",children:["[",ge[r],"] ",t.name]})}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[o&&e.jsx("div",{className:"text-xs text-muted-foreground",children:o.includes(" (")?e.jsxs(e.Fragment,{children:[o.split(" (")[0],e.jsx("br",{}),"(",o.split(" (")[1]]}):o}),l&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 whitespace-nowrap",children:l})]})]}),t.description&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Oe(t.description,t,n==null?void 0:n.communityDragonData,b).replace(/<br\s*\/?>/gi," ")}})}),t.tooltip&&e.jsx("div",{className:"text-xs text-muted-foreground leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Oe(t.tooltip,t,n==null?void 0:n.communityDragonData,b)}})}),n&&bt(t,n.communityDragonData,b)&&e.jsx("div",{className:"text-[11px] leading-relaxed text-muted-foreground border-t pt-3 mt-3",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:bt(t,n.communityDragonData,b)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground leading-relaxed border-t pt-3 mt-3 flex items-start gap-1.5",children:[e.jsx(ut,{className:"w-3 h-3 mt-0.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:g.skillTooltip.warningSkill})]})]});return C?e.jsxs(e.Fragment,{children:[N,e.jsx(wt,{open:j,onOpenChange:y,children:e.jsxs(Xt,{className:"w-[calc(100vw-32px)] max-w-lg h-[70vh] max-h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(Ct,{children:[e.jsx(St,{children:a&&c?`${i||g.skillTooltip.passive} ${g.skillTooltip.skillInfo}`:`[${ge[r]}] ${t.name||g.skillTooltip.skill} ${g.skillTooltip.skillInfo}`}),e.jsx(kt,{children:a&&c?`${i||g.skillTooltip.passive} ${g.skillTooltip.skillDescription}`:`[${ge[r]}] ${t.name||g.skillTooltip.skill} ${g.skillTooltip.skillDescription}`})]}),e.jsx(Tt,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4 flex flex-col gap-3",children:x()})})]})})]}):a&&c?e.jsxs(lt,{children:[e.jsx(it,{asChild:!0,children:N}),e.jsx(ct,{side:"top",align:"center",sideOffset:8,className:"max-w-xs p-3 space-y-2",children:x()})]}):e.jsxs(lt,{children:[e.jsx(it,{asChild:!0,children:N}),e.jsx(ct,{side:"top",align:"center",sideOffset:8,className:"max-w-sm p-4 space-y-3",children:x()})]})}const Dt=h.createContext(void 0);function Cr({initialDDragonVersion:t=null,initialCDragonVersion:r=null,children:s}){const[n,a]=h.useState(t??null),[i,d]=h.useState(r??null),c=h.useMemo(()=>({ddragonVersion:n,cdragonVersion:i,setDDragonVersion:a,setCDragonVersion:d}),[n,i]);return e.jsx(Dt.Provider,{value:c,children:s})}function nt(){const t=h.useContext(Dt);if(!t)throw new Error("useVersionContext must be used within VersionProvider");return t}function Sr({champions:t,version:r,championList:s,onAddChampion:n,onRemoveChampion:a,onReorderChampions:i,vsMode:d}){const{t:c}=te(),{cdragonVersion:p,setCDragonVersion:g}=nt(),[b,w]=h.useState(!1),[C,j]=Y.useState({}),y=qe(he(Ye,{activationConstraint:{distance:8}}),he(Ze,{coordinateGetter:Ue})),f=x=>{},o=x=>{const{active:S,over:k}=x;if(k&&S.id!==k.id&&i){const P=t.findIndex(B=>B.id===S.id),$=t.findIndex(B=>B.id===k.id);P!==-1&&$!==-1&&i(P,$)}};Y.useEffect(()=>{const x=async()=>{try{const S=await Pt(t,r);if(j(S),!p)try{let k=null;for(const P of Object.keys(S)){const $=S[P];if($&&$.length>0&&(k=$[0].cdragonVersion??null,k))break}k&&g(k)}catch(k){F.warn("Failed to extract CDragon version from integrated spell data:",k)}}catch(S){F.warn("Failed to load integrated spell data:",S),j({})}};t.length>0&&x()},[t,r]);const l=Y.useMemo(()=>Math.max(...t.map(x=>x.spells?Math.max(...x.spells.map(S=>S.maxrank)):0)),[t]),m=Y.useCallback((x,S)=>{const k=C[x];return!k||k.length<=S?null:k[S]},[C]),v=Y.useMemo(()=>Array.from({length:l},(x,S)=>{const k=S+1;return{level:k,skills:t.map(P=>P.spells?P.spells.map(($,B)=>{const I=m(P.id,B),M=_t($,k,I);return{skill:$,cooldown:M}}):null)}}),[t,l,m]),u=({champion:x,children:S,className:k})=>{const{setNodeRef:P,transform:$,transition:B,isDragging:I}=be({id:x.id,disabled:!0}),O={transform:$?je.Transform.toString($):void 0,transition:I?B:void 0,opacity:I?.5:1};return e.jsx(_,{ref:P,style:O,className:k,children:S})},N=({champion:x,index:S})=>{const{attributes:k,listeners:P,setNodeRef:$,transform:B,transition:I,isDragging:M}=be({id:x.id}),T={transform:B?je.Transform.toString(B):void 0,transition:M?I:void 0,opacity:M?.5:1};return e.jsx(K,{ref:$,style:T,className:E("text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] select-none",S<t.length-1&&"border-r border-border/30",M&&"z-50"),children:e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 relative",children:[i&&e.jsx("button",{...k,...P,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity -ml-1","aria-label":"Drag to reorder",children:e.jsx(_e,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ee(r,x.id),alt:x.name,className:"w-8 h-8 rounded-full"}),a&&e.jsx(se,{variant:"ghost",size:"icon",className:E("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:V=>{V.stopPropagation(),a(x.id)},"aria-label":`Remove ${x.name}`,children:e.jsx(Ne,{className:"h-2.5 w-2.5"})})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("div",{className:"text-[11px] font-semibold leading-tight text-foreground",children:x.name}),e.jsx("div",{className:"text-[9px] text-muted-foreground leading-tight",children:x.title})]})]})})};return e.jsx(Ke,{delayDuration:0,skipDelayDuration:150,children:e.jsxs("div",{className:"relative",children:[e.jsx(Je,{sensors:y,collisionDetection:Xe,onDragStart:f,onDragEnd:o,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(fe,{className:"border-collapse table-fixed w-auto",children:[e.jsx(xe,{children:e.jsxs(G,{className:"border-b border-border/30 select-none",children:[e.jsx(K,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[80px] min-w-[80px] border-r border-border/30 select-none",style:{left:0},children:c.common.level}),e.jsx(Qe,{items:t.map(x=>x.id),strategy:et,children:t.map((x,S)=>e.jsx(N,{champion:x,index:S},x.id))}),n&&e.jsx(K,{className:"text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] border-l border-border/30 select-none",children:e.jsxs(se,{onClick:()=>w(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Be,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsxs(pe,{children:[e.jsxs(G,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(_,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:c.skills.label}),t.map((x,S)=>{var k;return e.jsx(u,{champion:x,className:E("p-2",S<t.length-1&&"border-r border-border/30"),children:e.jsxs("div",{className:"flex justify-center gap-1.5",children:[x.passive&&e.jsx(ie,{isPassive:!0,passiveName:x.passive.name,passiveDescription:x.passive.description,passiveImageFull:x.passive.image.full,skill:{},skillIdx:0,version:r}),(k=x.spells)==null?void 0:k.map((P,$)=>{const B=m(x.id,$);return e.jsx(ie,{skill:P,skillIdx:$,version:r,spellData:B},P.id)})]})},x.id)}),n&&e.jsx(_,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]}),v.map((x,S)=>e.jsxs(G,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(_,{className:E("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",S===v.length-1&&"rounded-bl-lg"),style:{left:0},children:[x.level,c.common.level]}),x.skills.map((k,P)=>{const $=t[P];return e.jsx(u,{champion:$,className:E("p-2",P<t.length-1&&"border-r border-border/30"),children:k?e.jsxs("div",{className:"flex justify-center gap-1.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),k.map((B,I)=>e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs font-semibold",children:B.cooldown!==""?`${B.cooldown}${c.common.seconds}`:"-"})},I))]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})},$.id)}),n&&e.jsx(_,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]},x.level))]})]})})}),b&&n&&s&&e.jsx(De,{championList:s,selectedChampions:t,onSelect:x=>{n(x)},onClose:()=>w(!1)})]})})}function kr({champions:t,version:r,vsMode:s}){var w,C;const{t:n}=te(),{cdragonVersion:a,setCDragonVersion:i}=nt(),[d,c]=Y.useState({});Y.useEffect(()=>{const j=async()=>{try{const y=await Pt(t,r);if(c(y),!a)try{let f=null;for(const o of Object.keys(y)){const l=y[o];if(l&&l.length>0&&(f=l[0].cdragonVersion??null,f))break}f&&i(f)}catch(f){F.warn("Failed to extract CDragon version from integrated spell data (mobile):",f)}}catch(y){F.warn("Failed to load integrated spell data:",y),c({})}};t.length>0&&j()},[t,r]);const p=Y.useMemo(()=>Math.max(...t.map(j=>j.spells?Math.max(...j.spells.map(y=>y.maxrank)):0)),[t]),g=Y.useCallback((j,y)=>{const f=d[j];return!f||f.length<=y?null:f[y]},[d]),b=Y.useMemo(()=>Array.from({length:p},(j,y)=>{const f=y+1;return{level:f,skills:t.map(o=>o.spells?o.spells.map((l,m)=>{const v=g(o.id,m),u=_t(l,f,v);return{skill:l,cooldown:u}}):null)}}),[t,p,g]);if(s&&t.length===2){const j=s.championA,y=s.championB;return e.jsx(Ke,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(fe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(xe,{children:e.jsxs(G,{className:"border-b border-border/30 select-none",children:[e.jsx(K,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:n.common.level}),e.jsx(K,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:ee(r,j.id),alt:j.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:j.name})]})}),e.jsx(K,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(K,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:ee(r,y.id),alt:y.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:y.name})]})})]})}),e.jsxs(pe,{children:[e.jsxs(G,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(_,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:n.skills.label}),e.jsx(_,{className:"p-1.5 border-r border-border/30",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[j.passive&&e.jsx(ie,{isPassive:!0,passiveName:j.passive.name,passiveDescription:j.passive.description,passiveImageFull:j.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(w=j.spells)==null?void 0:w.map((f,o)=>{const l=g(j.id,o);return e.jsx(ie,{skill:f,skillIdx:o,version:r,spellData:l,size:"small"},f.id)})]})}),e.jsx(_,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(_,{className:"p-1.5",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[y.passive&&e.jsx(ie,{isPassive:!0,passiveName:y.passive.name,passiveDescription:y.passive.description,passiveImageFull:y.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(C=y.spells)==null?void 0:C.map((f,o)=>{const l=g(y.id,o);return e.jsx(ie,{skill:f,skillIdx:o,version:r,spellData:l,size:"small"},f.id)})]})})]}),b.map((f,o)=>{const l=f.skills[0],m=f.skills[1];return e.jsxs(G,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(_,{className:E("p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",o===b.length-1&&"rounded-bl-lg"),style:{left:0},children:[f.level,n.common.level]}),e.jsx(_,{className:"p-1.5 border-r border-border/30",children:l?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),l.map((v,u)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:v.cooldown!==""?`${v.cooldown}${n.common.seconds}`:"-"})},u))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),e.jsx(_,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(_,{className:"p-1.5",children:m?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),m.map((v,u)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:v.cooldown!==""?`${v.cooldown}${n.common.seconds}`:"-"})},u))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})})]},f.level)})]})]})})})})})})}return e.jsx(Ke,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(fe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(xe,{children:e.jsxs(G,{className:"border-b border-border/30 select-none",children:[e.jsx(K,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[60px] min-w-[60px] border-r border-border/30 select-none",style:{left:0},children:n.common.level}),t.map(j=>e.jsx(K,{className:"text-center p-2 text-xs font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:ee(r,j.id),alt:j.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:j.name})]})},j.id))]})}),e.jsxs(pe,{children:[e.jsxs(G,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(_,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:n.skills.label}),t.map(j=>{var y;return e.jsx(_,{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[j.passive&&e.jsx(ie,{isPassive:!0,passiveName:j.passive.name,passiveDescription:j.passive.description,passiveImageFull:j.passive.image.full,skill:{},skillIdx:0,version:r}),(y=j.spells)==null?void 0:y.map((f,o)=>{const l=g(j.id,o);return e.jsx(ie,{skill:f,skillIdx:o,version:r,spellData:l},f.id)})]})},j.id)})]}),b.map((j,y)=>e.jsxs(G,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(_,{className:E("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",y===b.length-1&&"rounded-bl-lg"),style:{left:0},children:[j.level,n.common.level]}),j.skills.map((f,o)=>e.jsx(_,{className:"p-2",children:f?e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})}),f.map((l,m)=>e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] font-semibold",children:l.cooldown!==""?`${l.cooldown}${n.common.seconds}`:"-"})},m))]}):e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})},t[o].id))]},j.level))]})]})})})})})})}function Tr({champions:t,version:r,activeTab:s,championList:n,onAddChampion:a,onRemoveChampion:i,onReorderChampions:d,vsMode:c}){const p=tt();if(t.length===0)return null;const g=p==="mobile";return e.jsx(rt,{children:e.jsx(st,{className:"p-0",children:s==="stats"?g?e.jsx(xr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:i,vsMode:c}):e.jsx(fr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:i,onReorderChampions:d}):g?e.jsx(kr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:i,vsMode:c}):e.jsx(Sr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:i,onReorderChampions:d})})})}const Vr=Y.memo(Tr),Pr=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;function $r({version:t,initialTabs:r,initialSelectedTabId:s}){const[n,a]=h.useState([]),i=h.useRef([]),[d,c]=h.useState(null),[p,g]=h.useState(!1),[b,w]=h.useState(null);h.useEffect(()=>{i.current=n},[n]),h.useEffect(()=>{t&&(r&&r.length>0&&a(r),s&&c(s))},[t,r,s]),h.useEffect(()=>{try{n.length>0?He($e,JSON.stringify(n)):le($e)}catch(m){F.error("Failed to save tabs to storage:",m)}},[n]),h.useEffect(()=>{try{d?He(Ee,d):le(Ee)}catch(m){F.error("Failed to save selected tab ID to storage:",m)}},[d]),h.useEffect(()=>{!d&&n.length>0&&c(n[0].id)},[n,d]),h.useEffect(()=>{d&&!n.find(m=>m.id===d)&&c(n.length>0?n[0].id:null)},[n,d]);const C=h.useCallback(m=>{a(v=>{const u=v.findIndex(x=>x.id===m),N=v.filter(x=>x.id!==m);return c(x=>{if(x&&x!==m&&N.some($=>$.id===x))return x;if(N.length===0)return null;const S=u>0?u-1:0;return(N[S]??N[0]).id}),N})},[c]),j=h.useCallback(m=>{a(v=>[...v,m]),c(m.id)},[]),y=h.useCallback((m,v)=>{a(u=>u.map(N=>N.id===m?v(N):N))},[]),f=h.useCallback((m,v)=>{a(u=>{const N=u.findIndex(S=>S.id===m);if(N===-1)return[...u,v];const x=[...u];return x[N]=v,x}),c(v.id)},[]),o=h.useCallback(()=>{a([]),c(null),le($e),le(Ee)},[]),l=h.useCallback(m=>{const{active:v,over:u}=m;u&&v.id!==u.id&&a(N=>{const x=N.findIndex(k=>k.id===v.id),S=N.findIndex(k=>k.id===u.id);return x===-1||S===-1?N:jt(N,x,S)})},[]);return{tabs:n,setTabs:a,tabsRef:i,selectedTabId:d,setSelectedTabId:c,showVsSelector:p,setShowVsSelector:g,vsSelectorMode:b,setVsSelectorMode:w,removeTab:C,addTab:j,updateTab:y,replaceTab:f,resetTabs:o,handleDragEnd:l,generateTabId:Pr}}function Er({version:t,lang:r,championList:s,tabs:n,initialSelectedChampions:a}){const[i,d]=h.useState([]),[c,p]=h.useState(!0);h.useEffect(()=>{if(!t||!s){setTimeout(()=>{p(!1)},0);return}try{if(a&&a.length>0){const f=a.map(o=>{const l=s.find(m=>m.id===o.id||m.key===o.key);return l?{...l,isLoading:!1}:null}).filter(o=>o!==null);f.length>0&&setTimeout(()=>{d(f),f.forEach(o=>{o.id&&(d(l=>l.map(m=>m.id===o.id?{...m,isLoading:!0}:m)),dt(t,r,o.id).then(l=>{d(m=>m.map(v=>v.id===o.id?{...v,fullInfo:l,isLoading:!1}:v))}).catch(l=>{F.error("Failed to load champion info:",l),d(m=>m.map(v=>v.id===o.id?{...v,isLoading:!1}:v))}))})},0)}setTimeout(()=>{p(!1)},0)}catch(f){F.error("Failed to load initial selected champions:",f),setTimeout(()=>{p(!1)},0)}},[t,r,s,a]),h.useEffect(()=>{try{if(i.length>0){const f=i.map(({id:o,key:l})=>({id:o,key:l}));He(Ae,JSON.stringify(f))}else le(Ae)}catch(f){F.error("Failed to save champions to storage:",f)}},[i]),h.useEffect(()=>{s&&i.length>0&&setTimeout(()=>{d(f=>f.map(o=>{const l=s.find(m=>m.id===o.id||m.key===o.key);return l?{...o,name:l.name,title:l.title}:o}))},0)},[s,i.length]),h.useEffect(()=>{c||setTimeout(()=>{const f=new Set(n.flatMap(o=>o.champions));d(o=>{if(n.length===0)return o.length>0?[]:o;const l=o.filter(m=>f.has(m.id));return l.length!==o.length?l:o})},0)},[n,c]);const g=h.useCallback(f=>{t&&(d(o=>o.map(l=>l.id===f?{...l,isLoading:!0}:l)),dt(t,r,f).then(o=>{d(l=>l.map(m=>m.id===f?{...m,fullInfo:o,isLoading:!1,skinIndex:0}:m))}).catch(o=>{F.error("Failed to load champion info:",o),d(l=>l.map(m=>m.id===f?{...m,isLoading:!1}:m))}))},[t,r]),b=h.useCallback(f=>{d(o=>{if(o.some(v=>v.id===f.id))return o;const m={...f,isLoading:!0,skinIndex:0};return g(f.id),[...o,m]})},[g]),w=h.useCallback(f=>{d(o=>o.filter(l=>l.id!==f))},[]),C=h.useCallback(()=>{d([]),le(Ae)},[]),j=h.useMemo(()=>i.filter(f=>f.fullInfo&&!f.isLoading),[i]),y=h.useMemo(()=>{const f=new Set(n.filter(o=>o.mode==="normal").flatMap(o=>o.champions));return i.filter(o=>f.has(o.id))},[n,i]);return{selectedChampions:i,setSelectedChampions:d,championsWithFullInfo:j,normalTabChampions:y,addChampionToList:b,removeChampion:w,resetChampions:C,loadChampionInfo:g}}function Ar({onAddClick:t}){const{t:r}=te();return e.jsx(rt,{className:"border-dashed",children:e.jsxs(st,{className:"flex flex-col items-center justify-center py-12 md:py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:e.jsx(ke,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:r.encyclopedia.emptyState.title}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md text-sm mb-4",children:r.encyclopedia.emptyState.description}),e.jsxs(se,{onClick:t,variant:"outline",className:"flex flex-row items-center justify-center gap-2 border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Be,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-primary transition-colors",children:r.encyclopedia.emptyState.addButton})]})]})})}const Lr=Zt,It=h.forwardRef(({className:t,...r},s)=>e.jsx(Nt,{ref:s,className:E("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r}));It.displayName=Nt.displayName;const We=h.forwardRef(({className:t,...r},s)=>e.jsx(vt,{ref:s,className:E("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r}));We.displayName=vt.displayName;const Rr=h.forwardRef(({className:t,...r},s)=>e.jsx(yt,{ref:s,className:E("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r}));Rr.displayName=yt.displayName;function Br({activeTab:t,onTabChange:r,onReset:s}){const{t:n}=te();return e.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-border overflow-x-auto -mx-4 md:mx-0 px-4 md:px-0",children:[e.jsx(Lr,{value:t,onValueChange:a=>r(a),className:"flex-1",children:e.jsxs(It,{className:"inline-flex h-auto items-center justify-start gap-2 bg-transparent p-0 border-0",children:[e.jsx(We,{value:"skills",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:n.encyclopedia.tabs.skills}),e.jsx(We,{value:"stats",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:n.encyclopedia.tabs.stats})]})}),e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:e.jsxs(se,{variant:"ghost",size:"sm",onClick:s,className:"flex items-center gap-1.5 shrink-0 text-muted-foreground hover:text-primary hover:bg-muted/30 border-0",children:[e.jsx(tr,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[10px]",children:n.encyclopedia.reset})]})})]})}const Mt="flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors shrink-0 relative select-none",Ft="bg-primary text-primary-foreground",zt="bg-muted/50 text-muted-foreground",Ot="touch-none cursor-grab active:cursor-grabbing p-0.5 -ml-1 mr-0.5 opacity-60 hover:opacity-100 transition-opacity select-none",Kt="ml-1 p-0.5 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group",_r="ml-1 p-1 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group";function Dr({tab:t,champion:r,version:s,selectedTabId:n,onSelect:a,onRemove:i,onVsClick:d}){const{t:c}=te(),{attributes:p,listeners:g,setNodeRef:b,transform:w,transition:C,isDragging:j}=be({id:t.id}),y={transform:je.Transform.toString(w),transition:C,opacity:j?.5:1},f=n===t.id,o=f?Ft:zt;return e.jsxs("div",{ref:b,style:y,"data-tab-id":t.id,className:E(Mt,o,j&&"z-50"),onClick:l=>{const m=l.target;m.tagName==="BUTTON"||m.closest("button")||a(t.id)},children:[e.jsx("button",{...p,...g,className:Ot,"aria-label":"Drag to reorder",children:e.jsx(_e,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 cursor-pointer select-none",children:[e.jsx("img",{src:ee(s,r.id),alt:r.name,className:"w-5 h-5 rounded-full pointer-events-none select-none",draggable:"false"}),e.jsx("span",{className:"pointer-events-none select-none",children:r.name})]}),e.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),d(t.id)},className:_r,"aria-label":`${c.encyclopedia.vs} with ${r.name}`,title:c.encyclopedia.vsStart,type:"button",children:e.jsx(Le,{className:E("h-3 w-3 transition-colors",f?"text-primary-foreground":"text-muted-foreground")})}),e.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),i(t.id)},className:Kt,"aria-label":`Remove ${r.name}`,type:"button",children:e.jsx(Ne,{className:E("h-3 w-3 transition-colors",f?"text-primary-foreground":"text-muted-foreground")})})]})}function Ir({tab:t,championA:r,championB:s,version:n,selectedTabId:a,onSelect:i,onRemove:d,onChangeChampionA:c,onChangeChampionB:p}){const{t:g}=te(),{attributes:b,listeners:w,setNodeRef:C,transform:j,transition:y,isDragging:f}=be({id:t.id}),o={transform:je.Transform.toString(j),transition:y,opacity:f?.5:1},l=a===t.id,m=l?Ft:zt;return e.jsxs("div",{ref:C,style:o,"data-tab-id":t.id,className:E(Mt,m,f&&"z-50"),children:[e.jsx("button",{...b,...w,className:Ot,"aria-label":"Drag to reorder",children:e.jsx(_e,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 select-none",children:[e.jsx("button",{onClick:v=>{v.preventDefault(),v.stopPropagation(),c(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:ee(n,r.id),alt:r.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})}),e.jsx("button",{onClick:()=>{i(t.id)},className:"text-[10px] font-semibold touch-none select-none",children:g.encyclopedia.vs}),e.jsx("button",{onClick:v=>{v.preventDefault(),v.stopPropagation(),p(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:ee(n,s.id),alt:s.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})})]}),e.jsx("button",{onClick:v=>{v.preventDefault(),v.stopPropagation(),d(t.id)},className:Kt,"aria-label":"Remove VS tab",children:e.jsx(Ne,{className:E("h-3 w-3 transition-colors",l?"text-primary-foreground":"text-muted-foreground")})})]})}function Mr({tabs:t,championsWithFullInfo:r,version:s,selectedTabId:n,sensors:a,onDragEnd:i,onSelectTab:d,onRemoveTab:c,onVsClick:p,onChangeChampionA:g,onChangeChampionB:b,onAddClick:w}){const{t:C}=te(),j=h.useRef(null),y=h.useRef(t.length),f=h.useRef(!1),o=h.useRef((l=!0)=>{if(!j.current||!n)return;const m=j.current.querySelector("[data-radix-scroll-area-viewport]");if(!m)return;const v=m.querySelector(`[data-tab-id="${n}"]`);if(v){const u=v.offsetLeft,N=v.offsetWidth,x=m.offsetWidth,S=u-x/2+N/2;l?m.scrollTo({left:Math.max(0,S),behavior:"smooth"}):m.scrollLeft=Math.max(0,S)}});return h.useEffect(()=>{!f.current&&n&&t.length>0&&(f.current=!0,requestAnimationFrame(()=>{requestAnimationFrame(()=>{o.current(!1)})}))},[n,t.length]),h.useEffect(()=>{if(!j.current)return;const l=j.current.querySelector("[data-radix-scroll-area-viewport]");l&&(t.length>y.current&&l.scrollTo({left:l.scrollWidth,behavior:"smooth"}),y.current=t.length)},[t.length]),h.useEffect(()=>{if(f.current&&n){const l=setTimeout(()=>{o.current(!0)},100);return()=>clearTimeout(l)}},[n]),e.jsx("div",{className:"border-b border-border -mx-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground shrink-0 pl-3",children:C.encyclopedia.champion}),e.jsxs(Tt,{ref:j,type:"scroll",className:"flex-1",children:[e.jsx(Je,{sensors:a,collisionDetection:Xe,onDragEnd:i,children:e.jsx(Qe,{items:t.map(l=>l.id),strategy:et,children:e.jsxs("div",{className:"flex items-center gap-2 w-max select-none pr-2",children:[t.map(l=>{if(l.mode==="vs"){const m=r.find(u=>u.id===l.champions[0]),v=r.find(u=>u.id===l.champions[1]);return!m||!v?null:e.jsx(Ir,{tab:l,championA:m,championB:v,version:s,selectedTabId:n,onSelect:d,onRemove:c,onChangeChampionA:g,onChangeChampionB:b},l.id)}else{const m=r.find(v=>v.id===l.champions[0]);return m?e.jsx(Dr,{tab:l,champion:m,version:s,selectedTabId:n,onSelect:d,onRemove:c,onVsClick:p},l.id):null}}),e.jsxs(se,{onClick:w,variant:"outline",size:"sm",className:"flex items-center gap-1.5 shrink-0 border-2 border-dashed border-muted-foreground/30 hover:border-primary hover:bg-primary/10 hover:text-primary h-auto py-1.5 px-3 transition-colors",children:[e.jsx(Be,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:C.encyclopedia.add})]})]})})}),e.jsx(Qt,{orientation:"horizontal"})]})]})})}function Fr({open:t,vsSelectorMode:r,tabs:s,championList:n,selectedChampions:a,onSelect:i,onClose:d,onOpenChange:c}){const{t:p}=te();if(!t||!r)return null;const g=s.find(w=>w.id===r.tabId);if(!g||r.mode!=="select-second"&&g.mode!=="vs")return null;const b=r.mode==="change-champion-a"?g.champions[1]:g.champions[0];return b?e.jsx(De,{championList:n,selectedChampions:a,onSelect:i,onClose:d,open:t,onOpenChange:c,vsMode:{currentChampionId:b,title:p.encyclopedia.selectOpponent}}):null}function Pe(t){if(!t)return null;const r=t.split(".");return r.length>=2?`${r[0]}.${r[1]}`:t}function zr({lang:t,championList:r,version:s,cdragonVersion:n,initialSelectedChampions:a,initialTabs:i,initialSelectedTabId:d}){const[c,p]=h.useState("skills"),[g,b]=h.useState(!1),C=tt()==="mobile",{cdragonVersion:j}=nt(),{t:y}=te(),{tabs:f,tabsRef:o,selectedTabId:l,setSelectedTabId:m,showVsSelector:v,setShowVsSelector:u,vsSelectorMode:N,setVsSelectorMode:x,removeTab:S,addTab:k,updateTab:P,replaceTab:$,resetTabs:B,handleDragEnd:I,generateTabId:M}=$r({version:s,initialTabs:i,initialSelectedTabId:d}),{selectedChampions:O,setSelectedChampions:T,championsWithFullInfo:V,normalTabChampions:D,addChampionToList:L,removeChampion:R,resetChampions:z}=Er({version:s,lang:t,championList:r,tabs:f,initialSelectedChampions:a}),J=qe(he(Ye,{activationConstraint:{distance:12}}),he(Ze,{coordinateGetter:Ue})),re=h.useCallback((A,W)=>{T(ae=>jt(ae,A,W))},[T]),X=h.useCallback(A=>{if(new Set(O.map(ue=>ue.id)).has(A.id)){const ue=o.current,q=ue.some(U=>U.mode==="normal"&&U.champions.length===1&&U.champions[0]===A.id),Ve=ue.some(U=>U.mode==="vs"&&U.champions.includes(A.id));if(q){const U=f.find(Ie=>Ie.mode==="normal"&&Ie.champions.length===1&&Ie.champions[0]===A.id);U&&S(U.id),Ve||R(A.id);return}if(Ve){const U={mode:"normal",champions:[A.id],id:M()};k(U);return}const at=f.find(U=>U.mode==="normal"&&U.champions.length===1&&U.champions[0]===A.id);at&&S(at.id),R(A.id);return}L(A);const ae={mode:"normal",champions:[A.id],id:M()};k(ae)},[O,f,o,L,R,k,S,M]),ne=h.useCallback(()=>{z(),B(),le(Ae),le($e),le(Ee)},[z,B]),Te=h.useCallback(A=>{if(!N)return;const{mode:W,tabId:ae}=N,ue=f.find(q=>q.id===ae);if(ue){if(W==="select-second"){const q={mode:"vs",champions:[ue.champions[0],A.id],id:M()};$(ae,q),O.some(Ve=>Ve.id===A.id)||L(A)}else W==="change-champion-a"?(P(ae,q=>({...q,champions:[A.id,q.champions[1]]})),O.some(q=>q.id===A.id)||L(A)):W==="change-champion-b"&&(P(ae,q=>({...q,champions:[q.champions[0],A.id]})),O.some(q=>q.id===A.id)||L(A));u(!1),x(null)}},[N,f,O,L,P,$,M]),H=h.useMemo(()=>l&&f.find(A=>A.id===l)||null,[l,f]),Q=h.useMemo(()=>H?H.champions.map(A=>{var W;return(W=V.find(ae=>ae.id===A))==null?void 0:W.fullInfo}).filter(A=>A!==void 0):[],[H,V]),de=h.useMemo(()=>!C||H&&H.mode==="vs"?null:H&&H.mode==="normal"&&Q.length>0?Q[0]:null,[C,H,Q]),ye=h.useCallback(A=>{f.forEach(W=>{W.champions.includes(A)&&S(W.id)}),R(A)},[f,R,S]),oe=h.useCallback(A=>{x({mode:"select-second",tabId:A}),u(!0)},[]),we=h.useCallback(A=>{x({mode:"change-champion-a",tabId:A,championIndex:0}),u(!0)},[]),Ht=h.useCallback(A=>{x({mode:"change-champion-b",tabId:A,championIndex:1}),u(!0)},[]),Gt=h.useMemo(()=>{const A=Pe(s),W=Pe(j);return!A||!W?!1:A!==W},[s,j]);return e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6 lg:px-8 py-4 md:py-5",children:[Gt&&e.jsxs("div",{className:"mb-3 md:mb-4 rounded-md border border-amber-400/60 bg-amber-50/90 px-3 py-2 text-xs md:text-sm text-amber-950 shadow-sm",children:[e.jsx("div",{className:"font-semibold mb-0.5",children:y.versionNotice.title}),e.jsx("div",{className:"text-[11px] md:text-xs text-amber-900/90 mb-1.5",children:y.versionNotice.description}),e.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5 text-[10px] md:text-[11px] text-amber-900/80",children:[e.jsxs("span",{children:[e.jsxs("span",{className:"font-semibold",children:[y.versionNotice.cdragonLabel,":"]})," ",Pe(j)??"-"]}),e.jsxs("span",{children:[e.jsxs("span",{className:"font-semibold",children:[y.versionNotice.ddragonLabel,":"]})," ",Pe(s)??"-"]})]})]}),g&&e.jsx(De,{championList:r,selectedChampions:D,onSelect:X,onClose:()=>b(!1),open:g,onOpenChange:b}),e.jsx(Fr,{open:v,vsSelectorMode:N,tabs:f,championList:r,selectedChampions:O,onSelect:Te,onClose:()=>{u(!1),x(null)},onOpenChange:A=>{u(A),A||x(null)}}),O.length>0&&V.length>0&&e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx(Br,{activeTab:c,onTabChange:p,onReset:ne}),C&&f.length>0&&e.jsx(Mr,{tabs:f,championsWithFullInfo:V,version:s,selectedTabId:l,sensors:J,onDragEnd:I,onSelectTab:m,onRemoveTab:S,onVsClick:oe,onChangeChampionA:we,onChangeChampionB:Ht,onAddClick:()=>b(!0)}),e.jsx(Vr,{champions:C&&H&&H.mode==="vs"&&Q.length===2?Q:C&&de?[de]:V.map(A=>A.fullInfo),version:s,activeTab:c,championList:r,onAddChampion:C?void 0:X,onRemoveChampion:ye,onReorderChampions:C?void 0:re,vsMode:C&&H&&H.mode==="vs"&&Q.length===2?{championA:Q[0],championB:Q[1]}:void 0})]}),O.length===0&&e.jsx(Ar,{onAddClick:()=>b(!0)})]})}function Gr(t){return e.jsx(Cr,{initialDDragonVersion:t.version,initialCDragonVersion:t.cdragonVersion,children:e.jsx(zr,{...t})})}export{Gr as default};
