import{j as e,r as x,H as ue,z as xe}from"/cooldown/assets/react-vendor-CopeUkDP.js";import{T as fe,a as pe,b as G,V as he}from"/cooldown/assets/VersionContext-CT8T6bIz.js";import{u as _,a as X,g as ge,b as be,T as je,S as R,D as Y,c as Z,V as ee,d as se,e as te,f as ve,h as ye,i as Ne,j as we,k as ne,l as Se}from"/cooldown/assets/index-Dd-dsGYV.js";import{C as le,u as Te,I as B}from"/cooldown/assets/useDebouncedValue-DAo7IYKu.js";import{T as re,f as q}from"/cooldown/assets/lucide-icons-DTvcjo7T.js";function ke({activeTab:s,onTabChange:i}){const{t:r}=_();return e.jsx("div",{className:"flex items-center justify-between gap-2 border-b border-border overflow-x-auto -mx-4 md:mx-0 px-4 md:px-0",children:e.jsx(fe,{value:s,onValueChange:j=>i(j),className:"flex-1",children:e.jsx(pe,{className:"inline-flex h-auto items-center justify-start gap-2 bg-transparent p-0 border-0",children:e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx(G,{value:"runes",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:r.encyclopedia.tabs.runes}),e.jsx(G,{value:"items",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:r.encyclopedia.tabs.items}),e.jsx(G,{value:"summoner",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:r.encyclopedia.tabs.summoner})]})})})})}function Ie({version:s,lang:i}){const{t:r}=_(),[j,f]=x.useState(null),[p,d]=x.useState(null),[v,S]=x.useState(!1),w=X()==="mobile",[n,C]=x.useState(null);x.useEffect(()=>{let t=!1;return S(!0),Promise.all([ge(s,i),be(s,i)]).then(([o,l])=>{t||(f(o),d(l))}).finally(()=>{t||S(!1)}),()=>{t=!0}},[s,i]);const c=x.useMemo(()=>{if(!p||!p.groups.length)return[];const t=new Map;for(const l of p.groups)for(const g of l.rows){if(!g.perks||g.perks.length===0)continue;const I=g.label||"";let T=t.get(I);T||(T={label:g.label,perksMap:new Map},t.set(I,T));for(const P of g.perks)T.perksMap.has(P.id)||T.perksMap.set(P.id,P)}const o=Array.from(t.values()).map(({label:l,perksMap:g})=>({label:l,perks:Array.from(g.values())}));return o.sort((l,g)=>!l.label&&g.label?1:l.label&&!g.label?-1:!l.label&&!g.label?0:l.label.localeCompare(g.label)),o},[p]);if(v&&!j)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:r.championSelector.loading});if(!j||j.length===0)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:r.championSelector.emptyList});const M={Precision:0,Domination:1,Sorcery:2,Resolve:3,Inspiration:4},A=[...j].sort((t,o)=>{const l=M[t.key]??999,g=M[o.key]??999;return l-g}),z=t=>{const o=' <span class="text-destructive dark:text-red-400">?</span> ';let l=t.replace(/@\{[^}]+\}@/g,o);return l=l.replace(/@[^@]+@/g,o),l},O=t=>{const o=t.descriptionHtml||"",l=z(o);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${t.icon}`,alt:t.name,loading:"lazy",decoding:"async",width:32,height:32,className:"w-8 h-8 rounded-full border border-border/60 bg-transparent"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"text-sm font-semibold",children:t.name})})]}),e.jsx("div",{className:"text-xs text-muted-foreground leading-relaxed",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:l}})}),e.jsxs("div",{className:"text-xs text-muted-foreground/80 italic leading-relaxed border-t pt-3 mt-3 flex items-center gap-1.5",children:[e.jsx(re,{className:"w-2.5 h-2.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:r.encyclopedia.runes.warning})]})]})},V=(t,o,l)=>w?e.jsxs("button",{type:"button",onClick:()=>C(t),className:"flex flex-col items-center gap-1 focus:outline-none min-w-0",style:o,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${t.icon}`,alt:t.name,loading:"lazy",decoding:"async",width:40,height:40,className:"w-10 h-10 rounded-full border border-border/60 bg-transparent flex-shrink-0"}),e.jsx("span",{className:"text-[10px] text-center leading-tight line-clamp-2 w-full",children:t.name})]},l):e.jsxs(ve,{children:[e.jsx(ye,{asChild:!0,children:e.jsxs("button",{type:"button",className:"flex flex-col items-center gap-1 focus:outline-none cursor-help min-w-0",style:o,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${t.icon}`,alt:t.name,loading:"lazy",decoding:"async",width:40,height:40,className:"w-10 h-10 rounded-full border border-border/60 bg-transparent flex-shrink-0"}),e.jsx("span",{className:"text-[10px] text-center leading-tight line-clamp-2 w-full",children:t.name})]})}),e.jsx(Ne,{side:"top",align:"center",sideOffset:8,className:"max-w-xs p-3",children:O(t)})]},l??t.id),F=t=>{const o="/lol-game-data/assets/v1";return`https://ddragon.leagueoflegends.com/cdn/img${t.startsWith(o)?t.slice(o.length):t}`},m=t=>(t.shortDesc||t.longDesc||"").replace(/<font[^>]*>/gi,"").replace(/<\/font>/gi,"");return e.jsx(je,{delayDuration:200,children:e.jsxs("div",{className:"mt-4",children:[e.jsx(R,{className:"rounded-md border bg-card/40",children:e.jsxs("div",{className:"p-4 grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:[A.map(t=>e.jsxs(le,{className:"p-4 flex flex-col gap-3 bg-background/60 border-border/70",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${t.icon}`,alt:t.name,loading:"lazy",decoding:"async",width:32,height:32,className:"w-8 h-8 rounded-full border border-border/60 bg-transparent"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold",children:t.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.key})]})]}),e.jsx("div",{className:"space-y-3",children:t.slots.map((o,l)=>{const g=Math.max(...t.slots.map(I=>I.runes.length));return e.jsx("div",{className:"grid gap-y-2 gap-x-2 md:gap-x-4",style:{gridTemplateColumns:`repeat(${g}, minmax(0, 1fr))`},children:o.runes.map((I,T)=>{const P=o.runes.length;let L=String(T+1);return g===4&&P===3&&(T===0?L="1":T===1?L="2 / span 2":T===2&&(L="4")),g===4&&P===2&&(T===0?L="1":T===1&&(L="4")),P===1&&(L="1 / -1"),V(I,{gridColumn:L},I.id)})},l)})})]},t.id)),c.length>0&&e.jsxs(le,{className:"p-4 flex flex-col gap-3 bg-background/60 border-border/70 md:col-span-2 xl:col-span-3",children:[e.jsx("div",{className:"flex items-center justify-between gap-3 mb-1.5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold",children:r.encyclopedia.runes.statShardsTitle}),e.jsx("span",{className:"text-xs text-muted-foreground",children:r.encyclopedia.runes.warning})]})}),e.jsx("div",{className:"space-y-3 mt-1",children:c.map((t,o)=>!t.perks||t.perks.length===0?null:e.jsxs("div",{className:"flex flex-col gap-1",children:[t.label&&e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground mb-0.5",children:t.label}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.perks.map(l=>e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-md border border-border/60 bg-background/80 px-2 py-1",children:[e.jsx("img",{src:F(l.iconPath),alt:l.name,loading:"lazy",decoding:"async",width:24,height:24,className:"w-6 h-6 rounded-full border border-border/60 bg-transparent flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"text-[11px] font-semibold leading-tight truncate",children:l.name}),e.jsx("span",{className:"text-[10px] text-muted-foreground leading-snug line-clamp-2",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:m(l)}})})]})]},l.id))})]},`${t.label||"row"}-${o}`))})]})]})}),w&&e.jsx(Y,{open:!!n,onOpenChange:t=>!t&&C(null),children:e.jsxs(Z,{className:"w-[calc(100vw-32px)] max-w-lg max-h-[70vh] h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(ee,{children:[e.jsx(se,{children:(n==null?void 0:n.name)??"Rune"}),e.jsx(te,{children:(n==null?void 0:n.name)??"Rune"})]}),e.jsx(R,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4",children:n&&O(n)})})]})})]})})}function Ce(s){const i=s.tags||[],r=s.name||"",j=r.toLowerCase(),f=r;return new Set(["4638","4643"]).has(s.id)?!1:!!(/도란/.test(f)||j.includes("doran")||i.includes("Jungle")||j.includes("jungle")||["수확의 낫","여신의 눈물","암흑의 인장","cull","tear of the goddess","dark seal"].some(v=>f.includes(v)||j.includes(v))||(s.priceTotal??0)===0)}function ie(s){const i=s.tags||[],r=!!s.buildsFrom&&s.buildsFrom.length>0,j=!!s.buildsInto&&s.buildsInto.length>0;return i.includes("Consumable")||i.includes("Trinket")?"consumable":i.includes("Boots")?"boots":Ce(s)?"starter":r?j?"epic":"legendary":"basic"}function Q(s,i){return s.name||s.id}function Me(s){const i=s.tags||[],r=i.includes("Trinket")||i.includes("Consumable"),j=s.priceTotal??0;return!(s.availableOnMap11===!1||!r&&j<=0||s.purchasable===!1||s.inStore===!1||s.displayInItemSets===!1)}function de(s){return!((s.priceTotal??0)<=0||s.purchasable===!1||s.inStore===!1||s.displayInItemSets===!1)}function ce(s,i){const r=s.stats||[];if(r.length===0)return[];const j=i.startsWith("ko"),f=new Map;for(const d of r){const v=ne[d.stat];if(!v)continue;const S=f.get(d.stat)||{value:0,isPercent:v.isPercent};if(d.valueType==="percent")S.value+=d.value,S.isPercent=!0;else if(d.valueType==="flat")S.value+=d.value;else continue;f.set(d.stat,S)}const p=[];for(const[d,{value:v,isPercent:S}]of f.entries()){if(!v)continue;const k=ne[d],w=j?k.label.ko:k.label.en,n=S&&Math.abs(v)<=1?Math.round(v*100):v,C=S?`${n}%`:`${n}`;p.push(`+ ${C} ${w}`)}return p}function me(s,i){const r=s.priceTotal??0,j=s.price??0,f=Array.isArray(s.buildsFrom)&&s.buildsFrom.length>0;return j===0&&f?i.encyclopedia.items.price.unavailable:r>0||de(s)?r.toLocaleString():i.encyclopedia.items.price.free}const K=({item:s,version:i,isSelected:r,onSelect:j})=>{const{t:f}=_(),p=me(s,f),d=p===f.encyclopedia.items.price.unavailable;return e.jsxs("button",{type:"button",onClick:j,className:`flex flex-col items-center gap-0 rounded-sm px-0.5 py-0 text-center transition-colors w-9 md:w-10 ${r?"bg-primary/20 border border-primary/60 shadow-sm":"hover:bg-muted/60 border border-transparent"}`,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${i}/img/item/${s.id}.png`,alt:Q(s),loading:"lazy",decoding:"async",width:32,height:32,className:"w-7 h-7 md:w-8 md:h-8 aspect-square object-cover rounded-sm border border-border/60 bg-black/40 flex-shrink-0"}),e.jsx("span",{className:`${d?"text-[8px] md:text-[9px]":"text-[9px] md:text-[10px]"} text-amber-600 dark:text-amber-400 font-semibold whitespace-nowrap leading-tight`,children:p}),e.jsx("span",{className:"sr-only absolute",children:Q(s)})]})};function $e({version:s,lang:i}){const{t:r}=_(),f=X()==="mobile",[p,d]=x.useState(null),[v,S]=x.useState(null),[k,w]=x.useState(!1),[n,C]=x.useState(""),[c,M]=x.useState(null),[A,z]=x.useState(!1);x.useEffect(()=>{let a=!1;return w(!0),we(s,i).then(y=>{if(!a){d(y);const h=y.filter(Me),N=new Set,b=h.filter(u=>N.has(u.name)?!1:(N.add(u.name),!0));S(b),M(u=>!u&&b.length>0?b[0]:u)}}).finally(()=>{a||w(!1)}),()=>{a=!0}},[s,i]);const O=x.useMemo(()=>p?new Map(p.map(a=>[a.id,a])):new Map,[p]),F=Te(n,f?220:180).trim().toLowerCase(),m=a=>a.toLowerCase().replace(/[^0-9a-z\uac00-\ud7a3ㄱ-ㅎ]/g,""),t=a=>{if(!a)return"";try{return ue.d(a,!0).map(y=>y[0]).join("")}catch{return""}},o=m(F),l=F.replace(/\s+/g,""),I=l.length>0&&/^[ㄱ-ㅎ]+$/.test(l)?l:"",T=x.useMemo(()=>{const a={consumable:[],boots:[],starter:[],basic:[],epic:[],legendary:[]};if(!v)return a;const y=N=>{if(!o&&!I)return!0;const b=Q(N),u="",$="",D=m(b),H=[D,m(u),m($.replace(/;/g," "))];if(o&&H.some(E=>E.includes(o))||I&&t(b).includes(I))return!0;if(o&&D){const E=t(b);if(E&&(E.charAt(0)+D.slice(1)).includes(o))return!0}return!1},h={consumable:[],boots:[],starter:[],basic:[],epic:[],legendary:[]};return v.forEach(N=>{if(!y(N))return;const b=ie(N);h[b].push(N)}),Object.keys(h).forEach(N=>{h[N].sort((b,u)=>(b.priceTotal??0)-(u.priceTotal??0))}),h},[v,o,I,i]);if(k&&!v)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:r.championSelector.loading});if(!v||v.length===0)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:r.championSelector.emptyList});const P=a=>{if(!a.buildsInto||a.buildsInto.length===0)return[];const y=[];a.buildsInto.forEach(b=>{const u=O.get(b);if(!u||u.availableOnMap11===!1||u.displayInItemSets===!1)return;const $=Array.isArray(u.buildsInto)&&u.buildsInto.length>0;u.inStore===!1&&!$||y.push(u)});const h=new Map;for(const b of y){const u=b.name||b.id,$=h.get(u);if(!$){h.set(u,b);continue}const D=Number.parseInt($.id,10),H=Number.parseInt(b.id,10);(Number.isFinite(D)&&Number.isFinite(H)?H<D:b.id<$.id)&&h.set(u,b)}const N=Array.from(h.values());return N.sort((b,u)=>(b.priceTotal??0)-(u.priceTotal??0)),N},L=(a,y=0,h=6)=>{if(y>=h)return{item:a,children:[]};const N=[];return a.buildsFrom&&a.buildsFrom.length>0&&a.buildsFrom.forEach(b=>{const u=O.get(b);u&&N.push(L(u,y+1,h))}),{item:a,children:N}},W=a=>r.encyclopedia.items.tiers[a],ae=c&&e.jsxs("div",{className:"flex flex-col gap-2 h-full min-h-0",children:[e.jsxs("div",{className:"space-y-0.5 text-[11px] pb-1 border-b border-border/60 flex-shrink-0",children:[e.jsx("div",{className:"font-semibold",children:r.encyclopedia.items.buildsIntoTitle}),e.jsx("div",{className:"overflow-x-auto pb-0.5",children:e.jsx("div",{className:"flex flex-nowrap gap-1 min-w-max",children:P(c).length>0?P(c).map(a=>e.jsx(K,{item:a,version:s,isSelected:c.id===a.id,onSelect:()=>M(a)},a.id)):e.jsx("span",{className:"text-[10px] text-muted-foreground",children:r.encyclopedia.items.buildsIntoEmpty})})})]}),e.jsxs("div",{className:"space-y-1 text-[11px] py-1 flex-shrink-0",children:[e.jsx("div",{className:"font-semibold",children:r.encyclopedia.items.treeTitle}),(()=>{var h;const a=L(c),y=N=>{const b=N.children.length>0;return e.jsxs("div",{className:"flex flex-col items-center gap-0",children:[e.jsx(K,{item:N.item,version:s,isSelected:c.id===N.item.id,onSelect:()=>M(N.item)}),b&&e.jsxs("div",{className:"mt-0 flex flex-col items-stretch",children:[e.jsx("div",{className:"relative flex justify-center",children:e.jsx("div",{className:"h-1 w-[2px] bg-primary/60"})}),e.jsx("div",{className:"relative flex flex-nowrap items-start justify-center gap-y-0 pt-0",children:N.children.map((u,$)=>{const D=N.children.length,H=$===0,E=$===D-1,J=H?"left-1/2 right-0":E?"left-0 right-1/2":"left-0 right-0";return e.jsxs("div",{className:"relative flex flex-col items-center gap-0 pt-0.5 px-1",children:[D>1&&e.jsx("div",{className:`pointer-events-none absolute top-0 h-[2px] bg-primary/60 ${J}`}),e.jsx("div",{className:"pointer-events-none absolute top-0 left-1/2 -translate-x-1/2 h-2 w-[2px] bg-primary/60"}),y(u)]},`${u.item.id}-${$}`)})})]})]})};return!a.children.length&&!((h=a.item.buildsFrom)!=null&&h.length)?e.jsx("span",{className:"text-[10px] text-muted-foreground",children:r.encyclopedia.items.treeEmpty}):e.jsx("div",{className:"pt-0",children:e.jsx("div",{className:"w-full rounded-md border border-border/60 bg-muted/40 px-2 py-0.5 overflow-x-auto scrollbar-hide",children:e.jsx("div",{className:"min-w-max flex justify-center",children:y(a)})})})})()]}),e.jsx(R,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"pt-2 pr-3",children:e.jsxs("div",{className:"rounded-md border border-border/70 dark:border-neutral-700/80 bg-card text-foreground dark:bg-neutral-950 dark:text-slate-50 shadow-md px-3 py-2 text-[11px] space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${s}/img/item/${c.id}.png`,alt:c.name,className:"w-9 h-9 rounded-sm border border-border/60 bg-black/40 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xs font-semibold truncate text-foreground dark:text-amber-200",children:c.name}),de(c)&&e.jsx("div",{className:"text-[11px] text-amber-600 dark:text-amber-300 font-semibold whitespace-nowrap",children:me(c,r)})]}),e.jsx("div",{className:"mt-0.5 flex items-center justify-between text-[10px] text-muted-foreground dark:text-slate-300",children:e.jsx("span",{children:W(ie(c))})})]})]}),e.jsx("div",{className:"h-px bg-neutral-700/80"}),ce(c,i).length>0&&e.jsx("ul",{className:"space-y-0.5 text-[11px] leading-snug",children:ce(c,i).map(a=>e.jsx("li",{className:"text-primary",children:a},a))}),c.description&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-2 text-[11px] leading-snug text-foreground",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:c.description}})}),e.jsxs("div",{className:"text-xs text-muted-foreground/80 italic leading-relaxed border-t pt-3 mt-3 flex items-center gap-1.5",children:[e.jsx(re,{className:"w-2.5 h-2.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:r.encyclopedia.items.warning})]})]})]})})})]});return f?e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"relative group",children:[e.jsx(q,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),e.jsx(B,{value:n,onChange:a=>C(a.target.value),placeholder:r.encyclopedia.items.searchPlaceholder,className:"h-9 pl-7 text-xs border-neutral-400 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-primary"})]})}),e.jsx("div",{className:"rounded-md border bg-card/40",children:e.jsx("div",{className:"p-1 space-y-1",children:Object.keys(T).map(a=>{const y=T[a];return!y||y.length===0?null:e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:W(a)}),e.jsx("div",{className:"flex flex-wrap gap-1",children:y.map(h=>e.jsx(K,{item:h,version:s,isSelected:(c==null?void 0:c.id)===h.id,onSelect:()=>{M(h),z(!0)}},h.id))})]},a)})})}),e.jsx(Y,{open:A&&!!c,onOpenChange:a=>{a||z(!1)},children:e.jsxs(Z,{className:"w-[calc(100vw-32px)] max-w-lg max-h-[70vh] h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(ee,{children:[e.jsx(se,{children:(c==null?void 0:c.name)??"Item"}),e.jsx(te,{children:(c==null?void 0:c.name)??"Item"})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:e.jsx("div",{className:"p-4",children:ae})})]})})]}):e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("div",{className:"flex flex-wrap items-center justify-between gap-2",children:e.jsxs("div",{className:"relative w-full sm:w-52 md:w-64 group",children:[e.jsx(q,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),e.jsx(B,{value:n,onChange:a=>C(a.target.value),placeholder:r.encyclopedia.items.searchPlaceholder,className:"h-8 pl-8 text-xs md:text-sm w-full border-neutral-400 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-primary"})]})}),e.jsxs("div",{className:"rounded-md border bg-card/40 md:h-[calc(100vh-12rem)] flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:flex-1 md:border-r border-border/60 flex flex-col min-w-0 min-h-0",children:[e.jsx("div",{className:"px-3 py-2 border-b border-border/60 flex items-center justify-between flex-shrink-0",children:e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:r.encyclopedia.items.listTitle})}),e.jsx(R,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-1 space-y-1",children:Object.keys(T).map(a=>{const y=T[a];return!y||y.length===0?null:e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:W(a)}),e.jsx("div",{className:"flex flex-wrap gap-1",children:y.map(h=>e.jsx(K,{item:h,version:s,isSelected:(c==null?void 0:c.id)===h.id,onSelect:()=>M(h)},h.id))})]},a)})})})]}),e.jsx("div",{className:"md:w-[340px] hidden md:flex flex-col p-3 min-h-0",children:c?ae:e.jsx("div",{className:"text-xs text-muted-foreground h-full flex items-center justify-center text-center px-4",children:r.encyclopedia.items.detailEmpty})})]})]})}function U(s){return s.name||s.id}function oe(s){return s.tooltip||""}function Pe(s){return s.replace(/<[^>]*>?/gm,"")}function Le({version:s,lang:i}){const{t:r}=_(),f=X()==="mobile",[p,d]=x.useState(null),[v,S]=x.useState(!1),[k,w]=x.useState(""),[n,C]=x.useState(null),[c,M]=x.useState(!1);x.useEffect(()=>{let m=!1;return S(!0),Se(s,i).then(t=>{if(!m){const l=[...t.filter(g=>Array.isArray(g.modes)&&g.modes.includes("CLASSIC"))].sort((g,I)=>g.name.localeCompare(I.name));d(l),!n&&l.length>0&&C(l[0])}}).finally(()=>{m||S(!1)}),()=>{m=!0}},[s,i,k,n]);const A=k.trim().toLowerCase(),z=x.useMemo(()=>p?A?p.filter(m=>{const t=U(m).toLowerCase(),o=oe(m).toLowerCase();return t.includes(A)||o.includes(A)}):p:[],[p,A]);if(v&&!p)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:r.championSelector.loading});if(!p||p.length===0)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:r.championSelector.emptyList});const O=m=>{const t=g=>g.replace(/{{\s*[^}]+\s*}}/g,' <span class="text-destructive dark:text-red-400">?</span> '),o=oe(m),l=t(o);return e.jsx("span",{className:"text-xs leading-relaxed [&_br]:block",dangerouslySetInnerHTML:{__html:l}})},V=e.jsx("div",{className:"p-2 space-y-1",children:z.map(m=>{const t=(n==null?void 0:n.id)===m.id;return e.jsxs("button",{type:"button",onClick:()=>{C(m),f&&M(!0)},className:`w-full flex items-center gap-2 rounded-md px-2 py-1.5 text-left transition-colors ${t?"bg-primary/10 border border-primary/60":"hover:bg-muted/60 border border-transparent"}`,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${s}/img/spell/${m.iconPath}`,alt:U(m),loading:"lazy",decoding:"async",width:32,height:32,className:"w-8 h-8 rounded-md border border-border/60 bg-black/40 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-xs font-semibold truncate",children:U(m)}),e.jsx("span",{className:"text-[11px] text-muted-foreground whitespace-nowrap",children:m.cooldown&&m.cooldown.length>0?`${m.cooldown[0]}${r.common.seconds}`:""})]}),e.jsx("div",{className:"mt-0.5 text-[11px] text-muted-foreground line-clamp-2",children:Pe(m.tooltip||"")})]})]},m.id)})}),F=n&&e.jsxs("div",{className:"flex flex-col gap-2 h-full min-h-0",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${s}/img/spell/${n.iconPath}`,alt:U(n),loading:"lazy",decoding:"async",width:40,height:40,className:"w-10 h-10 rounded-md border border-border/60 bg-black/40 flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-sm font-semibold truncate",children:U(n)}),n.cooldown&&n.cooldown.length>0&&e.jsxs("div",{className:"text-xs text-muted-foreground whitespace-nowrap",children:[r.common.rechargeTime,": ",n.cooldown[0],r.common.seconds]})]})})]}),e.jsx(R,{className:"flex-1 min-h-0 mt-2",children:e.jsx("div",{className:"pr-3",children:e.jsxs("div",{className:"rounded-md border border-border/70 bg-card px-3 py-2 space-y-1.5",children:[O(n),e.jsxs("div",{className:"text-xs text-muted-foreground/80 italic leading-relaxed border-t pt-3 mt-3 flex items-center gap-1.5",children:[e.jsx(re,{className:"w-2.5 h-2.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:r.encyclopedia.runes.warning})]})]})})})]});return f?e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(q,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),e.jsx(B,{value:k,onChange:m=>w(m.target.value),placeholder:r.encyclopedia.summoner.searchPlaceholder,className:"h-9 pl-7 text-xs border-neutral-400 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-primary"})]}),e.jsx("div",{className:"rounded-md border bg-card/40 max-h-[50vh]",children:e.jsx(R,{className:"h-[50vh]",children:V})}),e.jsx(Y,{open:c&&!!n,onOpenChange:m=>{m||M(!1)},children:e.jsxs(Z,{className:"w-[calc(100vw-32px)] max-w-lg max-h-[70vh] h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(ee,{children:[e.jsx(se,{children:(n==null?void 0:n.name)??"Summoner Spell"}),e.jsx(te,{children:(n==null?void 0:n.name)??"Summoner Spell"})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:e.jsx("div",{className:"p-4",children:F})})]})})]}):e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-sm font-semibold",children:r.encyclopedia.tabs.summoner}),e.jsxs("div",{className:"relative w-full sm:w-52 md:w-64 group",children:[e.jsx(q,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),e.jsx(B,{value:k,onChange:m=>w(m.target.value),placeholder:r.encyclopedia.summoner.searchPlaceholder,className:"h-8 pl-8 text-xs md:text-sm w-full border-neutral-400 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-primary"})]})]}),e.jsxs("div",{className:"rounded-md border bg-card/40 md:h-[calc(100vh-12rem)] flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:flex-1 md:border-r border-border/60 flex flex-col min-w-0 min-h-0",children:[e.jsx("div",{className:"px-3 py-2 border-b border-border/60 flex items-center justify-between flex-shrink-0",children:e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:r.encyclopedia.summoner.listTitle})}),e.jsx(R,{className:"flex-1 min-h-0",children:V})]}),e.jsx("div",{className:"md:w-[340px] hidden md:flex flex-col p-3 min-h-0",children:n?F:e.jsx("div",{className:"text-xs text-muted-foreground h-full flex items-center justify-center text-center px-4",children:r.encyclopedia.summoner.detailEmpty})})]})]})}function De(s){return s==="runes"||s==="items"||s==="summoner"}function Ae({lang:s,version:i}){const[r,j]=xe(),f=x.useMemo(()=>{const w=r.get("tab");return De(w)?w:null},[r]),p=()=>f||"runes",[d,v]=x.useState(p),S=x.useRef(f),k=x.useRef(p());return x.useEffect(()=>{const w=f||"runes",n=S.current||"runes";w!==n&&w!==d&&(v(w),k.current=w),S.current=f},[f,d]),x.useEffect(()=>{const w=f||"runes",n=k.current;if(d!==n&&w!==d){const C=new URLSearchParams(r);d==="runes"?C.delete("tab"):C.set("tab",d),j(C,{replace:!0}),k.current=d}k.current=d},[d,f,r,j]),e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6 lg:px-8 pb-4 md:pb-5",children:[e.jsx("div",{className:"mt-3 md:mt-4",children:e.jsx(ke,{activeTab:d,onTabChange:w=>{v(w)}})}),d==="runes"&&e.jsx(Ie,{version:i,lang:s}),d==="items"&&e.jsx($e,{version:i,lang:s}),d==="summoner"&&e.jsx(Le,{version:i,lang:s})]})}function He(s){return e.jsx(he,{initialDDragonVersion:s.version,initialCDragonVersion:s.cdragonVersion,children:e.jsx(Ae,{...s})})}export{He as default};
