import{r as m,j as e}from"/cooldown/assets/react-vendor-CopeUkDP.js";import{m as V,w as p,u as z,s as G,p as X,j as K,D as W,c as Q,x as Y,d as q,e as J,B as U,S as Z}from"/cooldown/assets/index-CW9Dy9x2.js";import{C as E}from"/cooldown/assets/useDebouncedValue-Boii8ris.js";import{C as ee}from"/cooldown/assets/ChampionSelector-DqFNsElW.js";import"./lucide-icons-DTvcjo7T.js";const F=m.forwardRef(({className:c,children:i,...a},s)=>e.jsx("select",{className:V("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",c),ref:s,...a,children:i}));F.displayName="Select";function te(c,i){if(!c.stats)return null;const a=c.stats,s=Math.min(Math.max(i,1),18),o=s-1;return{level:s,health:(a.hp??0)+(a.hpperlevel??0)*o,mana:(a.mp??0)+(a.mpperlevel??0)*o,armor:(a.armor??0)+(a.armorperlevel??0)*o,magicResist:(a.spellblock??0)+(a.spellblockperlevel??0)*o,attackDamage:(a.attackdamage??0)+(a.attackdamageperlevel??0)*o,movespeed:a.movespeed??0}}function ae(c,i){const a={...c};for(const s of i){const o=s.stats;if(!(!o||o.length===0))for(const d of o){const{stat:r,value:l,valueType:h}=d;if(h==="percent")switch(r){case p.MAX_HEALTH:a.health*=1+l/100;break;case p.MAX_MANA:a.mana*=1+l/100;break;case p.ARMOR:a.armor*=1+l/100;break;case p.MAGIC_RESIST:a.magicResist*=1+l/100;break;case p.MOVE_SPEED:a.movespeed*=1+l/100;break;case p.ATTACK_DAMAGE:a.attackDamage*=1+l/100;break}else switch(r){case p.MAX_HEALTH:a.health+=l;break;case p.MAX_MANA:a.mana+=l;break;case p.ARMOR:a.armor+=l;break;case p.MAGIC_RESIST:a.magicResist+=l;break;case p.ATTACK_DAMAGE:a.attackDamage+=l;break;case p.MOVE_SPEED:a.movespeed+=l;break}}}return a}function se(c){let i=0;for(const a of c){const s=a.stats;if(s)for(const o of s)o.stat===p.ABILITY_HASTE&&o.valueType==="flat"&&(i+=o.value)}return i}function le(c,i,a){if(!c.spells)return[];const s=a>0?1+a/100:1;return c.spells.map(o=>{const d=o.cooldown??[],r=s>0?d.map(l=>typeof l=="number"?l/s:l):d.map(l=>l);return{id:o.id,name:o.name,maxrank:o.maxrank,cooldowns:d,cooldownsWithAbilityHaste:r}})}function re(c,i,a,s){if(!c)return{baseDamage:null,ratio:null,totalDamage:null};const o=String(i),d=c[o];if(!d||typeof d!="object"||!("DataValues"in d))return{baseDamage:null,ratio:null,totalDamage:null};const r=d.DataValues,l=Array.isArray(r.BaseDamage)?r.BaseDamage:null,h=Math.max(0,Math.min(a-1,l?l.length-1:a-1));let S=null;l&&typeof l[h]=="number"&&(S=l[h]);let f=null;const x=d&&typeof d=="object"&&"mSpellCalculations"in d?d.mSpellCalculations:void 0,j=(x&&typeof x=="object"&&"TotalDamage"in x?x.TotalDamage:void 0)||(x&&typeof x=="object"&&"SingleFireDamage"in x?x.SingleFireDamage:void 0)||(x?Object.values(x)[0]:void 0);if(j&&typeof j=="object"&&j!==null&&"mFormulaParts"in j&&Array.isArray(j.mFormulaParts)){for(const v of j.mFormulaParts)if(v.__type==="StatByCoefficientCalculationPart"&&typeof v.mCoefficient=="number")f=(f??0)+v.mCoefficient;else if(v.__type==="StatByNamedDataValueCalculationPart"&&typeof v.mDataValue=="string"){const C=r[v.mDataValue];Array.isArray(C)&&typeof C[h]=="number"&&(f=(f??0)+C[h])}}const A=f!=null?f*s.attackDamage:null,w=S!=null||A!=null?(S??0)+(A??0):null;return{baseDamage:S,ratio:f,totalDamage:w}}function D({label:c,value:i,base:a,precision:s=0}){const o=l=>s>0?l.toFixed(s):Math.round(l).toString(),d=i-a,r=Math.abs(d)>.01;return e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-[11px] text-muted-foreground",children:c}),e.jsxs("span",{className:"text-[11px] font-medium",children:[o(i),r&&e.jsxs("span",{className:`ml-1 ${d>=0?"text-emerald-400":"text-rose-400"}`,children:["(",d>=0?"+":"",o(d),")"]})]})]})}function ue({lang:c,version:i,championList:a}){const{t:s}=z(),[o,d]=m.useState(""),[r,l]=m.useState(null),[h,S]=m.useState(18),[f,x]=m.useState([]),[j,A]=m.useState(()=>Array(6).fill(null)),[w,v]=m.useState(null),[C,P]=m.useState(!1),[H,I]=m.useState(!1),[k,T]=m.useState(null),L=m.useMemo(()=>a??[],[a]);m.useEffect(()=>{if(!i||!o){l(null),v(null);return}let t=!1;return G(i,c,o).then(n=>{t||l(n)}).catch(()=>{t||l(null)}),X(o,i).then(n=>{t||v(n.spellDataMap)}).catch(()=>{t||v(null)}),()=>{t=!0}},[i,c,o]),m.useEffect(()=>{if(!i)return;let t=!1;return K(i,c).then(n=>{if(!t){const u=n.filter(b=>{const y=b.tags||[],_=b.priceTotal??0;return!(!(y.includes("Trinket")||y.includes("Consumable"))&&_<=0||b.purchasable===!1||b.inStore===!1||b.displayInItemSets===!1)});x(u)}}).catch(()=>{t||x([])}),()=>{t=!0}},[i,c]);const N=m.useMemo(()=>r?te(r,h):null,[r,h]),R=m.useMemo(()=>j.map(t=>t?f.find(n=>n.id===t)??null:null),[f,j]),M=m.useMemo(()=>R.filter(t=>t!==null),[R]),g=m.useMemo(()=>N?ae(N,M):null,[N,M]),O=m.useMemo(()=>g?g.attackDamage*.7:null,[g]),$=m.useMemo(()=>se(M),[M]),B=m.useMemo(()=>r?le(r,w,$):[],[r,w,$]);return i?e.jsxs("div",{className:"w-full max-w-6xl mx-auto px-4 md:px-6 lg:px-8 py-8 md:py-10",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold tracking-tight",children:s.pages.simulation.title}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:s.pages.simulation.description})]}),e.jsx(E,{className:"p-4 md:p-6 bg-card/60 border-border/70 space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,1.2fr)_minmax(0,1.3fr)]",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4 md:gap-6",children:[e.jsx("button",{type:"button",onClick:()=>P(!0),className:"relative mx-auto md:mx-0 w-32 h-32 sm:w-36 sm:h-36 rounded-full border-4 border-border/80 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-700 flex items-center justify-center overflow-hidden shadow-lg",children:r?e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${i}/img/champion/${r.id}.png`,alt:r.name,className:"w-full h-full object-cover"}):e.jsxs("span",{className:"text-[11px] sm:text-xs font-semibold tracking-[0.08em] text-muted-foreground uppercase text-center px-4",children:["Champion",e.jsx("br",{}),"Placeholder"]})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-semibold tracking-[0.18em] text-muted-foreground uppercase",children:r?"Stats":"Champion Stats"}),r&&e.jsx("div",{className:"mt-1 text-sm font-semibold",children:r.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[11px] text-muted-foreground",children:s.common.level}),e.jsx(F,{value:String(h),onChange:t=>{const n=Number(t.target.value);Number.isNaN(n)||S(Math.min(Math.max(n,1),18))},className:"h-8 w-18 text-xs px-2",children:Array.from({length:18}).map((t,n)=>e.jsx("option",{value:n+1,children:n+1},n+1))})]})]}),e.jsx("div",{className:"border-t border-border/60 pt-3",children:!g||!N?e.jsxs("div",{className:"space-y-1.5 text-[11px] text-muted-foreground",children:[e.jsx("div",{children:s.pages.simulation.statsPlaceholderLine1}),e.jsx("div",{children:s.pages.simulation.statsPlaceholderLine2})]}):e.jsxs("div",{className:"space-y-1.5 text-[11px]",children:[e.jsx(D,{label:s.stats.health,value:g.health,base:N.health}),e.jsx(D,{label:s.stats.attackDamage,value:g.attackDamage,base:N.attackDamage}),e.jsx(D,{label:s.stats.armor,value:g.armor,base:N.armor}),e.jsx(D,{label:s.stats.magicResist,value:g.magicResist,base:N.magicResist}),e.jsx(D,{label:s.stats.movespeed,value:g.movespeed,base:N.movespeed,precision:0}),O!=null&&e.jsx(D,{label:s.pages.simulation.aaDpsLabel,value:O,base:O,precision:1})]})})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-[11px] font-semibold tracking-[0.18em] text-muted-foreground uppercase",children:s.pages.simulation.itemsTitle}),e.jsxs("div",{className:"text-[10px] text-muted-foreground",children:[M.length," / 6"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:Array.from({length:6}).map((t,n)=>{const u=R[n];return e.jsx("div",{className:"flex flex-col items-center gap-2",children:e.jsx("button",{type:"button",className:"w-16 h-16 sm:w-18 sm:h-18 rounded-md border border-border/70 bg-background/40 flex items-center justify-center overflow-hidden shadow-sm",onClick:()=>{T(n),I(!0)},children:u?e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${i}/img/item/${u.id}.png`,alt:u.name,className:"w-full h-full object-cover"}):e.jsxs("span",{className:"text-[9px] text-muted-foreground text-center px-1",children:[s.pages.simulation.itemPlaceholderLine1,e.jsx("br",{}),s.pages.simulation.itemPlaceholderLine2]})})},n)})})]})]})}),e.jsxs(E,{className:"mt-6 bg-card/60 border-border/70",children:[e.jsx("div",{className:"border-b border-border/70 px-4 py-3",children:e.jsx("div",{className:"text-[11px] font-semibold tracking-[0.18em] text-muted-foreground uppercase",children:"Skills"})}),e.jsx("div",{className:"px-4 py-4 space-y-3",children:["Q","W","E","R"].map((t,n)=>{var _;const u=(_=r==null?void 0:r.spells)==null?void 0:_[n],b=B[n],y=r&&g?re(w,n,(b==null?void 0:b.maxrank)??(u==null?void 0:u.maxrank)??1,g):null;return e.jsxs("div",{className:"flex items-start gap-3 border border-border/50 rounded-md px-3 py-2 bg-background/40",children:[e.jsx("div",{className:"w-8 h-8 rounded-sm border border-border/70 bg-slate-900 flex items-center justify-center text-xs font-bold text-amber-300",children:t}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("div",{className:"text-[11px] font-semibold",children:u?`${t}: ${u.name}`:`${t}: Skill Description Placeholder`}),e.jsx("div",{className:"text-[11px] text-muted-foreground leading-snug",children:u?u.description:"Skill Description Placeholder"}),y&&y.totalDamage!=null&&e.jsxs("div",{className:"text-[10px] text-emerald-400 mt-1",children:["예상 피해 (아이템/레벨 반영):"," ",y.totalDamage.toFixed(1)]})]})]},t)})})]}),e.jsxs("div",{className:"mt-6 grid gap-4 md:grid-cols-[minmax(0,1.1fr)_minmax(0,1.1fr)]",children:[e.jsxs(E,{className:"p-4 bg-card/60 border-border/70 space-y-3",children:[e.jsx("div",{className:"text-[11px] font-semibold tracking-[0.18em] text-muted-foreground uppercase",children:"Summoner Spells"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-md border border-border/70 bg-background/40"}),e.jsx("div",{className:"w-10 h-10 rounded-md border border-border/70 bg-background/40"})]}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"추후 소환사 주문 시뮬레이션을 여기에 추가할 수 있습니다."})]}),e.jsxs(E,{className:"p-4 bg-card/60 border-border/70 space-y-3",children:[e.jsx("div",{className:"text-[11px] font-semibold tracking-[0.18em] text-muted-foreground uppercase",children:"Runes"}),e.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:6}).map((t,n)=>e.jsx("div",{className:"w-8 h-8 rounded-full border border-border/70 bg-background/40"},n))}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"룬 시뮬레이션을 추가할 때 이 영역을 재사용할 수 있습니다."})]})]}),e.jsx(ee,{championList:L,selectedChampions:r&&a?a.filter(t=>t.id===r.id):[],onSelect:t=>{d(t.id)},onClose:()=>P(!1),open:C,onOpenChange:P}),e.jsx(W,{open:H,onOpenChange:t=>{I(t),t||T(null)},children:e.jsxs(Q,{className:"max-w-xl",children:[e.jsxs(Y,{children:[e.jsx(q,{className:"text-base",children:s.pages.simulation.itemModalTitle}),e.jsx(J,{className:"text-xs",children:s.pages.simulation.itemModalDescription})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-[11px] text-muted-foreground",children:s.pages.simulation.itemModalHint}),e.jsx(U,{type:"button",variant:"ghost",size:"sm",className:"h-7 px-2 text-[11px]",onClick:()=>{k!=null&&(A(t=>{const n=[...t];return n[k]=null,n}),I(!1),T(null))},children:s.pages.simulation.clearItemSlot})]}),e.jsx(Z,{className:"h-80 rounded-md border bg-background/60",children:e.jsx("div",{className:"p-2 space-y-1",children:f.slice(0,300).map(t=>{const n=k!=null&&j[k]===t.id,u=(t.priceTotal??0)>0;return e.jsxs("button",{type:"button",onClick:()=>{k!=null&&(A(b=>{const y=[...b];return y[k]=t.id,y}),I(!1),T(null))},className:`w-full flex items-center gap-2 rounded px-2 py-1.5 text-left text-[11px] transition-colors ${n?"bg-primary/10 text-primary border border-primary/40":"hover:bg-muted/60 text-foreground/80"}`,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${i}/img/item/${t.id}.png`,alt:t.name||t.id,className:"w-6 h-6 rounded-sm border border-border/60 bg-black/40"}),e.jsx("span",{className:"flex-1 truncate",children:t.name||t.id}),u&&e.jsx("span",{className:"text-[10px] text-amber-600 dark:text-amber-400 font-semibold",children:t.priceTotal.toLocaleString()})]},t.id)})})})]})]})})]}):e.jsx("div",{className:"w-full max-w-5xl mx-auto px-4 md:px-6 lg:px-8 py-8 md:py-10",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:s.championSelector.loading})})}export{ue as default};
