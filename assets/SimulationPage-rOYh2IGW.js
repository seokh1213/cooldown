import{r as d,j as e}from"/cooldown/assets/react-vendor-CopeUkDP.js";import{j as L,u as $,p as O,n as B,i as U,S as V}from"/cooldown/assets/index-BdRXrHHe.js";import{C as A,I as P,T as _,a as z,b as k,d as w}from"/cooldown/assets/input-DYVj7tNT.js";import"./lucide-icons-O8aoKHte.js";const R=d.forwardRef(({className:c,children:a,...t},n)=>e.jsx("select",{className:L("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",c),ref:n,...t,children:a}));R.displayName="Select";function G(c,a){if(!c.stats)return null;const t=c.stats,n=Math.min(Math.max(a,1),18),l=n-1;return{level:n,health:(t.hp??0)+(t.hpperlevel??0)*l,mana:(t.mp??0)+(t.mpperlevel??0)*l,armor:(t.armor??0)+(t.armorperlevel??0)*l,magicResist:(t.spellblock??0)+(t.spellblockperlevel??0)*l,attackDamage:(t.attackdamage??0)+(t.attackdamageperlevel??0)*l,movespeed:t.movespeed??0}}function J(c,a){let t={...c};for(const n of a){const l=n.stats;if(l)for(const[f,r]of Object.entries(l))switch(f){case"FlatHPPoolMod":t.health+=r;break;case"FlatMPPoolMod":t.mana+=r;break;case"FlatPhysicalDamageMod":t.attackDamage+=r;break;case"FlatArmorMod":t.armor+=r;break;case"FlatSpellBlockMod":t.magicResist+=r;break;case"FlatMovementSpeedMod":t.movespeed+=r;break}}return t}function K(c){let a=0;for(const t of c){const n=t.stats;n&&typeof n.AbilityHaste=="number"&&(a+=n.AbilityHaste)}return a}function X(c,a,t){if(!c.spells)return[];const n=t>0?1+t/100:1;return c.spells.map(l=>{const f=l.cooldown??[],r=n>0?f.map(x=>typeof x=="number"?x/n:x):f.map(x=>x);return{id:l.id,name:l.name,maxrank:l.maxrank,cooldowns:f,cooldownsWithAbilityHaste:r}})}function te({lang:c,version:a,championList:t}){var F;const{t:n}=$(),[l,f]=d.useState(""),[r,x]=d.useState(null),[g,E]=d.useState(18),[j,M]=d.useState([]),[v,W]=d.useState([]),[D,b]=d.useState(null),[N,Q]=d.useState("QWER"),q=d.useMemo(()=>t??[],[t]);d.useEffect(()=>{if(!a||!l){x(null),b(null);return}let s=!1;return O(a,c,l).then(m=>{s||x(m)}).catch(()=>{s||x(null)}),B(l,a).then(m=>{s||b(m.spellDataMap)}).catch(()=>{s||b(null)}),()=>{s=!0}},[a,c,l]),d.useEffect(()=>{if(!a)return;let s=!1;return U(a,c).then(m=>{if(!s){const u=m.filter(i=>{var T;return!(!i.maps||!i.maps[11]||!((T=i.tags)==null?void 0:T.includes("Trinket"))&&i.gold&&i.gold.purchasable===!1||i.inStore===!1||i.displayInItemSets===!1||i.cdragon&&(i.cdragon.inStore===!1||i.cdragon.displayInItemSets===!1))});M(u)}}).catch(()=>{s||M([])}),()=>{s=!0}},[a,c]);const y=d.useMemo(()=>r?G(r,g):null,[r,g]),p=d.useMemo(()=>j.filter(s=>v.includes(s.id)),[j,v]),o=d.useMemo(()=>y?J(y,p):null,[y,p]),I=d.useMemo(()=>o?o.attackDamage*.7:null,[o]),h=d.useMemo(()=>{if(!o||!r)return null;const s=N.replace(/[^QWERqwer]/g,"").toUpperCase();if(!s)return null;const m=o.attackDamage*1.2,u=s.length,i=m*u;return{sequence:s,estimatedHits:u,estimatedDamage:i}},[o,r,N]),S=d.useMemo(()=>K(p),[p]),C=d.useMemo(()=>r?X(r,D,S):[],[r,D,S]);return a?e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 md:px-6 lg:px-8 py-8 md:py-10",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold tracking-tight",children:n.pages.simulation.title}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n.pages.simulation.description})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-[minmax(0,1.1fr)_minmax(0,1fr)]",children:[e.jsxs(A,{className:"p-4 space-y-4 bg-card/60 border-border/70",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"챔피언"}),e.jsxs(R,{value:l,onChange:s=>f(s.target.value),className:"h-9 text-sm",children:[e.jsx("option",{value:"",children:"선택하세요"}),q.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"레벨 (1~18)"}),e.jsx(P,{type:"number",min:1,max:18,value:g,onChange:s=>E(Number.isNaN(Number(s.target.value))?1:Number(s.target.value)),className:"h-9 w-24 text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"아이템 (최대 6개, 단순 스탯 합산)"}),e.jsx(V,{className:"h-56 rounded-md border bg-background/60",children:e.jsx("div",{className:"p-2 space-y-1",children:j.slice(0,200).map(s=>{const m=v.includes(s.id),u=!!s.gold&&s.gold.total>0&&s.gold.purchasable!==!1&&s.inStore!==!1;return e.jsxs("button",{type:"button",onClick:()=>{W(i=>m?i.filter(H=>H!==s.id):i.length>=6?i:[...i,s.id])},className:`w-full flex items-center gap-2 rounded px-2 py-1.5 text-left text-[11px] transition-colors ${m?"bg-primary/10 text-primary border border-primary/40":"hover:bg-muted/60 text-foreground/80"}`,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${a}/img/item/${s.id}.png`,alt:s.name,className:"w-6 h-6 rounded-sm border border-border/60 bg-black/40"}),e.jsx("span",{className:"flex-1 truncate",children:s.name}),u&&e.jsx("span",{className:"text-[10px] text-amber-600 dark:text-amber-400 font-semibold",children:s.gold.total.toLocaleString()})]},s.id)})})}),p.length>0&&e.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["선택된 아이템:"," ",p.map(s=>s.name).join(", ")]})]})]}),e.jsx(A,{className:"p-4 bg-card/60 border-border/70 min-h-[260px]",children:e.jsxs(_,{defaultValue:"stats",className:"w-full",children:[e.jsxs(z,{className:"inline-flex h-9 items-center justify-start rounded-lg bg-muted/60 p-1 mb-3 gap-1",children:[e.jsx(k,{value:"stats",className:"px-3 py-1.5 text-xs",children:"최종 스탯"}),e.jsx(k,{value:"dps",className:"px-3 py-1.5 text-xs",children:"간단 DPS"}),e.jsx(k,{value:"skills",className:"px-3 py-1.5 text-xs",children:"스킬 쿨타임"})]}),e.jsx(w,{value:"stats",className:"mt-0",children:o?e.jsxs("div",{className:"grid grid-cols-2 gap-y-1.5 gap-x-4 text-xs",children:[e.jsx("div",{className:"text-muted-foreground",children:"레벨"}),e.jsx("div",{className:"text-right",children:o.level}),e.jsx("div",{className:"text-muted-foreground",children:"체력"}),e.jsx("div",{className:"text-right",children:Math.round(o.health)}),e.jsx("div",{className:"text-muted-foreground",children:"마나"}),e.jsx("div",{className:"text-right",children:Math.round(o.mana)}),e.jsx("div",{className:"text-muted-foreground",children:"공격력"}),e.jsx("div",{className:"text-right",children:o.attackDamage.toFixed(1)}),e.jsx("div",{className:"text-muted-foreground",children:"방어력"}),e.jsx("div",{className:"text-right",children:o.armor.toFixed(1)}),e.jsx("div",{className:"text-muted-foreground",children:"마법 저항력"}),e.jsx("div",{className:"text-right",children:o.magicResist.toFixed(1)}),e.jsx("div",{className:"text-muted-foreground",children:"이동 속도"}),e.jsx("div",{className:"text-right",children:o.movespeed.toFixed(0)})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"챔피언과 레벨을 선택하면 최종 스탯이 표시됩니다."})}),e.jsx(w,{value:"dps",className:"mt-0",children:!o||I==null?e.jsx("div",{className:"text-sm text-muted-foreground",children:"챔피언과 레벨을 선택하면 평타 기준 간단 DPS를 볼 수 있습니다."}):e.jsxs("div",{className:"space-y-3 text-xs",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"평타 공격력"}),e.jsx("div",{children:o.attackDamage.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"가정 공격 속도"}),e.jsx("div",{children:"0.70 / s"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"근사 DPS (평타만)"}),e.jsx("div",{children:I.toFixed(1)})]})]}),e.jsxs("div",{className:"border-t border-border/60 pt-2 space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"스킬 콤보 (예: QWER, QQW)"}),e.jsx(P,{value:N,onChange:s=>Q(s.target.value),className:"h-7 w-28 text-[11px] px-2"})]}),h?e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"입력 콤보"}),e.jsx("div",{children:h.sequence})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"스킬 횟수"}),e.jsx("div",{children:h.estimatedHits})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"아주 단순한 콤보 피해 (평타기반 근사)"}),e.jsx("div",{children:(F=h.estimatedDamage)==null?void 0:F.toFixed(1)})]})]}):e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"QWER 문자로 콤보를 입력하면 아주 단순한 근사 콤보 피해를 보여줍니다."})]}),e.jsx("p",{className:"mt-1 text-[11px] text-muted-foreground",children:"※ 실제 인게임 공식과 공속/치명타/온히트 및 스킬 계수는 훨씬 복잡하므로, 여기서는 단순 참고용 수치만 제공합니다."})]})}),e.jsx(w,{value:"skills",className:"mt-0",children:r?C.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"스킬 정보가 없습니다."}):e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx("div",{className:"text-[11px] text-muted-foreground mb-1",children:"아이템에서 얻는 스킬 가속(Ability Haste)을 반영한 쿨타임입니다."}),e.jsx("div",{className:"grid grid-cols-1 gap-1",children:C.map((s,m)=>e.jsxs("div",{className:"flex flex-col rounded border border-border/60 bg-background/60 px-2 py-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground",children:["Q","W","E","R"][m]??""}),e.jsx("span",{className:"text-xs font-medium",children:s.name??s.id})]}),e.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["Haste: ",S]})]}),e.jsxs("div",{className:"mt-1.5 grid grid-cols-2 gap-x-2 gap-y-0.5",children:[e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"기본 쿨타임"}),e.jsx("div",{className:"text-[11px] text-right",children:s.cooldowns.join(" / ")}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"가속 적용"}),e.jsx("div",{className:"text-[11px] text-right",children:s.cooldownsWithAbilityHaste.map(u=>typeof u=="number"?u.toFixed(2):u).join(" / ")})]})]},s.id))})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"챔피언을 선택하면 스킬 쿨타임을 확인할 수 있습니다."})})]})})]})]}):e.jsx("div",{className:"w-full max-w-5xl mx-auto px-4 md:px-6 lg:px-8 py-8 md:py-10",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:n.championSelector.loading})})}export{te as default};
