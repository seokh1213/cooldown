import{r as h,j as e,d as Z,f as _t,O as Bt,g as It,v as ze,w as xe,x as Oe,K as Ke,y as He,z as Ge,A as Ue,E as Ze,F as Je,G as pe,I as ge,J as mt,L as Dt,M as ft,N as xt,Q as pt}from"/cooldown/assets/react-vendor-D5Gsrkl4.js";import{c as A,B as se,u as te,g as Le,C as Q,D as gt,V as bt,a as ht,b as jt,d as he,l as M,e as Ft,f as We,P as Mt,S as Qe,h as zt,i as Ot,T as et,j as tt,k as rt,m as Ie,s as De,r as ae,n as st}from"/cooldown/assets/index-DiwfkFbu.js";import{e as Kt,f as ve,X as be,S as Te,g as Ve,G as $e,T as nt,R as Ht}from"/cooldown/assets/lucide-icons-CozzIAH8.js";const Ye=h.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:A("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r}));Ye.displayName="Card";const Gt=h.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:A("flex flex-col space-y-1.5 p-6",t),...r}));Gt.displayName="CardHeader";const Ut=h.forwardRef(({className:t,...r},s)=>e.jsx("h3",{ref:s,className:A("text-2xl font-semibold leading-none tracking-tight",t),...r}));Ut.displayName="CardTitle";const Zt=h.forwardRef(({className:t,...r},s)=>e.jsx("p",{ref:s,className:A("text-sm text-muted-foreground",t),...r}));Zt.displayName="CardDescription";const qe=h.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:A("p-6 pt-0",t),...r}));qe.displayName="CardContent";const Jt=h.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:A("flex items-center p-6 pt-0",t),...r}));Jt.displayName="CardFooter";const ce=h.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:A("w-full caption-bottom text-sm",t),...r})}));ce.displayName="Table";const de=h.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:A("[&_tr]:border-b",t),...r}));de.displayName="TableHeader";const ue=h.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:A("[&_tr:last-child]:border-0",t),...r}));ue.displayName="TableBody";const Wt=h.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:A("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));Wt.displayName="TableFooter";const U=h.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:A("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));U.displayName="TableRow";const H=h.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:A("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r}));H.displayName="TableHead";const I=h.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:A("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r}));I.displayName="TableCell";const Yt=h.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:A("mt-4 text-sm text-muted-foreground",t),...r}));Yt.displayName="TableCaption";const Fe=h.forwardRef(({className:t,type:r,...s},a)=>e.jsx("input",{type:r,className:A("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base md:text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s}));Fe.displayName="Input";function qt({className:t,...r}){return e.jsx("div",{className:A("animate-pulse rounded-md bg-muted",t),...r})}function Xt({addChampion:t,data:r,name:s,thumbnailSrc:a,selected:n}){const[i,p]=h.useState(!1),[m,d]=h.useState(!1),[f,g]=h.useState(n);h.useEffect(()=>{g(n)},[n]);const u=Z.useRef(!1),N=h.useCallback(l=>{if(u.current){u.current=!1;return}l.preventDefault(),l.stopPropagation(),g(!n),t(r)},[t,r,n]),v=h.useCallback(l=>{l.stopPropagation(),u.current=!0,g(!n),t(r),setTimeout(()=>{u.current=!1},300)},[t,r,n]),x=h.useCallback(()=>{p(!0)},[]),b=h.useCallback(()=>{d(!0)},[]);return e.jsxs("div",{className:"flex flex-col items-center justify-center m-1 h-fit",children:[e.jsxs(se,{variant:"ghost",className:"cursor-pointer rounded-full shrink-0 p-0 h-auto w-auto hover:bg-transparent relative touch-manipulation",onClick:N,onTouchStart:v,"aria-label":n?`Deselect ${s}`:`Select ${s}`,"aria-pressed":n,children:[e.jsxs("div",{className:"relative w-12 h-12 md:w-14 md:h-14 shrink-0 overflow-hidden rounded-full",children:[!i&&!m&&e.jsx(qt,{className:"absolute inset-0 rounded-full"}),!i&&!m&&e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-muted via-muted/80 to-muted/60 blur-sm"}),e.jsx("img",{className:A("absolute inset-0 w-full h-full rounded-full bg-black/5 border-0 box-border transition-all duration-200 ease-out object-cover",!n&&!f&&"hover:scale-105",i?"opacity-100":"opacity-0"),src:a,alt:s,loading:"lazy",decoding:"async",width:"56",height:"56",onLoad:x,onError:b}),(f||n)&&e.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{boxShadow:"inset 0 0 0 2px hsl(var(--primary)), 0 0 0 3px hsl(var(--primary) / 0.3)"}})]}),(f||n)&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 md:w-5 md:h-5 bg-primary rounded-full flex items-center justify-center pointer-events-none z-20 shadow-lg border-2 border-background",children:e.jsx(Kt,{className:"w-2.5 h-2.5 md:w-3 md:h-3 text-primary-foreground stroke-[3]"})})]}),e.jsx("div",{className:"text-xs md:text-sm whitespace-nowrap mt-0.5",children:s})]})}const at=Z.memo(Xt);function Qt(t,r){const{lang:s}=te();return h.useMemo(()=>{if(!t)return[];if(!r)return t;const n=Le(r,s);return t.filter(i=>n.some(p=>{const m=p.toLowerCase();return!!(i.name.toLowerCase().includes(m)||i.hangul&&i.hangul.toLowerCase().includes(m)||i.id.toLowerCase().includes(m)||s==="ko_KR"&&(Le(i.name,s).some(f=>f.toLowerCase().includes(m))||i.hangul&&Le(i.hangul,s).some(g=>g.toLowerCase().includes(m))))}))},[t,r,s])}const ot="championSelectorScrollPosition";function er(t,r,s){h.useEffect(()=>{if(!r||!s)return;const a=()=>{if(t.current){const n=sessionStorage.getItem(ot);if(n){const i=parseInt(n,10);t.current.scrollTop=i}}};a(),requestAnimationFrame(()=>{a()}),setTimeout(()=>{a()},200)},[r,s,t]),h.useEffect(()=>{const a=t.current;if(!a||!r||!s)return;let n;const i=()=>{clearTimeout(n),n=setTimeout(()=>{sessionStorage.setItem(ot,a.scrollTop.toString())},100)};return a.addEventListener("scroll",i,{passive:!0}),()=>{clearTimeout(n),a.removeEventListener("scroll",i)}},[r,s,t])}function tr({championList:t,selectedChampions:r,onSelect:s,onClose:a,slotIndex:n,open:i,onOpenChange:p,vsMode:m}){const{t:d}=te(),[f,g]=h.useState(!1),u=i!==void 0,N=u?!!i:f,v=u?p||(()=>{}):g,[x,b]=h.useState(""),[l,c]=h.useState(-1),y=h.useRef(null),w=h.useRef(null),o=h.useRef(null),j=a!==void 0,S=a||(()=>{}),T=Qt(t,x),C=h.useMemo(()=>new Set(r.map(k=>k.id)),[r]),V=h.useMemo(()=>m&&(r.find(k=>k.id===m.currentChampionId)||(t==null?void 0:t.find(k=>k.id===m.currentChampionId)))||null,[m,r,t]),E=h.useMemo(()=>m?T.filter(k=>k.id!==m.currentChampionId):T,[T,m]),z=h.useCallback(k=>{const P=k.target;y.current&&!y.current.contains(P)&&(v(!1),b(""),c(-1))},[v]);h.useEffect(()=>{if(N&&!j)return document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[N,z,j]);const D=h.useCallback(k=>{v(k),k||(b(""),c(-1),a&&a()),p&&p(k)},[a,p]),O=h.useCallback(k=>{s(k),j?c(-1):(v(!1),c(-1),document.body.style.overflow="",S())},[s,a,j]),re=h.useCallback(k=>{if(!(!N&&!j||!t))if(k.key==="ArrowDown")k.preventDefault(),c(P=>P<T.length-1?P+1:P);else if(k.key==="ArrowUp")k.preventDefault(),c(P=>P>0?P-1:-1);else if(k.key==="Enter"&&l>=0){k.preventDefault();const P=T[l];P&&O(P)}else k.key==="Escape"&&D(!1)},[N,j,t,T,l,O,D,C]);return h.useEffect(()=>{if(l>=0&&o.current){const k=o.current.querySelectorAll("[data-champion-item]");k[l]&&k[l].scrollIntoView({block:"nearest"})}},[l]),h.useEffect(()=>{u||v(!!j)},[j,u,v]),er(o,j,N),h.useEffect(()=>{j&&N&&requestAnimationFrame(()=>{var k;(k=w.current)==null||k.focus()})},[j,N]),j?u&&!N?null:e.jsx(gt,{open:N,onOpenChange:D,children:e.jsxs(_t,{children:[e.jsx(Bt,{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm"}),e.jsxs(It,{ref:y,className:"fixed inset-0 left-0 top-0 translate-x-0 translate-y-0 md:inset-auto md:left-[50%] md:top-[50%] md:translate-x-[-50%] md:translate-y-[-50%] w-full h-full md:w-[600px] md:h-[500px] lg:w-[800px] lg:h-[600px] p-0 flex flex-col overflow-hidden max-w-none md:max-w-[600px] lg:max-w-[800px] max-h-none md:max-h-[500px] lg:max-h-[600px] rounded-none md:rounded-xl z-50 border bg-background shadow-lg",onInteractOutside:()=>{D(!1)},onEscapeKeyDown:()=>{D(!1)},children:[e.jsxs(bt,{children:[e.jsx(ht,{children:m?d.championSelector.vsSelectOpponent:d.championSelector.selectChampion}),e.jsx(jt,{children:m?d.championSelector.vsSelectOpponentDescription:d.championSelector.selectChampionDescription})]}),m&&V&&e.jsxs("div",{className:"p-4 border-b-2 border-destructive/30 bg-destructive/5 flex items-center gap-3 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Q(V.version||"",V.id),alt:V.name,className:"w-10 h-10 rounded-full border-2 border-destructive/50"}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-destructive rounded-full p-0.5",children:e.jsx(Te,{className:"h-3 w-3 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-foreground",children:V.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:d.championSelector.currentChampion})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-destructive",children:[e.jsx(Te,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"VS"})]})]}),e.jsxs("div",{className:A("p-4 border-b border-border flex items-center gap-2 shrink-0",m?"bg-muted/30":"bg-card"),children:[e.jsx(ve,{className:A("h-5 w-5 shrink-0",m?"text-destructive":"text-muted-foreground")}),e.jsx(Fe,{ref:w,type:"text",placeholder:m?d.championSelector.vsSearchPlaceholder:d.championSelector.searchPlaceholder,value:x,onChange:k=>{b(k.target.value),c(-1)},onKeyDown:re,className:"flex-1",autoFocus:!0}),e.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>D(!1),children:e.jsx(be,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:o,className:"overflow-y-auto overflow-x-hidden p-4 flex-1 min-h-0 md:flex-none md:w-[600px] md:h-[427px] lg:w-[800px] lg:h-[527px]",children:t?(m?E:T).length>0?e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"mb-3 pb-2 border-b border-destructive/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-semibold",children:d.championSelector.selectOpponentLabel})]})}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:(m?E:T).map((k,P)=>{const B=l===P,L=m?!1:C.has(k.id);return e.jsx("div",{"data-champion-item":!0,className:A(B&&"ring-2 ring-offset-1 rounded-md",m?"ring-destructive":"ring-primary"),children:e.jsx(at,{addChampion:R=>O(R),data:k,name:k.name,selected:L,thumbnailSrc:Q(k.version||"",k.id)})},k.id)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground min-h-[200px] space-y-2",children:[e.jsx(ve,{className:"h-12 w-12 opacity-50"}),e.jsx("p",{className:"text-base font-medium",children:x?d.championSelector.noResults:d.championSelector.emptyList})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground min-h-[200px]",children:d.championSelector.loading})})]})]})}):e.jsxs("div",{ref:y,className:"w-full",children:[e.jsxs(se,{onClick:()=>{v(!0),setTimeout(()=>{var k;return(k=w.current)==null?void 0:k.focus()},0)},variant:"ghost",className:A("w-full flex flex-col items-center justify-center space-y-2","text-muted-foreground hover:text-foreground","py-4 h-auto"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:e.jsx(ve,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-medium",children:d.championSelector.selectChampion})]}),N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>{v(!1),b(""),document.body.style.overflow="",S()},"aria-hidden":"true"}),e.jsxs("div",{className:A("fixed inset-0 z-50 md:absolute md:inset-auto md:top-full md:left-0 md:right-0 md:mt-2 md:z-10 md:rounded-lg md:border md:border-border md:shadow-lg bg-card md:max-h-[60vh] flex flex-col",j&&"md:relative md:inset-0 md:mt-0 md:rounded-lg md:border md:shadow-lg"),children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-2 sticky top-0 bg-card z-10",children:[e.jsx(ve,{className:"h-5 w-5 text-muted-foreground shrink-0"}),e.jsx(Fe,{ref:w,type:"text",placeholder:d.championSelector.searchPlaceholder,value:x,onChange:k=>{b(k.target.value),c(-1)},onKeyDown:re,className:"flex-1",autoFocus:!0}),e.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>{v(!1),b(""),document.body.style.overflow="",S()},children:e.jsx(be,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:o,className:"flex-1 overflow-auto p-4",style:{maxHeight:"calc(100vh - 120px)"},children:t?e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:T.map((k,P)=>{const B=l===P,L=C.has(k.id);return e.jsx("div",{"data-champion-item":!0,className:A(B&&"ring-2 ring-primary ring-offset-1 rounded-md"),children:e.jsx(at,{addChampion:R=>O(R),data:k,name:k.name,selected:L,thumbnailSrc:Q(k.version||"",k.id)})},k.id)})}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:d.championSelector.loading})})]})]})]})}const Ae=Z.memo(tr);function Nt(t="ko_KR"){const r=he(t);return[{key:"hp",label:r.stats.health,format:s=>Math.round(s)},{key:"hpperlevel",label:r.stats.healthPerLevel,format:s=>s.toFixed(1)},{key:"mp",label:r.stats.mana,format:s=>Math.round(s)},{key:"mpperlevel",label:r.stats.manaPerLevel,format:s=>s.toFixed(1)},{key:"movespeed",label:r.stats.movespeed,format:s=>Math.round(s)},{key:"armor",label:r.stats.armor,format:s=>Math.round(s)},{key:"armorperlevel",label:r.stats.armorPerLevel,format:s=>s.toFixed(1)},{key:"spellblock",label:r.stats.spellblock,format:s=>Math.round(s)},{key:"spellblockperlevel",label:r.stats.spellblockPerLevel,format:s=>s.toFixed(1)},{key:"attackdamage",label:r.stats.attackdamage,format:s=>Math.round(s)},{key:"attackdamageperlevel",label:r.stats.attackdamagePerLevel,format:s=>s.toFixed(1)},{key:"attackspeed",label:r.stats.attackspeed,format:s=>s.toFixed(3)},{key:"attackspeedperlevel",label:r.stats.attackspeedPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"attackrange",label:r.stats.attackrange,format:s=>Math.round(s)},{key:"crit",label:r.stats.crit,format:s=>`${(s*100).toFixed(1)}%`},{key:"critperlevel",label:r.stats.critPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"hpregen",label:r.stats.hpregen,format:s=>s.toFixed(1)},{key:"hpregenperlevel",label:r.stats.hpregenPerLevel,format:s=>s.toFixed(1)},{key:"mpregen",label:r.stats.mpregen,format:s=>s.toFixed(1)},{key:"mpregenperlevel",label:r.stats.mpregenPerLevel,format:s=>s.toFixed(1)}]}const fe=["Q","W","E","R"];function rr({champions:t,version:r,championList:s,onAddChampion:a,onRemoveChampion:n,onReorderChampions:i}){const{t:p,lang:m}=te(),[d,f]=h.useState(!1),g=Nt(m),u=ze(xe(He,{activationConstraint:{distance:8}}),xe(Ke,{coordinateGetter:Oe})),N=l=>{},v=l=>{const{active:c,over:y}=l;if(y&&c.id!==y.id&&i){const w=t.findIndex(j=>j.id===c.id),o=t.findIndex(j=>j.id===y.id);w!==-1&&o!==-1&&i(w,o)}},x=({champion:l,children:c,className:y})=>{const{setNodeRef:w,transform:o,transition:j,isDragging:S}=pe({id:l.id,disabled:!0}),C={transform:o?ge.Transform.toString(o):void 0,transition:S?j:void 0,opacity:S?.5:1};return e.jsx(I,{ref:w,style:C,className:y,children:c})},b=({champion:l,index:c})=>{const{attributes:y,listeners:w,setNodeRef:o,transform:j,transition:S,isDragging:T}=pe({id:l.id}),V={transform:j?ge.Transform.toString(j):void 0,transition:T?S:void 0,opacity:T?.5:1};return e.jsx(H,{ref:o,style:V,className:A("text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] select-none",c<t.length-1&&"border-r border-border/30",T&&"z-50"),children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1.5 relative",children:[i&&e.jsx("button",{...y,...w,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity absolute -left-2 top-1/2 -translate-y-1/2","aria-label":"Drag to reorder",children:e.jsx($e,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Q(r,l.id),alt:l.name,className:"w-8 h-8 rounded-full"}),n&&e.jsx(se,{variant:"ghost",size:"icon",className:A("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:E=>{E.stopPropagation(),n(l.id)},"aria-label":`Remove ${l.name}`,children:e.jsx(be,{className:"h-2.5 w-2.5"})})]}),e.jsx("div",{className:"text-[10px] font-semibold leading-tight text-center break-words text-foreground",children:l.name})]})})};return e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{sensors:u,collisionDetection:Ue,onDragStart:N,onDragEnd:v,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(ce,{className:"border-collapse table-fixed w-auto",children:[e.jsx(de,{children:e.jsxs(U,{className:"border-b border-border/30 select-none",children:[e.jsx(H,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[90px] min-w-[90px] border-r border-border/30 select-none",style:{left:0},children:p.stats.label}),e.jsx(Ze,{items:t.map(l=>l.id),strategy:Je,children:t.map((l,c)=>e.jsx(b,{champion:l,index:c},l.id))}),a&&e.jsx(H,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] border-l border-border/30 select-none",children:e.jsxs(se,{onClick:()=>f(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Ve,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsx(ue,{children:g.map(l=>{const c=t.map(o=>{var j;return((j=o.stats)==null?void 0:j[l.key])??0}),y=Math.max(...c),w=Math.min(...c);return e.jsxs(U,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(I,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:l.label}),t.map((o,j)=>{var V;const S=((V=o.stats)==null?void 0:V[l.key])??0,T=S===y&&y!==w,C=S===w&&y!==w;return e.jsx(x,{champion:o,className:A("p-1.5 text-[11px] text-center",j<t.length-1&&"border-r border-border/30",T&&"text-primary font-semibold",C&&"text-muted-foreground"),children:l.format(S)},o.id)}),a&&e.jsx(I,{className:"p-1.5 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[24px]"})})]},l.key)})})]})})}),d&&a&&s&&e.jsx(Ae,{championList:s,selectedChampions:t,onSelect:l=>{a(l)},onClose:()=>f(!1)})]})}function sr({champions:t,version:r,vsMode:s}){const{t:a,lang:n}=te(),i=Nt(n);if(s&&t.length===2){const p=s.championA,m=s.championB;return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(ce,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(de,{children:e.jsxs(U,{className:"border-b border-border/30 select-none",children:[e.jsx(H,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:a.stats.label}),e.jsx(H,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:Q(r,p.id),alt:p.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:p.name})]})}),e.jsx(H,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(H,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:Q(r,m.id),alt:m.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:m.name})]})})]})}),e.jsx(ue,{children:i.map(d=>{var v,x;const f=((v=p.stats)==null?void 0:v[d.key])??0,g=((x=m.stats)==null?void 0:x[d.key])??0,u=Math.max(f,g),N=Math.min(f,g);return e.jsxs(U,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(I,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:d.label}),e.jsx(I,{className:A("p-1.5 text-[10px] text-center border-r border-border/30",f===u&&u!==N&&"text-primary font-semibold",f===N&&u!==N&&"text-muted-foreground"),children:d.format(f)}),e.jsx(I,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(I,{className:A("p-1.5 text-[10px] text-center",g===u&&u!==N&&"text-primary font-semibold",g===N&&u!==N&&"text-muted-foreground"),children:d.format(g)})]},d.key)})})]})})})})})}return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(ce,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(de,{children:e.jsxs(U,{className:"border-b border-border/30 select-none",children:[e.jsx(H,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[70px] min-w-[70px] border-r border-border/30 select-none",style:{left:0},children:a.stats.label}),t.map(p=>e.jsx(H,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:Q(r,p.id),alt:p.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:p.name})]})},p.id))]})}),e.jsx(ue,{children:i.map(p=>{const m=t.map(g=>{var u;return((u=g.stats)==null?void 0:u[p.key])??0}),d=Math.max(...m),f=Math.min(...m);return e.jsxs(U,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(I,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:p.label}),t.map(g=>{var x;const u=((x=g.stats)==null?void 0:x[p.key])??0,N=u===d&&d!==f,v=u===f&&d!==f;return e.jsx(I,{className:A("p-1.5 text-[11px] text-center",N&&"text-primary font-semibold",v&&"text-muted-foreground"),children:p.format(u)},g.id)})]},p.key)})})]})})})})})}async function nr(t,r,s){let a={};try{a=await Ft(t,s)}catch(n){M.warn(`Failed to load Community Dragon data for ${t}:`,n)}return r.map((n,i)=>{let p={};if(a[i.toString()])p=a[i.toString()];else{const m=n.id.replace(t,"");for(const d of Object.keys(a))if(d.toLowerCase().includes(m.toLowerCase())||d.toLowerCase().includes(n.id.toLowerCase())){p=a[d];break}}return{spell:n,communityDragonData:p,spellIndex:i}})}async function vt(t,r){const s={},a=t.map(async n=>{if(!n.spells||n.spells.length===0){s[n.id]=[];return}try{s[n.id]=await nr(n.id,n.spells,r)}catch(i){M.warn(`Failed to get integrated spell data for ${n.id}:`,i),s[n.id]=n.spells.map((p,m)=>({spell:p,communityDragonData:{},spellIndex:m}))}});return await Promise.all(a),s}const Re={physicalDamage:{tag:"span",className:"text-red-600 dark:text-red-500 font-semibold"},magicDamage:{tag:"span",className:"text-blue-600 dark:text-blue-500 font-semibold"},trueDamage:{tag:"span",className:"text-yellow-600 dark:text-yellow-500 font-semibold"},status:{tag:"span",className:"text-purple-600 dark:text-purple-500"},lifeSteal:{tag:"span",className:"text-green-600 dark:text-green-500"},scaleAD:{tag:"span",className:"text-orange-600 dark:text-orange-500"},scaleAP:{tag:"span",className:"text-blue-600 dark:text-blue-400"},scaleArmor:{tag:"span",className:"text-orange-600 dark:text-orange-400"},scaleLevel:{tag:"span",className:"text-gray-600 dark:text-gray-400"},healing:{tag:"span",className:"text-green-600 dark:text-green-400"},speed:{tag:"span",className:"text-cyan-600 dark:text-cyan-500"},keywordMajor:{tag:"span",className:"text-yellow-600 dark:text-yellow-400 font-semibold"},keywordStealth:{tag:"span",className:"text-purple-600 dark:text-purple-400 font-semibold"},spellPassive:{tag:"span",className:"text-gray-600 dark:text-gray-500 italic"},spellActive:{tag:"span",className:"text-gray-900 dark:text-white font-semibold"},recast:{tag:"span",className:"text-yellow-600 dark:text-yellow-300"},damage:{tag:"span",className:"text-red-600 dark:text-red-400"},shield:{tag:"span",className:"text-blue-600 dark:text-blue-300"},mana:{tag:"span",className:"text-blue-600 dark:text-blue-400"},energy:{tag:"span",className:"text-yellow-600 dark:text-yellow-400"},health:{tag:"span",className:"text-red-600 dark:text-red-400"},cooldown:{tag:"span",className:"text-gray-600 dark:text-gray-300"},range:{tag:"span",className:"text-cyan-600 dark:text-cyan-400"},radius:{tag:"span",className:"text-purple-600 dark:text-purple-400"},width:{tag:"span",className:"text-indigo-600 dark:text-indigo-400"},length:{tag:"span",className:"text-pink-600 dark:text-pink-400"},rules:{tag:"span",className:"text-gray-600 dark:text-gray-400 italic"}};function ar(t){let r=t;r=r.replace(/<font\s+color=['"]([^'"]+)['"]\s*>/gi,'<span style="color: $1">'),r=r.replace(/<\/font>/gi,"</span>"),Object.entries(Re).forEach(([a,{tag:n,className:i}])=>{const p=new RegExp(`</${a}>`,"gi");r=r.replace(p,`</${n}>`);const m=new RegExp(`<${a}>`,"gi");r=r.replace(m,`<${n}${i?` class="${i}"`:""}>`)});const s=["keywordMajor","keywordStealth","rules","recast"];return s.forEach(a=>{r=r.replace(new RegExp(`</${a}>`,"gi"),"</span>"),a==="rules"?r=r.replace(new RegExp(`<${a}>`,"gi"),'<span class="text-gray-600 dark:text-gray-400 italic">'):a==="keywordStealth"?r=r.replace(new RegExp(`<${a}>`,"gi"),'<span class="text-purple-600 dark:text-purple-400 font-semibold">'):r=r.replace(new RegExp(`<${a}>`,"gi"),'<span class="text-yellow-600 dark:text-yellow-400 font-semibold">')}),r=r.replace(/<(\w+)(?![\\w])>/gi,(a,n)=>Re[n]||s.includes(n)||n==="font"||n==="br"?a:"<span>"),r=r.replace(/<\/(\w+)(?![\\w])>/gi,(a,n)=>Re[n]||s.includes(n)||n==="font"||n==="br"?a:"</span>"),r}function yt(t){const r=t.trim(),s=/^([a-zA-Z_][a-zA-Z0-9_]*)\s*([*+\/-])\s*(-?\d+(?:\.\d+)?)$/,a=r.match(s);if(a){const n=a[2];return{type:"formula",variable:a[1],operator:n,operand:parseFloat(a[3])}}return{type:"variable",variable:r}}function wt(t,r,s){if(!r||typeof r!="string")return null;const a=Object.entries(t).find(([d])=>d!=null&&d.toLowerCase()===r.toLowerCase());if(!a)return null;const[,n]=a,i=n.slice(1,s+1);if(i.length===0)return null;const p=i[0];return i.every(d=>d===p)?p:i}function St(t,r){if(r.type!=="formula"||!r.operator||r.operand==null)return t;const{operator:s,operand:a}=r;return s==="*"?Array.isArray(t)?t.map(n=>n*a):t*a:s==="+"?Array.isArray(t)?t.map(n=>n+a):t+a:s==="-"?Array.isArray(t)?t.map(n=>n-a):t-a:s==="/"?Array.isArray(t)?t.map(n=>n/a):t/a:t}function le(t){if(t==null||t==="")return"";const r=typeof t=="number"?t:parseFloat(String(t));return isNaN(r)?String(t):r%1===0?r.toString():parseFloat(r.toFixed(3)).toString()}function lt(t,r,s=!1){if(!t||t.length===0)return"";const a=s&&t.length>1?1:0,i=t.slice(a).filter(g=>g!=null&&g!==""&&g!=="0");if(i.length===0)return"";const p=r?i.slice(0,r):i;if(p.length===0)return"";const m=p.map(g=>le(g)),d=m[0];return m.every(g=>g===d)?d:m.join("/")}function or(t){let r=t;return r=r.replace(/<br\s*\/?>/gi,"<br />"),r=r.replace(/[^\S\r\n]+/g," "),r}function Y(t){return Array.isArray(t)}function it(t,r){return Array.isArray(t)?t:Array.from({length:r},()=>t)}function Ct(t,r,s){if(!Y(t)&&!Y(r))return s(t,r);const a=Y(t)?t:it(t,Y(r)?r.length:1),n=Y(r)?r:it(r,a.length);if(a.length!==n.length)throw new Error(`Vector length mismatch: ${a.length} vs ${n.length}`);return a.map((i,p)=>s(i,n[p]))}function je(t,r){return Ct(t,r,(s,a)=>s+a)}function Ne(t,r){return Ct(t,r,(s,a)=>s*a)}function Pe(t){return Y(t)?t.every(s=>s===t[0])?le(t[0]):t.map(s=>le(s)).join("/"):le(t)}function _e(t){return Y(t)?t.map(r=>r*100):t*100}function ct(t,r,s="ko_KR"){const a=he(s),n=t!=null,i=r!=null;if(!n&&!i)return a.stats.abilityPower;const p=t??r;return p===2?t===2&&r===2?a.stats.bonusAttackDamage:a.stats.attackDamage:p===12?t===12&&r===2?a.stats.bonusHealth:a.stats.health:p===1?t===1&&r===2?a.stats.bonusArmor:a.stats.armor:p===6?t===6&&r===2?a.stats.bonusMagicResist:a.stats.magicResist:p===18?t===18&&r===2?a.stats.bonusLifesteal:a.stats.lifesteal:""}function kt(t,r,s){const a=s==null?void 0:s.DataValues;if(!a)return null;const n=wt(a,t.variable,r.maxrank);if(n==null)return null;const i=St(n,t);return Pe(i)}function dt(t,r){const s=a=>Number.isFinite(a)?a.toFixed(r).replace(/\.?0+$/,""):String(a);if(Y(t)){const a=t.map(p=>s(p)),n=a[0];return a.every(p=>p===n)?n:a.join("/")}return s(t)}function lr(t,r,s,a="ko_KR"){const n=s==null?void 0:s.mSpellCalculations,i=s==null?void 0:s.DataValues;if(!n)return null;const p=Object.entries(n).find(([o])=>o!=null&&o.toLowerCase()===t.variable.toLowerCase());if(!p)return null;const[m]=p;function d(o){if(!o||typeof o!="string")return M.debug(`DataValue name is invalid: ${o}`),null;if(!i)return M.debug("dataValues is undefined"),null;const j=wt(i,o,r.maxrank);return j??(M.debug(`DataValue "${o}" missing`),null)}function f(o,j=new Set){var T;if(!n)throw new Error("spellCalcs is undefined");const S=n[o];if(!S)throw new Error(`SpellCalculation "${o}" not found`);if(j.has(o))throw new Error(`Circular reference in mSpellCalculations: ${o}`);if(j.add(o),S.__type==="GameCalculationModified"){const C=S;if(!C.mModifiedGameCalculation)throw new Error("mModifiedGameCalculation is missing");const V=f(C.mModifiedGameCalculation,j);if(!C.mMultiplier)return V;let E=null;if(C.mMultiplier.mDataValue){if(E=d(C.mMultiplier.mDataValue),E==null)return V}else C.mMultiplier.mNumber!=null&&(E=C.mMultiplier.mNumber);if(E==null)return V;const z=Ne(V.base,E),D=V.statParts.map(O=>({name:O.name,ratio:Ne(O.ratio,E)}));return{base:z,statParts:D,isPercent:V.isPercent,precision:V.precision}}if(S.__type==="GameCalculation"){const C=S,V=C.mFormulaParts??[];let E=0;const z=[],D=!!C.mDisplayAsPercent;if(V.length===1&&V[0].__type==="ByCharLevelBreakpointsCalculationPart"&&C.mSimpleTooltipCalculationDisplay===6){const P=V[0],B=P.mLevel1Value??0;let L=B;for(const F of P.mBreakpoints??[])typeof F.mAdditionalBonusAtThisLevel=="number"&&(L+=F.mAdditionalBonusAtThisLevel);return{base:[B,L],statParts:[],isPercent:D,isBreakpointRange:!0,precision:void 0}}if(V.length===1&&V[0].__type==="ByCharLevelBreakpointsCalculationPart"&&D){const P=V[0],B=P.mLevel1Value??0,L=P.mInitialBonusPerLevel??0,R=(P.mBreakpoints??[])[0];if(L!==0&&(R!=null&&R.mLevel)){const _=R.mLevel-1,F=Math.max(_-1,0),q=B+F*L;return{base:[B,q],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}}if(V.length===1&&V[0].__type==="ByCharLevelInterpolationCalculationPart"&&D){const P=V[0],B=P.mStartValue??0,L=P.mEndValue??B;return{base:[B,L],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}for(const P of V){const B=P.__type;if(B==="NamedDataValueCalculationPart"){const L=P;if(!L.mDataValue){M.debug("NamedDataValueCalculationPart missing mDataValue",P);continue}const R=d(L.mDataValue);if(R==null)continue;E=je(E,R)}else if(B==="EffectValueCalculationPart"){const R=P.mEffectIndex??0,_=((T=r.effectBurn)==null?void 0:T[R])??null;if(!_)M.debug(`EffectValueCalculationPart: effectBurn[${R}] is missing`,{spellId:r.id});else{const F=_.split("/").map(q=>parseFloat(q)).filter(q=>!Number.isNaN(q));if(F.length>0){const q=F.length>r.maxrank?F.slice(0,r.maxrank):F;E=je(E,q)}}}else if(B==="StatByNamedDataValueCalculationPart"){const L=P;if(!L.mDataValue){M.debug("StatByNamedDataValueCalculationPart missing mDataValue",P);continue}const R=d(L.mDataValue);if(R==null)continue;const _=ct(L.mStat,L.mStatFormula,a);z.push({name:_,ratio:R})}else if(B==="StatByCoefficientCalculationPart"){const L=P;if(L.mCoefficient==null){M.debug("StatByCoefficientCalculationPart missing mCoefficient",P);continue}const R=ct(L.mStat,L.mStatFormula,a),_=L.mCoefficient;z.push({name:R,ratio:_,isCoefficient:!0})}else if(B==="AbilityResourceByCoefficientCalculationPart"){const L=P;if(L.mCoefficient==null){M.debug("AbilityResourceByCoefficientCalculationPart missing mCoefficient",P);continue}const R=he(a);let _=R.common.mana;if(r.costType){const ne=r.costType.trim();ne&&!ne.includes("{{")?_=ne:r.resource&&!r.resource.includes("{{")&&(_=r.resource)}else r.resource&&!r.resource.includes("{{")&&(_=r.resource);const q=L.mStatFormula===2?`${R.common.bonus} ${_}`:_,ee=L.mCoefficient;z.push({name:q,ratio:ee,isCoefficient:!0})}else if(B==="NumberCalculationPart"){const R=P.mNumber??0;E=je(E,R)}else if(B==="ByCharLevelBreakpointsCalculationPart"){const L=P;let R=L.mLevel1Value||0;for(const _ of L.mBreakpoints??[])_.mAdditionalBonusAtThisLevel!=null&&(R+=_.mAdditionalBonusAtThisLevel);E=je(E,R)}else if(B==="ProductOfSubPartsCalculationPart"){const L=P,R=ee=>{var Ce;if(!ee||!ee.__type)return 0;const ne=ee.__type;if(ne==="NamedDataValueCalculationPart"){const me=ee;if(!me.mDataValue)return M.debug("ProductOfSubPartsCalculationPart: NamedDataValueCalculationPart missing mDataValue",ee),0;const $=d(me.mDataValue);return $??0}if(ne==="NumberCalculationPart")return ee.mNumber??0;if(ne==="EffectValueCalculationPart"){const $=ee.mEffectIndex??0,G=((Ce=r.effectBurn)==null?void 0:Ce[$])??null;if(!G)return M.debug(`ProductOfSubPartsCalculationPart: EffectValueCalculationPart missing effectBurn[${$}]`,{spellId:r.id}),0;let X;if(G.includes("/")){const J=G.split("/").map(K=>Number.parseFloat(K)).filter(K=>!Number.isNaN(K));if(J.length===0)return 0;X=J.length===1?J[0]:J}else{const J=Number.parseFloat(G);if(Number.isNaN(J))return 0;X=J}return X}return M.debug(`ProductOfSubPartsCalculationPart: unsupported sub part type "${ne}"`,ee),0},_=R(L.mPart1),F=R(L.mPart2),q=Ne(_,F);E=je(E,q)}}let O=E,re=z;if(C.mMultiplier){let P=null;C.mMultiplier.mDataValue?(P=d(C.mMultiplier.mDataValue),P==null&&(P=null)):C.mMultiplier.mNumber!=null&&(P=C.mMultiplier.mNumber),P!=null&&(O=Ne(O,P),re=re.map(B=>({...B,ratio:Ne(B.ratio,P)})))}let k;return typeof C.mPrecision=="number"&&C.mPrecision>=0?k=C.mPrecision+1:k=void 0,{base:O,statParts:re,isPercent:D,precision:k}}throw new Error(`Unsupported mSpellCalculation type: ${S.__type}`)}let g;try{g=f(m)}catch(o){return M.error("Failed to evaluate calculation:",o),null}let u;const N=g.precision;g.isPercent?N!=null?Y(g.base)?u=g.base.map(o=>o*100):u=g.base*100:u=_e(g.base):u=g.base;const v=g.statParts.map(o=>{if(o.isCoefficient){const j=N!=null?Y(o.ratio)?o.ratio.map(S=>S*100):o.ratio*100:_e(o.ratio);return{...o,ratio:j}}if(N!=null){const j=Y(o.ratio)?o.ratio.map(S=>S*100):o.ratio*100;return{...o,ratio:j}}return{...o,ratio:_e(o.ratio)}});let x=null;const b=Y(u)&&u.length>0&&u.every(o=>o===0),l=!Y(u)&&u===0;if(!b&&!l)if(g.isCharLevelRange&&Y(u)&&u.length===2){const[o,j]=u,S=le(o),T=le(j);x=`(${S}% ~ ${T}%)`}else if(g.isBreakpointRange&&Y(u)&&u.length===2){const[o,j]=u,S=le(o),T=le(j);x=g.isPercent?`(${S}% ~ ${T}%)`:`(${S} ~ ${T})`}else{const o=N!=null?dt(u,N):Pe(u);x=g.isPercent?`${o}%`:o}const c=v.map(o=>{const j=N!=null?dt(o.ratio,N):Pe(o.ratio);return o.name?`(${j}% ${o.name})`:`(${j}%)`}),y=[];if(x&&y.push(x),y.push(...c),y.length===0)return null;const w=y.join(" + ");return y.length===1?w:`(${w})`}function ir(t,r){return!Number.isFinite(r)||r<0?t:t.replace(/-?\d+(?:\.\d+)?/g,s=>{const a=Number.parseFloat(s);return Number.isFinite(a)?a.toFixed(r):s})}function Tt(t,r,s,a="ko_KR"){if(!r)return t;let n=t;n=n.replace(/(}})\s*\+\s*(\S)/g,"$1 + $2").replace(/(\S)\s*\+\s*({{)/g,"$1 + $2").replace(/(\S)\s*~\s*(\S)/g,"$1 ~ $2"),n=n.replace(/\{\{([^}]*\{\{[^}]*}}[^}]*)}}/g,()=>""),n=n.replace(/\{\{Spell_[^}]*Tooltip[^}]*}}/gi,""),n=n.replace(/\{\{spellmodifierdescriptionappend}}/gi,"");const i=/\{\{([^}]+)}}/g;return n=n.replace(i,(p,m)=>{const d=m.trim();if(d==="spellmodifierdescriptionappend"||d.includes("gamemodeinteger")||d.includes("Spell_")&&d.includes("Tooltip"))return"";let f=d,g;const u=/^([a-zA-Z_][a-zA-Z0-9_]*)(?:\.(\d+))(.*)$/.exec(d);if(u){const[,v,x,b]=u,l=Number.parseInt(x,10);Number.isFinite(l)&&(g=l,f=`${v}${b}`)}const N=cr(f,r,s,a);return N!==null?g!==void 0?ir(N,g):N:""}),n=n.replace(/\{\{\s*\}/g,""),n=n.replace(/\}\}/g,""),n=n.replace(/\{\{/g,""),n=n.replace(/%[^\s:%]+:[^\s%]+%/g,""),n=n.replace(/\s+%\s+/g," "),n=n.replace(new RegExp("(?<!\\d)\\s*%\\s*(?!\\d)","g"),""),n=n.replace(/^\s*%\s*(?!\d)/g,""),n=n.replace(new RegExp("(?<!\\d)\\s*%\\s*$","g"),""),n=n.replace(/[^\S\r\n]+/g," "),n}function cr(t,r,s,a="ko_KR"){const n=yt(t),i=dr(n,r,s);if(i!==null)return i;const p=kt(n,r,s);return p!==null?p:lr(n,r,s,a)}function dr(t,r,s){const a=t.variable,n=/^e(\d+)$/i.exec(a);if(!n)return null;const i=Number.parseInt(n[1],10);if(!Number.isFinite(i)||i<=0)return null;const p=(s==null?void 0:s.effectBurn)??r.effectBurn;if(!p)return null;const m=p[i];if(!m)return null;let d;if(m.includes("/")){const g=m.split("/").map(u=>Number.parseFloat(u)).filter(u=>!Number.isNaN(u));if(g.length===0)return null;d=g.length===1?g[0]:g}else{const g=Number.parseFloat(m);if(Number.isNaN(g))return null;d=g}const f=St(d,t);return Pe(f)}function Be(t,r,s,a="ko_KR"){if(!t)return"";let n=t;return n=ar(n),n=Tt(n,r,s,a),n=or(n),n=n.replace(/\n/g,"<br />"),n}function ut(t,r,s="ko_KR"){const a=he(s);if(!t.leveltip||!t.leveltip.label||!t.leveltip.effect)return"";let n;r&&(r.DataValues?n=r:n={DataValues:r});const{label:i,effect:p}=t.leveltip,m=[];for(let d=0;d<i.length&&d<p.length;d++){const f=i[d],u=p[d].match(/\{\{\s*([^}]+)\s*\}\}/);if(!u)continue;const N=u[1].trim();let v=null;if(n)try{const l=yt(N),c=kt(l,t,n);if(c&&c.trim()!==""){let y=c;(f.includes("%")||f.toLowerCase().includes("percent")||f.toLowerCase().includes("퍼센트")||f.toLowerCase().includes("둔화"))&&!y.includes("%")&&(y=y.split("/").map(S=>S&&`${S}%`).join("/"));let o=a.common.mana;if(t.costType){const S=t.costType.trim();S&&!S.includes("{{")?o=S:t.resource&&!t.resource.includes("{{")&&(o=t.resource)}else t.resource&&!t.resource.includes("{{")&&(o=t.resource);const j=f.replace("@AbilityResourceName@",o);if(j.includes("{{")||j.includes("}}"))continue;m.push(`${j}: [${y}]`);continue}}catch{}const x=N;v=null;const b=x.match(/^e(\d+)$/i);if(b){const l=parseInt(b[1]);if(t.effectBurn&&t.effectBurn.length>l){const c=t.effectBurn[l];c&&c!==null&&c!=="0"&&(v=c)}}else if(x.toLowerCase()==="cost"||x.toLowerCase().includes("cost"))t.costBurn&&(v=t.costBurn);else if(x.toLowerCase().includes("cooldown"))t.cooldownBurn&&(v=t.cooldownBurn);else if(x.toLowerCase().includes("ammorechargetime")||x.toLowerCase().includes("ammorecharge")){const l=(r==null?void 0:r.DataValues)||r;if(l&&l.mAmmoRechargeTime){const c=l.mAmmoRechargeTime;if(Array.isArray(c)&&c.length>1){const w=c.slice(1).map(j=>typeof j=="number"?j:parseFloat(String(j))),o=lt(w,t.maxrank,!1);o&&(v=o)}}}if(v){const l=lt(v.includes("/")?v.split("/"):[v],t.maxrank);if(l){let c=a.common.mana;if(t.costType){const o=t.costType.trim();o&&!o.includes("{{")?c=o:t.resource&&!t.resource.includes("{{")&&(c=t.resource)}else t.resource&&!t.resource.includes("{{")&&(c=t.resource);const y=f.replace("@AbilityResourceName@",c);if(y.includes("{{")||y.includes("}}"))continue;let w=l;(f.includes("%")||f.toLowerCase().includes("slow")||f.toLowerCase().includes("둔화"))&&(l.includes("%")||(w=l.split("/").map(o=>`${o}%`).join("/"))),m.push(`${y}: [${w}]`)}}}return m.length===0?"":m.join("<br />")}function ur(t,r,s="ko_KR"){var m,d;const a=he(s);if(!t||!t.cooldown||!Array.isArray(t.cooldown)||t.cooldown.length===0)return null;const n=((m=r==null?void 0:r.communityDragonData)==null?void 0:m.DataValues)||(r==null?void 0:r.communityDragonData),i=n==null?void 0:n.mAmmoRechargeTime;if(t.cooldown[0]===0&&i&&Array.isArray(i)&&i.length>1&&i){const f=i[1],g=((d=t.effectBurn)==null?void 0:d[1])||"3";return`${a.common.rechargeTime} ${f}${a.common.seconds} (${a.common.max}: ${g}${a.common.items})`}if(t.cooldownBurn){const f=t.cooldownBurn.split("/");return f.length>1&&f.every(g=>g===f[0])?`${f[0]}${a.common.seconds}`:`${t.cooldownBurn}${a.common.seconds}`}if(t.cooldown&&t.cooldown.length>0){const f=t.cooldown[0];return t.cooldown.every(g=>g===f)?`${f}${a.common.seconds}`:`${t.cooldown.join("/")}${a.common.seconds}`}return null}function ie(t){if(!t)return t;let r=t.replace(/\(\s*\)/g,"");return r=r.replace(/\s{2,}/g," ").trim(),r}function mr(t,r,s="ko_KR"){var m;const a=he(s);if(!t)return null;const n=Array.isArray(t.cost)&&t.cost.length>0,i=n&&t.cost.every(d=>d===0),p=t.costBurn==="0";if((p||i)&&typeof t.resource=="string"&&t.resource.includes("{{")){const d=t.resource.trim(),f=((m=r==null?void 0:r.communityDragonData)==null?void 0:m.DataValues)||(r==null?void 0:r.communityDragonData);if(f){const u=Tt(d,t,{DataValues:f}).trim();if(u)return ie(u)}return ie(a.common.noCost)}if(p||i)return ie(a.common.noCost);if(t.costBurn){const d=t.costBurn.split("/");return d.length>1&&d.every(f=>f===d[0])?ie(`${a.common.mana} ${d[0]}`):ie(`${a.common.mana} ${t.costBurn}`)}if(n){const d=t.cost[0];return t.cost.every(f=>f===d)?ie(`${a.common.mana} ${d}`):ie(`${a.common.mana} ${t.cost.join("/")}`)}return null}function Pt(t,r,s){var m;const a=((m=s==null?void 0:s.communityDragonData)==null?void 0:m.DataValues)||(s==null?void 0:s.communityDragonData),n=a==null?void 0:a.mAmmoRechargeTime,i=t.cooldown[r-1];return i===0&&n&&Array.isArray(n)&&n.length>r&&n?n[r]!==void 0?String(n[r]):"":i!=null?String(i):""}function oe({skill:t,skillIdx:r,version:s,spellData:a,isPassive:n,passiveName:i,passiveDescription:p,passiveImageFull:m,size:d="default"}){const{t:f,lang:g}=te(),N=We()==="mobile",[v,x]=Z.useState(!1),b=Z.useRef(null),l=n&&m?null:ur(t,a,g),c=n&&m?null:mr(t,a,g),y=d==="small",w=y?"min-w-6 min-h-6 w-6 h-6":"min-w-8 min-h-8 w-8 h-8",o=y?"text-[8px]":"text-[9px]",j=e.jsx("div",{ref:b,className:`flex flex-col items-center gap-0.5 p-1 -m-1 touch-manipulation ${N?"cursor-pointer":"cursor-help"}`,onClick:T=>{N&&(T.stopPropagation(),x(C=>!C))},onTouchStart:T=>{N&&(T.stopPropagation(),x(C=>!C))},children:n&&m?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:Mt(s,m),alt:"Passive",className:A(w,"rounded")}),e.jsx("span",{className:A(o,"font-semibold"),children:"P"})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:Qe(s,t.id),alt:fe[r],className:A(w,"rounded")}),e.jsx("span",{className:A(o,"font-semibold"),children:fe[r]})]})}),S=()=>n&&m?e.jsxs(e.Fragment,{children:[i&&e.jsx("div",{className:`font-semibold text-sm ${N?"pr-10":""}`,children:i}),p&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Be(p,void 0,void 0,g)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground leading-relaxed border-t pt-3 mt-3 flex items-start gap-1.5",children:[e.jsx(nt,{className:"w-3 h-3 mt-0.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:f.skillTooltip.warningPassive})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex items-start gap-3 border-b pb-3 ${N?"pr-10":""}`,children:[e.jsx("img",{src:Qe(s,t.id),alt:fe[r],className:"w-12 h-12 min-w-12 min-h-12 rounded flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:t.name&&e.jsxs("div",{className:"font-semibold text-sm",children:["[",fe[r],"] ",t.name]})}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[l&&e.jsx("div",{className:"text-xs text-muted-foreground",children:l.includes(" (")?e.jsxs(e.Fragment,{children:[l.split(" (")[0],e.jsx("br",{}),"(",l.split(" (")[1]]}):l}),c&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 whitespace-nowrap",children:c})]})]}),t.description&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Be(t.description,t,a==null?void 0:a.communityDragonData,g).replace(/<br\s*\/?>/gi," ")}})}),t.tooltip&&e.jsx("div",{className:"text-xs text-muted-foreground leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Be(t.tooltip,t,a==null?void 0:a.communityDragonData,g)}})}),a&&ut(t,a.communityDragonData,g)&&e.jsx("div",{className:"text-[11px] leading-relaxed text-muted-foreground border-t pt-3 mt-3",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:ut(t,a.communityDragonData,g)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground leading-relaxed border-t pt-3 mt-3 flex items-start gap-1.5",children:[e.jsx(nt,{className:"w-3 h-3 mt-0.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:f.skillTooltip.warningSkill})]})]});return N?e.jsxs(e.Fragment,{children:[j,e.jsx(gt,{open:v,onOpenChange:x,children:e.jsxs(zt,{className:"w-[calc(100vw-32px)] max-w-lg h-[70vh] max-h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(bt,{children:[e.jsx(ht,{children:n&&m?`${i||f.skillTooltip.passive} ${f.skillTooltip.skillInfo}`:`[${fe[r]}] ${t.name||f.skillTooltip.skill} ${f.skillTooltip.skillInfo}`}),e.jsx(jt,{children:n&&m?`${i||f.skillTooltip.passive} ${f.skillTooltip.skillDescription}`:`[${fe[r]}] ${t.name||f.skillTooltip.skill} ${f.skillTooltip.skillDescription}`})]}),e.jsx(Ot,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4 flex flex-col gap-3",children:S()})})]})})]}):n&&m?e.jsxs(et,{children:[e.jsx(tt,{asChild:!0,children:j}),e.jsx(rt,{side:"top",align:"center",sideOffset:8,className:"max-w-xs p-3 space-y-2",children:S()})]}):e.jsxs(et,{children:[e.jsx(tt,{asChild:!0,children:j}),e.jsx(rt,{side:"top",align:"center",sideOffset:8,className:"max-w-sm p-4 space-y-3",children:S()})]})}function fr({champions:t,version:r,championList:s,onAddChampion:a,onRemoveChampion:n,onReorderChampions:i,vsMode:p}){const{t:m}=te(),[d,f]=h.useState(!1),[g,u]=Z.useState({}),N=ze(xe(He,{activationConstraint:{distance:8}}),xe(Ke,{coordinateGetter:Oe})),v=o=>{},x=o=>{const{active:j,over:S}=o;if(S&&j.id!==S.id&&i){const T=t.findIndex(V=>V.id===j.id),C=t.findIndex(V=>V.id===S.id);T!==-1&&C!==-1&&i(T,C)}};Z.useEffect(()=>{const o=async()=>{try{const j=await vt(t,r);u(j)}catch(j){M.warn("Failed to load integrated spell data:",j),u({})}};t.length>0&&o()},[t,r]);const b=Z.useMemo(()=>Math.max(...t.map(o=>o.spells?Math.max(...o.spells.map(j=>j.maxrank)):0)),[t]),l=Z.useCallback((o,j)=>{const S=g[o];return!S||S.length<=j?null:S[j]},[g]),c=Z.useMemo(()=>Array.from({length:b},(o,j)=>{const S=j+1;return{level:S,skills:t.map(T=>T.spells?T.spells.map((C,V)=>{const E=l(T.id,V),z=Pt(C,S,E);return{skill:C,cooldown:z}}):null)}}),[t,b,l]),y=({champion:o,children:j,className:S})=>{const{setNodeRef:T,transform:C,transition:V,isDragging:E}=pe({id:o.id,disabled:!0}),D={transform:C?ge.Transform.toString(C):void 0,transition:E?V:void 0,opacity:E?.5:1};return e.jsx(I,{ref:T,style:D,className:S,children:j})},w=({champion:o,index:j})=>{const{attributes:S,listeners:T,setNodeRef:C,transform:V,transition:E,isDragging:z}=pe({id:o.id}),O={transform:V?ge.Transform.toString(V):void 0,transition:z?E:void 0,opacity:z?.5:1};return e.jsx(H,{ref:C,style:O,className:A("text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] select-none",j<t.length-1&&"border-r border-border/30",z&&"z-50"),children:e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 relative",children:[i&&e.jsx("button",{...S,...T,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity -ml-1","aria-label":"Drag to reorder",children:e.jsx($e,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Q(r,o.id),alt:o.name,className:"w-8 h-8 rounded-full"}),n&&e.jsx(se,{variant:"ghost",size:"icon",className:A("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:re=>{re.stopPropagation(),n(o.id)},"aria-label":`Remove ${o.name}`,children:e.jsx(be,{className:"h-2.5 w-2.5"})})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("div",{className:"text-[11px] font-semibold leading-tight text-foreground",children:o.name}),e.jsx("div",{className:"text-[9px] text-muted-foreground leading-tight",children:o.title})]})]})})};return e.jsx(Ie,{delayDuration:0,skipDelayDuration:150,children:e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{sensors:N,collisionDetection:Ue,onDragStart:v,onDragEnd:x,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(ce,{className:"border-collapse table-fixed w-auto",children:[e.jsx(de,{children:e.jsxs(U,{className:"border-b border-border/30 select-none",children:[e.jsx(H,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[80px] min-w-[80px] border-r border-border/30 select-none",style:{left:0},children:m.common.level}),e.jsx(Ze,{items:t.map(o=>o.id),strategy:Je,children:t.map((o,j)=>e.jsx(w,{champion:o,index:j},o.id))}),a&&e.jsx(H,{className:"text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] border-l border-border/30 select-none",children:e.jsxs(se,{onClick:()=>f(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Ve,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsxs(ue,{children:[e.jsxs(U,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(I,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:m.skills.label}),t.map((o,j)=>{var S;return e.jsx(y,{champion:o,className:A("p-2",j<t.length-1&&"border-r border-border/30"),children:e.jsxs("div",{className:"flex justify-center gap-1.5",children:[o.passive&&e.jsx(oe,{isPassive:!0,passiveName:o.passive.name,passiveDescription:o.passive.description,passiveImageFull:o.passive.image.full,skill:{},skillIdx:0,version:r}),(S=o.spells)==null?void 0:S.map((T,C)=>{const V=l(o.id,C);return e.jsx(oe,{skill:T,skillIdx:C,version:r,spellData:V},T.id)})]})},o.id)}),a&&e.jsx(I,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]}),c.map((o,j)=>e.jsxs(U,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(I,{className:A("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",j===c.length-1&&"rounded-bl-lg"),style:{left:0},children:[o.level,m.common.level]}),o.skills.map((S,T)=>{const C=t[T];return e.jsx(y,{champion:C,className:A("p-2",T<t.length-1&&"border-r border-border/30"),children:S?e.jsxs("div",{className:"flex justify-center gap-1.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),S.map((V,E)=>e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs font-semibold",children:V.cooldown!==""?`${V.cooldown}${m.common.seconds}`:"-"})},E))]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})},C.id)}),a&&e.jsx(I,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]},o.level))]})]})})}),d&&a&&s&&e.jsx(Ae,{championList:s,selectedChampions:t,onSelect:o=>{a(o)},onClose:()=>f(!1)})]})})}function xr({champions:t,version:r,vsMode:s}){var f,g;const{t:a}=te(),[n,i]=Z.useState({});Z.useEffect(()=>{const u=async()=>{try{const N=await vt(t,r);i(N)}catch(N){M.warn("Failed to load integrated spell data:",N),i({})}};t.length>0&&u()},[t,r]);const p=Z.useMemo(()=>Math.max(...t.map(u=>u.spells?Math.max(...u.spells.map(N=>N.maxrank)):0)),[t]),m=Z.useCallback((u,N)=>{const v=n[u];return!v||v.length<=N?null:v[N]},[n]),d=Z.useMemo(()=>Array.from({length:p},(u,N)=>{const v=N+1;return{level:v,skills:t.map(x=>x.spells?x.spells.map((b,l)=>{const c=m(x.id,l),y=Pt(b,v,c);return{skill:b,cooldown:y}}):null)}}),[t,p,m]);if(s&&t.length===2){const u=s.championA,N=s.championB;return e.jsx(Ie,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(ce,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(de,{children:e.jsxs(U,{className:"border-b border-border/30 select-none",children:[e.jsx(H,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:a.common.level}),e.jsx(H,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:Q(r,u.id),alt:u.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:u.name})]})}),e.jsx(H,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(H,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:Q(r,N.id),alt:N.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:N.name})]})})]})}),e.jsxs(ue,{children:[e.jsxs(U,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(I,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:a.skills.label}),e.jsx(I,{className:"p-1.5 border-r border-border/30",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[u.passive&&e.jsx(oe,{isPassive:!0,passiveName:u.passive.name,passiveDescription:u.passive.description,passiveImageFull:u.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(f=u.spells)==null?void 0:f.map((v,x)=>{const b=m(u.id,x);return e.jsx(oe,{skill:v,skillIdx:x,version:r,spellData:b,size:"small"},v.id)})]})}),e.jsx(I,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(I,{className:"p-1.5",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[N.passive&&e.jsx(oe,{isPassive:!0,passiveName:N.passive.name,passiveDescription:N.passive.description,passiveImageFull:N.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(g=N.spells)==null?void 0:g.map((v,x)=>{const b=m(N.id,x);return e.jsx(oe,{skill:v,skillIdx:x,version:r,spellData:b,size:"small"},v.id)})]})})]}),d.map((v,x)=>{const b=v.skills[0],l=v.skills[1];return e.jsxs(U,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(I,{className:A("p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",x===d.length-1&&"rounded-bl-lg"),style:{left:0},children:[v.level,a.common.level]}),e.jsx(I,{className:"p-1.5 border-r border-border/30",children:b?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),b.map((c,y)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:c.cooldown!==""?`${c.cooldown}${a.common.seconds}`:"-"})},y))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),e.jsx(I,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(I,{className:"p-1.5",children:l?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),l.map((c,y)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:c.cooldown!==""?`${c.cooldown}${a.common.seconds}`:"-"})},y))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})})]},v.level)})]})]})})})})})})}return e.jsx(Ie,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(ce,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(de,{children:e.jsxs(U,{className:"border-b border-border/30 select-none",children:[e.jsx(H,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[60px] min-w-[60px] border-r border-border/30 select-none",style:{left:0},children:a.common.level}),t.map(u=>e.jsx(H,{className:"text-center p-2 text-xs font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:Q(r,u.id),alt:u.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:u.name})]})},u.id))]})}),e.jsxs(ue,{children:[e.jsxs(U,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(I,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:a.skills.label}),t.map(u=>{var N;return e.jsx(I,{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[u.passive&&e.jsx(oe,{isPassive:!0,passiveName:u.passive.name,passiveDescription:u.passive.description,passiveImageFull:u.passive.image.full,skill:{},skillIdx:0,version:r}),(N=u.spells)==null?void 0:N.map((v,x)=>{const b=m(u.id,x);return e.jsx(oe,{skill:v,skillIdx:x,version:r,spellData:b},v.id)})]})},u.id)})]}),d.map((u,N)=>e.jsxs(U,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(I,{className:A("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",N===d.length-1&&"rounded-bl-lg"),style:{left:0},children:[u.level,a.common.level]}),u.skills.map((v,x)=>e.jsx(I,{className:"p-2",children:v?e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})}),v.map((b,l)=>e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] font-semibold",children:b.cooldown!==""?`${b.cooldown}${a.common.seconds}`:"-"})},l))]}):e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})},t[x].id))]},u.level))]})]})})})})})})}function pr({champions:t,version:r,activeTab:s,championList:a,onAddChampion:n,onRemoveChampion:i,onReorderChampions:p,vsMode:m}){const d=We();if(t.length===0)return null;const f=d==="mobile";return e.jsx(Ye,{children:e.jsx(qe,{className:"p-0",children:s==="stats"?f?e.jsx(sr,{champions:t,version:r,championList:a,onAddChampion:n,onRemoveChampion:i,vsMode:m}):e.jsx(rr,{champions:t,version:r,championList:a,onAddChampion:n,onRemoveChampion:i,onReorderChampions:p}):f?e.jsx(xr,{champions:t,version:r,championList:a,onAddChampion:n,onRemoveChampion:i,vsMode:m}):e.jsx(fr,{champions:t,version:r,championList:a,onAddChampion:n,onRemoveChampion:i,onReorderChampions:p})})})}const gr=Z.memo(pr),br=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ye="encyclopedia_selected_champions",we="encyclopedia_tabs",Se="encyclopedia_selected_tab_id";function hr(t){const[r,s]=h.useState([]),a=h.useRef([]),[n,i]=h.useState(null),[p,m]=h.useState(!1),[d,f]=h.useState(null);h.useEffect(()=>{a.current=r},[r]),h.useEffect(()=>{if(t)try{const l=localStorage.getItem(we);if(l)try{const y=JSON.parse(l);Array.isArray(y)&&s(y)}catch{}const c=localStorage.getItem(Se);c&&i(c)}catch(l){logger.error("Failed to load stored tabs:",l)}},[t]),h.useEffect(()=>{try{r.length>0?De(we,JSON.stringify(r)):ae(we)}catch(l){logger.error("Failed to save tabs to storage:",l)}},[r]),h.useEffect(()=>{try{n?De(Se,n):ae(Se)}catch(l){logger.error("Failed to save selected tab ID to storage:",l)}},[n]),h.useEffect(()=>{!n&&r.length>0&&i(r[0].id)},[r,n]),h.useEffect(()=>{n&&!r.find(l=>l.id===n)&&i(r.length>0?r[0].id:null)},[r,n]);const g=h.useCallback(l=>{s(c=>c.filter(y=>y.id!==l))},[]),u=h.useCallback(l=>{s(c=>[...c,l]),i(l.id)},[]),N=h.useCallback((l,c)=>{s(y=>y.map(w=>w.id===l?c(w):w))},[]),v=h.useCallback((l,c)=>{s(y=>{const w=y.findIndex(j=>j.id===l);if(w===-1)return[...y,c];const o=[...y];return o[w]=c,o}),i(c.id)},[]),x=h.useCallback(()=>{s([]),i(null),ae(we),ae(Se)},[]),b=h.useCallback(l=>{const{active:c,over:y}=l;y&&c.id!==y.id&&s(w=>{const o=w.findIndex(S=>S.id===c.id),j=w.findIndex(S=>S.id===y.id);return o===-1||j===-1?w:mt(w,o,j)})},[]);return{tabs:r,setTabs:s,tabsRef:a,selectedTabId:n,setSelectedTabId:i,showVsSelector:p,setShowVsSelector:m,vsSelectorMode:d,setVsSelectorMode:f,removeTab:g,addTab:u,updateTab:N,replaceTab:v,resetTabs:x,handleDragEnd:b,generateTabId:br}}function jr({version:t,lang:r,championList:s,tabs:a}){const[n,i]=h.useState([]),[p,m]=h.useState(!0);h.useEffect(()=>{if(t)try{const x=localStorage.getItem(ye);if(x){const b=JSON.parse(x);if(Array.isArray(b)&&b.length>0&&s){const l=b.map(c=>{const y=s.find(w=>w.id===c.id||w.key===c.key);return y?{...y,isLoading:!1}:null}).filter(c=>c!==null);l.length>0&&setTimeout(()=>{i(l),l.forEach(c=>{c.id&&(i(y=>y.map(w=>w.id===c.id?{...w,isLoading:!0}:w)),st(t,r,c.id).then(y=>{i(w=>w.map(o=>o.id===c.id?{...o,fullInfo:y,isLoading:!1}:o))}).catch(y=>{M.error("Failed to load champion info:",y),i(w=>w.map(o=>o.id===c.id?{...o,isLoading:!1}:o))}))})},0)}}setTimeout(()=>{m(!1)},0)}catch(x){M.error("Failed to load stored champions:",x),setTimeout(()=>{m(!1)},0)}},[t,r,s]),h.useEffect(()=>{try{if(n.length>0){const x=n.map(({fullInfo:b,isLoading:l,name:c,title:y,...w})=>({...w,id:w.id,key:w.key}));De(ye,JSON.stringify(x))}else ae(ye)}catch(x){M.error("Failed to save champions to storage:",x)}},[n]),h.useEffect(()=>{s&&n.length>0&&setTimeout(()=>{i(x=>x.map(b=>{const l=s.find(c=>c.id===b.id||c.key===b.key);return l?{...b,name:l.name,title:l.title}:b}))},0)},[s,n.length]),h.useEffect(()=>{p||setTimeout(()=>{const x=new Set(a.flatMap(b=>b.champions));i(b=>{if(a.length===0)return b.length>0?[]:b;const l=b.filter(c=>x.has(c.id));return l.length!==b.length?l:b})},0)},[a,p]);const d=h.useCallback(x=>{t&&(i(b=>b.map(l=>l.id===x?{...l,isLoading:!0}:l)),st(t,r,x).then(b=>{i(l=>l.map(c=>c.id===x?{...c,fullInfo:b,isLoading:!1,skinIndex:0}:c))}).catch(b=>{M.error("Failed to load champion info:",b),i(l=>l.map(c=>c.id===x?{...c,isLoading:!1}:c))}))},[t,r]),f=h.useCallback(x=>{i(b=>{if(b.some(y=>y.id===x.id))return b;const c={...x,isLoading:!0,skinIndex:0};return d(x.id),[...b,c]})},[d]),g=h.useCallback(x=>{i(b=>b.filter(l=>l.id!==x))},[]),u=h.useCallback(()=>{i([]),ae(ye)},[]),N=h.useMemo(()=>n.filter(x=>x.fullInfo&&!x.isLoading),[n]),v=h.useMemo(()=>{const x=new Set(a.filter(b=>b.mode==="normal").flatMap(b=>b.champions));return n.filter(b=>x.has(b.id))},[a,n]);return{selectedChampions:n,setSelectedChampions:i,championsWithFullInfo:N,normalTabChampions:v,addChampionToList:f,removeChampion:g,resetChampions:u,loadChampionInfo:d}}function Nr({onAddClick:t}){const{t:r}=te();return e.jsx(Ye,{className:"border-dashed",children:e.jsxs(qe,{className:"flex flex-col items-center justify-center py-12 md:py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:e.jsx(ve,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:r.encyclopedia.emptyState.title}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md text-sm mb-4",children:r.encyclopedia.emptyState.description}),e.jsxs(se,{onClick:t,variant:"outline",className:"flex flex-row items-center justify-center gap-2 border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Ve,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-primary transition-colors",children:r.encyclopedia.emptyState.addButton})]})]})})}const vr=Dt,Vt=h.forwardRef(({className:t,...r},s)=>e.jsx(ft,{ref:s,className:A("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r}));Vt.displayName=ft.displayName;const Me=h.forwardRef(({className:t,...r},s)=>e.jsx(xt,{ref:s,className:A("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r}));Me.displayName=xt.displayName;const yr=h.forwardRef(({className:t,...r},s)=>e.jsx(pt,{ref:s,className:A("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r}));yr.displayName=pt.displayName;function wr({activeTab:t,onTabChange:r,onReset:s}){const{t:a}=te();return e.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-border overflow-x-auto -mx-4 md:mx-0 px-4 md:px-0",children:[e.jsx(vr,{value:t,onValueChange:n=>r(n),className:"flex-1",children:e.jsxs(Vt,{className:"inline-flex h-auto items-center justify-start gap-2 bg-transparent p-0 border-0",children:[e.jsx(Me,{value:"skills",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:a.encyclopedia.tabs.skills}),e.jsx(Me,{value:"stats",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:a.encyclopedia.tabs.stats})]})}),e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:e.jsxs(se,{variant:"ghost",size:"sm",onClick:s,className:"flex items-center gap-1.5 shrink-0 text-muted-foreground hover:text-primary hover:bg-muted/30 border-0",children:[e.jsx(Ht,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[10px]",children:a.encyclopedia.reset})]})})]})}const $t="flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors shrink-0 relative select-none touch-none",At="bg-primary text-primary-foreground",Et="bg-muted/50 text-muted-foreground",Lt="touch-none cursor-grab active:cursor-grabbing p-0.5 -ml-1 mr-0.5 opacity-60 hover:opacity-100 transition-opacity select-none",Rt="ml-1 p-0.5 rounded-full hover:bg-muted/50 active:bg-muted transition-colors touch-none shrink-0 select-none group",Sr="ml-1 p-1 rounded-full hover:bg-muted/50 active:bg-muted transition-colors touch-none shrink-0 select-none group";function Cr({tab:t,champion:r,version:s,selectedTabId:a,onSelect:n,onRemove:i,onVsClick:p}){const{t:m}=te(),{attributes:d,listeners:f,setNodeRef:g,transform:u,transition:N,isDragging:v}=pe({id:t.id}),x={transform:ge.Transform.toString(u),transition:N,opacity:v?.5:1},b=a===t.id,l=b?At:Et;return e.jsxs("div",{ref:g,style:x,className:A($t,l,v&&"z-50"),onClick:c=>{const y=c.target;y.tagName==="BUTTON"||y.closest("button")||n(t.id)},children:[e.jsx("button",{...d,...f,className:Lt,"aria-label":"Drag to reorder",onTouchStart:c=>c.preventDefault(),children:e.jsx($e,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 touch-none cursor-pointer select-none",children:[e.jsx("img",{src:Q(s,r.id),alt:r.name,className:"w-5 h-5 rounded-full pointer-events-none select-none",draggable:"false"}),e.jsx("span",{className:"pointer-events-none select-none",children:r.name})]}),e.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),p(t.id)},className:Sr,"aria-label":`${m.encyclopedia.vs} with ${r.name}`,title:m.encyclopedia.vsStart,type:"button",children:e.jsx(Te,{className:A("h-3 w-3 transition-colors",b?"text-primary-foreground":"text-muted-foreground")})}),e.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),i(t.id)},className:Rt,"aria-label":`Remove ${r.name}`,type:"button",children:e.jsx(be,{className:A("h-3 w-3 transition-colors",b?"text-primary-foreground":"text-muted-foreground")})})]})}function kr({tab:t,championA:r,championB:s,version:a,selectedTabId:n,onSelect:i,onRemove:p,onChangeChampionA:m,onChangeChampionB:d}){const{t:f}=te(),{attributes:g,listeners:u,setNodeRef:N,transform:v,transition:x,isDragging:b}=pe({id:t.id}),l={transform:ge.Transform.toString(v),transition:x,opacity:b?.5:1},c=n===t.id,y=c?At:Et;return e.jsxs("div",{ref:N,style:l,className:A($t,y,b&&"z-50"),children:[e.jsx("button",{...g,...u,className:Lt,"aria-label":"Drag to reorder",onTouchStart:w=>w.preventDefault(),children:e.jsx($e,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 select-none touch-none",children:[e.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),m(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:Q(a,r.id),alt:r.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})}),e.jsx("button",{onClick:()=>{i(t.id)},className:"text-[10px] font-semibold touch-none select-none",children:f.encyclopedia.vs}),e.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),d(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:Q(a,s.id),alt:s.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})})]}),e.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),p(t.id)},className:Rt,"aria-label":"Remove VS tab",children:e.jsx(be,{className:A("h-3 w-3 transition-colors",c?"text-primary-foreground":"text-muted-foreground")})})]})}function Tr({tabs:t,championsWithFullInfo:r,version:s,selectedTabId:a,sensors:n,onDragEnd:i,onSelectTab:p,onRemoveTab:m,onVsClick:d,onChangeChampionA:f,onChangeChampionB:g,onAddClick:u}){const{t:N}=te();return e.jsx("div",{className:"border-b border-border overflow-x-auto -mx-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground shrink-0",children:N.encyclopedia.champion}),e.jsx(Ge,{sensors:n,collisionDetection:Ue,onDragEnd:i,children:e.jsx(Ze,{items:t.map(v=>v.id),strategy:Je,children:e.jsxs("div",{className:"flex items-center gap-2 flex-1 overflow-x-auto select-none touch-none",children:[t.map(v=>{if(v.mode==="vs"){const x=r.find(l=>l.id===v.champions[0]),b=r.find(l=>l.id===v.champions[1]);return!x||!b?null:e.jsx(kr,{tab:v,championA:x,championB:b,version:s,selectedTabId:a,onSelect:p,onRemove:m,onChangeChampionA:f,onChangeChampionB:g},v.id)}else{const x=r.find(b=>b.id===v.champions[0]);return x?e.jsx(Cr,{tab:v,champion:x,version:s,selectedTabId:a,onSelect:p,onRemove:m,onVsClick:d},v.id):null}}),e.jsxs(se,{onClick:u,variant:"outline",size:"sm",className:"flex items-center gap-1.5 shrink-0 border-2 border-dashed border-muted-foreground/30 hover:border-primary hover:bg-primary/10 hover:text-primary h-auto py-1.5 px-3 transition-colors",children:[e.jsx(Ve,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:N.encyclopedia.add})]})]})})})]})})}function Pr({open:t,vsSelectorMode:r,tabs:s,championList:a,selectedChampions:n,onSelect:i,onClose:p,onOpenChange:m}){const{t:d}=te();if(!t||!r)return null;const f=s.find(u=>u.id===r.tabId);if(!f||r.mode!=="select-second"&&f.mode!=="vs")return null;const g=r.mode==="change-champion-a"?f.champions[1]:f.champions[0];return g?e.jsx(Ae,{championList:a,selectedChampions:n,onSelect:i,onClose:p,open:t,onOpenChange:m,vsMode:{currentChampionId:g,title:d.encyclopedia.selectOpponent}}):null}function Er({lang:t,championList:r,version:s}){const[a,n]=h.useState("skills"),[i,p]=h.useState(!1),d=We()==="mobile",{tabs:f,tabsRef:g,selectedTabId:u,setSelectedTabId:N,showVsSelector:v,setShowVsSelector:x,vsSelectorMode:b,setVsSelectorMode:l,removeTab:c,addTab:y,updateTab:w,replaceTab:o,resetTabs:j,handleDragEnd:S,generateTabId:T}=hr(s),{selectedChampions:C,setSelectedChampions:V,championsWithFullInfo:E,normalTabChampions:z,addChampionToList:D,removeChampion:O,resetChampions:re}=jr({version:s,lang:t,championList:r,tabs:f}),k=ze(xe(He,{activationConstraint:{distance:8}}),xe(Ke,{coordinateGetter:Oe})),P=h.useCallback(($,G)=>{V(X=>mt(X,$,G))},[V]),B=h.useCallback($=>{if(new Set(C.map(J=>J.id)).has($.id)){const J=g.current,K=J.some(W=>W.mode==="normal"&&W.champions.length===1&&W.champions[0]===$.id),ke=J.some(W=>W.mode==="vs"&&W.champions.includes($.id));if(K){const W=f.find(Ee=>Ee.mode==="normal"&&Ee.champions.length===1&&Ee.champions[0]===$.id);W&&c(W.id),ke||O($.id);return}if(ke){const W={mode:"normal",champions:[$.id],id:T()};y(W);return}const Xe=f.find(W=>W.mode==="normal"&&W.champions.length===1&&W.champions[0]===$.id);Xe&&c(Xe.id),O($.id);return}D($);const X={mode:"normal",champions:[$.id],id:T()};y(X)},[C,f,g,D,O,y,c,T]),L=h.useCallback(()=>{re(),j(),ae(ye),ae(we),ae(Se)},[re,j]),R=h.useCallback($=>{if(!b)return;const{mode:G,tabId:X}=b,J=f.find(K=>K.id===X);if(J){if(G==="select-second"){const K={mode:"vs",champions:[J.champions[0],$.id],id:T()};o(X,K),C.some(ke=>ke.id===$.id)||D($)}else G==="change-champion-a"?(w(X,K=>({...K,champions:[$.id,K.champions[1]]})),C.some(K=>K.id===$.id)||D($)):G==="change-champion-b"&&(w(X,K=>({...K,champions:[K.champions[0],$.id]})),C.some(K=>K.id===$.id)||D($));x(!1),l(null)}},[b,f,C,D,w,o,T]),_=h.useMemo(()=>u&&f.find($=>$.id===u)||null,[u,f]),F=h.useMemo(()=>_?_.champions.map($=>{var G;return(G=E.find(X=>X.id===$))==null?void 0:G.fullInfo}).filter($=>$!==void 0):[],[_,E]),q=h.useMemo(()=>!d||_&&_.mode==="vs"?null:_&&_.mode==="normal"&&F.length>0?F[0]:null,[d,_,F]),ee=h.useCallback($=>{f.forEach(G=>{G.champions.includes($)&&c(G.id)}),O($)},[f,O,c]),ne=h.useCallback($=>{l({mode:"select-second",tabId:$}),x(!0)},[]),Ce=h.useCallback($=>{l({mode:"change-champion-a",tabId:$,championIndex:0}),x(!0)},[]),me=h.useCallback($=>{l({mode:"change-champion-b",tabId:$,championIndex:1}),x(!0)},[]);return e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6 lg:px-8 py-4 md:py-5",children:[i&&e.jsx(Ae,{championList:r,selectedChampions:z,onSelect:B,onClose:()=>p(!1),open:i,onOpenChange:p}),e.jsx(Pr,{open:v,vsSelectorMode:b,tabs:f,championList:r,selectedChampions:C,onSelect:R,onClose:()=>{x(!1),l(null)},onOpenChange:$=>{x($),$||l(null)}}),C.length>0&&E.length>0&&e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx(wr,{activeTab:a,onTabChange:n,onReset:L}),d&&f.length>0&&e.jsx(Tr,{tabs:f,championsWithFullInfo:E,version:s,selectedTabId:u,sensors:k,onDragEnd:S,onSelectTab:N,onRemoveTab:c,onVsClick:ne,onChangeChampionA:Ce,onChangeChampionB:me,onAddClick:()=>p(!0)}),e.jsx(gr,{champions:d&&_&&_.mode==="vs"&&F.length===2?F:d&&q?[q]:E.map($=>$.fullInfo),version:s,activeTab:a,championList:r,onAddChampion:d?void 0:B,onRemoveChampion:ee,onReorderChampions:d?void 0:P,vsMode:d&&_&&_.mode==="vs"&&F.length===2?{championA:F[0],championB:F[1]}:void 0})]}),C.length===0&&e.jsx(Nr,{onAddClick:()=>p(!0)})]})}export{Er as default};
