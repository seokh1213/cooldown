import{r as v,j as e,d as z,f as qt,O as Zt,g as Yt,A as qe,E as Ne,F as Ze,K as Ye,G as Je,I as Xe,J as Qe,L as et,M as tt,N as we,Q as ye,U as Nt,z as Jt}from"/cooldown/assets/react-vendor-CopeUkDP.js";import{I as ot,C as wt,c as yt,T as Xt,a as Qt,b as lt}from"/cooldown/assets/input-DvFujG1m.js";import{j as R,B as le,u as se,k as De,C as re,D as St,V as Ct,c as kt,d as Tt,l as be,m as O,n as er,a as rt,P as tr,o as it,b as rr,S as Vt,e as ct,f as dt,h as ut,T as Ue,r as ce,p as sr,q as nr,s as mt,t as ar,v as or,w as Ie}from"/cooldown/assets/index-E8Wsh7bu.js";import{g as lr,f as Pe,X as Se,S as Ae,h as Le,i as _e,T as ft,R as ir}from"/cooldown/assets/lucide-icons-O8aoKHte.js";import{u as st,V as cr}from"/cooldown/assets/VersionContext-DUZWuV-9.js";const pe=v.forwardRef(({className:t,...r},n)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:n,className:R("w-full caption-bottom text-sm",t),...r})}));pe.displayName="Table";const he=v.forwardRef(({className:t,...r},n)=>e.jsx("thead",{ref:n,className:R("[&_tr]:border-b",t),...r}));he.displayName="TableHeader";const ge=v.forwardRef(({className:t,...r},n)=>e.jsx("tbody",{ref:n,className:R("[&_tr:last-child]:border-0",t),...r}));ge.displayName="TableBody";const dr=v.forwardRef(({className:t,...r},n)=>e.jsx("tfoot",{ref:n,className:R("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));dr.displayName="TableFooter";const Y=v.forwardRef(({className:t,...r},n)=>e.jsx("tr",{ref:n,className:R("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));Y.displayName="TableRow";const G=v.forwardRef(({className:t,...r},n)=>e.jsx("th",{ref:n,className:R("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r}));G.displayName="TableHead";const F=v.forwardRef(({className:t,...r},n)=>e.jsx("td",{ref:n,className:R("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r}));F.displayName="TableCell";const ur=v.forwardRef(({className:t,...r},n)=>e.jsx("caption",{ref:n,className:R("mt-4 text-sm text-muted-foreground",t),...r}));ur.displayName="TableCaption";function mr({className:t,...r}){return e.jsx("div",{className:R("animate-pulse rounded-md bg-muted",t),...r})}function fr({addChampion:t,data:r,name:n,thumbnailSrc:s,selected:a}){const[d,u]=v.useState(!1),[l,p]=v.useState(!1),[f,g]=v.useState(a);v.useEffect(()=>{g(a)},[a]);const w=v.useCallback(y=>{y.preventDefault(),y.stopPropagation(),g(h=>!h),t(r)},[t,r]),S=v.useCallback(()=>{u(!0)},[]),x=v.useCallback(()=>{p(!0)},[]);return e.jsxs("div",{className:"flex flex-col items-center justify-center m-1 h-fit",children:[e.jsxs(le,{variant:"ghost",className:"cursor-pointer rounded-full shrink-0 p-0 h-auto w-auto hover:bg-transparent relative touch-manipulation",onClick:w,"aria-label":a?`Deselect ${n}`:`Select ${n}`,"aria-pressed":a,children:[e.jsxs("div",{className:"relative w-12 h-12 md:w-14 md:h-14 shrink-0 overflow-hidden rounded-full",children:[!d&&!l&&e.jsx(mr,{className:"absolute inset-0 rounded-full"}),!d&&!l&&e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-muted via-muted/80 to-muted/60 blur-sm"}),e.jsx("img",{className:R("absolute inset-0 w-full h-full rounded-full bg-black/5 border-0 box-border transition-all duration-200 ease-out object-cover",!a&&!f&&"hover:scale-105",d?"opacity-100":"opacity-0"),src:s,alt:n,loading:"lazy",decoding:"async",width:"56",height:"56",onLoad:S,onError:x}),(f||a)&&e.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{boxShadow:"inset 0 0 0 2px hsl(var(--primary)), 0 0 0 3px hsl(var(--primary) / 0.3)"}})]}),(f||a)&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 md:w-5 md:h-5 bg-primary rounded-full flex items-center justify-center pointer-events-none z-20 shadow-lg border-2 border-background",children:e.jsx(lr,{className:"w-2.5 h-2.5 md:w-3 md:h-3 text-primary-foreground stroke-[3]"})})]}),e.jsx("div",{className:"text-xs md:text-sm whitespace-nowrap mt-0.5",children:n})]})}const xt=z.memo(fr);function xr(t,r){const{lang:n}=se();return v.useMemo(()=>{if(!t)return[];if(!r)return t;const a=De(r,n);return t.filter(d=>a.some(u=>{const l=u.toLowerCase();return!!(d.name.toLowerCase().includes(l)||d.hangul&&d.hangul.toLowerCase().includes(l)||d.id.toLowerCase().includes(l)||n==="ko_KR"&&(De(d.name,n).some(f=>f.toLowerCase().includes(l))||d.hangul&&De(d.hangul,n).some(g=>g.toLowerCase().includes(l))))}))},[t,r,n])}const pt="championSelectorScrollPosition";function pr(t,r,n){v.useEffect(()=>{if(!r||!n)return;const s=()=>{if(t.current){const a=sessionStorage.getItem(pt);if(a){const d=parseInt(a,10);t.current.scrollTop=d}}};s(),requestAnimationFrame(()=>{s()}),setTimeout(()=>{s()},200)},[r,n,t]),v.useEffect(()=>{const s=t.current;if(!s||!r||!n)return;let a;const d=()=>{clearTimeout(a),a=setTimeout(()=>{sessionStorage.setItem(pt,s.scrollTop.toString())},100)};return s.addEventListener("scroll",d,{passive:!0}),()=>{clearTimeout(a),s.removeEventListener("scroll",d)}},[r,n,t])}function hr({championList:t,selectedChampions:r,onSelect:n,onClose:s,slotIndex:a,open:d,onOpenChange:u,vsMode:l}){const{t:p}=se(),[f,g]=v.useState(!1),w=d!==void 0,S=w?!!d:f,x=w?u||(()=>{}):g,[y,h]=v.useState(""),[o,i]=v.useState(-1),c=v.useRef(null),N=v.useRef(null),m=v.useRef(null),j=s!==void 0,b=s||(()=>{}),C=xr(t,y),k=v.useMemo(()=>new Set(r.map(T=>T.id)),[r]),A=v.useMemo(()=>l&&(r.find(T=>T.id===l.currentChampionId)||(t==null?void 0:t.find(T=>T.id===l.currentChampionId)))||null,[l,r,t]),P=v.useMemo(()=>l?C.filter(T=>T.id!==l.currentChampionId):C,[C,l]),B=v.useCallback(T=>{const E=T.target;c.current&&!c.current.contains(E)&&(x(!1),h(""),i(-1))},[x]);v.useEffect(()=>{if(S&&!j)return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[S,B,j]);const D=v.useCallback(T=>{x(T),T||(h(""),i(-1),s&&s()),u&&u(T)},[s,u]),M=v.useCallback(T=>{n(T),j?i(-1):(x(!1),i(-1),document.body.style.overflow="",b())},[n,s,j]),W=v.useCallback(T=>{if(!(!S&&!j||!t))if(T.key==="ArrowDown")T.preventDefault(),i(E=>E<C.length-1?E+1:E);else if(T.key==="ArrowUp")T.preventDefault(),i(E=>E>0?E-1:-1);else if(T.key==="Enter"&&o>=0){T.preventDefault();const E=C[o];E&&M(E)}else T.key==="Escape"&&D(!1)},[S,j,t,C,o,M,D,k]);return v.useEffect(()=>{if(o>=0&&m.current){const T=m.current.querySelectorAll("[data-champion-item]");T[o]&&T[o].scrollIntoView({block:"nearest"})}},[o]),v.useEffect(()=>{w||x(!!j)},[j,w,x]),pr(m,j,S),v.useEffect(()=>{j&&S&&requestAnimationFrame(()=>{var T;(T=N.current)==null||T.focus()})},[j,S]),j?w&&!S?null:e.jsx(St,{open:S,onOpenChange:D,children:e.jsxs(qt,{children:[e.jsx(Zt,{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm"}),e.jsxs(Yt,{ref:c,className:"fixed inset-0 left-0 top-0 translate-x-0 translate-y-0 md:inset-auto md:left-[50%] md:top-[50%] md:translate-x-[-50%] md:translate-y-[-50%] w-full h-full md:w-[600px] md:h-[500px] lg:w-[800px] lg:h-[600px] p-0 flex flex-col overflow-hidden max-w-none md:max-w-[600px] lg:max-w-[800px] max-h-none md:max-h-[500px] lg:max-h-[600px] rounded-none md:rounded-xl z-50 border bg-background shadow-lg",onInteractOutside:()=>{D(!1)},onEscapeKeyDown:()=>{D(!1)},children:[e.jsxs(Ct,{children:[e.jsx(kt,{children:l?p.championSelector.vsSelectOpponent:p.championSelector.selectChampion}),e.jsx(Tt,{children:l?p.championSelector.vsSelectOpponentDescription:p.championSelector.selectChampionDescription})]}),l&&A&&e.jsxs("div",{className:"p-4 border-b-2 border-destructive/30 bg-destructive/5 flex items-center gap-3 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:re(A.version||"",A.id),alt:A.name,className:"w-10 h-10 rounded-full border-2 border-destructive/50"}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-destructive rounded-full p-0.5",children:e.jsx(Ae,{className:"h-3 w-3 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-foreground",children:A.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:p.championSelector.currentChampion})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-destructive",children:[e.jsx(Ae,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"VS"})]})]}),e.jsxs("div",{className:R("p-4 border-b border-border flex items-center gap-2 shrink-0",l?"bg-muted/30":"bg-card"),children:[e.jsx(Pe,{className:R("h-5 w-5 shrink-0",l?"text-destructive":"text-muted-foreground")}),e.jsx(ot,{ref:N,type:"text",placeholder:l?p.championSelector.vsSearchPlaceholder:p.championSelector.searchPlaceholder,value:y,onChange:T=>{h(T.target.value),i(-1)},onKeyDown:W,className:"flex-1",autoFocus:!0}),e.jsx(le,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>D(!1),children:e.jsx(Se,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:m,className:"overflow-y-auto overflow-x-hidden p-4 flex-1 min-h-0 md:flex-none md:w-[600px] md:h-[427px] lg:w-[800px] lg:h-[527px]",children:t?(l?P:C).length>0?e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{className:"mb-3 pb-2 border-b border-destructive/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-semibold",children:p.championSelector.selectOpponentLabel})]})}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:(l?P:C).map((T,E)=>{const I=o===E,L=l?!1:k.has(T.id);return e.jsx("div",{"data-champion-item":!0,className:R(I&&"ring-2 ring-offset-1 rounded-md",l?"ring-destructive":"ring-primary"),children:e.jsx(xt,{addChampion:$=>M($),data:T,name:T.name,selected:L,thumbnailSrc:re(T.version||"",T.id)})},T.id)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground min-h-[200px] space-y-2",children:[e.jsx(Pe,{className:"h-12 w-12 opacity-50"}),e.jsx("p",{className:"text-base font-medium",children:y?p.championSelector.noResults:p.championSelector.emptyList})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground min-h-[200px]",children:p.championSelector.loading})})]})]})}):e.jsxs("div",{ref:c,className:"w-full",children:[e.jsxs(le,{onClick:()=>{x(!0),setTimeout(()=>{var T;return(T=N.current)==null?void 0:T.focus()},0)},variant:"ghost",className:R("w-full flex flex-col items-center justify-center space-y-2","text-muted-foreground hover:text-foreground","py-4 h-auto"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:e.jsx(Pe,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-medium",children:p.championSelector.selectChampion})]}),S&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>{x(!1),h(""),document.body.style.overflow="",b()},"aria-hidden":"true"}),e.jsxs("div",{className:R("fixed inset-0 z-50 md:absolute md:inset-auto md:top-full md:left-0 md:right-0 md:mt-2 md:z-10 md:rounded-lg md:border md:border-border md:shadow-lg bg-card md:max-h-[60vh] flex flex-col",j&&"md:relative md:inset-0 md:mt-0 md:rounded-lg md:border md:shadow-lg"),children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-2 sticky top-0 bg-card z-10",children:[e.jsx(Pe,{className:"h-5 w-5 text-muted-foreground shrink-0"}),e.jsx(ot,{ref:N,type:"text",placeholder:p.championSelector.searchPlaceholder,value:y,onChange:T=>{h(T.target.value),i(-1)},onKeyDown:W,className:"flex-1",autoFocus:!0}),e.jsx(le,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>{x(!1),h(""),document.body.style.overflow="",b()},children:e.jsx(Se,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:m,className:"flex-1 overflow-auto p-4",style:{maxHeight:"calc(100vh - 120px)"},children:t?e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:C.map((T,E)=>{const I=o===E,L=k.has(T.id);return e.jsx("div",{"data-champion-item":!0,className:R(I&&"ring-2 ring-primary ring-offset-1 rounded-md"),children:e.jsx(xt,{addChampion:$=>M($),data:T,name:T.name,selected:L,thumbnailSrc:re(T.version||"",T.id)})},T.id)})}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:p.championSelector.loading})})]})]})]})}const Re=z.memo(hr);function Pt(t="ko_KR"){const r=be(t);return[{key:"hp",label:r.stats.health,format:n=>Math.round(n)},{key:"hpperlevel",label:r.stats.healthPerLevel,format:n=>n.toFixed(1)},{key:"mp",label:r.stats.mana,format:n=>Math.round(n)},{key:"mpperlevel",label:r.stats.manaPerLevel,format:n=>n.toFixed(1)},{key:"movespeed",label:r.stats.movespeed,format:n=>Math.round(n)},{key:"armor",label:r.stats.armor,format:n=>Math.round(n)},{key:"armorperlevel",label:r.stats.armorPerLevel,format:n=>n.toFixed(1)},{key:"spellblock",label:r.stats.spellblock,format:n=>Math.round(n)},{key:"spellblockperlevel",label:r.stats.spellblockPerLevel,format:n=>n.toFixed(1)},{key:"attackdamage",label:r.stats.attackdamage,format:n=>Math.round(n)},{key:"attackdamageperlevel",label:r.stats.attackdamagePerLevel,format:n=>n.toFixed(1)},{key:"attackspeed",label:r.stats.attackspeed,format:n=>n.toFixed(3)},{key:"attackspeedperlevel",label:r.stats.attackspeedPerLevel,format:n=>`${(n*100).toFixed(1)}%`},{key:"attackrange",label:r.stats.attackrange,format:n=>Math.round(n)},{key:"crit",label:r.stats.crit,format:n=>`${(n*100).toFixed(1)}%`},{key:"critperlevel",label:r.stats.critPerLevel,format:n=>`${(n*100).toFixed(1)}%`},{key:"hpregen",label:r.stats.hpregen,format:n=>n.toFixed(1)},{key:"hpregenperlevel",label:r.stats.hpregenPerLevel,format:n=>n.toFixed(1)},{key:"mpregen",label:r.stats.mpregen,format:n=>n.toFixed(1)},{key:"mpregenperlevel",label:r.stats.mpregenPerLevel,format:n=>n.toFixed(1)}]}const ve=["Q","W","E","R"];function gr({champions:t,version:r,championList:n,onAddChampion:s,onRemoveChampion:a,onReorderChampions:d}){const{t:u,lang:l}=se(),[p,f]=v.useState(!1),g=Pt(l),w=qe(Ne(Je,{activationConstraint:{distance:8}}),Ne(Ye,{coordinateGetter:Ze})),S=o=>{},x=o=>{const{active:i,over:c}=o;if(c&&i.id!==c.id&&d){const N=t.findIndex(j=>j.id===i.id),m=t.findIndex(j=>j.id===c.id);N!==-1&&m!==-1&&d(N,m)}},y=({champion:o,children:i,className:c})=>{const{setNodeRef:N,transform:m,transition:j,isDragging:b}=we({id:o.id,disabled:!0}),k={transform:m?ye.Transform.toString(m):void 0,transition:b?j:void 0,opacity:b?.5:1};return e.jsx(F,{ref:N,style:k,className:c,children:i})},h=({champion:o,index:i})=>{const{attributes:c,listeners:N,setNodeRef:m,transform:j,transition:b,isDragging:C}=we({id:o.id}),A={transform:j?ye.Transform.toString(j):void 0,transition:C?b:void 0,opacity:C?.5:1};return e.jsx(G,{ref:m,style:A,className:R("text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] select-none",i<t.length-1&&"border-r border-border/30",C&&"z-50"),children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1.5 relative",children:[d&&e.jsx("button",{...c,...N,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity absolute -left-2 top-1/2 -translate-y-1/2","aria-label":"Drag to reorder",children:e.jsx(_e,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:re(r,o.id),alt:o.name,className:"w-8 h-8 rounded-full"}),a&&e.jsx(le,{variant:"ghost",size:"icon",className:R("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:P=>{P.stopPropagation(),a(o.id)},"aria-label":`Remove ${o.name}`,children:e.jsx(Se,{className:"h-2.5 w-2.5"})})]}),e.jsx("div",{className:"text-[10px] font-semibold leading-tight text-center break-words text-foreground",children:o.name})]})})};return e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{sensors:w,collisionDetection:Qe,onDragStart:S,onDragEnd:x,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto",children:[e.jsx(he,{children:e.jsxs(Y,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[90px] min-w-[90px] border-r border-border/30 select-none",style:{left:0},children:u.stats.label}),e.jsx(et,{items:t.map(o=>o.id),strategy:tt,children:t.map((o,i)=>e.jsx(h,{champion:o,index:i},o.id))}),s&&e.jsx(G,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] border-l border-border/30 select-none",children:e.jsxs(le,{onClick:()=>f(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Le,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsx(ge,{children:g.map(o=>{const i=t.map(m=>{var j;return((j=m.stats)==null?void 0:j[o.key])??0}),c=Math.max(...i),N=Math.min(...i);return e.jsxs(Y,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(F,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:o.label}),t.map((m,j)=>{var A;const b=((A=m.stats)==null?void 0:A[o.key])??0,C=b===c&&c!==N,k=b===N&&c!==N;return e.jsx(y,{champion:m,className:R("p-1.5 text-[11px] text-center",j<t.length-1&&"border-r border-border/30",C&&"text-primary font-semibold",k&&"text-muted-foreground"),children:o.format(b)},m.id)}),s&&e.jsx(F,{className:"p-1.5 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[24px]"})})]},o.key)})})]})})}),p&&s&&n&&e.jsx(Re,{championList:n,selectedChampions:t,onSelect:o=>{s(o)},onClose:()=>f(!1)})]})}function br({champions:t,version:r,vsMode:n}){const{t:s,lang:a}=se(),d=Pt(a);if(n&&t.length===2){const u=n.championA,l=n.championB;return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(he,{children:e.jsxs(Y,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:s.stats.label}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:re(r,u.id),alt:u.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:u.name})]})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:re(r,l.id),alt:l.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:l.name})]})})]})}),e.jsx(ge,{children:d.map(p=>{var x,y;const f=((x=u.stats)==null?void 0:x[p.key])??0,g=((y=l.stats)==null?void 0:y[p.key])??0,w=Math.max(f,g),S=Math.min(f,g);return e.jsxs(Y,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(F,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:p.label}),e.jsx(F,{className:R("p-1.5 text-[10px] text-center border-r border-border/30",f===w&&w!==S&&"text-primary font-semibold",f===S&&w!==S&&"text-muted-foreground"),children:p.format(f)}),e.jsx(F,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(F,{className:R("p-1.5 text-[10px] text-center",g===w&&w!==S&&"text-primary font-semibold",g===S&&w!==S&&"text-muted-foreground"),children:p.format(g)})]},p.key)})})]})})})})})}return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(he,{children:e.jsxs(Y,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[70px] min-w-[70px] border-r border-border/30 select-none",style:{left:0},children:s.stats.label}),t.map(u=>e.jsx(G,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:re(r,u.id),alt:u.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:u.name})]})},u.id))]})}),e.jsx(ge,{children:d.map(u=>{const l=t.map(g=>{var w;return((w=g.stats)==null?void 0:w[u.key])??0}),p=Math.max(...l),f=Math.min(...l);return e.jsxs(Y,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(F,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:u.label}),t.map(g=>{var y;const w=((y=g.stats)==null?void 0:y[u.key])??0,S=w===p&&p!==f,x=w===f&&p!==f;return e.jsx(F,{className:R("p-1.5 text-[11px] text-center",S&&"text-primary font-semibold",x&&"text-muted-foreground"),children:u.format(w)},g.id)})]},u.key)})})]})})})})})}async function jr(t,r,n){let s={},a=null;try{a=await er(t,n),s=a.spellDataMap}catch(d){O.warn(`Failed to load Community Dragon data for ${t}:`,d)}return r.map((d,u)=>{let l={};if(s[u.toString()])l=s[u.toString()];else{const p=d.id.replace(t,"");for(const f of Object.keys(s))if(f.toLowerCase().includes(p.toLowerCase())||f.toLowerCase().includes(d.id.toLowerCase())){l=s[f];break}}return{spell:d,communityDragonData:l,spellIndex:u,ddragonVersion:(a==null?void 0:a.ddragonVersion)??n,cdragonVersion:(a==null?void 0:a.cdragonVersion)??null}})}async function Et(t,r){const n={},s=t.map(async a=>{if(!a.spells||a.spells.length===0){n[a.id]=[];return}try{n[a.id]=await jr(a.id,a.spells,r)}catch(d){O.warn(`Failed to get integrated spell data for ${a.id}:`,d),n[a.id]=a.spells.map((u,l)=>({spell:u,communityDragonData:{},spellIndex:l}))}});return await Promise.all(s),n}const Me={physicalDamage:{tag:"span",className:"text-red-600 dark:text-red-500 font-semibold"},magicDamage:{tag:"span",className:"text-blue-600 dark:text-blue-500 font-semibold"},trueDamage:{tag:"span",className:"text-yellow-600 dark:text-yellow-500 font-semibold"},status:{tag:"span",className:"text-purple-600 dark:text-purple-500"},lifeSteal:{tag:"span",className:"text-green-600 dark:text-green-500"},scaleAD:{tag:"span",className:"text-orange-600 dark:text-orange-500"},scaleAP:{tag:"span",className:"text-blue-600 dark:text-blue-400"},scaleArmor:{tag:"span",className:"text-orange-600 dark:text-orange-400"},scaleLevel:{tag:"span",className:"text-gray-600 dark:text-gray-400"},healing:{tag:"span",className:"text-green-600 dark:text-green-400"},speed:{tag:"span",className:"text-cyan-600 dark:text-cyan-500"},keywordMajor:{tag:"span",className:"text-yellow-600 dark:text-yellow-400 font-semibold"},keywordStealth:{tag:"span",className:"text-purple-600 dark:text-purple-400 font-semibold"},spellPassive:{tag:"span",className:"text-gray-600 dark:text-gray-500 italic"},spellActive:{tag:"span",className:"text-gray-900 dark:text-white font-semibold"},recast:{tag:"span",className:"text-yellow-600 dark:text-yellow-300"},damage:{tag:"span",className:"text-red-600 dark:text-red-400"},shield:{tag:"span",className:"text-blue-600 dark:text-blue-300"},mana:{tag:"span",className:"text-blue-600 dark:text-blue-400"},energy:{tag:"span",className:"text-yellow-600 dark:text-yellow-400"},health:{tag:"span",className:"text-red-600 dark:text-red-400"},cooldown:{tag:"span",className:"text-gray-600 dark:text-gray-300"},range:{tag:"span",className:"text-cyan-600 dark:text-cyan-400"},radius:{tag:"span",className:"text-purple-600 dark:text-purple-400"},width:{tag:"span",className:"text-indigo-600 dark:text-indigo-400"},length:{tag:"span",className:"text-pink-600 dark:text-pink-400"},rules:{tag:"span",className:"text-gray-600 dark:text-gray-400 italic"}};function vr(t){let r=t;r=r.replace(/<font\s+color=['"]([^'"]+)['"]\s*>/gi,'<span style="color: $1">'),r=r.replace(/<\/font>/gi,"</span>"),Object.entries(Me).forEach(([s,{tag:a,className:d}])=>{const u=new RegExp(`</${s}>`,"gi");r=r.replace(u,`</${a}>`);const l=new RegExp(`<${s}>`,"gi");r=r.replace(l,`<${a}${d?` class="${d}"`:""}>`)});const n=["keywordMajor","keywordStealth","rules","recast"];return n.forEach(s=>{r=r.replace(new RegExp(`</${s}>`,"gi"),"</span>"),s==="rules"?r=r.replace(new RegExp(`<${s}>`,"gi"),'<span class="text-gray-600 dark:text-gray-400 italic">'):s==="keywordStealth"?r=r.replace(new RegExp(`<${s}>`,"gi"),'<span class="text-purple-600 dark:text-purple-400 font-semibold">'):r=r.replace(new RegExp(`<${s}>`,"gi"),'<span class="text-yellow-600 dark:text-yellow-400 font-semibold">')}),r=r.replace(/<(\w+)(?![\\w])>/gi,(s,a)=>Me[a]||n.includes(a)||a==="font"||a==="br"?s:"<span>"),r=r.replace(/<\/(\w+)(?![\\w])>/gi,(s,a)=>Me[a]||n.includes(a)||a==="font"||a==="br"?s:"</span>"),r}function At(t){const r=t.trim(),n=/^([a-zA-Z_][a-zA-Z0-9_]*)\s*([*+\/-])\s*(-?\d+(?:\.\d+)?)$/,s=r.match(n);if(s){const a=s[2];return{type:"formula",variable:s[1],operator:a,operand:parseFloat(s[3])}}return{type:"variable",variable:r}}function $t(t,r,n){if(!r||typeof r!="string")return null;const s=Object.entries(t).find(([p])=>p!=null&&p.toLowerCase()===r.toLowerCase());if(!s)return null;const[,a]=s,d=a.slice(1,n+1);if(d.length===0)return null;const u=d[0];return d.every(p=>p===u)?u:d}function Lt(t,r){if(r.type!=="formula"||!r.operator||r.operand==null)return t;const{operator:n,operand:s}=r;return n==="*"?Array.isArray(t)?t.map(a=>a*s):t*s:n==="+"?Array.isArray(t)?t.map(a=>a+s):t+s:n==="-"?Array.isArray(t)?t.map(a=>a-s):t-s:n==="/"?Array.isArray(t)?t.map(a=>a/s):t/s:t}function me(t){if(t==null||t==="")return"";const r=typeof t=="number"?t:parseFloat(String(t));return isNaN(r)?String(t):r%1===0?r.toString():parseFloat(r.toFixed(3)).toString()}function ht(t,r,n=!1){if(!t||t.length===0)return"";const s=n&&t.length>1?1:0,d=t.slice(s).filter(g=>g!=null&&g!==""&&g!=="0");if(d.length===0)return"";const u=r?d.slice(0,r):d;if(u.length===0)return"";const l=u.map(g=>me(g)),p=l[0];return l.every(g=>g===p)?p:l.join("/")}function Nr(t){let r=t;return r=r.replace(/<br\s*\/?>/gi,"<br />"),r=r.replace(/[^\S\r\n]+/g," "),r}function Q(t){return Array.isArray(t)}function gt(t,r){return Array.isArray(t)?t:Array.from({length:r},()=>t)}function _t(t,r,n){if(!Q(t)&&!Q(r))return n(t,r);const s=Q(t)?t:gt(t,Q(r)?r.length:1),a=Q(r)?r:gt(r,s.length);if(s.length!==a.length)throw new Error(`Vector length mismatch: ${s.length} vs ${a.length}`);return s.map((d,u)=>n(d,a[u]))}function Te(t,r){return _t(t,r,(n,s)=>n+s)}function Ve(t,r){return _t(t,r,(n,s)=>n*s)}function $e(t){return Q(t)?t.every(n=>n===t[0])?me(t[0]):t.map(n=>me(n)).join("/"):me(t)}function Fe(t){return Q(t)?t.map(r=>r*100):t*100}function bt(t,r,n="ko_KR"){const s=be(n),a=t!=null,d=r!=null;if(!a&&!d)return s.stats.abilityPower;const u=t??r;return u===2?t===2&&r===2?s.stats.bonusAttackDamage:s.stats.attackDamage:u===12?t===12&&r===2?s.stats.bonusHealth:s.stats.health:u===1?t===1&&r===2?s.stats.bonusArmor:s.stats.armor:u===6?t===6&&r===2?s.stats.bonusMagicResist:s.stats.magicResist:u===18?t===18&&r===2?s.stats.bonusLifesteal:s.stats.lifesteal:""}function We(t,r="ko_KR"){let s=be(r).common.mana;if(t.costType){const a=t.costType.trim();return a&&!a.includes("{{")?a:t.resource&&!t.resource.includes("{{")?t.resource:s}return t.resource&&!t.resource.includes("{{")?t.resource:s}function Rt(t,r,n){const s=n==null?void 0:n.DataValues;if(!s)return null;const a=$t(s,t.variable,r.maxrank);if(a==null)return null;const d=Lt(a,t);return $e(d)}function jt(t,r){const n=s=>Number.isFinite(s)?s.toFixed(r).replace(/\.?0+$/,""):String(s);if(Q(t)){const s=t.map(u=>n(u)),a=s[0];return s.every(u=>u===a)?a:s.join("/")}return n(t)}function wr(t,r,n,s="ko_KR"){const a=n==null?void 0:n.mSpellCalculations,d=n==null?void 0:n.DataValues;if(!a)return null;const u=Object.entries(a).find(([m])=>m!=null&&m.toLowerCase()===t.variable.toLowerCase());if(!u)return null;const[l]=u;function p(m){if(!m||typeof m!="string")return O.debug(`DataValue name is invalid: ${m}`),null;if(!d)return O.debug("dataValues is undefined"),null;const j=$t(d,m,r.maxrank);return j??(O.debug(`DataValue "${m}" missing`),null)}function f(m,j=new Set){var C;if(!a)throw new Error("spellCalcs is undefined");const b=a[m];if(!b)throw new Error(`SpellCalculation "${m}" not found`);if(j.has(m))throw new Error(`Circular reference in mSpellCalculations: ${m}`);if(j.add(m),b.__type==="GameCalculationModified"){const k=b;if(!k.mModifiedGameCalculation)throw new Error("mModifiedGameCalculation is missing");const A=f(k.mModifiedGameCalculation,j);if(!k.mMultiplier)return A;let P=null;if(k.mMultiplier.mDataValue){if(P=p(k.mMultiplier.mDataValue),P==null)return A}else k.mMultiplier.mNumber!=null&&(P=k.mMultiplier.mNumber);if(P==null)return A;const B=Ve(A.base,P),D=A.statParts.map(M=>({name:M.name,ratio:Ve(M.ratio,P)}));return{base:B,statParts:D,isPercent:A.isPercent,precision:A.precision}}if(b.__type==="GameCalculation"){const k=b,A=k.mFormulaParts??[];let P=0;const B=[],D=!!k.mDisplayAsPercent;if(A.length===1&&A[0].__type==="ByCharLevelBreakpointsCalculationPart"&&k.mSimpleTooltipCalculationDisplay===6){const E=A[0],I=E.mLevel1Value??0;let L=I;for(const H of E.mBreakpoints??[])typeof H.mAdditionalBonusAtThisLevel=="number"&&(L+=H.mAdditionalBonusAtThisLevel);return{base:[I,L],statParts:[],isPercent:D,isBreakpointRange:!0,precision:void 0}}if(A.length===1&&A[0].__type==="ByCharLevelBreakpointsCalculationPart"&&D){const E=A[0],I=E.mLevel1Value??0,L=E.mInitialBonusPerLevel??0,$=(E.mBreakpoints??[])[0];if(L!==0&&($!=null&&$.mLevel)){const _=$.mLevel-1,H=Math.max(_-1,0),K=I+H*L;return{base:[I,K],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}}if(A.length===1&&A[0].__type==="ByCharLevelInterpolationCalculationPart"&&D){const E=A[0],I=E.mStartValue??0,L=E.mEndValue??I;return{base:[I,L],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}for(const E of A){const I=E.__type;if(I==="NamedDataValueCalculationPart"){const L=E;if(!L.mDataValue){O.debug("NamedDataValueCalculationPart missing mDataValue",E);continue}const $=p(L.mDataValue);if($==null)continue;P=Te(P,$)}else if(I==="EffectValueCalculationPart"){const $=E.mEffectIndex??0,_=((C=r.effectBurn)==null?void 0:C[$])??null;if(!_)O.debug(`EffectValueCalculationPart: effectBurn[${$}] is missing`,{spellId:r.id});else{const H=_.split("/").map(K=>parseFloat(K)).filter(K=>!Number.isNaN(K));if(H.length>0){const K=H.length>r.maxrank?H.slice(0,r.maxrank):H;P=Te(P,K)}}}else if(I==="StatByNamedDataValueCalculationPart"){const L=E;if(!L.mDataValue){O.debug("StatByNamedDataValueCalculationPart missing mDataValue",E);continue}const $=p(L.mDataValue);if($==null)continue;const _=bt(L.mStat,L.mStatFormula,s);B.push({name:_,ratio:$})}else if(I==="StatByCoefficientCalculationPart"){const L=E;if(L.mCoefficient==null){O.debug("StatByCoefficientCalculationPart missing mCoefficient",E);continue}const $=bt(L.mStat,L.mStatFormula,s),_=L.mCoefficient;B.push({name:$,ratio:_,isCoefficient:!0})}else if(I==="AbilityResourceByCoefficientCalculationPart"){const L=E;if(L.mCoefficient==null){O.debug("AbilityResourceByCoefficientCalculationPart missing mCoefficient",E);continue}const $=We(r,s),_=be(s),K=L.mStatFormula===2?`${_.common.bonus} ${$}`:$,q=L.mCoefficient;B.push({name:K,ratio:q,isCoefficient:!0})}else if(I==="NumberCalculationPart"){const $=E.mNumber??0;P=Te(P,$)}else if(I==="ByCharLevelBreakpointsCalculationPart"){const L=E;let $=L.mLevel1Value||0;for(const _ of L.mBreakpoints??[])_.mAdditionalBonusAtThisLevel!=null&&($+=_.mAdditionalBonusAtThisLevel);P=Te(P,$)}else if(I==="ProductOfSubPartsCalculationPart"){const L=E,$=q=>{var ne;if(!q||!q.__type)return 0;const ee=q.__type;if(ee==="NamedDataValueCalculationPart"){const oe=q;if(!oe.mDataValue)return O.debug("ProductOfSubPartsCalculationPart: NamedDataValueCalculationPart missing mDataValue",q),0;const te=p(oe.mDataValue);return te??0}if(ee==="NumberCalculationPart")return q.mNumber??0;if(ee==="EffectValueCalculationPart"){const te=q.mEffectIndex??0,je=((ne=r.effectBurn)==null?void 0:ne[te])??null;if(!je)return O.debug(`ProductOfSubPartsCalculationPart: EffectValueCalculationPart missing effectBurn[${te}]`,{spellId:r.id}),0;let Ce;if(je.includes("/")){const ie=je.split("/").map(ke=>Number.parseFloat(ke)).filter(ke=>!Number.isNaN(ke));if(ie.length===0)return 0;Ce=ie.length===1?ie[0]:ie}else{const ie=Number.parseFloat(je);if(Number.isNaN(ie))return 0;Ce=ie}return Ce}return O.debug(`ProductOfSubPartsCalculationPart: unsupported sub part type "${ee}"`,q),0},_=$(L.mPart1),H=$(L.mPart2),K=Ve(_,H);P=Te(P,K)}}let M=P,W=B;if(k.mMultiplier){let E=null;k.mMultiplier.mDataValue?(E=p(k.mMultiplier.mDataValue),E==null&&(E=null)):k.mMultiplier.mNumber!=null&&(E=k.mMultiplier.mNumber),E!=null&&(M=Ve(M,E),W=W.map(I=>({...I,ratio:Ve(I.ratio,E)})))}let T;return typeof k.mPrecision=="number"&&k.mPrecision>=0?T=k.mPrecision+1:T=void 0,{base:M,statParts:W,isPercent:D,precision:T}}throw new Error(`Unsupported mSpellCalculation type: ${b.__type}`)}let g;try{g=f(l)}catch(m){return O.error("Failed to evaluate calculation:",m),null}let w;const S=g.precision;g.isPercent?S!=null?Q(g.base)?w=g.base.map(m=>m*100):w=g.base*100:w=Fe(g.base):w=g.base;const x=g.statParts.map(m=>{if(m.isCoefficient){const j=S!=null?Q(m.ratio)?m.ratio.map(b=>b*100):m.ratio*100:Fe(m.ratio);return{...m,ratio:j}}if(S!=null){const j=Q(m.ratio)?m.ratio.map(b=>b*100):m.ratio*100;return{...m,ratio:j}}return{...m,ratio:Fe(m.ratio)}});let y=null;const h=Q(w)&&w.length>0&&w.every(m=>m===0),o=!Q(w)&&w===0;if(!h&&!o)if(g.isCharLevelRange&&Q(w)&&w.length===2){const[m,j]=w,b=me(m),C=me(j);y=`(${b}% ~ ${C}%)`}else if(g.isBreakpointRange&&Q(w)&&w.length===2){const[m,j]=w,b=me(m),C=me(j);y=g.isPercent?`(${b}% ~ ${C}%)`:`(${b} ~ ${C})`}else{const m=S!=null?jt(w,S):$e(w);y=g.isPercent?`${m}%`:m}const i=x.map(m=>{const j=S!=null?jt(m.ratio,S):$e(m.ratio);return m.name?`(${j}% ${m.name})`:`(${j}%)`}),c=[];if(y&&c.push(y),c.push(...i),c.length===0)return null;const N=c.join(" + ");return c.length===1?N:`(${N})`}function yr(t,r){return!Number.isFinite(r)||r<0?t:t.replace(/-?\d+(?:\.\d+)?/g,n=>{const s=Number.parseFloat(n);return Number.isFinite(s)?s.toFixed(r):n})}function Sr(t){return t.replace(/(}})\s*\+\s*(\S)/g,"$1 + $2").replace(/(\S)\s*\+\s*({{)/g,"$1 + $2").replace(/(\S)\s*~\s*(\S)/g,"$1 ~ $2")}function Cr(t){return t.replace(/\{\{([^}]*\{\{[^}]*}}[^}]*)}}/g,()=>"")}function kr(t){let r=t;return r=r.replace(/\{\{Spell_[^}]*Tooltip[^}]*}}/gi,""),r=r.replace(/\{\{spellmodifierdescriptionappend}}/gi,""),r}function Tr(t,r,n,s){const a=/\{\{([^}]+)}}/g;return t.replace(a,(d,u)=>{const l=String(u).trim();if(l==="spellmodifierdescriptionappend"||l.includes("gamemodeinteger")||l.includes("Spell_")&&l.includes("Tooltip"))return"";let p=l,f;const g=/^([a-zA-Z_][a-zA-Z0-9_]*)(?:\.(\d+))(.*)$/.exec(l);if(g){const[,S,x,y]=g,h=Number.parseInt(x,10);Number.isFinite(h)&&(f=h,p=`${S}${y}`)}const w=Pr(p,r,n,s);return w!==null?f!==void 0?yr(w,f):w:""})}function Vr(t){let r=t;return r=r.replace(/\{\{\s*\}/g,""),r=r.replace(/\}\}/g,""),r=r.replace(/\{\{/g,""),r=r.replace(/%[^\s:%]+:[^\s%]+%/g,""),r=r.replace(/\s+%\s+/g," "),r=r.replace(new RegExp("(?<!\\d)\\s*%\\s*(?!\\d)","g"),""),r=r.replace(/^\s*%\s*(?!\d)/g,""),r=r.replace(new RegExp("(?<!\\d)\\s*%\\s*$","g"),""),r=r.replace(/[^\S\r\n]+/g," "),r}function Bt(t,r,n,s="ko_KR"){if(!r)return t;let a=t;return a=Sr(a),a=Cr(a),a=kr(a),a=Tr(a,r,n,s),a=Vr(a),a}function Pr(t,r,n,s="ko_KR"){const a=At(t),d=Er(a,r,n);if(d!==null)return d;const u=Rt(a,r,n);return u!==null?u:wr(a,r,n,s)}function Er(t,r,n){const s=t.variable,a=/^e(\d+)$/i.exec(s);if(!a)return null;const d=Number.parseInt(a[1],10);if(!Number.isFinite(d)||d<=0)return null;const u=(n==null?void 0:n.effectBurn)??r.effectBurn;if(!u)return null;const l=u[d];if(!l)return null;let p;if(l.includes("/")){const g=l.split("/").map(w=>Number.parseFloat(w)).filter(w=>!Number.isNaN(w));if(g.length===0)return null;p=g.length===1?g[0]:g}else{const g=Number.parseFloat(l);if(Number.isNaN(g))return null;p=g}const f=Lt(p,t);return $e(f)}function ze(t,r,n,s="ko_KR"){if(!t)return"";let a=t;return a=vr(a),a=Bt(a,r,n,s),a=Nr(a),a=a.replace(/\n/g,"<br />"),a}function vt(t,r,n="ko_KR"){const s=be(n);if(!t.leveltip||!t.leveltip.label||!t.leveltip.effect)return"";let a;r&&(r.DataValues?a=r:a={DataValues:r});const{label:d,effect:u}=t.leveltip,l=[];for(let p=0;p<d.length&&p<u.length;p++){const f=d[p],w=u[p].match(/\{\{\s*([^}]+)\s*\}\}/);if(!w)continue;const S=w[1].trim();let x=null;if(a)try{const o=At(S),i=Rt(o,t,a);if(i&&i.trim()!==""){let c=i;(f.includes("%")||f.toLowerCase().includes("percent")||f.toLowerCase().includes("퍼센트")||f.toLowerCase().includes("둔화"))&&!c.includes("%")&&(c=c.split("/").map(b=>b&&`${b}%`).join("/"));const m=We(t,n),j=f.replace("@AbilityResourceName@",m);if(j.includes("{{")||j.includes("}}"))continue;l.push(`${j}: [${c}]`);continue}}catch{}const y=S;x=null;const h=y.match(/^e(\d+)$/i);if(h){const o=parseInt(h[1]);if(t.effectBurn&&t.effectBurn.length>o){const i=t.effectBurn[o];i&&i!==null&&i!=="0"&&(x=i)}}else if(y.toLowerCase()==="cost"||y.toLowerCase().includes("cost"))t.costBurn&&(x=t.costBurn);else if(y.toLowerCase().includes("cooldown"))t.cooldownBurn&&(x=t.cooldownBurn);else if(y.toLowerCase().includes("ammorechargetime")||y.toLowerCase().includes("ammorecharge")){const o=(r==null?void 0:r.DataValues)||r;if(o&&o.mAmmoRechargeTime){const i=o.mAmmoRechargeTime;if(Array.isArray(i)&&i.length>1){const N=i.slice(1).map(j=>typeof j=="number"?j:parseFloat(String(j))),m=ht(N,t.maxrank,!1);m&&(x=m)}}}if(x){const o=ht(x.includes("/")?x.split("/"):[x],t.maxrank);if(o){let i=s.common.mana;i=We(t,n);const c=f.replace("@AbilityResourceName@",i);if(c.includes("{{")||c.includes("}}"))continue;let N=o;(f.includes("%")||f.toLowerCase().includes("slow")||f.toLowerCase().includes("둔화"))&&(o.includes("%")||(N=o.split("/").map(m=>`${m}%`).join("/"))),l.push(`${c}: [${N}]`)}}}return l.length===0?"":l.join("<br />")}function Ar(t,r,n="ko_KR"){var l,p;const s=be(n);if(!t||!t.cooldown||!Array.isArray(t.cooldown)||t.cooldown.length===0)return null;const a=((l=r==null?void 0:r.communityDragonData)==null?void 0:l.DataValues)||(r==null?void 0:r.communityDragonData),d=a==null?void 0:a.mAmmoRechargeTime;if(t.cooldown[0]===0&&d&&Array.isArray(d)&&d.length>1&&d){const f=d[1],g=((p=t.effectBurn)==null?void 0:p[1])||"3";return`${s.common.rechargeTime} ${f}${s.common.seconds} (${s.common.max}: ${g}${s.common.items})`}if(t.cooldownBurn){const f=t.cooldownBurn.split("/");return f.length>1&&f.every(g=>g===f[0])?`${f[0]}${s.common.seconds}`:`${t.cooldownBurn}${s.common.seconds}`}if(t.cooldown&&t.cooldown.length>0){const f=t.cooldown[0];return t.cooldown.every(g=>g===f)?`${f}${s.common.seconds}`:`${t.cooldown.join("/")}${s.common.seconds}`}return null}function xe(t){if(!t)return t;let r=t.replace(/\(\s*\)/g,"");return r=r.replace(/\s{2,}/g," ").trim(),r}function $r(t,r,n="ko_KR"){var l;const s=be(n);if(!t)return null;const a=Array.isArray(t.cost)&&t.cost.length>0,d=a&&t.cost.every(p=>p===0),u=t.costBurn==="0";if((u||d)&&typeof t.resource=="string"&&t.resource.includes("{{")){const p=t.resource.trim(),f=((l=r==null?void 0:r.communityDragonData)==null?void 0:l.DataValues)||(r==null?void 0:r.communityDragonData);if(f){const w=Bt(p,t,{DataValues:f}).trim();if(w)return xe(w)}return xe(s.common.noCost)}if(u||d)return xe(s.common.noCost);if(t.costBurn){const p=t.costBurn.split("/");return p.length>1&&p.every(f=>f===p[0])?xe(`${s.common.mana} ${p[0]}`):xe(`${s.common.mana} ${t.costBurn}`)}if(a){const p=t.cost[0];return t.cost.every(f=>f===p)?xe(`${s.common.mana} ${p}`):xe(`${s.common.mana} ${t.cost.join("/")}`)}return null}function Dt(t,r,n){var l;const s=((l=n==null?void 0:n.communityDragonData)==null?void 0:l.DataValues)||(n==null?void 0:n.communityDragonData),a=s==null?void 0:s.mAmmoRechargeTime,d=t.cooldown[r-1];return d===0&&a&&Array.isArray(a)&&a.length>r&&a?a[r]!==void 0?String(a[r]):"":d!=null?String(d):""}const Oe="cooldown:active-skill-tooltip";function ue({skill:t,skillIdx:r,version:n,spellData:s,isPassive:a,passiveName:d,passiveDescription:u,passiveImageFull:l,size:p="default"}){const{t:f,lang:g}=se(),S=rt()==="mobile",[x,y]=z.useState(!1),[h,o]=z.useState(!1),i=z.useRef(null),c=z.useRef(null),N=z.useRef(""),[m,j]=z.useState("bottom"),[b,C]=z.useState(void 0),k=a&&l?null:Ar(t,s,g),A=a&&l?null:$r(t,s,g),P=p==="small",B=P?"min-w-6 min-h-6 w-6 h-6":"min-w-8 min-h-8 w-8 h-8",D=P?"text-[8px]":"text-[9px]",M=z.useCallback(()=>{S||(N.current||(N.current=`${t.id}-${r}-${n}`),typeof window<"u"&&window.dispatchEvent(new CustomEvent(Oe,{detail:N.current})),c.current!==null&&(window.clearTimeout(c.current),c.current=null),o(!0))},[S]),W=z.useCallback(()=>{S||(c.current!==null&&window.clearTimeout(c.current),c.current=window.setTimeout(()=>{o(!1),c.current=null},40))},[S]);z.useEffect(()=>{if(S||!h){C(void 0);return}const $=i.current;if(!$)return;const _=()=>{const H=$.getBoundingClientRect(),K=window.innerHeight,q=16,ee=8,ne=H.top-q,oe=K-H.bottom-q;if(ne<=0&&oe<=0){C(void 0);return}if(oe>=ne){j("bottom");const te=Math.max(oe-ee,0);C(te||void 0)}else{j("top");const te=Math.max(ne-ee,0);C(te||void 0)}};return _(),window.addEventListener("resize",_),window.addEventListener("scroll",_,!0),()=>{window.removeEventListener("resize",_),window.removeEventListener("scroll",_,!0)}},[S,h]),z.useEffect(()=>{if(typeof window>"u")return;const $=_=>{const K=_.detail;N.current&&K!==N.current&&(c.current!==null&&(window.clearTimeout(c.current),c.current=null),o(!1))};return window.addEventListener(Oe,$),()=>{c.current!==null&&window.clearTimeout(c.current),window.removeEventListener(Oe,$)}},[]);const T=e.jsx("div",{ref:i,className:`flex flex-col items-center gap-0.5 p-1 -m-1 touch-manipulation ${S?"cursor-pointer":"cursor-help"}`,onClick:$=>{S&&($.stopPropagation(),y(_=>!_))},onTouchStart:$=>{S&&($.stopPropagation(),y(_=>!_))},onPointerEnter:()=>{S||M()},onPointerLeave:()=>{S||W()},children:a&&l?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:tr(n,l),alt:"Passive",className:R(B,"rounded")}),e.jsx("span",{className:R(D,"font-semibold"),children:"P"})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:it(n,t.id),alt:ve[r],className:R(B,"rounded")}),e.jsx("span",{className:R(D,"font-semibold"),children:ve[r]})]})}),E=()=>a&&l?e.jsxs(e.Fragment,{children:[d&&e.jsx("div",{className:`font-semibold text-sm ${S?"pr-10":""}`,children:d}),u&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:ze(u,void 0,void 0,g)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground leading-relaxed border-t pt-3 mt-3 flex items-start gap-1.5",children:[e.jsx(ft,{className:"w-3 h-3 mt-0.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:f.skillTooltip.warningPassive})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3 border-b pb-3 pr-6",children:[e.jsx("img",{src:it(n,t.id),alt:ve[r],className:"w-12 h-12 min-w-12 min-h-12 rounded flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:t.name&&e.jsxs("div",{className:"font-semibold text-sm",children:["[",ve[r],"] ",t.name]})}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[k&&e.jsx("div",{className:"text-xs text-muted-foreground",children:k.includes(" (")?e.jsxs(e.Fragment,{children:[k.split(" (")[0],e.jsx("br",{}),"(",k.split(" (")[1]]}):k}),A&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 whitespace-nowrap",children:A})]})]}),t.description&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:ze(t.description,t,s==null?void 0:s.communityDragonData,g).replace(/<br\s*\/?>/gi," ")}})}),t.tooltip&&e.jsx("div",{className:"text-xs text-muted-foreground leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:ze(t.tooltip,t,s==null?void 0:s.communityDragonData,g)}})}),s&&vt(t,s.communityDragonData,g)&&e.jsx("div",{className:"text-[11px] leading-relaxed text-muted-foreground border-t pt-3 mt-3",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:vt(t,s.communityDragonData,g)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground leading-relaxed border-t pt-3 mt-3 flex items-start gap-1.5",children:[e.jsx(ft,{className:"w-3 h-3 mt-0.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:f.skillTooltip.warningSkill})]})]}),I=e.jsx(St,{open:x,onOpenChange:y,children:e.jsxs(rr,{className:R(S?"w-[calc(100vw-32px)] max-w-lg h-[70vh] max-h-[70vh]":"w-full max-w-3xl h-[80vh] max-h-[80vh]","p-0 rounded-xl overflow-hidden flex flex-col"),children:[e.jsxs(Ct,{children:[e.jsx(kt,{children:a&&l?`${d||f.skillTooltip.passive} ${f.skillTooltip.skillInfo}`:`[${ve[r]}] ${t.name||f.skillTooltip.skill} ${f.skillTooltip.skillInfo}`}),e.jsx(Tt,{children:a&&l?`${d||f.skillTooltip.passive} ${f.skillTooltip.skillDescription}`:`[${ve[r]}] ${t.name||f.skillTooltip.skill} ${f.skillTooltip.skillDescription}`})]}),e.jsx(Vt,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4 flex flex-col gap-3",children:E()})})]})});if(S)return e.jsxs(e.Fragment,{children:[T,I]});const L=e.jsxs("div",{className:"space-y-3",children:[E(),e.jsx("div",{className:"pt-1 flex justify-end",children:e.jsx("button",{type:"button",className:"text-[11px] text-primary hover:underline",onClick:$=>{$.preventDefault(),$.stopPropagation(),o(!1),y(!0)},children:f.skillTooltip.viewDetail})})]});return a&&l?e.jsxs(e.Fragment,{children:[e.jsxs(ct,{open:h,children:[e.jsx(dt,{asChild:!0,children:T}),e.jsx(ut,{side:m,align:"center",sideOffset:0,className:"max-w-xs p-3 space-y-2",style:!S&&b?{maxHeight:b}:void 0,onPointerEnter:M,onPointerLeave:W,children:L})]}),I]}):e.jsxs(e.Fragment,{children:[e.jsxs(ct,{open:h,children:[e.jsx(dt,{asChild:!0,children:T}),e.jsx(ut,{side:m,align:"center",sideOffset:0,className:"max-w-sm p-4 space-y-3",style:!S&&b?{maxHeight:b}:void 0,onPointerEnter:M,onPointerLeave:W,children:L})]}),I]})}function Lr({champions:t,version:r,championList:n,onAddChampion:s,onRemoveChampion:a,onReorderChampions:d,vsMode:u}){const{t:l}=se(),{cdragonVersion:p,setCDragonVersion:f}=st(),[g,w]=v.useState(!1),[S,x]=z.useState({}),y=qe(Ne(Je,{activationConstraint:{distance:8}}),Ne(Ye,{coordinateGetter:Ze})),h=b=>{},o=b=>{const{active:C,over:k}=b;if(k&&C.id!==k.id&&d){const A=t.findIndex(B=>B.id===C.id),P=t.findIndex(B=>B.id===k.id);A!==-1&&P!==-1&&d(A,P)}};z.useEffect(()=>{const b=async()=>{try{const C=await Et(t,r);if(x(C),!p)try{let k=null;for(const A of Object.keys(C)){const P=C[A];if(P&&P.length>0&&(k=P[0].cdragonVersion??null,k))break}k&&f(k)}catch(k){O.warn("Failed to extract CDragon version from integrated spell data:",k)}}catch(C){O.warn("Failed to load integrated spell data:",C),x({})}};t.length>0&&b()},[t,r]);const i=z.useMemo(()=>Math.max(...t.map(b=>b.spells?Math.max(...b.spells.map(C=>C.maxrank)):0)),[t]),c=z.useCallback((b,C)=>{const k=S[b];return!k||k.length<=C?null:k[C]},[S]),N=z.useMemo(()=>Array.from({length:i},(b,C)=>{const k=C+1;return{level:k,skills:t.map(A=>A.spells?A.spells.map((P,B)=>{const D=c(A.id,B),M=Dt(P,k,D);return{skill:P,cooldown:M}}):null)}}),[t,i,c]),m=({champion:b,children:C,className:k})=>{const{setNodeRef:A,transform:P,transition:B,isDragging:D}=we({id:b.id,disabled:!0}),W={transform:P?ye.Transform.toString(P):void 0,transition:D?B:void 0,opacity:D?.5:1};return e.jsx(F,{ref:A,style:W,className:k,children:C})},j=({champion:b,index:C})=>{const{attributes:k,listeners:A,setNodeRef:P,transform:B,transition:D,isDragging:M}=we({id:b.id}),T={transform:B?ye.Transform.toString(B):void 0,transition:M?D:void 0,opacity:M?.5:1};return e.jsx(G,{ref:P,style:T,className:R("text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] select-none",C<t.length-1&&"border-r border-border/30",M&&"z-50"),children:e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 relative",children:[d&&e.jsx("button",{...k,...A,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity -ml-1","aria-label":"Drag to reorder",children:e.jsx(_e,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:re(r,b.id),alt:b.name,className:"w-8 h-8 rounded-full"}),a&&e.jsx(le,{variant:"ghost",size:"icon",className:R("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:E=>{E.stopPropagation(),a(b.id)},"aria-label":`Remove ${b.name}`,children:e.jsx(Se,{className:"h-2.5 w-2.5"})})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("div",{className:"text-[11px] font-semibold leading-tight text-foreground",children:b.name}),e.jsx("div",{className:"text-[9px] text-muted-foreground leading-tight",children:b.title})]})]})})};return e.jsx(Ue,{delayDuration:0,skipDelayDuration:150,children:e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{sensors:y,collisionDetection:Qe,onDragStart:h,onDragEnd:o,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto",children:[e.jsx(he,{children:e.jsxs(Y,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[80px] min-w-[80px] border-r border-border/30 select-none",style:{left:0},children:l.common.level}),e.jsx(et,{items:t.map(b=>b.id),strategy:tt,children:t.map((b,C)=>e.jsx(j,{champion:b,index:C},b.id))}),s&&e.jsx(G,{className:"text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] border-l border-border/30 select-none",children:e.jsxs(le,{onClick:()=>w(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Le,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsxs(ge,{children:[e.jsxs(Y,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(F,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:l.skills.label}),t.map((b,C)=>{var k;return e.jsx(m,{champion:b,className:R("p-2",C<t.length-1&&"border-r border-border/30"),children:e.jsxs("div",{className:"flex justify-center gap-1.5",children:[b.passive&&e.jsx(ue,{isPassive:!0,passiveName:b.passive.name,passiveDescription:b.passive.description,passiveImageFull:b.passive.image.full,skill:{},skillIdx:0,version:r}),(k=b.spells)==null?void 0:k.map((A,P)=>{const B=c(b.id,P);return e.jsx(ue,{skill:A,skillIdx:P,version:r,spellData:B},A.id)})]})},b.id)}),s&&e.jsx(F,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]}),N.map((b,C)=>e.jsxs(Y,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(F,{className:R("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",C===N.length-1&&"rounded-bl-lg"),style:{left:0},children:[b.level,l.common.level]}),b.skills.map((k,A)=>{const P=t[A];return e.jsx(m,{champion:P,className:R("p-2",A<t.length-1&&"border-r border-border/30"),children:k?e.jsxs("div",{className:"flex justify-center gap-1.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),k.map((B,D)=>e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs font-semibold",children:B.cooldown!==""?`${B.cooldown}${l.common.seconds}`:"-"})},D))]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})},P.id)}),s&&e.jsx(F,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]},b.level))]})]})})}),g&&s&&n&&e.jsx(Re,{championList:n,selectedChampions:t,onSelect:b=>{s(b)},onClose:()=>w(!1)})]})})}function _r({champions:t,version:r,vsMode:n}){var w,S;const{t:s}=se(),{cdragonVersion:a,setCDragonVersion:d}=st(),[u,l]=z.useState({});z.useEffect(()=>{const x=async()=>{try{const y=await Et(t,r);if(l(y),!a)try{let h=null;for(const o of Object.keys(y)){const i=y[o];if(i&&i.length>0&&(h=i[0].cdragonVersion??null,h))break}h&&d(h)}catch(h){O.warn("Failed to extract CDragon version from integrated spell data (mobile):",h)}}catch(y){O.warn("Failed to load integrated spell data:",y),l({})}};t.length>0&&x()},[t,r]);const p=z.useMemo(()=>Math.max(...t.map(x=>x.spells?Math.max(...x.spells.map(y=>y.maxrank)):0)),[t]),f=z.useCallback((x,y)=>{const h=u[x];return!h||h.length<=y?null:h[y]},[u]),g=z.useMemo(()=>Array.from({length:p},(x,y)=>{const h=y+1;return{level:h,skills:t.map(o=>o.spells?o.spells.map((i,c)=>{const N=f(o.id,c),m=Dt(i,h,N);return{skill:i,cooldown:m}}):null)}}),[t,p,f]);if(n&&t.length===2){const x=n.championA,y=n.championB;return e.jsx(Ue,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(he,{children:e.jsxs(Y,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:s.common.level}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:re(r,x.id),alt:x.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:x.name})]})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:re(r,y.id),alt:y.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:y.name})]})})]})}),e.jsxs(ge,{children:[e.jsxs(Y,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(F,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:s.skills.label}),e.jsx(F,{className:"p-1.5 border-r border-border/30",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[x.passive&&e.jsx(ue,{isPassive:!0,passiveName:x.passive.name,passiveDescription:x.passive.description,passiveImageFull:x.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(w=x.spells)==null?void 0:w.map((h,o)=>{const i=f(x.id,o);return e.jsx(ue,{skill:h,skillIdx:o,version:r,spellData:i,size:"small"},h.id)})]})}),e.jsx(F,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(F,{className:"p-1.5",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[y.passive&&e.jsx(ue,{isPassive:!0,passiveName:y.passive.name,passiveDescription:y.passive.description,passiveImageFull:y.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(S=y.spells)==null?void 0:S.map((h,o)=>{const i=f(y.id,o);return e.jsx(ue,{skill:h,skillIdx:o,version:r,spellData:i,size:"small"},h.id)})]})})]}),g.map((h,o)=>{const i=h.skills[0],c=h.skills[1];return e.jsxs(Y,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(F,{className:R("p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",o===g.length-1&&"rounded-bl-lg"),style:{left:0},children:[h.level,s.common.level]}),e.jsx(F,{className:"p-1.5 border-r border-border/30",children:i?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),i.map((N,m)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:N.cooldown!==""?`${N.cooldown}${s.common.seconds}`:"-"})},m))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),e.jsx(F,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(F,{className:"p-1.5",children:c?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),c.map((N,m)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:N.cooldown!==""?`${N.cooldown}${s.common.seconds}`:"-"})},m))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})})]},h.level)})]})]})})})})})})}return e.jsx(Ue,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(he,{children:e.jsxs(Y,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[60px] min-w-[60px] border-r border-border/30 select-none",style:{left:0},children:s.common.level}),t.map(x=>e.jsx(G,{className:"text-center p-2 text-xs font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:re(r,x.id),alt:x.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:x.name})]})},x.id))]})}),e.jsxs(ge,{children:[e.jsxs(Y,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(F,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:s.skills.label}),t.map(x=>{var y;return e.jsx(F,{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[x.passive&&e.jsx(ue,{isPassive:!0,passiveName:x.passive.name,passiveDescription:x.passive.description,passiveImageFull:x.passive.image.full,skill:{},skillIdx:0,version:r}),(y=x.spells)==null?void 0:y.map((h,o)=>{const i=f(x.id,o);return e.jsx(ue,{skill:h,skillIdx:o,version:r,spellData:i},h.id)})]})},x.id)})]}),g.map((x,y)=>e.jsxs(Y,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(F,{className:R("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",y===g.length-1&&"rounded-bl-lg"),style:{left:0},children:[x.level,s.common.level]}),x.skills.map((h,o)=>e.jsx(F,{className:"p-2",children:h?e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})}),h.map((i,c)=>e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] font-semibold",children:i.cooldown!==""?`${i.cooldown}${s.common.seconds}`:"-"})},c))]}):e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})},t[o].id))]},x.level))]})]})})})})})})}function Rr({champions:t,version:r,activeTab:n,championList:s,onAddChampion:a,onRemoveChampion:d,onReorderChampions:u,vsMode:l}){const p=rt();if(t.length===0)return null;const f=p==="mobile";return e.jsx(wt,{children:e.jsx(yt,{className:"p-0",children:n==="stats"?f?e.jsx(br,{champions:t,version:r,championList:s,onAddChampion:a,onRemoveChampion:d,vsMode:l}):e.jsx(gr,{champions:t,version:r,championList:s,onAddChampion:a,onRemoveChampion:d,onReorderChampions:u}):f?e.jsx(_r,{champions:t,version:r,championList:s,onAddChampion:a,onRemoveChampion:d,vsMode:l}):e.jsx(Lr,{champions:t,version:r,championList:s,onAddChampion:a,onRemoveChampion:d,onReorderChampions:u})})})}const Br=z.memo(Rr),Dr=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;function Ir({version:t,initialTabs:r,initialSelectedTabId:n}){const[s,a]=v.useState([]),d=v.useRef([]),[u,l]=v.useState(null),[p,f]=v.useState(!1),[g,w]=v.useState(null);v.useEffect(()=>{d.current=s},[s]),v.useEffect(()=>{t&&(r&&r.length>0&&a(r),n&&l(n))},[t,r,n]),v.useEffect(()=>{!u&&s.length>0&&l(s[0].id)},[s,u]),v.useEffect(()=>{u&&!s.find(c=>c.id===u)&&l(s.length>0?s[0].id:null)},[s,u]);const S=v.useCallback(c=>{a(N=>{const m=N.findIndex(b=>b.id===c),j=N.filter(b=>b.id!==c);return l(b=>{if(b&&b!==c&&j.some(P=>P.id===b))return b;if(j.length===0)return null;const C=m>0?m-1:0;return(j[C]??j[0]).id}),j})},[l]),x=v.useCallback(c=>{a(N=>[...N,c]),l(c.id)},[]),y=v.useCallback((c,N)=>{a(m=>m.map(j=>j.id===c?N(j):j))},[]),h=v.useCallback((c,N)=>{a(m=>{const j=m.findIndex(C=>C.id===c);if(j===-1)return[...m,N];const b=[...m];return b[j]=N,b}),l(N.id)},[]),o=v.useCallback(()=>{a([]),l(null),ce(sr),ce(nr)},[]),i=v.useCallback(c=>{const{active:N,over:m}=c;m&&N.id!==m.id&&a(j=>{const b=j.findIndex(k=>k.id===N.id),C=j.findIndex(k=>k.id===m.id);return b===-1||C===-1?j:Nt(j,b,C)})},[]);return{tabs:s,setTabs:a,tabsRef:d,selectedTabId:u,setSelectedTabId:l,showVsSelector:p,setShowVsSelector:f,vsSelectorMode:g,setVsSelectorMode:w,removeTab:S,addTab:x,updateTab:y,replaceTab:h,resetTabs:o,handleDragEnd:i,generateTabId:Dr}}function Mr({version:t,lang:r,championList:n,tabs:s,initialSelectedChampions:a}){const[d,u]=v.useState([]),[l,p]=v.useState(!0);v.useEffect(()=>{if(!t||!n){setTimeout(()=>{p(!1)},0);return}try{if(a&&a.length>0){const h=a.map(o=>{const i=n.find(c=>c.id===o.id||c.key===o.key);return i?{...i,isLoading:!1}:null}).filter(o=>o!==null);h.length>0&&setTimeout(()=>{u(h),h.forEach(o=>{o.id&&(u(i=>i.map(c=>c.id===o.id?{...c,isLoading:!0}:c)),mt(t,r,o.id).then(i=>{u(c=>c.map(N=>N.id===o.id?{...N,fullInfo:i,isLoading:!1}:N))}).catch(i=>{O.error("Failed to load champion info:",i),u(c=>c.map(N=>N.id===o.id?{...N,isLoading:!1}:N))}))})},0)}setTimeout(()=>{p(!1)},0)}catch(h){O.error("Failed to load initial selected champions:",h),setTimeout(()=>{p(!1)},0)}},[t,r,n,a]),v.useEffect(()=>{n&&d.length>0&&setTimeout(()=>{u(h=>h.map(o=>{const i=n.find(c=>c.id===o.id||c.key===o.key);return i?{...o,name:i.name,title:i.title}:o}))},0)},[n,d.length]),v.useEffect(()=>{l||setTimeout(()=>{const h=new Set(s.flatMap(o=>o.champions));u(o=>{if(s.length===0)return o.length>0?[]:o;const i=o.filter(c=>h.has(c.id));return i.length!==o.length?i:o})},0)},[s,l]);const f=v.useCallback(h=>{t&&(u(o=>o.map(i=>i.id===h?{...i,isLoading:!0}:i)),mt(t,r,h).then(o=>{u(i=>i.map(c=>c.id===h?{...c,fullInfo:o,isLoading:!1,skinIndex:0}:c))}).catch(o=>{O.error("Failed to load champion info:",o),u(i=>i.map(c=>c.id===h?{...c,isLoading:!1}:c))}))},[t,r]),g=v.useCallback(h=>{u(o=>{if(o.some(N=>N.id===h.id))return o;const c={...h,isLoading:!0,skinIndex:0};return f(h.id),[...o,c]})},[f]),w=v.useCallback(h=>{u(o=>o.filter(i=>i.id!==h))},[]),S=v.useCallback(()=>{u([]),ce(ar)},[]),x=v.useMemo(()=>d.filter(h=>h.fullInfo&&!h.isLoading),[d]),y=v.useMemo(()=>{const h=new Set(s.filter(o=>o.mode==="normal").flatMap(o=>o.champions));return d.filter(o=>h.has(o.id))},[s,d]);return{selectedChampions:d,setSelectedChampions:u,championsWithFullInfo:x,normalTabChampions:y,addChampionToList:g,removeChampion:w,resetChampions:S,loadChampionInfo:f}}function Fr({onAddClick:t}){const{t:r}=se();return e.jsx(wt,{className:"border-dashed",children:e.jsxs(yt,{className:"flex flex-col items-center justify-center py-12 md:py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:e.jsx(Pe,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:r.encyclopedia.emptyState.title}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md text-sm mb-4",children:r.encyclopedia.emptyState.description}),e.jsxs(le,{onClick:t,variant:"outline",className:"flex flex-row items-center justify-center gap-2 border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Le,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-primary transition-colors",children:r.encyclopedia.emptyState.addButton})]})]})})}const It="flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors shrink-0 relative select-none",Mt="bg-primary text-primary-foreground",Ft="bg-muted/50 text-muted-foreground",zt="touch-none cursor-grab active:cursor-grabbing p-0.5 -ml-1 mr-0.5 opacity-60 hover:opacity-100 transition-opacity select-none",Ot="ml-1 p-0.5 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group",zr="ml-1 p-1 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group";function Or({tab:t,champion:r,version:n,selectedTabId:s,onSelect:a,onRemove:d,onVsClick:u}){const{t:l}=se(),{attributes:p,listeners:f,setNodeRef:g,transform:w,transition:S,isDragging:x}=we({id:t.id}),y={transform:ye.Transform.toString(w),transition:S,opacity:x?.5:1},h=s===t.id,o=h?Mt:Ft;return e.jsxs("div",{ref:g,style:y,"data-tab-id":t.id,className:R(It,o,x&&"z-50"),onClick:i=>{const c=i.target;c.tagName==="BUTTON"||c.closest("button")||a(t.id)},children:[e.jsx("button",{...p,...f,className:zt,"aria-label":"Drag to reorder",children:e.jsx(_e,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 cursor-pointer select-none",children:[e.jsx("img",{src:re(n,r.id),alt:r.name,className:"w-5 h-5 rounded-full pointer-events-none select-none",draggable:"false"}),e.jsx("span",{className:"pointer-events-none select-none",children:r.name})]}),e.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),u(t.id)},className:zr,"aria-label":`${l.encyclopedia.vs} with ${r.name}`,title:l.encyclopedia.vsStart,type:"button",children:e.jsx(Ae,{className:R("h-3 w-3 transition-colors",h?"text-primary-foreground":"text-muted-foreground")})}),e.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),d(t.id)},className:Ot,"aria-label":`Remove ${r.name}`,type:"button",children:e.jsx(Se,{className:R("h-3 w-3 transition-colors",h?"text-primary-foreground":"text-muted-foreground")})})]})}function Kr({tab:t,championA:r,championB:n,version:s,selectedTabId:a,onSelect:d,onRemove:u,onChangeChampionA:l,onChangeChampionB:p}){const{t:f}=se(),{attributes:g,listeners:w,setNodeRef:S,transform:x,transition:y,isDragging:h}=we({id:t.id}),o={transform:ye.Transform.toString(x),transition:y,opacity:h?.5:1},i=a===t.id,c=i?Mt:Ft;return e.jsxs("div",{ref:S,style:o,"data-tab-id":t.id,className:R(It,c,h&&"z-50"),children:[e.jsx("button",{...g,...w,className:zt,"aria-label":"Drag to reorder",children:e.jsx(_e,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 select-none",children:[e.jsx("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),l(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:re(s,r.id),alt:r.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})}),e.jsx("button",{onClick:()=>{d(t.id)},className:"text-[10px] font-semibold touch-none select-none",children:f.encyclopedia.vs}),e.jsx("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),p(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:re(s,n.id),alt:n.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})})]}),e.jsx("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),u(t.id)},className:Ot,"aria-label":"Remove VS tab",children:e.jsx(Se,{className:R("h-3 w-3 transition-colors",i?"text-primary-foreground":"text-muted-foreground")})})]})}function Hr({tabs:t,championsWithFullInfo:r,version:n,selectedTabId:s,sensors:a,onDragEnd:d,onSelectTab:u,onRemoveTab:l,onVsClick:p,onChangeChampionA:f,onChangeChampionB:g,onAddClick:w}){const{t:S}=se(),x=v.useRef(null),y=v.useRef(t.length),h=v.useRef(!1),o=v.useRef((i=!0)=>{if(!x.current||!s)return;const c=x.current.querySelector("[data-radix-scroll-area-viewport]");if(!c)return;const N=c.querySelector(`[data-tab-id="${s}"]`);if(N){const m=N.offsetLeft,j=N.offsetWidth,b=c.offsetWidth,C=m-b/2+j/2;i?c.scrollTo({left:Math.max(0,C),behavior:"smooth"}):c.scrollLeft=Math.max(0,C)}});return v.useEffect(()=>{!h.current&&s&&t.length>0&&(h.current=!0,requestAnimationFrame(()=>{requestAnimationFrame(()=>{o.current(!1)})}))},[s,t.length]),v.useEffect(()=>{if(!x.current)return;const i=x.current.querySelector("[data-radix-scroll-area-viewport]");i&&(t.length>y.current&&i.scrollTo({left:i.scrollWidth,behavior:"smooth"}),y.current=t.length)},[t.length]),v.useEffect(()=>{if(h.current&&s){const i=setTimeout(()=>{o.current(!0)},100);return()=>clearTimeout(i)}},[s]),e.jsx("div",{className:"border-b border-border -mx-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground shrink-0 pl-3",children:S.encyclopedia.champion}),e.jsxs(Vt,{ref:x,type:"scroll",className:"flex-1",children:[e.jsx(Xe,{sensors:a,collisionDetection:Qe,onDragEnd:d,children:e.jsx(et,{items:t.map(i=>i.id),strategy:tt,children:e.jsxs("div",{className:"flex items-center gap-2 w-max select-none pr-2",children:[t.map(i=>{if(i.mode==="vs"){const c=r.find(m=>m.id===i.champions[0]),N=r.find(m=>m.id===i.champions[1]);return!c||!N?null:e.jsx(Kr,{tab:i,championA:c,championB:N,version:n,selectedTabId:s,onSelect:u,onRemove:l,onChangeChampionA:f,onChangeChampionB:g},i.id)}else{const c=r.find(N=>N.id===i.champions[0]);return c?e.jsx(Or,{tab:i,champion:c,version:n,selectedTabId:s,onSelect:u,onRemove:l,onVsClick:p},i.id):null}}),e.jsxs(le,{onClick:w,variant:"outline",size:"sm",className:"flex items-center gap-1.5 shrink-0 border-2 border-dashed border-muted-foreground/30 hover:border-primary hover:bg-primary/10 hover:text-primary h-auto py-1.5 px-3 transition-colors",children:[e.jsx(Le,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:S.encyclopedia.add})]})]})})}),e.jsx(or,{orientation:"horizontal"})]})]})})}function Gr({open:t,vsSelectorMode:r,tabs:n,championList:s,selectedChampions:a,onSelect:d,onClose:u,onOpenChange:l}){const{t:p}=se();if(!t||!r)return null;const f=n.find(w=>w.id===r.tabId);if(!f||r.mode!=="select-second"&&f.mode!=="vs")return null;const g=r.mode==="change-champion-a"?f.champions[1]:f.champions[0];return g?e.jsx(Re,{championList:s,selectedChampions:a,onSelect:d,onClose:u,open:t,onOpenChange:l,vsMode:{currentChampionId:g,title:p.encyclopedia.selectOpponent}}):null}const Ke="cooldown_selected_champions",He="cooldown_tabs",Ge="cooldown_selected_tab_id";function Ur(t){return t==="skills"||t==="stats"}function Wr({lang:t,championList:r,version:n,cdragonVersion:s,initialSelectedChampions:a,initialTabs:d,initialSelectedTabId:u}){const[l,p]=Jt(),g=rt()==="mobile",w=v.useMemo(()=>{const V=l.get("tab");return Ur(V)?V:null},[l]),S=()=>w||"skills",[x,y]=v.useState(S),h=v.useRef(w),o=v.useRef(S());v.useEffect(()=>{const V=w||"skills",U=h.current||"skills";V!==U&&V!==x&&(y(V),o.current=V),h.current=w},[w,x]),v.useEffect(()=>{const V=w||"skills",U=o.current;if(x!==U&&V!==x){const Z=new URLSearchParams(l);x==="skills"?Z.delete("tab"):Z.set("tab",x),p(Z,{replace:!0}),h.current=x==="skills"?null:x}o.current=x},[x,w,l,p]);const[i,c]=v.useState(!1),{cdragonVersion:N}=st(),{t:m}=se(),{tabs:j,tabsRef:b,selectedTabId:C,setSelectedTabId:k,showVsSelector:A,setShowVsSelector:P,vsSelectorMode:B,setVsSelectorMode:D,removeTab:M,addTab:W,updateTab:T,replaceTab:E,resetTabs:I,handleDragEnd:L,generateTabId:$}=Ir({version:n,initialTabs:d,initialSelectedTabId:u}),{selectedChampions:_,setSelectedChampions:H,championsWithFullInfo:K,normalTabChampions:q,addChampionToList:ee,removeChampion:ne,resetChampions:oe}=Mr({version:n,lang:t,championList:r,tabs:j,initialSelectedChampions:a}),te=v.useCallback(()=>{try{if(_.length>0){const V=_.map(({id:U,key:Z})=>({id:U,key:Z}));Ie(Ke,JSON.stringify(V))}else ce(Ke);j.length>0?Ie(He,JSON.stringify(j)):ce(He),C?Ie(Ge,C):ce(Ge)}catch(V){O.error("Failed to persist cooldown state to storage:",V)}},[_,j,C]),je=qe(Ne(Je,{activationConstraint:{distance:12}}),Ne(Ye,{coordinateGetter:Ze})),Ce=v.useCallback((V,U)=>{H(Z=>Nt(Z,V,U))},[H]),ie=v.useCallback(V=>{if(new Set(_.map(fe=>fe.id)).has(V.id)){const fe=b.current,J=fe.some(X=>X.mode==="normal"&&X.champions.length===1&&X.champions[0]===V.id),Ee=fe.some(X=>X.mode==="vs"&&X.champions.includes(V.id));if(J){const X=j.find(Be=>Be.mode==="normal"&&Be.champions.length===1&&Be.champions[0]===V.id);X&&M(X.id),Ee||ne(V.id);return}if(Ee){const X={mode:"normal",champions:[V.id],id:$()};W(X);return}const at=j.find(X=>X.mode==="normal"&&X.champions.length===1&&X.champions[0]===V.id);at&&M(at.id),ne(V.id);return}ee(V);const Z={mode:"normal",champions:[V.id],id:$()};W(Z)},[_,j,b,ee,ne,W,M,$]),ke=v.useCallback(()=>{oe(),I(),ce(Ke),ce(He),ce(Ge)},[oe,I]),Kt=v.useCallback(V=>{if(!B)return;const{mode:U,tabId:Z}=B,fe=j.find(J=>J.id===Z);if(fe){if(U==="select-second"){const J={mode:"vs",champions:[fe.champions[0],V.id],id:$()};E(Z,J),_.some(Ee=>Ee.id===V.id)||ee(V)}else U==="change-champion-a"?(T(Z,J=>({...J,champions:[V.id,J.champions[1]]})),_.some(J=>J.id===V.id)||ee(V)):U==="change-champion-b"&&(T(Z,J=>({...J,champions:[J.champions[0],V.id]})),_.some(J=>J.id===V.id)||ee(V));P(!1),D(null)}},[B,j,_,ee,T,E,$]),ae=v.useMemo(()=>C&&j.find(V=>V.id===C)||null,[C,j]),de=v.useMemo(()=>ae?ae.champions.map(V=>{var U;return(U=K.find(Z=>Z.id===V))==null?void 0:U.fullInfo}).filter(V=>V!==void 0):[],[ae,K]),nt=v.useMemo(()=>!g||ae&&ae.mode==="vs"?null:ae&&ae.mode==="normal"&&de.length>0?de[0]:null,[g,ae,de]),Ht=v.useCallback(V=>{j.forEach(U=>{U.champions.includes(V)&&M(U.id)}),ne(V)},[j,ne,M]),Gt=v.useCallback(V=>{D({mode:"select-second",tabId:V}),P(!0)},[]),Ut=v.useCallback(V=>{D({mode:"change-champion-a",tabId:V,championIndex:0}),P(!0)},[]),Wt=v.useCallback(V=>{D({mode:"change-champion-b",tabId:V,championIndex:1}),P(!0)},[]);return e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6 lg:px-8 pb-4 md:pb-5",children:[i&&e.jsx(Re,{championList:r,selectedChampions:q,onSelect:ie,onClose:()=>{c(!1),te()},open:i,onOpenChange:V=>{c(V),V||te()}}),e.jsx(Gr,{open:A,vsSelectorMode:B,tabs:j,championList:r,selectedChampions:_,onSelect:Kt,onClose:()=>{P(!1),D(null),te()},onOpenChange:V=>{P(V),V||(D(null),te())}}),e.jsx("div",{className:"mt-3 md:mt-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-border overflow-x-auto -mx-4 md:mx-0 px-4 md:px-0",children:[e.jsx(Xt,{value:x,onValueChange:V=>y(V),className:"flex-1",children:e.jsxs(Qt,{className:"inline-flex h-auto items-center justify-start gap-2 bg-transparent p-0 border-0",children:[e.jsx(lt,{value:"skills",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:m.encyclopedia.tabs.skills}),e.jsx(lt,{value:"stats",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:m.encyclopedia.tabs.stats})]})}),e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:e.jsxs(le,{variant:"ghost",size:"sm",onClick:ke,className:"flex items-center gap-1.5 shrink-0 text-muted-foreground hover:text-primary hover:bg-muted/30 border-0",children:[e.jsx(ir,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[10px]",children:m.encyclopedia.reset})]})})]})}),_.length>0&&K.length>0&&e.jsxs("div",{className:"mt-4 md:mt-6 space-y-4 md:space-y-6",children:[g&&j.length>0&&e.jsx(Hr,{tabs:j,championsWithFullInfo:K,version:n,selectedTabId:C,sensors:je,onDragEnd:L,onSelectTab:k,onRemoveTab:M,onVsClick:Gt,onChangeChampionA:Ut,onChangeChampionB:Wt,onAddClick:()=>c(!0)}),e.jsx(Br,{champions:g&&ae&&ae.mode==="vs"&&de.length===2?de:g&&nt?[nt]:K.map(V=>V.fullInfo),version:n,activeTab:x==="skills"?"skills":"stats",championList:r,onAddChampion:g?void 0:ie,onRemoveChampion:Ht,onReorderChampions:g?void 0:Ce,vsMode:g&&ae&&ae.mode==="vs"&&de.length===2?{championA:de[0],championB:de[1]}:void 0})]}),_.length===0&&e.jsx("div",{className:"mt-4",children:e.jsx(Fr,{onAddClick:()=>c(!0)})})]})}function Qr(t){return e.jsx(cr,{initialDDragonVersion:t.version,initialCDragonVersion:t.cdragonVersion,children:e.jsx(Wr,{...t})})}export{Qr as default};
