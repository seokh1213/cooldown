import{r as d,j as e}from"/cooldown/assets/react-vendor-D9kQI8Cv.js";import{c as L,u as $,p as O,e as B,t as U,i as V}from"/cooldown/assets/index-BikHNYUP.js";import{C as A,I as P,T as _,b as z,c as S,d as w}from"/cooldown/assets/tabs-CkKjFW5I.js";import"./lucide-icons-QKYEtl3H.js";const R=d.forwardRef(({className:n,children:a,...s},i)=>e.jsx("select",{className:L("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:i,...s,children:a}));R.displayName="Select";function G(n,a){if(!n.stats)return null;const s=n.stats,i=Math.min(Math.max(a,1),18),l=i-1;return{level:i,health:(s.hp??0)+(s.hpperlevel??0)*l,mana:(s.mp??0)+(s.mpperlevel??0)*l,armor:(s.armor??0)+(s.armorperlevel??0)*l,magicResist:(s.spellblock??0)+(s.spellblockperlevel??0)*l,attackDamage:(s.attackdamage??0)+(s.attackdamageperlevel??0)*l,movespeed:s.movespeed??0}}function J(n,a){let s={...n};for(const i of a){const l=i.stats;if(l)for(const[h,r]of Object.entries(l))switch(h){case"FlatHPPoolMod":s.health+=r;break;case"FlatMPPoolMod":s.mana+=r;break;case"FlatPhysicalDamageMod":s.attackDamage+=r;break;case"FlatArmorMod":s.armor+=r;break;case"FlatSpellBlockMod":s.magicResist+=r;break;case"FlatMovementSpeedMod":s.movespeed+=r;break}}return s}function K(n){let a=0;for(const s of n){const i=s.stats;i&&typeof i.AbilityHaste=="number"&&(a+=i.AbilityHaste)}return a}function X(n,a,s){if(!n.spells)return[];const i=s>0?1+s/100:1;return n.spells.map(l=>{const h=l.cooldown??[],r=i>0?h.map(x=>typeof x=="number"?x/i:x):h.map(x=>x);return{id:l.id,name:l.name,maxrank:l.maxrank,cooldowns:h,cooldownsWithAbilityHaste:r}})}function se({lang:n,version:a,championList:s}){var F;const{t:i}=$(),[l,h]=d.useState(""),[r,x]=d.useState(null),[g,E]=d.useState(18),[j,M]=d.useState([]),[v,W]=d.useState([]),[D,b]=d.useState(null),[N,Q]=d.useState("QWER"),q=d.useMemo(()=>s??[],[s]);d.useEffect(()=>{if(!a||!l){x(null),b(null);return}let t=!1;return O(a,n,l).then(o=>{t||x(o)}).catch(()=>{t||x(null)}),B(l,a).then(o=>{t||b(o.spellDataMap)}).catch(()=>{t||b(null)}),()=>{t=!0}},[a,n,l]),d.useEffect(()=>{if(!a)return;let t=!1;return U(a,n).then(o=>{if(!t){const u=o.filter(m=>{var T;return!(!m.maps||!m.maps[11]||!((T=m.tags)==null?void 0:T.includes("Trinket"))&&m.gold&&m.gold.purchasable===!1)});M(u)}}).catch(()=>{t||M([])}),()=>{t=!0}},[a,n]);const y=d.useMemo(()=>r?G(r,g):null,[r,g]),p=d.useMemo(()=>j.filter(t=>v.includes(t.id)),[j,v]),c=d.useMemo(()=>y?J(y,p):null,[y,p]),C=d.useMemo(()=>c?c.attackDamage*.7:null,[c]),f=d.useMemo(()=>{if(!c||!r)return null;const t=N.replace(/[^QWERqwer]/g,"").toUpperCase();if(!t)return null;const o=c.attackDamage*1.2,u=t.length,m=o*u;return{sequence:t,estimatedHits:u,estimatedDamage:m}},[c,r,N]),k=d.useMemo(()=>K(p),[p]),I=d.useMemo(()=>r?X(r,D,k):[],[r,D,k]);return a?e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 md:px-6 lg:px-8 py-8 md:py-10",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold tracking-tight",children:i.pages.simulation.title}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:i.pages.simulation.description})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-[minmax(0,1.1fr)_minmax(0,1fr)]",children:[e.jsxs(A,{className:"p-4 space-y-4 bg-card/60 border-border/70",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"챔피언"}),e.jsxs(R,{value:l,onChange:t=>h(t.target.value),className:"h-9 text-sm",children:[e.jsx("option",{value:"",children:"선택하세요"}),q.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"레벨 (1~18)"}),e.jsx(P,{type:"number",min:1,max:18,value:g,onChange:t=>E(Number.isNaN(Number(t.target.value))?1:Number(t.target.value)),className:"h-9 w-24 text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"아이템 (최대 6개, 단순 스탯 합산)"}),e.jsx(V,{className:"h-56 rounded-md border bg-background/60",children:e.jsx("div",{className:"p-2 space-y-1",children:j.slice(0,200).map(t=>{const o=v.includes(t.id),u=!!t.gold&&t.gold.total>0&&t.gold.purchasable!==!1&&t.inStore!==!1;return e.jsxs("button",{type:"button",onClick:()=>{W(m=>o?m.filter(H=>H!==t.id):m.length>=6?m:[...m,t.id])},className:`w-full flex items-center gap-2 rounded px-2 py-1.5 text-left text-[11px] transition-colors ${o?"bg-primary/10 text-primary border border-primary/40":"hover:bg-muted/60 text-foreground/80"}`,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${a}/img/item/${t.id}.png`,alt:t.name,className:"w-6 h-6 rounded-sm border border-border/60 bg-black/40"}),e.jsx("span",{className:"flex-1 truncate",children:t.name}),u&&e.jsx("span",{className:"text-[10px] text-amber-600 dark:text-amber-400 font-semibold",children:t.gold.total.toLocaleString()})]},t.id)})})}),p.length>0&&e.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["선택된 아이템:"," ",p.map(t=>t.name).join(", ")]})]})]}),e.jsx(A,{className:"p-4 bg-card/60 border-border/70 min-h-[260px]",children:e.jsxs(_,{defaultValue:"stats",className:"w-full",children:[e.jsxs(z,{className:"inline-flex h-9 items-center justify-start rounded-lg bg-muted/60 p-1 mb-3 gap-1",children:[e.jsx(S,{value:"stats",className:"px-3 py-1.5 text-xs",children:"최종 스탯"}),e.jsx(S,{value:"dps",className:"px-3 py-1.5 text-xs",children:"간단 DPS"}),e.jsx(S,{value:"skills",className:"px-3 py-1.5 text-xs",children:"스킬 쿨타임"})]}),e.jsx(w,{value:"stats",className:"mt-0",children:c?e.jsxs("div",{className:"grid grid-cols-2 gap-y-1.5 gap-x-4 text-xs",children:[e.jsx("div",{className:"text-muted-foreground",children:"레벨"}),e.jsx("div",{className:"text-right",children:c.level}),e.jsx("div",{className:"text-muted-foreground",children:"체력"}),e.jsx("div",{className:"text-right",children:Math.round(c.health)}),e.jsx("div",{className:"text-muted-foreground",children:"마나"}),e.jsx("div",{className:"text-right",children:Math.round(c.mana)}),e.jsx("div",{className:"text-muted-foreground",children:"공격력"}),e.jsx("div",{className:"text-right",children:c.attackDamage.toFixed(1)}),e.jsx("div",{className:"text-muted-foreground",children:"방어력"}),e.jsx("div",{className:"text-right",children:c.armor.toFixed(1)}),e.jsx("div",{className:"text-muted-foreground",children:"마법 저항력"}),e.jsx("div",{className:"text-right",children:c.magicResist.toFixed(1)}),e.jsx("div",{className:"text-muted-foreground",children:"이동 속도"}),e.jsx("div",{className:"text-right",children:c.movespeed.toFixed(0)})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"챔피언과 레벨을 선택하면 최종 스탯이 표시됩니다."})}),e.jsx(w,{value:"dps",className:"mt-0",children:!c||C==null?e.jsx("div",{className:"text-sm text-muted-foreground",children:"챔피언과 레벨을 선택하면 평타 기준 간단 DPS를 볼 수 있습니다."}):e.jsxs("div",{className:"space-y-3 text-xs",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"평타 공격력"}),e.jsx("div",{children:c.attackDamage.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"가정 공격 속도"}),e.jsx("div",{children:"0.70 / s"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"근사 DPS (평타만)"}),e.jsx("div",{children:C.toFixed(1)})]})]}),e.jsxs("div",{className:"border-t border-border/60 pt-2 space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"스킬 콤보 (예: QWER, QQW)"}),e.jsx(P,{value:N,onChange:t=>Q(t.target.value),className:"h-7 w-28 text-[11px] px-2"})]}),f?e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"입력 콤보"}),e.jsx("div",{children:f.sequence})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"스킬 횟수"}),e.jsx("div",{children:f.estimatedHits})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"아주 단순한 콤보 피해 (평타기반 근사)"}),e.jsx("div",{children:(F=f.estimatedDamage)==null?void 0:F.toFixed(1)})]})]}):e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"QWER 문자로 콤보를 입력하면 아주 단순한 근사 콤보 피해를 보여줍니다."})]}),e.jsx("p",{className:"mt-1 text-[11px] text-muted-foreground",children:"※ 실제 인게임 공식과 공속/치명타/온히트 및 스킬 계수는 훨씬 복잡하므로, 여기서는 단순 참고용 수치만 제공합니다."})]})}),e.jsx(w,{value:"skills",className:"mt-0",children:r?I.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"스킬 정보가 없습니다."}):e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx("div",{className:"text-[11px] text-muted-foreground mb-1",children:"아이템에서 얻는 스킬 가속(Ability Haste)을 반영한 쿨타임입니다."}),e.jsx("div",{className:"grid grid-cols-1 gap-1",children:I.map((t,o)=>e.jsxs("div",{className:"flex flex-col rounded border border-border/60 bg-background/60 px-2 py-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground",children:["Q","W","E","R"][o]??""}),e.jsx("span",{className:"text-xs font-medium",children:t.name??t.id})]}),e.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["Haste: ",k]})]}),e.jsxs("div",{className:"mt-1.5 grid grid-cols-2 gap-x-2 gap-y-0.5",children:[e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"기본 쿨타임"}),e.jsx("div",{className:"text-[11px] text-right",children:t.cooldowns.join(" / ")}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"가속 적용"}),e.jsx("div",{className:"text-[11px] text-right",children:t.cooldownsWithAbilityHaste.map(u=>typeof u=="number"?u.toFixed(2):u).join(" / ")})]})]},t.id))})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"챔피언을 선택하면 스킬 쿨타임을 확인할 수 있습니다."})})]})})]})]}):e.jsx("div",{className:"w-full max-w-5xl mx-auto px-4 md:px-6 lg:px-8 py-8 md:py-10",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:i.championSelector.loading})})}export{se as default};
