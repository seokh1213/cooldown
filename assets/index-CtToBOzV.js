import{j as e,r as f,H as be,z as je}from"/cooldown/assets/react-vendor-CopeUkDP.js";import{T as ye,a as ve,b as G,V as Ne,u as we}from"/cooldown/assets/VersionContext-5Gj9V_Im.js";import{u as _,a as Q,g as Se,b as ke,T as Te,S as z,D as X,c as Y,V as Z,d as ee,e as se,f as Ce,h as Me,i as Ie,j as Pe,k as Le}from"/cooldown/assets/index-F77Rf2kt.js";import{C as oe,u as De,I as U}from"/cooldown/assets/useDebouncedValue-BWooqnph.js";import{T as fe,f as K}from"/cooldown/assets/lucide-icons-DTvcjo7T.js";function $e({activeTab:s,onTabChange:n,onReset:t}){const{t:h}=_();return e.jsx("div",{className:"flex items-center justify-between gap-2 border-b border-border overflow-x-auto -mx-4 md:mx-0 px-4 md:px-0",children:e.jsx(ye,{value:s,onValueChange:c=>n(c),className:"flex-1",children:e.jsx(ve,{className:"inline-flex h-auto items-center justify-start gap-2 bg-transparent p-0 border-0",children:e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx(G,{value:"runes",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:h.encyclopedia.tabs.runes}),e.jsx(G,{value:"items",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:h.encyclopedia.tabs.items}),e.jsx(G,{value:"summoner",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:h.encyclopedia.tabs.summoner})]})})})})}function Fe({version:s,lang:n}){const{t}=_(),[h,c]=f.useState(null),[u,v]=f.useState(null),[y,N]=f.useState(!1),$=Q()==="mobile",[l,F]=f.useState(null);f.useEffect(()=>{let a=!1;return N(!0),Promise.all([Se(s,n),ke(s,n)]).then(([d,o])=>{a||(c(d),v(o))}).finally(()=>{a||N(!1)}),()=>{a=!0}},[s,n]);const T=f.useMemo(()=>{if(!u||!u.groups.length)return[];const a=new Map;for(const o of u.groups)for(const m of o.rows){if(!m.perks||m.perks.length===0)continue;const C=m.label||"";let I=a.get(C);I||(I={label:m.label,perksMap:new Map},a.set(C,I));for(const L of m.perks)I.perksMap.has(L.id)||I.perksMap.set(L.id,L)}const d=Array.from(a.values()).map(({label:o,perksMap:m})=>({label:o,perks:Array.from(m.values())}));return d.sort((o,m)=>!o.label&&m.label?1:o.label&&!m.label?-1:!o.label&&!m.label?0:o.label.localeCompare(m.label)),d},[u]);if(y&&!h)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:t.championSelector.loading});if(!h||h.length===0)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:t.championSelector.emptyList});const M={Precision:0,Domination:1,Sorcery:2,Resolve:3,Inspiration:4},i=[...h].sort((a,d)=>{const o=M[a.key]??999,m=M[d.key]??999;return o-m}),w=a=>{const d=' <span class="text-destructive dark:text-red-400">?</span> ';let o=a.replace(/@\{[^}]+\}@/g,d);return o=o.replace(/@[^@]+@/g,d),o},A=a=>{const d=a.longDesc||a.shortDesc||"",o=w(d);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${a.icon}`,alt:a.name,loading:"lazy",decoding:"async",width:32,height:32,className:"w-8 h-8 rounded-full border border-border/60 bg-transparent"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"text-sm font-semibold",children:a.name})})]}),e.jsx("div",{className:"text-xs text-muted-foreground leading-relaxed",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:o}})}),e.jsxs("div",{className:"text-xs text-muted-foreground/80 italic leading-relaxed border-t pt-3 mt-3 flex items-center gap-1.5",children:[e.jsx(fe,{className:"w-2.5 h-2.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:t.encyclopedia.runes.warning})]})]})},R=(a,d,o)=>$?e.jsxs("button",{type:"button",onClick:()=>F(a),className:"flex flex-col items-center gap-1 focus:outline-none min-w-0",style:d,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${a.icon}`,alt:a.name,loading:"lazy",decoding:"async",width:40,height:40,className:"w-10 h-10 rounded-full border border-border/60 bg-transparent flex-shrink-0"}),e.jsx("span",{className:"text-[10px] text-center leading-tight line-clamp-2 w-full",children:a.name})]},o):e.jsxs(Ce,{children:[e.jsx(Me,{asChild:!0,children:e.jsxs("button",{type:"button",className:"flex flex-col items-center gap-1 focus:outline-none cursor-help min-w-0",style:d,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${a.icon}`,alt:a.name,loading:"lazy",decoding:"async",width:40,height:40,className:"w-10 h-10 rounded-full border border-border/60 bg-transparent flex-shrink-0"}),e.jsx("span",{className:"text-[10px] text-center leading-tight line-clamp-2 w-full",children:a.name})]})}),e.jsx(Ie,{side:"top",align:"center",sideOffset:8,className:"max-w-xs p-3",children:A(a)})]},o??a.id),V=a=>{const d="/lol-game-data/assets/v1";return`https://ddragon.leagueoflegends.com/cdn/img${a.startsWith(d)?a.slice(d.length):a}`},x=a=>(a.shortDesc||a.longDesc||"").replace(/<font[^>]*>/gi,"").replace(/<\/font>/gi,"");return e.jsx(Te,{delayDuration:200,children:e.jsxs("div",{className:"mt-4",children:[e.jsx(z,{className:"rounded-md border bg-card/40",children:e.jsxs("div",{className:"p-4 grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:[i.map(a=>e.jsxs(oe,{className:"p-4 flex flex-col gap-3 bg-background/60 border-border/70",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/img/${a.icon}`,alt:a.name,loading:"lazy",decoding:"async",width:32,height:32,className:"w-8 h-8 rounded-full border border-border/60 bg-transparent"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold",children:a.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:a.key})]})]}),e.jsx("div",{className:"space-y-3",children:a.slots.map((d,o)=>{const m=Math.max(...a.slots.map(C=>C.runes.length));return e.jsx("div",{className:"grid gap-y-2 gap-x-2 md:gap-x-4",style:{gridTemplateColumns:`repeat(${m}, minmax(0, 1fr))`},children:d.runes.map((C,I)=>{const L=d.runes.length;let D=String(I+1);return m===4&&L===3&&(I===0?D="1":I===1?D="2 / span 2":I===2&&(D="4")),m===4&&L===2&&(I===0?D="1":I===1&&(D="4")),L===1&&(D="1 / -1"),R(C,{gridColumn:D},C.id)})},o)})})]},a.id)),T.length>0&&e.jsxs(oe,{className:"p-4 flex flex-col gap-3 bg-background/60 border-border/70 md:col-span-2 xl:col-span-3",children:[e.jsx("div",{className:"flex items-center justify-between gap-3 mb-1.5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold",children:"공통 능력치 조각 (보조 룬)"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.encyclopedia.runes.warning})]})}),e.jsx("div",{className:"space-y-3 mt-1",children:T.map((a,d)=>!a.perks||a.perks.length===0?null:e.jsxs("div",{className:"flex flex-col gap-1",children:[a.label&&e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground mb-0.5",children:a.label}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.perks.map(o=>e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-md border border-border/60 bg-background/80 px-2 py-1",children:[e.jsx("img",{src:V(o.iconPath),alt:o.name,loading:"lazy",decoding:"async",width:24,height:24,className:"w-6 h-6 rounded-full border border-border/60 bg-transparent flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"text-[11px] font-semibold leading-tight truncate",children:o.name}),e.jsx("span",{className:"text-[10px] text-muted-foreground leading-snug line-clamp-2",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:x(o)}})})]})]},o.id))})]},`${a.label||"row"}-${d}`))})]})]})}),$&&e.jsx(X,{open:!!l,onOpenChange:a=>!a&&F(null),children:e.jsxs(Y,{className:"w-[calc(100vw-32px)] max-w-lg max-h-[70vh] h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(Z,{children:[e.jsx(ee,{children:(l==null?void 0:l.name)??"Rune"}),e.jsx(se,{children:(l==null?void 0:l.name)??"Rune"})]}),e.jsx(z,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4",children:l&&A(l)})})]})})]})})}function Re(s){var N;const n=s.tags||[],t=s.name||"",h=s.plaintext||"",c=`${t} ${h}`.toLowerCase(),u=t+h,v=new Set(["3340","3363","3364"]);return new Set(["4638","4643"]).has(s.id)?!1:!!(v.has(s.id)||/포션|영약/.test(u)||c.includes("potion")||c.includes("elixir")||n.includes("Consumable")||n.includes("Trinket")||n.includes("Vision")&&v.has(s.id)||/도란/.test(u)||c.includes("doran")||n.includes("Jungle")||c.includes("jungle")||(((N=s.gold)==null?void 0:N.total)??0)===0)}function ce(s){const n=!!s.from&&s.from.length>0,t=!!s.into&&s.into.length>0;return Re(s)?"starter":n?t?"epic":"legendary":"basic"}function Ae(s){var t;return!(!s.maps||!s.maps[11]||!((t=s.tags)==null?void 0:t.includes("Trinket"))&&s.gold&&s.gold.purchasable===!1||s.inStore===!1||s.displayInItemSets===!1||s.cdragon&&(s.cdragon.inStore===!1||s.cdragon.displayInItemSets===!1))}function de(s){const n=s.tags||[],t=s.name.toLowerCase();(s.plaintext||"").toLowerCase();const h=new Set(["3340","3363","3364"]);return new Set(["4638","4643"]).has(s.id)?!1:!!(h.has(s.id)||n.includes("Trinket")||n.includes("Consumable")||t.includes("potion")||t.includes("elixir")||Oe(s))}function Oe(s){const n=s.name,t=s.plaintext||"";return/포션|영약/.test(n+t)}function me(s){const n=s.tags||[],t=s.name.toLowerCase();return n.includes("Boots")||t.includes("boots")}function ue(s){const n=s.tags||[],t=s.stats||{},h=Object.keys(t),c=n.includes("AttackDamage")||h.some(N=>N.toLowerCase().includes("attackdamage")),u=n.includes("SpellDamage")||h.some(N=>N.toLowerCase().includes("spelldamage")),v=n.includes("Health")||n.includes("Armor")||n.includes("SpellBlock"),y=n.includes("ManaRegen")||n.includes("HealthRegen")||n.includes("CooldownReduction");return u&&y?"support":v&&(c||u)?"tank":u?"mage":c&&!v?"assassin":c||v?"fighter":"all"}function pe(s){return!(!s.gold||s.gold.total<=0||s.gold.purchasable===!1||s.inStore===!1||s.displayInItemSets===!1||s.cdragon&&(s.cdragon.inStore===!1||s.cdragon.displayInItemSets===!1))}function xe(s,n){const t=s.stats||{},h=[],c=(u,v,y=!1)=>{if(!v)return;let N=v;y&&Math.abs(v)<=1&&(N=Math.round(v*100));const k=y?`${N}%`:`${N}`;h.push(`+ ${k} ${u}`)};return typeof t.FlatPhysicalDamageMod=="number"&&c(n.encyclopedia.items.stats.attackDamage,t.FlatPhysicalDamageMod),typeof t.FlatMagicDamageMod=="number"&&c(n.encyclopedia.items.stats.abilityPower,t.FlatMagicDamageMod),typeof t.FlatCritChanceMod=="number"&&c(n.encyclopedia.items.stats.critChance,t.FlatCritChanceMod*100,!0),typeof t.PercentAttackSpeedMod=="number"&&c(n.encyclopedia.items.stats.attackSpeed,t.PercentAttackSpeedMod,!0),typeof t.FlatHPPoolMod=="number"&&c(n.encyclopedia.items.stats.health,t.FlatHPPoolMod),typeof t.FlatMPPoolMod=="number"&&c(n.encyclopedia.items.stats.mana,t.FlatMPPoolMod),typeof t.FlatArmorMod=="number"&&c(n.encyclopedia.items.stats.armor,t.FlatArmorMod),typeof t.FlatSpellBlockMod=="number"&&c(n.encyclopedia.items.stats.magicResist,t.FlatSpellBlockMod),typeof t.PercentLifeStealMod=="number"&&c(n.encyclopedia.items.stats.lifesteal,t.PercentLifeStealMod,!0),typeof t.PercentSpellVampMod=="number"&&c(n.encyclopedia.items.stats.spellVamp,t.PercentSpellVampMod,!0),h}function Ee(s){let n=s.description||"";return n=n.replace(/<\/?mainText>/gi,""),n=n.replace(/<stats>[\s\S]*?<\/stats>/gi,""),n=n.replace(/^(?:\s|&nbsp;|<br\s*\/?>)+/gi,""),n}function he(s,n){var v,y;const t=((v=s.gold)==null?void 0:v.total)??0,h=((y=s.gold)==null?void 0:y.base)??0,c=!!s.from&&s.from.length>0;return h===0&&c?n.encyclopedia.items.price.unavailable:t>0||pe(s)?t.toLocaleString():n.encyclopedia.items.price.free}const B=({item:s,version:n,isSelected:t,onSelect:h})=>{const{t:c}=_(),u=he(s,c),v=u===c.encyclopedia.items.price.unavailable;return e.jsxs("button",{type:"button",onClick:h,className:`flex flex-col items-center gap-0 rounded-sm px-0.5 py-0 text-center transition-colors w-9 md:w-10 ${t?"bg-primary/20 border border-primary/60 shadow-sm":"hover:bg-muted/60 border border-transparent"}`,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${n}/img/item/${s.id}.png`,alt:s.name,loading:"lazy",decoding:"async",width:32,height:32,className:"w-7 h-7 md:w-8 md:h-8 aspect-square object-cover rounded-sm border border-border/60 bg-black/40 flex-shrink-0"}),e.jsx("span",{className:`${v?"text-[8px] md:text-[9px]":"text-[9px] md:text-[10px]"} text-amber-600 dark:text-amber-400 font-semibold whitespace-nowrap leading-tight`,children:u}),e.jsx("span",{className:"sr-only absolute",children:s.name})]})};function Ve({version:s,lang:n}){const{t}=_(),c=Q()==="mobile",[u,v]=f.useState(null),[y,N]=f.useState(null),[k,$]=f.useState(!1),[l,F]=f.useState(""),[T,M]=f.useState("all"),[i,w]=f.useState(null),[A,R]=f.useState(!1);f.useEffect(()=>{let r=!1;return $(!0),Pe(s,n).then(g=>{if(!r){v(g);const b=g.filter(Ae),j=new Set,p=b.filter(S=>j.has(S.name)?!1:(j.add(S.name),!0));N(p),!i&&p.length>0&&w(p[0])}}).finally(()=>{r||$(!1)}),()=>{r=!0}},[s,n]);const V=f.useMemo(()=>u?new Map(u.map(r=>[r.id,r])):new Map,[u]),a=De(l,c?220:180).trim().toLowerCase(),d=r=>r.toLowerCase().replace(/[^0-9a-z\uac00-\ud7a3ㄱ-ㅎ]/g,""),o=r=>{if(!r)return"";try{return be.d(r,!0).map(g=>g[0]).join("")}catch{return""}},m=d(a),C=a.replace(/\s+/g,""),L=C.length>0&&/^[ㄱ-ㅎ]+$/.test(C)?C:"",{itemsByTier:D,flatFiltered:Be}=f.useMemo(()=>{const r={itemsByTier:{starter:[],basic:[],epic:[],legendary:[]},flatFiltered:[]};if(!y)return r;const g=p=>{if(!m&&!L)return!0;const S=p.name||"",P=p.plaintext||"",O=p.colloq||"",E=d(S),J=[E,d(P),d(O.replace(/;/g," "))];if(m&&J.some(H=>H.includes(m))||L&&o(S).includes(L))return!0;if(m&&E){const H=o(S);if(H&&(H.charAt(0)+E.slice(1)).includes(m))return!0}return!1},b={starter:[],basic:[],epic:[],legendary:[]},j=[];return y.forEach(p=>{if(!g(p))return;if(T==="trinket"){if(!de(p))return}else if(T==="boots"){if(!me(p))return}else if(T!=="all"){if(de(p)||me(p))return;const P=ue(p);if(P!=="all"&&P!==T)return}const S=ce(p);b[S].push(p),j.push(p)}),Object.keys(b).forEach(p=>{b[p].sort((S,P)=>{var O,E;return(((O=S.gold)==null?void 0:O.total)??0)-(((E=P.gold)==null?void 0:E.total)??0)})}),j.sort((p,S)=>{var P,O;return(((P=p.gold)==null?void 0:P.total)??0)-(((O=S.gold)==null?void 0:O.total)??0)}),{itemsByTier:b,flatFiltered:j}},[y,m,L,T]);if(k&&!y)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:t.championSelector.loading});if(!y||y.length===0)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:t.championSelector.emptyList});const te=r=>{if(!r.into||r.into.length===0)return[];const g=[];return r.into.forEach(b=>{const j=V.get(b);j&&j.inStore!==!1&&j.displayInItemSets!==!1&&(j.cdragon&&(j.cdragon.inStore===!1||j.cdragon.displayInItemSets===!1)||g.push(j))}),g.sort((b,j)=>{var p,S;return(((p=b.gold)==null?void 0:p.total)??0)-(((S=j.gold)==null?void 0:S.total)??0)}),g},re=(r,g=0,b=6)=>{if(g>=b)return{item:r,children:[]};const j=[];return r.from&&r.from.length>0&&r.from.forEach(p=>{const S=V.get(p);S&&j.push(re(S,g+1,b))}),{item:r,children:j}},q=r=>t.encyclopedia.items.filters[r],W=r=>t.encyclopedia.items.tiers[r],ae=i?Ee(i):"",ne=ae.replace(/<[^>]*>/g,"").replace(/&nbsp;|\u00a0/gi,"").trim().length>0,le=((i==null?void 0:i.plaintext)||"").trim(),ge=!ne&&!!le,ie=i&&e.jsxs("div",{className:"flex flex-col gap-2 h-full min-h-0",children:[e.jsxs("div",{className:"space-y-0.5 text-[11px] pb-1 border-b border-border/60 flex-shrink-0",children:[e.jsx("div",{className:"font-semibold",children:t.encyclopedia.items.buildsIntoTitle}),e.jsx("div",{className:"overflow-x-auto pb-0.5",children:e.jsx("div",{className:"flex flex-nowrap gap-1 min-w-max",children:te(i).length>0?te(i).map(r=>e.jsx(B,{item:r,version:s,isSelected:i.id===r.id,onSelect:()=>w(r)},r.id)):e.jsx("span",{className:"text-[10px] text-muted-foreground",children:t.encyclopedia.items.buildsIntoEmpty})})})]}),e.jsxs("div",{className:"space-y-1 text-[11px] py-1 flex-shrink-0",children:[e.jsx("div",{className:"font-semibold",children:t.encyclopedia.items.treeTitle}),(()=>{var b;const r=re(i),g=j=>{const p=j.children.length>0;return e.jsxs("div",{className:"flex flex-col items-center gap-0",children:[e.jsx(B,{item:j.item,version:s,isSelected:i.id===j.item.id,onSelect:()=>w(j.item)}),p&&e.jsxs("div",{className:"mt-0 flex flex-col items-stretch",children:[e.jsx("div",{className:"relative flex justify-center",children:e.jsx("div",{className:"h-1 w-[2px] bg-primary/60"})}),e.jsx("div",{className:"relative flex flex-nowrap items-start justify-center gap-y-0 pt-0",children:j.children.map((S,P)=>{const O=j.children.length,E=P===0,J=P===O-1,H=E?"left-1/2 right-0":J?"left-0 right-1/2":"left-0 right-0";return e.jsxs("div",{className:"relative flex flex-col items-center gap-0 pt-0.5 px-1",children:[O>1&&e.jsx("div",{className:`pointer-events-none absolute top-0 h-[2px] bg-primary/60 ${H}`}),e.jsx("div",{className:"pointer-events-none absolute top-0 left-1/2 -translate-x-1/2 h-2 w-[2px] bg-primary/60"}),g(S)]},`${S.item.id}-${P}`)})})]})]})};return!r.children.length&&!((b=r.item.from)!=null&&b.length)?e.jsx("span",{className:"text-[10px] text-muted-foreground",children:t.encyclopedia.items.treeEmpty}):e.jsx("div",{className:"pt-0",children:e.jsx("div",{className:"w-full rounded-md border border-border/60 bg-muted/40 px-2 py-0.5 overflow-x-auto scrollbar-hide",children:e.jsx("div",{className:"min-w-max flex justify-center",children:g(r)})})})})()]}),e.jsx(z,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"pt-2 pr-3",children:e.jsxs("div",{className:"rounded-md border border-border/70 dark:border-neutral-700/80 bg-card text-foreground dark:bg-neutral-950 dark:text-slate-50 shadow-md px-3 py-2 text-[11px] space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${s}/img/item/${i.id}.png`,alt:i.name,className:"w-9 h-9 rounded-sm border border-border/60 bg-black/40 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xs font-semibold truncate text-foreground dark:text-amber-200",children:i.name}),pe(i)&&e.jsx("div",{className:"text-[11px] text-amber-600 dark:text-amber-300 font-semibold whitespace-nowrap",children:he(i,t)})]}),e.jsxs("div",{className:"mt-0.5 flex items-center justify-between text-[10px] text-muted-foreground dark:text-slate-300",children:[e.jsx("span",{children:W(ce(i))}),(()=>{const r=ue(i);if(r==="all")return null;const g=q(r);return e.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-slate-400",children:g})})()]})]})]}),e.jsx("div",{className:"h-px bg-neutral-700/80"}),xe(i,t).length>0&&e.jsx("ul",{className:"space-y-0.5 text-[11px] leading-snug",children:xe(i,t).map(r=>e.jsx("li",{className:"text-primary",children:r},r))}),ge&&e.jsx("p",{className:"text-[11px] leading-snug text-foreground dark:text-slate-100",children:le}),ne&&e.jsx("div",{className:"text-[11px] leading-snug text-foreground dark:text-slate-100 [&_br]:block [&_li]:ml-4 [&_li]:list-disc [&_li]:text-[11px] [&_li]:leading-snug",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:ae}})})]})})})]});return c?e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(K,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),e.jsx(U,{value:l,onChange:r=>F(r.target.value),placeholder:t.encyclopedia.items.searchPlaceholder,className:"h-9 pl-7 text-xs border-neutral-400 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-primary"})]}),e.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1",children:["all","fighter","mage","assassin","support","tank","trinket","boots"].map(r=>e.jsx("button",{type:"button",onClick:()=>M(r),className:`px-2.5 py-1 rounded-full text-[11px] whitespace-nowrap border ${T===r?"bg-primary text-primary-foreground border-primary":"bg-muted/60 text-muted-foreground border-border/60"}`,children:q(r)},r))})]}),e.jsx("div",{className:"rounded-md border bg-card/40",children:e.jsx("div",{className:"p-1 space-y-1",children:Object.keys(D).map(r=>{const g=D[r];return!g||g.length===0?null:e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:W(r)}),e.jsx("div",{className:"flex flex-wrap gap-1",children:g.map(b=>e.jsx(B,{item:b,version:s,isSelected:(i==null?void 0:i.id)===b.id,onSelect:()=>{w(b),R(!0)}},b.id))})]},r)})})}),e.jsx(X,{open:A&&!!i,onOpenChange:r=>{r||R(!1)},children:e.jsxs(Y,{className:"w-[calc(100vw-32px)] max-w-lg max-h-[70vh] h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(Z,{children:[e.jsx(ee,{children:(i==null?void 0:i.name)??"Item"}),e.jsx(se,{children:(i==null?void 0:i.name)??"Item"})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:e.jsx("div",{className:"p-4",children:ie})})]})})]}):e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("div",{className:"flex flex-wrap gap-1",children:["all","fighter","mage","assassin","support","tank","trinket","boots"].map(r=>e.jsx("button",{type:"button",onClick:()=>M(r),className:`px-2.5 py-1 rounded-full text-[11px] whitespace-nowrap border ${T===r?"bg-primary text-primary-foreground border-primary":"bg-muted/60 text-muted-foreground border-border/60"}`,children:q(r)},r))}),e.jsxs("div",{className:"relative w-full sm:w-52 md:w-64 group",children:[e.jsx(K,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),e.jsx(U,{value:l,onChange:r=>F(r.target.value),placeholder:t.encyclopedia.items.searchPlaceholder,className:"h-8 pl-8 text-xs md:text-sm w-full border-neutral-400 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-primary"})]})]}),e.jsxs("div",{className:"rounded-md border bg-card/40 md:h-[calc(100vh-12rem)] flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:flex-1 md:border-r border-border/60 flex flex-col min-w-0 min-h-0",children:[e.jsx("div",{className:"px-3 py-2 border-b border-border/60 flex items-center justify-between flex-shrink-0",children:e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:t.encyclopedia.items.listTitle})}),e.jsx(z,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-1 space-y-1",children:Object.keys(D).map(r=>{const g=D[r];return!g||g.length===0?null:e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:W(r)}),e.jsx("div",{className:"flex flex-wrap gap-1",children:g.map(b=>e.jsx(B,{item:b,version:s,isSelected:(i==null?void 0:i.id)===b.id,onSelect:()=>w(b)},b.id))})]},r)})})})]}),e.jsx("div",{className:"md:w-[340px] hidden md:flex flex-col p-3 min-h-0",children:i?ie:e.jsx("div",{className:"text-xs text-muted-foreground h-full flex items-center justify-center text-center px-4",children:t.encyclopedia.items.detailEmpty})})]})]})}function He({version:s,lang:n}){const{t}=_(),c=Q()==="mobile",[u,v]=f.useState(null),[y,N]=f.useState(!1),[k,$]=f.useState(""),[l,F]=f.useState(null),[T,M]=f.useState(!1);f.useEffect(()=>{let x=!1;return N(!0),Le(s,n).then(a=>{if(!x){const o=[...a.filter(m=>Array.isArray(m.modes)&&m.modes.includes("CLASSIC"))].sort((m,C)=>m.name.localeCompare(C.name));v(o),!l&&o.length>0&&F(o[0])}}).finally(()=>{x||N(!1)}),()=>{x=!0}},[s,n]);const i=k.trim().toLowerCase(),w=f.useMemo(()=>u?i?u.filter(x=>{const a=x.name.toLowerCase(),d=(x.description||"").toLowerCase(),o=(x.tooltip||"").toLowerCase();return a.includes(i)||d.includes(i)||o.includes(i)}):u:[],[u,i]);if(y&&!u)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:t.championSelector.loading});if(!u||u.length===0)return e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:t.championSelector.emptyList});const A=x=>{const a=m=>m.replace(/{{\s*[^}]+\s*}}/g,' <span class="text-destructive dark:text-red-400">?</span> '),d=x.tooltip||x.description||"",o=a(d);return e.jsx("span",{className:"text-xs leading-relaxed [&_br]:block",dangerouslySetInnerHTML:{__html:o}})},R=e.jsx("div",{className:"p-2 space-y-1",children:w.map(x=>{const a=(l==null?void 0:l.id)===x.id;return e.jsxs("button",{type:"button",onClick:()=>{F(x),c&&M(!0)},className:`w-full flex items-center gap-2 rounded-md px-2 py-1.5 text-left transition-colors ${a?"bg-primary/10 border border-primary/60":"hover:bg-muted/60 border border-transparent"}`,children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${s}/img/spell/${x.image.full}`,alt:x.name,loading:"lazy",decoding:"async",width:32,height:32,className:"w-8 h-8 rounded-md border border-border/60 bg-black/40 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-xs font-semibold truncate",children:x.name}),e.jsx("span",{className:"text-[11px] text-muted-foreground whitespace-nowrap",children:x.cooldown&&x.cooldown.length>0?`${x.cooldown[0]}${t.common.seconds}`:""})]}),e.jsx("div",{className:"mt-0.5 text-[11px] text-muted-foreground line-clamp-2",children:x.description})]})]},x.id)})}),V=l&&e.jsxs("div",{className:"flex flex-col gap-2 h-full min-h-0",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/${s}/img/spell/${l.image.full}`,alt:l.name,loading:"lazy",decoding:"async",width:40,height:40,className:"w-10 h-10 rounded-md border border-border/60 bg-black/40 flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-sm font-semibold truncate",children:l.name}),l.cooldown&&l.cooldown.length>0&&e.jsxs("div",{className:"text-xs text-muted-foreground whitespace-nowrap",children:[t.common.rechargeTime,": ",l.cooldown[0],t.common.seconds]})]})})]}),e.jsx(z,{className:"flex-1 min-h-0 mt-2",children:e.jsx("div",{className:"pr-3",children:e.jsxs("div",{className:"rounded-md border border-border/70 bg-card px-3 py-2 space-y-1.5",children:[A(l),e.jsxs("div",{className:"text-xs text-muted-foreground/80 italic leading-relaxed border-t pt-3 mt-3 flex items-center gap-1.5",children:[e.jsx(fe,{className:"w-2.5 h-2.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:t.encyclopedia.runes.warning})]})]})})})]});return c?e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(K,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),e.jsx(U,{value:k,onChange:x=>$(x.target.value),placeholder:t.encyclopedia.summoner.searchPlaceholder,className:"h-9 pl-7 text-xs border-neutral-400 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-primary"})]}),e.jsx("div",{className:"rounded-md border bg-card/40 max-h-[50vh]",children:e.jsx(z,{className:"h-[50vh]",children:R})}),e.jsx(X,{open:T&&!!l,onOpenChange:x=>{x||M(!1)},children:e.jsxs(Y,{className:"w-[calc(100vw-32px)] max-w-lg max-h-[70vh] h-[70vh] p-0 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs(Z,{children:[e.jsx(ee,{children:(l==null?void 0:l.name)??"Summoner Spell"}),e.jsx(se,{children:(l==null?void 0:l.name)??"Summoner Spell"})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:e.jsx("div",{className:"p-4",children:V})})]})})]}):e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-sm font-semibold",children:t.encyclopedia.tabs.summoner}),e.jsxs("div",{className:"relative w-full sm:w-52 md:w-64 group",children:[e.jsx(K,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),e.jsx(U,{value:k,onChange:x=>$(x.target.value),placeholder:t.encyclopedia.summoner.searchPlaceholder,className:"h-8 pl-8 text-xs md:text-sm w-full border-neutral-400 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-primary"})]})]}),e.jsxs("div",{className:"rounded-md border bg-card/40 md:h-[calc(100vh-12rem)] flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:flex-1 md:border-r border-border/60 flex flex-col min-w-0 min-h-0",children:[e.jsx("div",{className:"px-3 py-2 border-b border-border/60 flex items-center justify-between flex-shrink-0",children:e.jsx("div",{className:"text-[11px] font-semibold text-muted-foreground",children:t.encyclopedia.summoner.listTitle})}),e.jsx(z,{className:"flex-1 min-h-0",children:R})]}),e.jsx("div",{className:"md:w-[340px] hidden md:flex flex-col p-3 min-h-0",children:l?V:e.jsx("div",{className:"text-xs text-muted-foreground h-full flex items-center justify-center text-center px-4",children:t.encyclopedia.summoner.detailEmpty})})]})]})}function ze(s){return s==="runes"||s==="items"||s==="summoner"}function _e({lang:s,championList:n,version:t,cdragonVersion:h,initialSelectedChampions:c,initialTabs:u,initialSelectedTabId:v}){const[y,N]=je(),k=f.useMemo(()=>{const w=y.get("tab");return ze(w)?w:null},[y]),$=()=>k||"runes",[l,F]=f.useState($),T=f.useRef(k),M=f.useRef($());f.useEffect(()=>{const w=k||"runes",A=T.current||"runes";w!==A&&w!==l&&(F(w),M.current=w),T.current=k},[k,l]),f.useEffect(()=>{const w=k||"runes",A=M.current;if(l!==A&&w!==l){const R=new URLSearchParams(y);l==="runes"?R.delete("tab"):R.set("tab",l),N(R,{replace:!0}),M.current=l==="runes"?null:l}M.current=l},[l,k,y,N]);const{cdragonVersion:i}=we();return e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6 lg:px-8 pb-4 md:pb-5",children:[e.jsx("div",{className:"mt-3 md:mt-4",children:e.jsx($e,{activeTab:l,onTabChange:w=>{F(w)}})}),l==="runes"&&e.jsx(Fe,{version:t,lang:s}),l==="items"&&e.jsx(Ve,{version:t,lang:s}),l==="summoner"&&e.jsx(He,{version:t,lang:s})]})}function Xe(s){return e.jsx(Ne,{initialDDragonVersion:s.version,initialCDragonVersion:s.cdragonVersion,children:e.jsx(_e,{...s})})}export{Xe as default};
