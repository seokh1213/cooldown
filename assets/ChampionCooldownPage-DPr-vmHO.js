import{r as w,j as e,d as M,f as qt,O as Zt,g as Jt,A as qe,E as Ne,F as Ze,K as Je,G as Ye,I as Xe,J as Qe,L as et,M as tt,N as we,Q as ye,U as Nt,z as Yt}from"/cooldown/assets/react-vendor-CopeUkDP.js";import{I as ot,C as wt,c as yt,T as Xt,a as Qt,b as lt}from"/cooldown/assets/input-DYVj7tNT.js";import{j as B,B as le,u as se,k as Me,C as re,D as St,V as Ct,c as kt,d as Tt,l as be,m as z,n as er,a as rt,P as tr,o as it,b as rr,S as Vt,e as ct,f as dt,h as ut,T as Ue,r as ce,p as mt,q as sr,s as ze}from"/cooldown/assets/index-BdRXrHHe.js";import{g as nr,f as Pe,X as Se,S as Re,h as Be,i as Ie,T as ft,R as ar}from"/cooldown/assets/lucide-icons-O8aoKHte.js";import{u as or,a as st,V as lr}from"/cooldown/assets/VersionContext-B4nItLXH.js";const pe=w.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:B("w-full caption-bottom text-sm",t),...r})}));pe.displayName="Table";const he=w.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:B("[&_tr]:border-b",t),...r}));he.displayName="TableHeader";const ge=w.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:B("[&_tr:last-child]:border-0",t),...r}));ge.displayName="TableBody";const ir=w.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:B("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));ir.displayName="TableFooter";const J=w.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:B("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));J.displayName="TableRow";const G=w.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:B("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r}));G.displayName="TableHead";const F=w.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:B("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r}));F.displayName="TableCell";const cr=w.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:B("mt-4 text-sm text-muted-foreground",t),...r}));cr.displayName="TableCaption";function dr({className:t,...r}){return e.jsx("div",{className:B("animate-pulse rounded-md bg-muted",t),...r})}function ur({addChampion:t,data:r,name:s,thumbnailSrc:n,selected:a}){const[l,u]=w.useState(!1),[o,x]=w.useState(!1),[d,h]=w.useState(a);w.useEffect(()=>{h(a)},[a]);const S=w.useCallback(C=>{C.preventDefault(),C.stopPropagation(),h(T=>!T),t(r)},[t,r]),V=w.useCallback(()=>{u(!0)},[]),p=w.useCallback(()=>{x(!0)},[]);return e.jsxs("div",{className:"flex flex-col items-center justify-center m-1 h-fit",children:[e.jsxs(le,{variant:"ghost",className:"cursor-pointer rounded-full shrink-0 p-0 h-auto w-auto hover:bg-transparent relative touch-manipulation",onClick:S,"aria-label":a?`Deselect ${s}`:`Select ${s}`,"aria-pressed":a,children:[e.jsxs("div",{className:"relative w-12 h-12 md:w-14 md:h-14 shrink-0 overflow-hidden rounded-full",children:[!l&&!o&&e.jsx(dr,{className:"absolute inset-0 rounded-full"}),!l&&!o&&e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-muted via-muted/80 to-muted/60 blur-sm"}),e.jsx("img",{className:B("absolute inset-0 w-full h-full rounded-full bg-black/5 border-0 box-border transition-all duration-200 ease-out object-cover",!a&&!d&&"hover:scale-105",l?"opacity-100":"opacity-0"),src:n,alt:s,loading:"lazy",decoding:"async",width:"56",height:"56",onLoad:V,onError:p}),(d||a)&&e.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{boxShadow:"inset 0 0 0 2px hsl(var(--primary)), 0 0 0 3px hsl(var(--primary) / 0.3)"}})]}),(d||a)&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 md:w-5 md:h-5 bg-primary rounded-full flex items-center justify-center pointer-events-none z-20 shadow-lg border-2 border-background",children:e.jsx(nr,{className:"w-2.5 h-2.5 md:w-3 md:h-3 text-primary-foreground stroke-[3]"})})]}),e.jsx("div",{className:"text-xs md:text-sm whitespace-nowrap mt-0.5",children:s})]})}const xt=M.memo(ur);function mr(t,r){const{lang:s}=se();return w.useMemo(()=>{if(!t)return[];if(!r)return t;const a=Me(r,s);return t.filter(l=>a.some(u=>{const o=u.toLowerCase();return!!(l.name.toLowerCase().includes(o)||l.hangul&&l.hangul.toLowerCase().includes(o)||l.id.toLowerCase().includes(o)||s==="ko_KR"&&(Me(l.name,s).some(d=>d.toLowerCase().includes(o))||l.hangul&&Me(l.hangul,s).some(h=>h.toLowerCase().includes(o))))}))},[t,r,s])}const pt="championSelectorScrollPosition";function fr(t,r,s){w.useEffect(()=>{if(!r||!s)return;const n=()=>{if(t.current){const a=sessionStorage.getItem(pt);if(a){const l=parseInt(a,10);t.current.scrollTop=l}}};n(),requestAnimationFrame(()=>{n()}),setTimeout(()=>{n()},200)},[r,s,t]),w.useEffect(()=>{const n=t.current;if(!n||!r||!s)return;let a;const l=()=>{clearTimeout(a),a=setTimeout(()=>{sessionStorage.setItem(pt,n.scrollTop.toString())},100)};return n.addEventListener("scroll",l,{passive:!0}),()=>{clearTimeout(a),n.removeEventListener("scroll",l)}},[r,s,t])}function xr({championList:t,selectedChampions:r,onSelect:s,onClose:n,slotIndex:a,open:l,onOpenChange:u,vsMode:o}){const{t:x}=se(),[d,h]=w.useState(!1),S=l!==void 0,V=S?!!l:d,p=S?u||(()=>{}):h,[C,T]=w.useState(""),[N,g]=w.useState(-1),m=w.useRef(null),b=w.useRef(null),i=w.useRef(null),f=n!==void 0,c=n||(()=>{}),v=or(C,200),j=mr(t,v),P=w.useMemo(()=>new Set(r.map(y=>y.id)),[r]),k=w.useMemo(()=>o&&(r.find(y=>y.id===o.currentChampionId)||(t==null?void 0:t.find(y=>y.id===o.currentChampionId)))||null,[o,r,t]),_=w.useMemo(()=>o?j.filter(y=>y.id!==o.currentChampionId):j,[j,o]),I=w.useCallback(y=>{const L=y.target;m.current&&!m.current.contains(L)&&(p(!1),T(""),g(-1))},[p]);w.useEffect(()=>{if(V&&!f)return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[V,I,f]);const D=w.useCallback(y=>{p(y),y||(T(""),g(-1),n&&n()),u&&u(y)},[n,u]),O=w.useCallback(y=>{s(y),f?g(-1):(p(!1),g(-1),document.body.style.overflow="",c())},[s,n,f]),W=w.useCallback(y=>{if(!(!V&&!f||!t))if(y.key==="ArrowDown")y.preventDefault(),g(L=>L<j.length-1?L+1:L);else if(y.key==="ArrowUp")y.preventDefault(),g(L=>L>0?L-1:-1);else if(y.key==="Enter"&&N>=0){y.preventDefault();const L=j[N];L&&O(L)}else y.key==="Escape"&&D(!1)},[V,f,t,j,N,O,D,P]);return w.useEffect(()=>{if(N>=0&&i.current){const y=i.current.querySelectorAll("[data-champion-item]");y[N]&&y[N].scrollIntoView({block:"nearest"})}},[N]),w.useEffect(()=>{S||p(!!f)},[f,S,p]),fr(i,f,V),w.useEffect(()=>{f&&V&&requestAnimationFrame(()=>{var y;(y=b.current)==null||y.focus()})},[f,V]),f?S&&!V?null:e.jsx(St,{open:V,onOpenChange:D,children:e.jsxs(qt,{children:[e.jsx(Zt,{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm"}),e.jsxs(Jt,{ref:m,className:"fixed inset-0 left-0 top-0 translate-x-0 translate-y-0 md:inset-auto md:left-[50%] md:top-[50%] md:translate-x-[-50%] md:translate-y-[-50%] w-full h-full md:w-[600px] md:h-[500px] lg:w-[800px] lg:h-[600px] p-0 flex flex-col overflow-hidden max-w-none md:max-w-[600px] lg:max-w-[800px] max-h-none md:max-h-[500px] lg:max-h-[600px] rounded-none md:rounded-xl z-50 border bg-background shadow-lg",onInteractOutside:()=>{D(!1)},onEscapeKeyDown:()=>{D(!1)},children:[e.jsxs(Ct,{children:[e.jsx(kt,{children:o?x.championSelector.vsSelectOpponent:x.championSelector.selectChampion}),e.jsx(Tt,{children:o?x.championSelector.vsSelectOpponentDescription:x.championSelector.selectChampionDescription})]}),o&&k&&e.jsxs("div",{className:"p-4 border-b-2 border-destructive/30 bg-destructive/5 flex items-center gap-3 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:re(k.version||"",k.id),alt:k.name,className:"w-10 h-10 rounded-full border-2 border-destructive/50"}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-destructive rounded-full p-0.5",children:e.jsx(Re,{className:"h-3 w-3 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-foreground",children:k.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:x.championSelector.currentChampion})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-destructive",children:[e.jsx(Re,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"VS"})]})]}),e.jsxs("div",{className:B("p-4 border-b border-border flex items-center gap-2 shrink-0",o?"bg-muted/30":"bg-card"),children:[e.jsx(Pe,{className:B("h-5 w-5 shrink-0",o?"text-destructive":"text-muted-foreground")}),e.jsx(ot,{ref:b,type:"text",placeholder:o?x.championSelector.vsSearchPlaceholder:x.championSelector.searchPlaceholder,value:C,onChange:y=>{T(y.target.value),g(-1)},onKeyDown:W,className:"flex-1",autoFocus:!0}),e.jsx(le,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>D(!1),children:e.jsx(Se,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:i,className:"overflow-y-auto overflow-x-hidden p-4 flex-1 min-h-0 md:flex-none md:w-[600px] md:h-[427px] lg:w-[800px] lg:h-[527px]",children:t?(o?_:j).length>0?e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"mb-3 pb-2 border-b border-destructive/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-semibold",children:x.championSelector.selectOpponentLabel})]})}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:(o?_:j).map((y,L)=>{const R=N===L,A=o?!1:P.has(y.id);return e.jsx("div",{"data-champion-item":!0,className:B(R&&"ring-2 ring-offset-1 rounded-md",o?"ring-destructive":"ring-primary"),children:e.jsx(xt,{addChampion:$=>O($),data:y,name:y.name,selected:A,thumbnailSrc:re(y.version||"",y.id)})},y.id)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground min-h-[200px] space-y-2",children:[e.jsx(Pe,{className:"h-12 w-12 opacity-50"}),e.jsx("p",{className:"text-base font-medium",children:C?x.championSelector.noResults:x.championSelector.emptyList})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground min-h-[200px]",children:x.championSelector.loading})})]})]})}):e.jsxs("div",{ref:m,className:"w-full",children:[e.jsxs(le,{onClick:()=>{p(!0),setTimeout(()=>{var y;return(y=b.current)==null?void 0:y.focus()},0)},variant:"ghost",className:B("w-full flex flex-col items-center justify-center space-y-2","text-muted-foreground hover:text-foreground","py-4 h-auto"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:e.jsx(Pe,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-medium",children:x.championSelector.selectChampion})]}),V&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>{p(!1),T(""),document.body.style.overflow="",c()},"aria-hidden":"true"}),e.jsxs("div",{className:B("fixed inset-0 z-50 md:absolute md:inset-auto md:top-full md:left-0 md:right-0 md:mt-2 md:z-10 md:rounded-lg md:border md:border-border md:shadow-lg bg-card md:max-h-[60vh] flex flex-col",f&&"md:relative md:inset-0 md:mt-0 md:rounded-lg md:border md:shadow-lg"),children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-2 sticky top-0 bg-card z-10",children:[e.jsx(Pe,{className:"h-5 w-5 text-muted-foreground shrink-0"}),e.jsx(ot,{ref:b,type:"text",placeholder:x.championSelector.searchPlaceholder,value:C,onChange:y=>{T(y.target.value),g(-1)},onKeyDown:W,className:"flex-1",autoFocus:!0}),e.jsx(le,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 hover:bg-muted hover:text-foreground",onClick:()=>{p(!1),T(""),document.body.style.overflow="",c()},children:e.jsx(Se,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:i,className:"flex-1 overflow-auto p-4",style:{maxHeight:"calc(100vh - 120px)"},children:t?e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2",children:j.map((y,L)=>{const R=N===L,A=P.has(y.id);return e.jsx("div",{"data-champion-item":!0,className:B(R&&"ring-2 ring-primary ring-offset-1 rounded-md"),children:e.jsx(xt,{addChampion:$=>O($),data:y,name:y.name,selected:A,thumbnailSrc:re(y.version||"",y.id)})},y.id)})}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:x.championSelector.loading})})]})]})]})}const De=M.memo(xr);function Pt(t="ko_KR"){const r=be(t);return[{key:"hp",label:r.stats.health,format:s=>Math.round(s)},{key:"hpperlevel",label:r.stats.healthPerLevel,format:s=>s.toFixed(1)},{key:"mp",label:r.stats.mana,format:s=>Math.round(s)},{key:"mpperlevel",label:r.stats.manaPerLevel,format:s=>s.toFixed(1)},{key:"movespeed",label:r.stats.movespeed,format:s=>Math.round(s)},{key:"armor",label:r.stats.armor,format:s=>Math.round(s)},{key:"armorperlevel",label:r.stats.armorPerLevel,format:s=>s.toFixed(1)},{key:"spellblock",label:r.stats.spellblock,format:s=>Math.round(s)},{key:"spellblockperlevel",label:r.stats.spellblockPerLevel,format:s=>s.toFixed(1)},{key:"attackdamage",label:r.stats.attackdamage,format:s=>Math.round(s)},{key:"attackdamageperlevel",label:r.stats.attackdamagePerLevel,format:s=>s.toFixed(1)},{key:"attackspeed",label:r.stats.attackspeed,format:s=>s.toFixed(3)},{key:"attackspeedperlevel",label:r.stats.attackspeedPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"attackrange",label:r.stats.attackrange,format:s=>Math.round(s)},{key:"crit",label:r.stats.crit,format:s=>`${(s*100).toFixed(1)}%`},{key:"critperlevel",label:r.stats.critPerLevel,format:s=>`${(s*100).toFixed(1)}%`},{key:"hpregen",label:r.stats.hpregen,format:s=>s.toFixed(1)},{key:"hpregenperlevel",label:r.stats.hpregenPerLevel,format:s=>s.toFixed(1)},{key:"mpregen",label:r.stats.mpregen,format:s=>s.toFixed(1)},{key:"mpregenperlevel",label:r.stats.mpregenPerLevel,format:s=>s.toFixed(1)}]}const ve=["Q","W","E","R"];function pr({champions:t,version:r,championList:s,onAddChampion:n,onRemoveChampion:a,onReorderChampions:l}){const{t:u,lang:o}=se(),[x,d]=w.useState(!1),h=Pt(o),S=qe(Ne(Ye,{activationConstraint:{distance:8}}),Ne(Je,{coordinateGetter:Ze})),V=N=>{},p=N=>{const{active:g,over:m}=N;if(m&&g.id!==m.id&&l){const b=t.findIndex(f=>f.id===g.id),i=t.findIndex(f=>f.id===m.id);b!==-1&&i!==-1&&l(b,i)}},C=({champion:N,children:g,className:m})=>{const{setNodeRef:b,transform:i,transition:f,isDragging:c}=we({id:N.id,disabled:!0}),j={transform:i?ye.Transform.toString(i):void 0,transition:c?f:void 0,opacity:c?.5:1};return e.jsx(F,{ref:b,style:j,className:m,children:g})},T=({champion:N,index:g})=>{const{attributes:m,listeners:b,setNodeRef:i,transform:f,transition:c,isDragging:v}=we({id:N.id}),P={transform:f?ye.Transform.toString(f):void 0,transition:v?c:void 0,opacity:v?.5:1};return e.jsx(G,{ref:i,style:P,className:B("text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] select-none",g<t.length-1&&"border-r border-border/30",v&&"z-50"),children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1.5 relative",children:[l&&e.jsx("button",{...m,...b,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity absolute -left-2 top-1/2 -translate-y-1/2","aria-label":"Drag to reorder",children:e.jsx(Ie,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:re(r,N.id),alt:N.name,className:"w-8 h-8 rounded-full"}),a&&e.jsx(le,{variant:"ghost",size:"icon",className:B("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:k=>{k.stopPropagation(),a(N.id)},"aria-label":`Remove ${N.name}`,children:e.jsx(Se,{className:"h-2.5 w-2.5"})})]}),e.jsx("div",{className:"text-[10px] font-semibold leading-tight text-center break-words text-foreground",children:N.name})]})})};return e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{sensors:S,collisionDetection:Qe,onDragStart:V,onDragEnd:p,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto",children:[e.jsx(he,{children:e.jsxs(J,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[90px] min-w-[90px] border-r border-border/30 select-none",style:{left:0},children:u.stats.label}),e.jsx(et,{items:t.map(N=>N.id),strategy:tt,children:t.map((N,g)=>e.jsx(T,{champion:N,index:g},N.id))}),n&&e.jsx(G,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-[100px] min-w-[100px] border-l border-border/30 select-none",children:e.jsxs(le,{onClick:()=>d(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Be,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsx(ge,{children:h.map(N=>{const g=t.map(i=>{var f;return((f=i.stats)==null?void 0:f[N.key])??0}),m=Math.max(...g),b=Math.min(...g);return e.jsxs(J,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(F,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:N.label}),t.map((i,f)=>{var P;const c=((P=i.stats)==null?void 0:P[N.key])??0,v=c===m&&m!==b,j=c===b&&m!==b;return e.jsx(C,{champion:i,className:B("p-1.5 text-[11px] text-center",f<t.length-1&&"border-r border-border/30",v&&"text-primary font-semibold",j&&"text-muted-foreground"),children:N.format(c)},i.id)}),n&&e.jsx(F,{className:"p-1.5 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[24px]"})})]},N.key)})})]})})}),x&&n&&s&&e.jsx(De,{championList:s,selectedChampions:t,onSelect:N=>{n(N)},onClose:()=>d(!1)})]})}function hr({champions:t,version:r,vsMode:s}){const{t:n,lang:a}=se(),l=Pt(a);if(s&&t.length===2){const u=s.championA,o=s.championB;return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(he,{children:e.jsxs(J,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:n.stats.label}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:re(r,u.id),alt:u.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:u.name})]})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-1/2 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:re(r,o.id),alt:o.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:o.name})]})})]})}),e.jsx(ge,{children:l.map(x=>{var p,C;const d=((p=u.stats)==null?void 0:p[x.key])??0,h=((C=o.stats)==null?void 0:C[x.key])??0,S=Math.max(d,h),V=Math.min(d,h);return e.jsxs(J,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(F,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:x.label}),e.jsx(F,{className:B("p-1.5 text-[10px] text-center border-r border-border/30",d===S&&S!==V&&"text-primary font-semibold",d===V&&S!==V&&"text-muted-foreground"),children:x.format(d)}),e.jsx(F,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(F,{className:B("p-1.5 text-[10px] text-center",h===S&&S!==V&&"text-primary font-semibold",h===V&&S!==V&&"text-muted-foreground"),children:x.format(h)})]},x.key)})})]})})})})})}return e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(he,{children:e.jsxs(J,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[11px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[70px] min-w-[70px] border-r border-border/30 select-none",style:{left:0},children:n.stats.label}),t.map(u=>e.jsx(G,{className:"text-center p-1.5 text-[11px] font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:re(r,u.id),alt:u.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:u.name})]})},u.id))]})}),e.jsx(ge,{children:l.map(u=>{const o=t.map(h=>{var S;return((S=h.stats)==null?void 0:S[u.key])??0}),x=Math.max(...o),d=Math.min(...o);return e.jsxs(J,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsx(F,{className:"p-1.5 pl-2 text-[11px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{wordBreak:"keep-all",left:0},children:u.label}),t.map(h=>{var C;const S=((C=h.stats)==null?void 0:C[u.key])??0,V=S===x&&x!==d,p=S===d&&x!==d;return e.jsx(F,{className:B("p-1.5 text-[11px] text-center",V&&"text-primary font-semibold",p&&"text-muted-foreground"),children:u.format(S)},h.id)})]},u.key)})})]})})})})})}async function gr(t,r,s){let n={},a=null;try{a=await er(t,s),n=a.spellDataMap}catch(l){z.warn(`Failed to load Community Dragon data for ${t}:`,l)}return r.map((l,u)=>{let o={};if(n[u.toString()])o=n[u.toString()];else{const x=l.id.replace(t,"");for(const d of Object.keys(n))if(d.toLowerCase().includes(x.toLowerCase())||d.toLowerCase().includes(l.id.toLowerCase())){o=n[d];break}}return{spell:l,communityDragonData:o,spellIndex:u,ddragonVersion:(a==null?void 0:a.ddragonVersion)??s,cdragonVersion:(a==null?void 0:a.cdragonVersion)??null}})}async function Et(t,r){const s={},n=t.map(async a=>{if(!a.spells||a.spells.length===0){s[a.id]=[];return}try{s[a.id]=await gr(a.id,a.spells,r)}catch(l){z.warn(`Failed to get integrated spell data for ${a.id}:`,l),s[a.id]=a.spells.map((u,o)=>({spell:u,communityDragonData:{},spellIndex:o}))}});return await Promise.all(n),s}const Oe={physicalDamage:{tag:"span",className:"text-red-600 dark:text-red-500 font-semibold"},magicDamage:{tag:"span",className:"text-blue-600 dark:text-blue-500 font-semibold"},trueDamage:{tag:"span",className:"text-yellow-600 dark:text-yellow-500 font-semibold"},status:{tag:"span",className:"text-purple-600 dark:text-purple-500"},lifeSteal:{tag:"span",className:"text-green-600 dark:text-green-500"},scaleAD:{tag:"span",className:"text-orange-600 dark:text-orange-500"},scaleAP:{tag:"span",className:"text-blue-600 dark:text-blue-400"},scaleArmor:{tag:"span",className:"text-orange-600 dark:text-orange-400"},scaleLevel:{tag:"span",className:"text-gray-600 dark:text-gray-400"},healing:{tag:"span",className:"text-green-600 dark:text-green-400"},speed:{tag:"span",className:"text-cyan-600 dark:text-cyan-500"},keywordMajor:{tag:"span",className:"text-yellow-600 dark:text-yellow-400 font-semibold"},keywordStealth:{tag:"span",className:"text-purple-600 dark:text-purple-400 font-semibold"},spellPassive:{tag:"span",className:"text-gray-600 dark:text-gray-500 italic"},spellActive:{tag:"span",className:"text-gray-900 dark:text-white font-semibold"},recast:{tag:"span",className:"text-yellow-600 dark:text-yellow-300"},damage:{tag:"span",className:"text-red-600 dark:text-red-400"},shield:{tag:"span",className:"text-blue-600 dark:text-blue-300"},mana:{tag:"span",className:"text-blue-600 dark:text-blue-400"},energy:{tag:"span",className:"text-yellow-600 dark:text-yellow-400"},health:{tag:"span",className:"text-red-600 dark:text-red-400"},cooldown:{tag:"span",className:"text-gray-600 dark:text-gray-300"},range:{tag:"span",className:"text-cyan-600 dark:text-cyan-400"},radius:{tag:"span",className:"text-purple-600 dark:text-purple-400"},width:{tag:"span",className:"text-indigo-600 dark:text-indigo-400"},length:{tag:"span",className:"text-pink-600 dark:text-pink-400"},rules:{tag:"span",className:"text-gray-600 dark:text-gray-400 italic"}};function br(t){let r=t;r=r.replace(/<font\s+color=['"]([^'"]+)['"]\s*>/gi,'<span style="color: $1">'),r=r.replace(/<\/font>/gi,"</span>"),Object.entries(Oe).forEach(([n,{tag:a,className:l}])=>{const u=new RegExp(`</${n}>`,"gi");r=r.replace(u,`</${a}>`);const o=new RegExp(`<${n}>`,"gi");r=r.replace(o,`<${a}${l?` class="${l}"`:""}>`)});const s=["keywordMajor","keywordStealth","rules","recast"];return s.forEach(n=>{r=r.replace(new RegExp(`</${n}>`,"gi"),"</span>"),n==="rules"?r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-gray-600 dark:text-gray-400 italic">'):n==="keywordStealth"?r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-purple-600 dark:text-purple-400 font-semibold">'):r=r.replace(new RegExp(`<${n}>`,"gi"),'<span class="text-yellow-600 dark:text-yellow-400 font-semibold">')}),r=r.replace(/<(\w+)(?![\\w])>/gi,(n,a)=>Oe[a]||s.includes(a)||a==="font"||a==="br"?n:"<span>"),r=r.replace(/<\/(\w+)(?![\\w])>/gi,(n,a)=>Oe[a]||s.includes(a)||a==="font"||a==="br"?n:"</span>"),r}function At(t){const r=t.trim(),s=/^([a-zA-Z_][a-zA-Z0-9_]*)\s*([*+\/-])\s*(-?\d+(?:\.\d+)?)$/,n=r.match(s);if(n){const a=n[2];return{type:"formula",variable:n[1],operator:a,operand:parseFloat(n[3])}}return{type:"variable",variable:r}}function $t(t,r,s){if(!r||typeof r!="string")return null;const n=Object.entries(t).find(([x])=>x!=null&&x.toLowerCase()===r.toLowerCase());if(!n)return null;const[,a]=n,l=a.slice(1,s+1);if(l.length===0)return null;const u=l[0];return l.every(x=>x===u)?u:l}function Lt(t,r){if(r.type!=="formula"||!r.operator||r.operand==null)return t;const{operator:s,operand:n}=r;return s==="*"?Array.isArray(t)?t.map(a=>a*n):t*n:s==="+"?Array.isArray(t)?t.map(a=>a+n):t+n:s==="-"?Array.isArray(t)?t.map(a=>a-n):t-n:s==="/"?Array.isArray(t)?t.map(a=>a/n):t/n:t}function me(t){if(t==null||t==="")return"";const r=typeof t=="number"?t:parseFloat(String(t));return isNaN(r)?String(t):r%1===0?r.toString():parseFloat(r.toFixed(3)).toString()}function ht(t,r,s=!1){if(!t||t.length===0)return"";const n=s&&t.length>1?1:0,l=t.slice(n).filter(h=>h!=null&&h!==""&&h!=="0");if(l.length===0)return"";const u=r?l.slice(0,r):l;if(u.length===0)return"";const o=u.map(h=>me(h)),x=o[0];return o.every(h=>h===x)?x:o.join("/")}function jr(t){let r=t;return r=r.replace(/<br\s*\/?>/gi,"<br />"),r=r.replace(/[^\S\r\n]+/g," "),r}function Q(t){return Array.isArray(t)}function gt(t,r){return Array.isArray(t)?t:Array.from({length:r},()=>t)}function Rt(t,r,s){if(!Q(t)&&!Q(r))return s(t,r);const n=Q(t)?t:gt(t,Q(r)?r.length:1),a=Q(r)?r:gt(r,n.length);if(n.length!==a.length)throw new Error(`Vector length mismatch: ${n.length} vs ${a.length}`);return n.map((l,u)=>s(l,a[u]))}function Te(t,r){return Rt(t,r,(s,n)=>s+n)}function Ve(t,r){return Rt(t,r,(s,n)=>s*n)}function _e(t){return Q(t)?t.every(s=>s===t[0])?me(t[0]):t.map(s=>me(s)).join("/"):me(t)}function He(t){return Q(t)?t.map(r=>r*100):t*100}function bt(t,r,s="ko_KR"){const n=be(s),a=t!=null,l=r!=null;if(!a&&!l)return n.stats.abilityPower;const u=t??r;return u===2?t===2&&r===2?n.stats.bonusAttackDamage:n.stats.attackDamage:u===12?t===12&&r===2?n.stats.bonusHealth:n.stats.health:u===1?t===1&&r===2?n.stats.bonusArmor:n.stats.armor:u===6?t===6&&r===2?n.stats.bonusMagicResist:n.stats.magicResist:u===18?t===18&&r===2?n.stats.bonusLifesteal:n.stats.lifesteal:""}function We(t,r="ko_KR"){let n=be(r).common.mana;if(t.costType){const a=t.costType.trim();return a&&!a.includes("{{")?a:t.resource&&!t.resource.includes("{{")?t.resource:n}return t.resource&&!t.resource.includes("{{")?t.resource:n}function _t(t,r,s){const n=s==null?void 0:s.DataValues;if(!n)return null;const a=$t(n,t.variable,r.maxrank);if(a==null)return null;const l=Lt(a,t);return _e(l)}function jt(t,r){const s=n=>Number.isFinite(n)?n.toFixed(r).replace(/\.?0+$/,""):String(n);if(Q(t)){const n=t.map(u=>s(u)),a=n[0];return n.every(u=>u===a)?a:n.join("/")}return s(t)}function vr(t,r,s,n="ko_KR"){const a=s==null?void 0:s.mSpellCalculations,l=s==null?void 0:s.DataValues;if(!a)return null;const u=Object.entries(a).find(([i])=>i!=null&&i.toLowerCase()===t.variable.toLowerCase());if(!u)return null;const[o]=u;function x(i){if(!i||typeof i!="string")return z.debug(`DataValue name is invalid: ${i}`),null;if(!l)return z.debug("dataValues is undefined"),null;const f=$t(l,i,r.maxrank);return f??(z.debug(`DataValue "${i}" missing`),null)}function d(i,f=new Set){var v;if(!a)throw new Error("spellCalcs is undefined");const c=a[i];if(!c)throw new Error(`SpellCalculation "${i}" not found`);if(f.has(i))throw new Error(`Circular reference in mSpellCalculations: ${i}`);if(f.add(i),c.__type==="GameCalculationModified"){const j=c;if(!j.mModifiedGameCalculation)throw new Error("mModifiedGameCalculation is missing");const P=d(j.mModifiedGameCalculation,f);if(!j.mMultiplier)return P;let k=null;if(j.mMultiplier.mDataValue){if(k=x(j.mMultiplier.mDataValue),k==null)return P}else j.mMultiplier.mNumber!=null&&(k=j.mMultiplier.mNumber);if(k==null)return P;const _=Ve(P.base,k),I=P.statParts.map(D=>({name:D.name,ratio:Ve(D.ratio,k)}));return{base:_,statParts:I,isPercent:P.isPercent,precision:P.precision}}if(c.__type==="GameCalculation"){const j=c,P=j.mFormulaParts??[];let k=0;const _=[],I=!!j.mDisplayAsPercent;if(P.length===1&&P[0].__type==="ByCharLevelBreakpointsCalculationPart"&&j.mSimpleTooltipCalculationDisplay===6){const y=P[0],L=y.mLevel1Value??0;let R=L;for(const K of y.mBreakpoints??[])typeof K.mAdditionalBonusAtThisLevel=="number"&&(R+=K.mAdditionalBonusAtThisLevel);return{base:[L,R],statParts:[],isPercent:I,isBreakpointRange:!0,precision:void 0}}if(P.length===1&&P[0].__type==="ByCharLevelBreakpointsCalculationPart"&&I){const y=P[0],L=y.mLevel1Value??0,R=y.mInitialBonusPerLevel??0,A=(y.mBreakpoints??[])[0];if(R!==0&&(A!=null&&A.mLevel)){const $=A.mLevel-1,K=Math.max($-1,0),H=L+K*R;return{base:[L,H],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}}if(P.length===1&&P[0].__type==="ByCharLevelInterpolationCalculationPart"&&I){const y=P[0],L=y.mStartValue??0,R=y.mEndValue??L;return{base:[L,R],statParts:[],isPercent:!0,isCharLevelRange:!0,precision:void 0}}for(const y of P){const L=y.__type;if(L==="NamedDataValueCalculationPart"){const R=y;if(!R.mDataValue){z.debug("NamedDataValueCalculationPart missing mDataValue",y);continue}const A=x(R.mDataValue);if(A==null)continue;k=Te(k,A)}else if(L==="EffectValueCalculationPart"){const A=y.mEffectIndex??0,$=((v=r.effectBurn)==null?void 0:v[A])??null;if(!$)z.debug(`EffectValueCalculationPart: effectBurn[${A}] is missing`,{spellId:r.id});else{const K=$.split("/").map(H=>parseFloat(H)).filter(H=>!Number.isNaN(H));if(K.length>0){const H=K.length>r.maxrank?K.slice(0,r.maxrank):K;k=Te(k,H)}}}else if(L==="StatByNamedDataValueCalculationPart"){const R=y;if(!R.mDataValue){z.debug("StatByNamedDataValueCalculationPart missing mDataValue",y);continue}const A=x(R.mDataValue);if(A==null)continue;const $=bt(R.mStat,R.mStatFormula,n);_.push({name:$,ratio:A})}else if(L==="StatByCoefficientCalculationPart"){const R=y;if(R.mCoefficient==null){z.debug("StatByCoefficientCalculationPart missing mCoefficient",y);continue}const A=bt(R.mStat,R.mStatFormula,n),$=R.mCoefficient;_.push({name:A,ratio:$,isCoefficient:!0})}else if(L==="AbilityResourceByCoefficientCalculationPart"){const R=y;if(R.mCoefficient==null){z.debug("AbilityResourceByCoefficientCalculationPart missing mCoefficient",y);continue}const A=We(r,n),$=be(n),H=R.mStatFormula===2?`${$.common.bonus} ${A}`:A,q=R.mCoefficient;_.push({name:H,ratio:q,isCoefficient:!0})}else if(L==="NumberCalculationPart"){const A=y.mNumber??0;k=Te(k,A)}else if(L==="ByCharLevelBreakpointsCalculationPart"){const R=y;let A=R.mLevel1Value||0;for(const $ of R.mBreakpoints??[])$.mAdditionalBonusAtThisLevel!=null&&(A+=$.mAdditionalBonusAtThisLevel);k=Te(k,A)}else if(L==="ProductOfSubPartsCalculationPart"){const R=y,A=q=>{var ne;if(!q||!q.__type)return 0;const ee=q.__type;if(ee==="NamedDataValueCalculationPart"){const oe=q;if(!oe.mDataValue)return z.debug("ProductOfSubPartsCalculationPart: NamedDataValueCalculationPart missing mDataValue",q),0;const te=x(oe.mDataValue);return te??0}if(ee==="NumberCalculationPart")return q.mNumber??0;if(ee==="EffectValueCalculationPart"){const te=q.mEffectIndex??0,je=((ne=r.effectBurn)==null?void 0:ne[te])??null;if(!je)return z.debug(`ProductOfSubPartsCalculationPart: EffectValueCalculationPart missing effectBurn[${te}]`,{spellId:r.id}),0;let Ce;if(je.includes("/")){const ie=je.split("/").map(ke=>Number.parseFloat(ke)).filter(ke=>!Number.isNaN(ke));if(ie.length===0)return 0;Ce=ie.length===1?ie[0]:ie}else{const ie=Number.parseFloat(je);if(Number.isNaN(ie))return 0;Ce=ie}return Ce}return z.debug(`ProductOfSubPartsCalculationPart: unsupported sub part type "${ee}"`,q),0},$=A(R.mPart1),K=A(R.mPart2),H=Ve($,K);k=Te(k,H)}}let D=k,O=_;if(j.mMultiplier){let y=null;j.mMultiplier.mDataValue?(y=x(j.mMultiplier.mDataValue),y==null&&(y=null)):j.mMultiplier.mNumber!=null&&(y=j.mMultiplier.mNumber),y!=null&&(D=Ve(D,y),O=O.map(L=>({...L,ratio:Ve(L.ratio,y)})))}let W;return typeof j.mPrecision=="number"&&j.mPrecision>=0?W=j.mPrecision+1:W=void 0,{base:D,statParts:O,isPercent:I,precision:W}}throw new Error(`Unsupported mSpellCalculation type: ${c.__type}`)}let h;try{h=d(o)}catch(i){return z.error("Failed to evaluate calculation:",i),null}let S;const V=h.precision;h.isPercent?V!=null?Q(h.base)?S=h.base.map(i=>i*100):S=h.base*100:S=He(h.base):S=h.base;const p=h.statParts.map(i=>{if(i.isCoefficient){const f=V!=null?Q(i.ratio)?i.ratio.map(c=>c*100):i.ratio*100:He(i.ratio);return{...i,ratio:f}}if(V!=null){const f=Q(i.ratio)?i.ratio.map(c=>c*100):i.ratio*100;return{...i,ratio:f}}return{...i,ratio:He(i.ratio)}});let C=null;const T=Q(S)&&S.length>0&&S.every(i=>i===0),N=!Q(S)&&S===0;if(!T&&!N)if(h.isCharLevelRange&&Q(S)&&S.length===2){const[i,f]=S,c=me(i),v=me(f);C=`(${c}% ~ ${v}%)`}else if(h.isBreakpointRange&&Q(S)&&S.length===2){const[i,f]=S,c=me(i),v=me(f);C=h.isPercent?`(${c}% ~ ${v}%)`:`(${c} ~ ${v})`}else{const i=V!=null?jt(S,V):_e(S);C=h.isPercent?`${i}%`:i}const g=p.map(i=>{const f=V!=null?jt(i.ratio,V):_e(i.ratio);return i.name?`(${f}% ${i.name})`:`(${f}%)`}),m=[];if(C&&m.push(C),m.push(...g),m.length===0)return null;const b=m.join(" + ");return m.length===1?b:`(${b})`}function Nr(t,r){return!Number.isFinite(r)||r<0?t:t.replace(/-?\d+(?:\.\d+)?/g,s=>{const n=Number.parseFloat(s);return Number.isFinite(n)?n.toFixed(r):s})}function wr(t){return t.replace(/(}})\s*\+\s*(\S)/g,"$1 + $2").replace(/(\S)\s*\+\s*({{)/g,"$1 + $2").replace(/(\S)\s*~\s*(\S)/g,"$1 ~ $2")}function yr(t){return t.replace(/\{\{([^}]*\{\{[^}]*}}[^}]*)}}/g,()=>"")}function Sr(t){let r=t;return r=r.replace(/\{\{Spell_[^}]*Tooltip[^}]*}}/gi,""),r=r.replace(/\{\{spellmodifierdescriptionappend}}/gi,""),r}function Cr(t,r,s,n){const a=/\{\{([^}]+)}}/g;return t.replace(a,(l,u)=>{const o=String(u).trim();if(o==="spellmodifierdescriptionappend"||o.includes("gamemodeinteger")||o.includes("Spell_")&&o.includes("Tooltip"))return"";let x=o,d;const h=/^([a-zA-Z_][a-zA-Z0-9_]*)(?:\.(\d+))(.*)$/.exec(o);if(h){const[,V,p,C]=h,T=Number.parseInt(p,10);Number.isFinite(T)&&(d=T,x=`${V}${C}`)}const S=Tr(x,r,s,n);return S!==null?d!==void 0?Nr(S,d):S:""})}function kr(t){let r=t;return r=r.replace(/\{\{\s*\}/g,""),r=r.replace(/\}\}/g,""),r=r.replace(/\{\{/g,""),r=r.replace(/%[^\s:%]+:[^\s%]+%/g,""),r=r.replace(/\s+%\s+/g," "),r=r.replace(new RegExp("(?<!\\d)\\s*%\\s*(?!\\d)","g"),""),r=r.replace(/^\s*%\s*(?!\d)/g,""),r=r.replace(new RegExp("(?<!\\d)\\s*%\\s*$","g"),""),r=r.replace(/[^\S\r\n]+/g," "),r}function Bt(t,r,s,n="ko_KR"){if(!r)return t;let a=t;return a=wr(a),a=yr(a),a=Sr(a),a=Cr(a,r,s,n),a=kr(a),a}function Tr(t,r,s,n="ko_KR"){const a=At(t),l=Vr(a,r,s);if(l!==null)return l;const u=_t(a,r,s);return u!==null?u:vr(a,r,s,n)}function Vr(t,r,s){const n=t.variable,a=/^e(\d+)$/i.exec(n);if(!a)return null;const l=Number.parseInt(a[1],10);if(!Number.isFinite(l)||l<=0)return null;const u=(s==null?void 0:s.effectBurn)??r.effectBurn;if(!u)return null;const o=u[l];if(!o)return null;let x;if(o.includes("/")){const h=o.split("/").map(S=>Number.parseFloat(S)).filter(S=>!Number.isNaN(S));if(h.length===0)return null;x=h.length===1?h[0]:h}else{const h=Number.parseFloat(o);if(Number.isNaN(h))return null;x=h}const d=Lt(x,t);return _e(d)}function Ke(t,r,s,n="ko_KR"){if(!t)return"";let a=t;return a=br(a),a=Bt(a,r,s,n),a=jr(a),a=a.replace(/\n/g,"<br />"),a}function vt(t,r,s="ko_KR"){const n=be(s);if(!t.leveltip||!t.leveltip.label||!t.leveltip.effect)return"";let a;r&&(r.DataValues?a=r:a={DataValues:r});const{label:l,effect:u}=t.leveltip,o=[];for(let x=0;x<l.length&&x<u.length;x++){const d=l[x],S=u[x].match(/\{\{\s*([^}]+)\s*\}\}/);if(!S)continue;const V=S[1].trim();let p=null;if(a)try{const N=At(V),g=_t(N,t,a);if(g&&g.trim()!==""){let m=g;(d.includes("%")||d.toLowerCase().includes("percent")||d.toLowerCase().includes("퍼센트")||d.toLowerCase().includes("둔화"))&&!m.includes("%")&&(m=m.split("/").map(c=>c&&`${c}%`).join("/"));const i=We(t,s),f=d.replace("@AbilityResourceName@",i);if(f.includes("{{")||f.includes("}}"))continue;o.push(`${f}: [${m}]`);continue}}catch{}const C=V;p=null;const T=C.match(/^e(\d+)$/i);if(T){const N=parseInt(T[1]);if(t.effectBurn&&t.effectBurn.length>N){const g=t.effectBurn[N];g&&g!==null&&g!=="0"&&(p=g)}}else if(C.toLowerCase()==="cost"||C.toLowerCase().includes("cost"))t.costBurn&&(p=t.costBurn);else if(C.toLowerCase().includes("cooldown"))t.cooldownBurn&&(p=t.cooldownBurn);else if(C.toLowerCase().includes("ammorechargetime")||C.toLowerCase().includes("ammorecharge")){const N=(r==null?void 0:r.DataValues)||r;if(N&&N.mAmmoRechargeTime){const g=N.mAmmoRechargeTime;if(Array.isArray(g)&&g.length>1){const b=g.slice(1).map(f=>typeof f=="number"?f:parseFloat(String(f))),i=ht(b,t.maxrank,!1);i&&(p=i)}}}if(p){const N=ht(p.includes("/")?p.split("/"):[p],t.maxrank);if(N){let g=n.common.mana;g=We(t,s);const m=d.replace("@AbilityResourceName@",g);if(m.includes("{{")||m.includes("}}"))continue;let b=N;(d.includes("%")||d.toLowerCase().includes("slow")||d.toLowerCase().includes("둔화"))&&(N.includes("%")||(b=N.split("/").map(i=>`${i}%`).join("/"))),o.push(`${m}: [${b}]`)}}}return o.length===0?"":o.join("<br />")}function Pr(t,r,s="ko_KR"){var o,x;const n=be(s);if(!t||!t.cooldown||!Array.isArray(t.cooldown)||t.cooldown.length===0)return null;const a=((o=r==null?void 0:r.communityDragonData)==null?void 0:o.DataValues)||(r==null?void 0:r.communityDragonData),l=a==null?void 0:a.mAmmoRechargeTime;if(t.cooldown[0]===0&&l&&Array.isArray(l)&&l.length>1&&l){const d=l[1],h=((x=t.effectBurn)==null?void 0:x[1])||"3";return`${n.common.rechargeTime} ${d}${n.common.seconds} (${n.common.max}: ${h}${n.common.items})`}if(t.cooldownBurn){const d=t.cooldownBurn.split("/");return d.length>1&&d.every(h=>h===d[0])?`${d[0]}${n.common.seconds}`:`${t.cooldownBurn}${n.common.seconds}`}if(t.cooldown&&t.cooldown.length>0){const d=t.cooldown[0];return t.cooldown.every(h=>h===d)?`${d}${n.common.seconds}`:`${t.cooldown.join("/")}${n.common.seconds}`}return null}function xe(t){if(!t)return t;let r=t.replace(/\(\s*\)/g,"");return r=r.replace(/\s{2,}/g," ").trim(),r}function Er(t,r,s="ko_KR"){var o;const n=be(s);if(!t)return null;const a=Array.isArray(t.cost)&&t.cost.length>0,l=a&&t.cost.every(x=>x===0),u=t.costBurn==="0";if((u||l)&&typeof t.resource=="string"&&t.resource.includes("{{")){const x=t.resource.trim(),d=((o=r==null?void 0:r.communityDragonData)==null?void 0:o.DataValues)||(r==null?void 0:r.communityDragonData);if(d){const S=Bt(x,t,{DataValues:d}).trim();if(S)return xe(S)}return xe(n.common.noCost)}if(u||l)return xe(n.common.noCost);if(t.costBurn){const x=t.costBurn.split("/");return x.length>1&&x.every(d=>d===x[0])?xe(`${n.common.mana} ${x[0]}`):xe(`${n.common.mana} ${t.costBurn}`)}if(a){const x=t.cost[0];return t.cost.every(d=>d===x)?xe(`${n.common.mana} ${x}`):xe(`${n.common.mana} ${t.cost.join("/")}`)}return null}function It(t,r,s){var o;const n=((o=s==null?void 0:s.communityDragonData)==null?void 0:o.DataValues)||(s==null?void 0:s.communityDragonData),a=n==null?void 0:n.mAmmoRechargeTime,l=t.cooldown[r-1];return l===0&&a&&Array.isArray(a)&&a.length>r&&a?a[r]!==void 0?String(a[r]):"":l!=null?String(l):""}const Ge="cooldown:active-skill-tooltip";function ue({skill:t,skillIdx:r,version:s,spellData:n,isPassive:a,passiveName:l,passiveDescription:u,passiveImageFull:o,size:x="default"}){const{t:d,lang:h}=se(),V=rt()==="mobile",[p,C]=M.useState(!1),[T,N]=M.useState(!1),g=M.useRef(null),m=M.useRef(null),b=M.useRef(""),[i,f]=M.useState("bottom"),[c,v]=M.useState(void 0),j=a&&o?null:Pr(t,n,h),P=a&&o?null:Er(t,n,h),k=x==="small",_=k?"min-w-6 min-h-6 w-6 h-6":"min-w-8 min-h-8 w-8 h-8",I=k?"text-[8px]":"text-[9px]",D=M.useCallback(()=>{V||(b.current||(b.current=`${t.id}-${r}-${s}`),typeof window<"u"&&window.dispatchEvent(new CustomEvent(Ge,{detail:b.current})),m.current!==null&&(window.clearTimeout(m.current),m.current=null),N(!0))},[V]),O=M.useCallback(()=>{V||(m.current!==null&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{N(!1),m.current=null},40))},[V]);M.useEffect(()=>{if(V||!T){v(void 0);return}const A=g.current;if(!A)return;const $=()=>{const K=A.getBoundingClientRect(),H=window.innerHeight,q=16,ee=8,ne=K.top-q,oe=H-K.bottom-q;if(ne<=0&&oe<=0){v(void 0);return}if(oe>=ne){f("bottom");const te=Math.max(oe-ee,0);v(te||void 0)}else{f("top");const te=Math.max(ne-ee,0);v(te||void 0)}};return $(),window.addEventListener("resize",$),window.addEventListener("scroll",$,!0),()=>{window.removeEventListener("resize",$),window.removeEventListener("scroll",$,!0)}},[V,T]),M.useEffect(()=>{if(typeof window>"u")return;const A=$=>{const H=$.detail;b.current&&H!==b.current&&(m.current!==null&&(window.clearTimeout(m.current),m.current=null),N(!1))};return window.addEventListener(Ge,A),()=>{m.current!==null&&window.clearTimeout(m.current),window.removeEventListener(Ge,A)}},[]);const W=e.jsx("div",{ref:g,className:`flex flex-col items-center gap-0.5 p-1 -m-1 touch-manipulation ${V?"cursor-pointer":"cursor-help"}`,onClick:A=>{V&&(A.stopPropagation(),C($=>!$))},onTouchStart:A=>{V&&(A.stopPropagation(),C($=>!$))},onPointerEnter:()=>{V||D()},onPointerLeave:()=>{V||O()},children:a&&o?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:tr(s,o),alt:"Passive",className:B(_,"rounded")}),e.jsx("span",{className:B(I,"font-semibold"),children:"P"})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:it(s,t.id),alt:ve[r],className:B(_,"rounded")}),e.jsx("span",{className:B(I,"font-semibold"),children:ve[r]})]})}),y=()=>a&&o?e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{className:`font-semibold text-sm ${V?"pr-10":""}`,children:l}),u&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Ke(u,void 0,void 0,h)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground/80 italic leading-relaxed border-t pt-3 mt-3 flex items-center gap-1.5",children:[e.jsx(ft,{className:"w-2.5 h-2.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:d.skillTooltip.warningPassive})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3 border-b pb-3 pr-6",children:[e.jsx("img",{src:it(s,t.id),alt:ve[r],className:"w-12 h-12 min-w-12 min-h-12 rounded flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:t.name&&e.jsxs("div",{className:"font-semibold text-sm",children:["[",ve[r],"] ",t.name]})}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[j&&e.jsx("div",{className:"text-xs text-muted-foreground",children:j.includes(" (")?e.jsxs(e.Fragment,{children:[j.split(" (")[0],e.jsx("br",{}),"(",j.split(" (")[1]]}):j}),P&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 whitespace-nowrap",children:P})]})]}),t.description&&e.jsx("div",{className:"text-xs leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Ke(t.description,t,n==null?void 0:n.communityDragonData,h).replace(/<br\s*\/?>/gi," ")}})}),t.tooltip&&e.jsx("div",{className:"text-xs text-muted-foreground leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Ke(t.tooltip,t,n==null?void 0:n.communityDragonData,h)}})}),n&&vt(t,n.communityDragonData,h)&&e.jsx("div",{className:"text-[11px] leading-relaxed text-muted-foreground border-t pt-3 mt-3",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:vt(t,n.communityDragonData,h)}})}),e.jsxs("div",{className:"text-xs text-muted-foreground/80 italic leading-relaxed border-t pt-3 mt-3 flex items-center gap-1.5",children:[e.jsx(ft,{className:"w-2.5 h-2.5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsx("span",{children:d.skillTooltip.warningSkill})]})]}),L=e.jsx(St,{open:p,onOpenChange:C,children:e.jsxs(rr,{className:B(V?"w-[calc(100vw-32px)] max-w-lg h-[70vh] max-h-[70vh]":"w-full max-w-3xl h-[80vh] max-h-[80vh]","p-0 rounded-xl overflow-hidden flex flex-col"),children:[e.jsxs(Ct,{children:[e.jsx(kt,{children:a&&o?`${l||d.skillTooltip.passive} ${d.skillTooltip.skillInfo}`:`[${ve[r]}] ${t.name||d.skillTooltip.skill} ${d.skillTooltip.skillInfo}`}),e.jsx(Tt,{children:a&&o?`${l||d.skillTooltip.passive} ${d.skillTooltip.skillDescription}`:`[${ve[r]}] ${t.name||d.skillTooltip.skill} ${d.skillTooltip.skillDescription}`})]}),e.jsx(Vt,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4 flex flex-col gap-3",children:y()})})]})});if(V)return e.jsxs(e.Fragment,{children:[W,L]});const R=e.jsxs("div",{className:"space-y-3",children:[y(),e.jsx("div",{className:"pt-1 flex justify-end",children:e.jsx("button",{type:"button",className:"text-[11px] text-primary hover:underline",onClick:A=>{A.preventDefault(),A.stopPropagation(),N(!1),C(!0)},children:d.skillTooltip.viewDetail})})]});return a&&o?e.jsxs(e.Fragment,{children:[e.jsxs(ct,{open:T,children:[e.jsx(dt,{asChild:!0,children:W}),e.jsx(ut,{side:i,align:"center",sideOffset:0,className:"max-w-xs p-3 space-y-2",style:!V&&c?{maxHeight:c}:void 0,onPointerEnter:D,onPointerLeave:O,children:R})]}),L]}):e.jsxs(e.Fragment,{children:[e.jsxs(ct,{open:T,children:[e.jsx(dt,{asChild:!0,children:W}),e.jsx(ut,{side:i,align:"center",sideOffset:0,className:"max-w-sm p-4 space-y-3",style:!V&&c?{maxHeight:c}:void 0,onPointerEnter:D,onPointerLeave:O,children:R})]}),L]})}function Ar({champions:t,version:r,championList:s,onAddChampion:n,onRemoveChampion:a,onReorderChampions:l,vsMode:u}){const{t:o}=se(),{cdragonVersion:x,setCDragonVersion:d}=st(),[h,S]=w.useState(!1),[V,p]=M.useState({}),C=qe(Ne(Ye,{activationConstraint:{distance:8}}),Ne(Je,{coordinateGetter:Ze})),T=c=>{},N=c=>{const{active:v,over:j}=c;if(j&&v.id!==j.id&&l){const P=t.findIndex(_=>_.id===v.id),k=t.findIndex(_=>_.id===j.id);P!==-1&&k!==-1&&l(P,k)}};M.useEffect(()=>{const c=async()=>{try{const v=await Et(t,r);if(p(v),!x)try{let j=null;for(const P of Object.keys(v)){const k=v[P];if(k&&k.length>0&&(j=k[0].cdragonVersion??null,j))break}j&&d(j)}catch(j){z.warn("Failed to extract CDragon version from integrated spell data:",j)}}catch(v){z.warn("Failed to load integrated spell data:",v),p({})}};t.length>0&&c()},[t,r]);const g=M.useMemo(()=>Math.max(...t.map(c=>c.spells?Math.max(...c.spells.map(v=>v.maxrank)):0)),[t]),m=M.useCallback((c,v)=>{const j=V[c];return!j||j.length<=v?null:j[v]},[V]),b=M.useMemo(()=>Array.from({length:g},(c,v)=>{const j=v+1;return{level:j,skills:t.map(P=>P.spells?P.spells.map((k,_)=>{const I=m(P.id,_),D=It(k,j,I);return{skill:k,cooldown:D}}):null)}}),[t,g,m]),i=({champion:c,children:v,className:j})=>{const{setNodeRef:P,transform:k,transition:_,isDragging:I}=we({id:c.id,disabled:!0}),O={transform:k?ye.Transform.toString(k):void 0,transition:I?_:void 0,opacity:I?.5:1};return e.jsx(F,{ref:P,style:O,className:j,children:v})},f=({champion:c,index:v})=>{const{attributes:j,listeners:P,setNodeRef:k,transform:_,transition:I,isDragging:D}=we({id:c.id}),W={transform:_?ye.Transform.toString(_):void 0,transition:D?I:void 0,opacity:D?.5:1};return e.jsx(G,{ref:k,style:W,className:B("text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] select-none",v<t.length-1&&"border-r border-border/30",D&&"z-50"),children:e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 relative",children:[l&&e.jsx("button",{...j,...P,className:"cursor-grab active:cursor-grabbing p-1 opacity-60 hover:opacity-100 transition-opacity -ml-1","aria-label":"Drag to reorder",children:e.jsx(Ie,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:re(r,c.id),alt:c.name,className:"w-8 h-8 rounded-full"}),a&&e.jsx(le,{variant:"ghost",size:"icon",className:B("absolute -top-1 -right-1 h-4 w-4 rounded-full","bg-destructive/90 hover:bg-destructive text-white","hover:scale-110 transition-transform","shadow-md"),onClick:y=>{y.stopPropagation(),a(c.id)},"aria-label":`Remove ${c.name}`,children:e.jsx(Se,{className:"h-2.5 w-2.5"})})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("div",{className:"text-[11px] font-semibold leading-tight text-foreground",children:c.name}),e.jsx("div",{className:"text-[9px] text-muted-foreground leading-tight",children:c.title})]})]})})};return e.jsx(Ue,{delayDuration:0,skipDelayDuration:150,children:e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{sensors:C,collisionDetection:Qe,onDragStart:T,onDragEnd:N,children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto",children:[e.jsx(he,{children:e.jsxs(J,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[80px] min-w-[80px] border-r border-border/30 select-none",style:{left:0},children:o.common.level}),e.jsx(et,{items:t.map(c=>c.id),strategy:tt,children:t.map((c,v)=>e.jsx(f,{champion:c,index:v},c.id))}),n&&e.jsx(G,{className:"text-center p-2 text-xs font-semibold text-foreground w-[220px] lg:w-[240px] min-w-[200px] lg:min-w-[220px] border-l border-border/30 select-none",children:e.jsxs(le,{onClick:()=>S(!0),variant:"outline",className:"w-full flex flex-row items-center justify-center gap-2 p-1.5 h-auto border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Be,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("div",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors whitespace-nowrap",children:"추가"})]})})]})}),e.jsxs(ge,{children:[e.jsxs(J,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(F,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:o.skills.label}),t.map((c,v)=>{var j;return e.jsx(i,{champion:c,className:B("p-2",v<t.length-1&&"border-r border-border/30"),children:e.jsxs("div",{className:"flex justify-center gap-1.5",children:[c.passive&&e.jsx(ue,{isPassive:!0,passiveName:c.passive.name,passiveDescription:c.passive.description,passiveImageFull:c.passive.image.full,skill:{},skillIdx:0,version:r}),(j=c.spells)==null?void 0:j.map((P,k)=>{const _=m(c.id,k);return e.jsx(ue,{skill:P,skillIdx:k,version:r,spellData:_},P.id)})]})},c.id)}),n&&e.jsx(F,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]}),b.map((c,v)=>e.jsxs(J,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(F,{className:B("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",v===b.length-1&&"rounded-bl-lg"),style:{left:0},children:[c.level,o.common.level]}),c.skills.map((j,P)=>{const k=t[P];return e.jsx(i,{champion:k,className:B("p-2",P<t.length-1&&"border-r border-border/30"),children:j?e.jsxs("div",{className:"flex justify-center gap-1.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),j.map((_,I)=>e.jsx("div",{className:"flex flex-col items-center min-w-[32px]",children:e.jsx("span",{className:"text-xs font-semibold",children:_.cooldown!==""?`${_.cooldown}${o.common.seconds}`:"-"})},I))]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})},k.id)}),n&&e.jsx(F,{className:"p-2 text-center border-l border-border/30",children:e.jsx("div",{className:"w-full h-full min-h-[32px]"})})]},c.level))]})]})})}),h&&n&&s&&e.jsx(De,{championList:s,selectedChampions:t,onSelect:c=>{n(c)},onClose:()=>S(!1)})]})})}function $r({champions:t,version:r,vsMode:s}){var S,V;const{t:n}=se(),{cdragonVersion:a,setCDragonVersion:l}=st(),[u,o]=M.useState({});M.useEffect(()=>{const p=async()=>{try{const C=await Et(t,r);if(o(C),!a)try{let T=null;for(const N of Object.keys(C)){const g=C[N];if(g&&g.length>0&&(T=g[0].cdragonVersion??null,T))break}T&&l(T)}catch(T){z.warn("Failed to extract CDragon version from integrated spell data (mobile):",T)}}catch(C){z.warn("Failed to load integrated spell data:",C),o({})}};t.length>0&&p()},[t,r]);const x=M.useMemo(()=>Math.max(...t.map(p=>p.spells?Math.max(...p.spells.map(C=>C.maxrank)):0)),[t]),d=M.useCallback((p,C)=>{const T=u[p];return!T||T.length<=C?null:T[C]},[u]),h=M.useMemo(()=>Array.from({length:x},(p,C)=>{const T=C+1;return{level:T,skills:t.map(N=>N.spells?N.spells.map((g,m)=>{const b=d(N.id,m),i=It(g,T,b);return{skill:g,cooldown:i}}):null)}}),[t,x,d]);if(s&&t.length===2){const p=s.championA,C=s.championB;return e.jsx(Ue,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(he,{children:e.jsxs(J,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-1.5 pl-2 text-[10px] font-semibold text-foreground sticky left-0 bg-card z-20 w-[50px] min-w-[50px] border-r border-border/30 select-none",style:{left:0},children:n.common.level}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] border-r border-border/30 select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:re(r,p.id),alt:p.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:p.name})]})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[40px] min-w-[40px] border-r border-border/30 bg-muted/20 select-none",children:e.jsx("div",{className:"text-[9px] font-bold",children:"VS"})}),e.jsx(G,{className:"text-center p-1.5 text-[10px] font-semibold text-foreground w-[calc((100%-90px)/2)] min-w-[100px] select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("img",{src:re(r,C.id),alt:C.name,className:"w-6 h-6 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-xs font-semibold leading-tight text-center text-foreground",children:C.name})]})})]})}),e.jsxs(ge,{children:[e.jsxs(J,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(F,{className:"p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:n.skills.label}),e.jsx(F,{className:"p-1.5 border-r border-border/30",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[p.passive&&e.jsx(ue,{isPassive:!0,passiveName:p.passive.name,passiveDescription:p.passive.description,passiveImageFull:p.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(S=p.spells)==null?void 0:S.map((T,N)=>{const g=d(p.id,N);return e.jsx(ue,{skill:T,skillIdx:N,version:r,spellData:g,size:"small"},T.id)})]})}),e.jsx(F,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(F,{className:"p-1.5",children:e.jsxs("div",{className:"flex justify-center gap-0.5",children:[C.passive&&e.jsx(ue,{isPassive:!0,passiveName:C.passive.name,passiveDescription:C.passive.description,passiveImageFull:C.passive.image.full,skill:{},skillIdx:0,version:r,size:"small"}),(V=C.spells)==null?void 0:V.map((T,N)=>{const g=d(C.id,N);return e.jsx(ue,{skill:T,skillIdx:N,version:r,spellData:g,size:"small"},T.id)})]})})]}),h.map((T,N)=>{const g=T.skills[0],m=T.skills[1];return e.jsxs(J,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(F,{className:B("p-1.5 pl-2 text-[10px] font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",N===h.length-1&&"rounded-bl-lg"),style:{left:0},children:[T.level,n.common.level]}),e.jsx(F,{className:"p-1.5 border-r border-border/30",children:g?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),g.map((b,i)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:b.cooldown!==""?`${b.cooldown}${n.common.seconds}`:"-"})},i))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),e.jsx(F,{className:"p-1.5 border-r border-border/30 bg-muted/20 select-none"}),e.jsx(F,{className:"p-1.5",children:m?e.jsxs("div",{className:"flex justify-center gap-0.5",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})}),m.map((b,i)=>e.jsx("div",{className:"flex flex-col items-center min-w-[20px]",children:e.jsx("span",{className:"text-[9px] font-semibold",children:b.cooldown!==""?`${b.cooldown}${n.common.seconds}`:"-"})},i))]}):e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"-"})})]},T.level)})]})]})})})})})})}return e.jsx(Ue,{delayDuration:0,skipDelayDuration:150,children:e.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:e.jsx("div",{className:"min-w-full",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"border border-border/30 rounded-lg overflow-hidden",children:e.jsxs(pe,{className:"border-collapse table-fixed w-auto min-w-full",children:[e.jsx(he,{children:e.jsxs(J,{className:"border-b border-border/30 select-none",children:[e.jsx(G,{className:"text-left p-2 pl-3 text-xs font-semibold text-foreground sticky left-0 bg-card z-20 w-[60px] min-w-[60px] border-r border-border/30 select-none",style:{left:0},children:n.common.level}),t.map(p=>e.jsx(G,{className:"text-center p-2 text-xs font-semibold text-foreground w-full select-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("img",{src:re(r,p.id),alt:p.name,className:"w-8 h-8 rounded-full",draggable:"false"}),e.jsx("div",{className:"text-sm font-semibold leading-tight text-center text-foreground",children:p.name})]})},p.id))]})}),e.jsxs(ge,{children:[e.jsxs(J,{className:"border-b-2 border-border/30 bg-muted/30 select-none",children:[e.jsx(F,{className:"p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",style:{left:0},children:n.skills.label}),t.map(p=>{var C;return e.jsx(F,{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[p.passive&&e.jsx(ue,{isPassive:!0,passiveName:p.passive.name,passiveDescription:p.passive.description,passiveImageFull:p.passive.image.full,skill:{},skillIdx:0,version:r}),(C=p.spells)==null?void 0:C.map((T,N)=>{const g=d(p.id,N);return e.jsx(ue,{skill:T,skillIdx:N,version:r,spellData:g},T.id)})]})},p.id)})]}),h.map((p,C)=>e.jsxs(J,{className:"border-b border-border/30 hover:bg-muted/30 transition-colors",children:[e.jsxs(F,{className:B("p-2 pl-3 text-xs font-medium sticky left-0 bg-card z-20 border-r border-border/30 select-none",C===h.length-1&&"rounded-bl-lg"),style:{left:0},children:[p.level,n.common.level]}),p.skills.map((T,N)=>e.jsx(F,{className:"p-2",children:T?e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})}),T.map((g,m)=>e.jsx("div",{className:"flex flex-col items-center min-w-[24px]",children:e.jsx("span",{className:"text-[10px] font-semibold",children:g.cooldown!==""?`${g.cooldown}${n.common.seconds}`:"-"})},m))]}):e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"-"})},t[N].id))]},p.level))]})]})})})})})})}function Lr({champions:t,version:r,activeTab:s,championList:n,onAddChampion:a,onRemoveChampion:l,onReorderChampions:u,vsMode:o}){const x=rt();if(t.length===0)return null;const d=x==="mobile";return e.jsx(wt,{children:e.jsx(yt,{className:"p-0",children:s==="stats"?d?e.jsx(hr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:l,vsMode:o}):e.jsx(pr,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:l,onReorderChampions:u}):d?e.jsx($r,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:l,vsMode:o}):e.jsx(Ar,{champions:t,version:r,championList:n,onAddChampion:a,onRemoveChampion:l,onReorderChampions:u})})})}const Rr=M.memo(Lr),_r=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;function Br({version:t,initialTabs:r,initialSelectedTabId:s,tabsStorageKey:n,selectedTabIdStorageKey:a}){const[l,u]=w.useState([]),o=w.useRef([]),[x,d]=w.useState(null),[h,S]=w.useState(!1),[V,p]=w.useState(null),[C,T]=w.useState(!1);w.useEffect(()=>{o.current=l},[l]),w.useEffect(()=>{if(!(!t||C))try{const c=window.localStorage.getItem(n);let v=null;if(c){const k=JSON.parse(c);Array.isArray(k)&&(v=k)}!v&&r&&r.length>0&&(v=r);const j=window.localStorage.getItem(a);let P=null;j?P=j:s&&(P=s),v&&v.length>0?(u(v),P&&v.some(k=>k.id===P)?d(P):d(v[0].id)):d(null),T(!0)}catch(c){z.error("Failed to load tabs from localStorage:",c),T(!0)}},[t,n,a,C,r,s]),w.useEffect(()=>{!x&&l.length>0&&d(l[0].id)},[l,x]),w.useEffect(()=>{x&&!l.find(c=>c.id===x)&&d(l.length>0?l[0].id:null)},[l,x]);const N=w.useCallback(c=>{u(v=>{const j=v.findIndex(k=>k.id===c),P=v.filter(k=>k.id!==c);return d(k=>{if(k&&k!==c&&P.some(O=>O.id===k))return k;if(P.length===0)return null;const _=j>0?j-1:0;return(P[_]??P[0]).id}),P})},[d]),g=w.useCallback(c=>{u(v=>[...v,c]),d(c.id)},[]),m=w.useCallback((c,v)=>{u(j=>j.map(P=>P.id===c?v(P):P))},[]),b=w.useCallback((c,v)=>{u(j=>{const P=j.findIndex(_=>_.id===c);if(P===-1)return[...j,v];const k=[...j];return k[P]=v,k}),d(v.id)},[]),i=w.useCallback(()=>{u([]),d(null),ce(n),ce(a)},[n,a]),f=w.useCallback(c=>{const{active:v,over:j}=c;j&&v.id!==j.id&&u(P=>{const k=P.findIndex(I=>I.id===v.id),_=P.findIndex(I=>I.id===j.id);return k===-1||_===-1?P:Nt(P,k,_)})},[]);return{tabs:l,setTabs:u,tabsRef:o,selectedTabId:x,setSelectedTabId:d,showVsSelector:h,setShowVsSelector:S,vsSelectorMode:V,setVsSelectorMode:p,removeTab:N,addTab:g,updateTab:m,replaceTab:b,resetTabs:i,handleDragEnd:f,generateTabId:_r}}function Ir({version:t,lang:r,championList:s,tabs:n,initialSelectedChampions:a,storageKey:l}){const[u,o]=w.useState([]),[x,d]=w.useState(!0),[h,S]=w.useState(!1);w.useEffect(()=>{if(!t||!s||h){!h&&(!t||!s)&&setTimeout(()=>{d(!1)},0);return}try{const m=window.localStorage.getItem(l);let b=null;if(m){const i=JSON.parse(m);Array.isArray(i)&&(b=i)}if(!b&&a&&a.length>0&&(b=a),b&&b.length>0){const i=b.map(f=>{const c=s.find(v=>v.id===f.id||v.key===f.key);return c?{...c,isLoading:!1}:null}).filter(f=>f!==null);i.length>0?setTimeout(()=>{o(i),S(!0),i.forEach(f=>{f.id&&(o(c=>c.map(v=>v.id===f.id?{...v,isLoading:!0}:v)),mt(t,r,f.id).then(c=>{o(v=>v.map(j=>j.id===f.id?{...j,fullInfo:c,isLoading:!1}:j))}).catch(c=>{z.error("Failed to load champion info:",c),o(v=>v.map(j=>j.id===f.id?{...j,isLoading:!1}:j))}))})},0):S(!0)}else S(!0);setTimeout(()=>{d(!1)},0)}catch(m){z.error("Failed to load initial selected champions:",m),setTimeout(()=>{d(!1),S(!0)},0)}},[t,r,s,l,h,a]),w.useEffect(()=>{s&&u.length>0&&setTimeout(()=>{o(m=>m.map(b=>{const i=s.find(f=>f.id===b.id||f.key===b.key);return i?{...b,name:i.name,title:i.title}:b}))},0)},[s,u.length]),w.useEffect(()=>{x||setTimeout(()=>{const m=new Set(n.flatMap(b=>b.champions));o(b=>{if(n.length===0)return b.length>0?[]:b;const i=b.filter(f=>m.has(f.id));return i.length!==b.length?i:b})},0)},[n,x]);const V=w.useCallback(m=>{t&&(o(b=>b.map(i=>i.id===m?{...i,isLoading:!0}:i)),mt(t,r,m).then(b=>{o(i=>i.map(f=>f.id===m?{...f,fullInfo:b,isLoading:!1,skinIndex:0}:f))}).catch(b=>{z.error("Failed to load champion info:",b),o(i=>i.map(f=>f.id===m?{...f,isLoading:!1}:f))}))},[t,r]),p=w.useCallback(m=>{o(b=>{if(b.some(c=>c.id===m.id))return b;const f={...m,isLoading:!0,skinIndex:0};return V(m.id),[...b,f]})},[V]),C=w.useCallback(m=>{o(b=>b.filter(i=>i.id!==m))},[]),T=w.useCallback(()=>{o([]),ce(l)},[l]),N=w.useMemo(()=>u.filter(m=>m.fullInfo&&!m.isLoading),[u]),g=w.useMemo(()=>{const m=new Set(n.filter(b=>b.mode==="normal").flatMap(b=>b.champions));return u.filter(b=>m.has(b.id))},[n,u]);return{selectedChampions:u,setSelectedChampions:o,championsWithFullInfo:N,normalTabChampions:g,addChampionToList:p,removeChampion:C,resetChampions:T,loadChampionInfo:V}}function Dr({onAddClick:t}){const{t:r}=se();return e.jsx(wt,{className:"border-dashed",children:e.jsxs(yt,{className:"flex flex-col items-center justify-center py-12 md:py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:e.jsx(Pe,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:r.encyclopedia.emptyState.title}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md text-sm mb-4",children:r.encyclopedia.emptyState.description}),e.jsxs(le,{onClick:t,variant:"outline",className:"flex flex-row items-center justify-center gap-2 border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/30 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/30 flex items-center justify-center group-hover:bg-primary/10 transition-colors",children:e.jsx(Be,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-primary transition-colors",children:r.encyclopedia.emptyState.addButton})]})]})})}const Dt="flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors shrink-0 relative select-none",Ft="bg-primary text-primary-foreground",Mt="bg-muted/50 text-muted-foreground",zt="touch-none cursor-grab active:cursor-grabbing p-0.5 -ml-1 mr-0.5 opacity-60 hover:opacity-100 transition-opacity select-none",Ot="ml-1 p-0.5 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group",Fr="ml-1 p-1 rounded-full hover:bg-muted/50 active:bg-muted transition-colors shrink-0 select-none group";function Mr({tab:t,champion:r,version:s,selectedTabId:n,onSelect:a,onRemove:l,onVsClick:u}){const{t:o}=se(),{attributes:x,listeners:d,setNodeRef:h,transform:S,transition:V,isDragging:p}=we({id:t.id}),C={transform:ye.Transform.toString(S),transition:V,opacity:p?.5:1},T=n===t.id,N=T?Ft:Mt;return e.jsxs("div",{ref:h,style:C,"data-tab-id":t.id,className:B(Dt,N,p&&"z-50"),onClick:g=>{const m=g.target;m.tagName==="BUTTON"||m.closest("button")||a(t.id)},children:[e.jsx("button",{...x,...d,className:zt,"aria-label":"Drag to reorder",children:e.jsx(Ie,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 cursor-pointer select-none",children:[e.jsx("img",{src:re(s,r.id),alt:r.name,className:"w-5 h-5 rounded-full pointer-events-none select-none",draggable:"false"}),e.jsx("span",{className:"pointer-events-none select-none",children:r.name})]}),e.jsx("button",{onClick:g=>{g.preventDefault(),g.stopPropagation(),u(t.id)},className:Fr,"aria-label":`${o.encyclopedia.vs} with ${r.name}`,title:o.encyclopedia.vsStart,type:"button",children:e.jsx(Re,{className:B("h-3 w-3 transition-colors",T?"text-primary-foreground":"text-muted-foreground")})}),e.jsx("button",{onClick:g=>{g.preventDefault(),g.stopPropagation(),l(t.id)},className:Ot,"aria-label":`Remove ${r.name}`,type:"button",children:e.jsx(Se,{className:B("h-3 w-3 transition-colors",T?"text-primary-foreground":"text-muted-foreground")})})]})}function zr({tab:t,championA:r,championB:s,version:n,selectedTabId:a,onSelect:l,onRemove:u,onChangeChampionA:o,onChangeChampionB:x}){const{t:d}=se(),{attributes:h,listeners:S,setNodeRef:V,transform:p,transition:C,isDragging:T}=we({id:t.id}),N={transform:ye.Transform.toString(p),transition:C,opacity:T?.5:1},g=a===t.id,m=g?Ft:Mt;return e.jsxs("div",{ref:V,style:N,"data-tab-id":t.id,className:B(Dt,m,T&&"z-50"),children:[e.jsx("button",{...h,...S,className:zt,"aria-label":"Drag to reorder",children:e.jsx(Ie,{className:"h-3 w-3 pointer-events-none select-none"})}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 select-none",children:[e.jsx("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),o(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:re(n,r.id),alt:r.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})}),e.jsx("button",{onClick:()=>{l(t.id)},className:"text-[10px] font-semibold touch-none select-none",children:d.encyclopedia.vs}),e.jsx("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),x(t.id)},className:"flex items-center touch-none hover:opacity-80 transition-opacity select-none",children:e.jsx("img",{src:re(n,s.id),alt:s.name,className:"w-5 h-5 rounded-full select-none pointer-events-none",draggable:"false"})})]}),e.jsx("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),u(t.id)},className:Ot,"aria-label":"Remove VS tab",children:e.jsx(Se,{className:B("h-3 w-3 transition-colors",g?"text-primary-foreground":"text-muted-foreground")})})]})}function Or({tabs:t,championsWithFullInfo:r,version:s,selectedTabId:n,sensors:a,onDragEnd:l,onSelectTab:u,onRemoveTab:o,onVsClick:x,onChangeChampionA:d,onChangeChampionB:h,onAddClick:S}){const{t:V}=se(),p=w.useRef(null),C=w.useRef(t.length),T=w.useRef(!1),N=w.useRef((g=!0)=>{if(!p.current||!n)return;const m=p.current.querySelector("[data-radix-scroll-area-viewport]");if(!m)return;const b=m.querySelector(`[data-tab-id="${n}"]`);if(b){const i=b.offsetLeft,f=b.offsetWidth,c=m.offsetWidth,v=i-c/2+f/2;g?m.scrollTo({left:Math.max(0,v),behavior:"smooth"}):m.scrollLeft=Math.max(0,v)}});return w.useEffect(()=>{!T.current&&n&&t.length>0&&(T.current=!0,requestAnimationFrame(()=>{requestAnimationFrame(()=>{N.current(!1)})}))},[n,t.length]),w.useEffect(()=>{if(!p.current)return;const g=p.current.querySelector("[data-radix-scroll-area-viewport]");g&&(t.length>C.current&&g.scrollTo({left:g.scrollWidth,behavior:"smooth"}),C.current=t.length)},[t.length]),w.useEffect(()=>{if(T.current&&n){const g=setTimeout(()=>{N.current(!0)},100);return()=>clearTimeout(g)}},[n]),e.jsx("div",{className:"border-b border-border -mx-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground shrink-0 pl-3",children:V.encyclopedia.champion}),e.jsxs(Vt,{ref:p,type:"scroll",className:"flex-1",children:[e.jsx(Xe,{sensors:a,collisionDetection:Qe,onDragEnd:l,children:e.jsx(et,{items:t.map(g=>g.id),strategy:tt,children:e.jsxs("div",{className:"flex items-center gap-2 w-max select-none pr-2",children:[t.map(g=>{if(g.mode==="vs"){const m=r.find(i=>i.id===g.champions[0]),b=r.find(i=>i.id===g.champions[1]);return!m||!b?null:e.jsx(zr,{tab:g,championA:m,championB:b,version:s,selectedTabId:n,onSelect:u,onRemove:o,onChangeChampionA:d,onChangeChampionB:h},g.id)}else{const m=r.find(b=>b.id===g.champions[0]);return m?e.jsx(Mr,{tab:g,champion:m,version:s,selectedTabId:n,onSelect:u,onRemove:o,onVsClick:x},g.id):null}}),e.jsxs(le,{onClick:S,variant:"outline",size:"sm",className:"flex items-center gap-1.5 shrink-0 border-2 border-dashed border-muted-foreground/30 hover:border-primary hover:bg-primary/10 hover:text-primary h-auto py-1.5 px-3 transition-colors",children:[e.jsx(Be,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:V.encyclopedia.add})]})]})})}),e.jsx(sr,{orientation:"horizontal"})]})]})})}function Hr({open:t,vsSelectorMode:r,tabs:s,championList:n,selectedChampions:a,onSelect:l,onClose:u,onOpenChange:o}){const{t:x}=se();if(!t||!r)return null;const d=s.find(S=>S.id===r.tabId);if(!d||r.mode!=="select-second"&&d.mode!=="vs")return null;const h=r.mode==="change-champion-a"?d.champions[1]:d.champions[0];return h?e.jsx(De,{championList:n,selectedChampions:a,onSelect:l,onClose:u,open:t,onOpenChange:o,vsMode:{currentChampionId:h,title:x.encyclopedia.selectOpponent}}):null}const Ae="cooldown_selected_champions",$e="cooldown_tabs",Le="cooldown_selected_tab_id";function Kr(t){return t==="skills"||t==="stats"}function Gr({lang:t,championList:r,version:s,cdragonVersion:n,initialSelectedChampions:a,initialTabs:l,initialSelectedTabId:u}){const[o,x]=Yt(),h=rt()==="mobile",S=w.useMemo(()=>{const E=o.get("tab");return Kr(E)?E:null},[o]),V=()=>S||"skills",[p,C]=w.useState(V),T=w.useRef(S),N=w.useRef(V());w.useEffect(()=>{const E=S||"skills",U=T.current||"skills";E!==U&&E!==p&&(C(E),N.current=E),T.current=S},[S,p]),w.useEffect(()=>{const E=S||"skills",U=N.current;if(p!==U&&E!==p){const Z=new URLSearchParams(o);p==="skills"?Z.delete("tab"):Z.set("tab",p),x(Z,{replace:!0}),T.current=p==="skills"?null:p}N.current=p},[p,S,o,x]);const[g,m]=w.useState(!1),{cdragonVersion:b}=st(),{t:i}=se(),{tabs:f,tabsRef:c,selectedTabId:v,setSelectedTabId:j,showVsSelector:P,setShowVsSelector:k,vsSelectorMode:_,setVsSelectorMode:I,removeTab:D,addTab:O,updateTab:W,replaceTab:y,resetTabs:L,handleDragEnd:R,generateTabId:A}=Br({version:s,initialTabs:l,initialSelectedTabId:u,tabsStorageKey:$e,selectedTabIdStorageKey:Le}),{selectedChampions:$,setSelectedChampions:K,championsWithFullInfo:H,normalTabChampions:q,addChampionToList:ee,removeChampion:ne,resetChampions:oe}=Ir({version:s,lang:t,championList:r,tabs:f,initialSelectedChampions:a,storageKey:Ae}),te=w.useCallback(()=>{try{if($.length>0){const E=$.map(({id:U,key:Z})=>({id:U,key:Z}));ze(Ae,JSON.stringify(E))}else ce(Ae);f.length>0?ze($e,JSON.stringify(f)):ce($e),v?ze(Le,v):ce(Le)}catch(E){z.error("Failed to persist cooldown state to storage:",E)}},[$,f,v]),je=qe(Ne(Ye,{activationConstraint:{distance:12}}),Ne(Je,{coordinateGetter:Ze})),Ce=w.useCallback((E,U)=>{K(Z=>Nt(Z,E,U))},[K]),ie=w.useCallback(E=>{if(new Set($.map(fe=>fe.id)).has(E.id)){const fe=c.current,Y=fe.some(X=>X.mode==="normal"&&X.champions.length===1&&X.champions[0]===E.id),Ee=fe.some(X=>X.mode==="vs"&&X.champions.includes(E.id));if(Y){const X=f.find(Fe=>Fe.mode==="normal"&&Fe.champions.length===1&&Fe.champions[0]===E.id);X&&D(X.id),Ee||ne(E.id);return}if(Ee){const X={mode:"normal",champions:[E.id],id:A()};O(X);return}const at=f.find(X=>X.mode==="normal"&&X.champions.length===1&&X.champions[0]===E.id);at&&D(at.id),ne(E.id);return}ee(E);const Z={mode:"normal",champions:[E.id],id:A()};O(Z)},[$,f,c,ee,ne,O,D,A]),ke=w.useCallback(()=>{oe(),L(),ce(Ae),ce($e),ce(Le)},[oe,L]),Ht=w.useCallback(E=>{if(!_)return;const{mode:U,tabId:Z}=_,fe=f.find(Y=>Y.id===Z);if(fe){if(U==="select-second"){const Y={mode:"vs",champions:[fe.champions[0],E.id],id:A()};y(Z,Y),$.some(Ee=>Ee.id===E.id)||ee(E)}else U==="change-champion-a"?(W(Z,Y=>({...Y,champions:[E.id,Y.champions[1]]})),$.some(Y=>Y.id===E.id)||ee(E)):U==="change-champion-b"&&(W(Z,Y=>({...Y,champions:[Y.champions[0],E.id]})),$.some(Y=>Y.id===E.id)||ee(E));k(!1),I(null)}},[_,f,$,ee,W,y,A]),ae=w.useMemo(()=>v&&f.find(E=>E.id===v)||null,[v,f]),de=w.useMemo(()=>ae?ae.champions.map(E=>{var U;return(U=H.find(Z=>Z.id===E))==null?void 0:U.fullInfo}).filter(E=>E!==void 0):[],[ae,H]),nt=w.useMemo(()=>!h||ae&&ae.mode==="vs"?null:ae&&ae.mode==="normal"&&de.length>0?de[0]:null,[h,ae,de]),Kt=w.useCallback(E=>{f.forEach(U=>{U.champions.includes(E)&&D(U.id)}),ne(E)},[f,ne,D]),Gt=w.useCallback(E=>{I({mode:"select-second",tabId:E}),k(!0)},[]),Ut=w.useCallback(E=>{I({mode:"change-champion-a",tabId:E,championIndex:0}),k(!0)},[]),Wt=w.useCallback(E=>{I({mode:"change-champion-b",tabId:E,championIndex:1}),k(!0)},[]);return e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6 lg:px-8 pb-4 md:pb-5",children:[g&&e.jsx(De,{championList:r,selectedChampions:q,onSelect:ie,onClose:()=>{m(!1),te()},open:g,onOpenChange:E=>{m(E),E||te()}}),e.jsx(Hr,{open:P,vsSelectorMode:_,tabs:f,championList:r,selectedChampions:$,onSelect:Ht,onClose:()=>{k(!1),I(null),te()},onOpenChange:E=>{k(E),E||(I(null),te())}}),e.jsx("div",{className:"mt-3 md:mt-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-border overflow-x-auto -mx-4 md:mx-0 px-4 md:px-0",children:[e.jsx(Xt,{value:p,onValueChange:E=>C(E),className:"flex-1",children:e.jsxs(Qt,{className:"inline-flex h-auto items-center justify-start gap-2 bg-transparent p-0 border-0",children:[e.jsx(lt,{value:"skills",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:i.encyclopedia.tabs.skills}),e.jsx(lt,{value:"stats",className:"px-4 py-2 text-sm font-medium transition-colors border-b-2 border-transparent text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent rounded-none shadow-none",children:i.encyclopedia.tabs.stats})]})}),e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:e.jsxs(le,{variant:"ghost",size:"sm",onClick:ke,className:"flex items-center gap-1.5 shrink-0 text-muted-foreground hover:text-primary hover:bg-muted/30 border-0",children:[e.jsx(ar,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[10px]",children:i.encyclopedia.reset})]})})]})}),$.length>0&&H.length>0&&e.jsxs("div",{className:"mt-4 md:mt-6 space-y-4 md:space-y-6",children:[h&&f.length>0&&e.jsx(Or,{tabs:f,championsWithFullInfo:H,version:s,selectedTabId:v,sensors:je,onDragEnd:R,onSelectTab:j,onRemoveTab:D,onVsClick:Gt,onChangeChampionA:Ut,onChangeChampionB:Wt,onAddClick:()=>m(!0)}),e.jsx(Rr,{champions:h&&ae&&ae.mode==="vs"&&de.length===2?de:h&&nt?[nt]:H.map(E=>E.fullInfo),version:s,activeTab:p==="skills"?"skills":"stats",championList:r,onAddChampion:h?void 0:ie,onRemoveChampion:Kt,onReorderChampions:h?void 0:Ce,vsMode:h&&ae&&ae.mode==="vs"&&de.length===2?{championA:de[0],championB:de[1]}:void 0})]}),$.length===0&&e.jsx("div",{className:"mt-4",children:e.jsx(Dr,{onAddClick:()=>m(!0)})})]})}function Yr(t){return e.jsx(lr,{initialDDragonVersion:t.version,initialCDragonVersion:t.cdragonVersion,children:e.jsx(Gr,{...t})})}export{Yr as default};
